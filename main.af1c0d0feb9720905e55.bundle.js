webpackJsonp([1],{"+Ceu":function(t,e,n){"use strict";t.exports={write:function(t){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(t instanceof FormData)return t;if(function(t){return t&&1===t.nodeType&&"FORM"===t.tagName}(t))return new FormData(t);if("object"==typeof t&&null!==t)return function(t){var e,n=new FormData;for(var r in t)t.hasOwnProperty(r)&&((e=t[r])instanceof File?n.append(r,e,e.name):e instanceof Blob?n.append(r,e):n.append(r,String(e)));return n}(t);throw new Error("Unable to create FormData from object "+t)}}},"/Aon":function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},0:function(t,e,n){t.exports=n("cDNt")},"1WNV":function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&f())}function f(){if(!c){var t=a(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"2kLc":function(t,e,n){"use strict";var r=n("AP4T"),i=n("6Xbx"),o=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return Object(i.b)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.value,n=t.subscriber;t.done?n.complete():(n.next(e),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(r.a),s=function(t){function e(e){t.call(this),this.scheduler=e}return Object(i.b)(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(r.a);function a(t){return t&&"function"==typeof t.schedule}var u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(i.b)(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];a(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o(t[0],r):new s(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e[n]),r.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(r.a),l=n("xIGM"),c=n("NGRF"),h=function(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&r.prototype[s]===r.prototype.entries)return s}return"@@iterator"}(l.a),p=n("E9/g"),f=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return Object(i.b)(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(p.a),d=n("mz3w"),g=function(t){function e(){t.apply(this,arguments)}return Object(i.b)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(p.a),y=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new m(t,this.project,this.resultSelector,this.concurrent))},t}(),m=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(i.b)(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(function(t,e,n,i){var o,s=new f(t,n,i);if(s.closed)return null;if(e instanceof r.a)return e._isScalar?(s.next(e.value),s.complete(),null):(s.syncErrorThrowable=!0,e.subscribe(s));if((o=e)&&"number"==typeof o.length){for(var a=0,u=e.length;a<u&&!s.closed;a++)s.next(e[a]);s.closed||s.complete()}else{if(e&&"function"!=typeof e.subscribe&&"function"==typeof e.then)return e.then(function(t){s.closed||(s.next(t),s.complete())},function(t){return s.error(t)}).then(null,function(t){l.a.setTimeout(function(){throw t})}),s;if(e&&"function"==typeof e[h])for(var p=e[h]();;){var g=p.next();if(g.done){s.complete();break}if(s.next(g.value),s.closed)break}else if(e&&"function"==typeof e[d.a]){var y=e[d.a]();if("function"==typeof y.subscribe)return y.subscribe(new f(t,n,i));s.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var m=Object(c.a)(e)?"an invalid object":"'"+e+"'";s.error(new TypeError("You provided "+m+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(g);function _(t){return t}e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return a(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof r.a?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof e&&(n=e,e=null),r.lift(new y(t,e,n))}}(_,null,t)}(n)(new u(t,i))}},"3Q9K":function(t,e,n){(function(e,n){t.exports=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,s=void 0,a=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(s?s(g):x())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(g,1)}}var d=new Array(1e3);function g(){for(var t=0;t<i;t+=2)(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0;i=0}var y,m,_,v,x=void 0;function b(t,e){var n=this,r=new this.constructor(C);void 0===r[E]&&j(r);var i=n._state;if(i){var o=arguments[i-1];a(function(){return z(i,r,o,n._result)})}else D(n,r,t,e);return r}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(C);return L(e,t),e}h?x=function(){return e.nextTick(g)}:c?(m=0,_=new c(g),v=document.createTextNode(""),_.observe(v,{characterData:!0}),x=function(){v.data=m=++m%2}):p?((y=new MessageChannel).port1.onmessage=g,x=function(){return y.port2.postMessage(0)}):x=void 0===u?function(){try{var t=Function("return this")().require("vertx");return"undefined"!=typeof(o=t.runOnLoop||t.runOnContext)?function(){o(g)}:f()}catch(t){return f()}}():f();var E=Math.random().toString(36).substring(2);function C(){}var I=void 0,S=1,T=2,M={error:null};function A(t){try{return t.then}catch(t){return M.error=t,M}}function P(e,n,r){n.constructor===e.constructor&&r===b&&n.constructor.resolve===w?function(t,e){e._state===S?R(t,e._result):e._state===T?O(t,e._result):D(e,void 0,function(e){return L(t,e)},function(e){return O(t,e)})}(e,n):r===M?(O(e,M.error),M.error=null):void 0===r?R(e,n):t(r)?function(t,e,n){a(function(t){var r=!1,i=function(n,i,o,s){try{n.call(i,function(n){r||(r=!0,e!==n?L(t,n):R(t,n))},function(e){r||(r=!0,O(t,e))})}catch(t){return t}}(n,e);!r&&i&&(r=!0,O(t,i))},t)}(e,n,r):R(e,n)}function L(t,e){var n,r;t===e?O(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?R(t,e):P(t,e,A(e)))}function N(t){t._onerror&&t._onerror(t._result),k(t)}function R(t,e){t._state===I&&(t._result=e,t._state=S,0!==t._subscribers.length&&a(k,t))}function O(t,e){t._state===I&&(t._state=T,t._result=e,a(N,t))}function D(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+S]=n,i[o+T]=r,0===o&&t._state&&a(k,t)}function k(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)i=e[s+n],(r=e[s])?z(n,r,i,o):i(o);t._subscribers.length=0}}function z(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,l=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return M.error=t,M}}(r,i))===M?(l=!0,a=s.error,s.error=null):u=!0,n===s)return void O(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;n._state!==I||(o&&u?L(n,s):l?O(n,a):e===S?R(n,s):e===T&&O(n,s))}var F=0;function j(t){t[E]=F++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(C),this.promise[E]||j(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&R(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===w){var i=A(t);if(i===b&&t._state!==I)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===V){var o=new n(C);P(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===I&&(this._remaining--,t===T?O(r,n):this._result[e]=n),0===this._remaining&&R(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;D(t,void 0,function(t){return n._settledAt(S,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),V=function(){function t(e){this[E]=F++,this._result=this._state=void 0,this._subscribers=[],C!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){L(t,e)},function(e){O(t,e)})}catch(e){O(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},t}();return V.prototype.then=b,V.all=function(t){return new B(this,t).promise},V.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},V.resolve=w,V.reject=function(t){var e=new this(C);return O(e,t),e},V._setScheduler=function(t){s=t},V._setAsap=function(t){a=t},V._asap=a,V.polyfill=function(){var t=void 0;if("undefined"!=typeof n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=V},V.Promise=V,V}()}).call(e,n("1WNV"),n("fRUx"))},"3v+G":function(t,e,n){(function(t,r){var i;!function(r){var o,s=2147483647,a=36,u=1,l=26,c=38,h=700,p=72,f=128,d="-",g=/^xn--/,y=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=a-u,x=Math.floor,b=String.fromCharCode;function w(t){throw new RangeError(_[t])}function E(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function C(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+E((t=t.replace(m,".")).split("."),e).join(".")}function I(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function S(t){return E(t,function(t){var e="";return t>65535&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+b(t)}).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function M(t,e,n){var r=0;for(t=n?x(t/h):t>>1,t+=x(t/e);t>v*l>>1;r+=a)t=x(t/v);return x(r+(v+1)*t/(t+c))}function A(t){var e,n,r,i,o,c,h,g,y,m,_,v=[],b=t.length,E=0,C=f,I=p;for((n=t.lastIndexOf(d))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&w("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=E,c=1,h=a;i>=b&&w("invalid-input"),((g=(_=t.charCodeAt(i++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:a)>=a||g>x((s-E)/c))&&w("overflow"),E+=g*c,!(g<(y=h<=I?u:h>=I+l?l:h-I));h+=a)c>x(s/(m=a-y))&&w("overflow"),c*=m;I=M(E-o,e=v.length+1,0==o),x(E/e)>s-C&&w("overflow"),C+=x(E/e),E%=e,v.splice(E++,0,C)}return S(v)}function P(t){var e,n,r,i,o,c,h,g,y,m,_,v,E,C,S,A=[];for(v=(t=I(t)).length,e=f,n=0,o=p,c=0;c<v;++c)(_=t[c])<128&&A.push(b(_));for(r=i=A.length,i&&A.push(d);r<v;){for(h=s,c=0;c<v;++c)(_=t[c])>=e&&_<h&&(h=_);for(h-e>x((s-n)/(E=r+1))&&w("overflow"),n+=(h-e)*E,e=h,c=0;c<v;++c)if((_=t[c])<e&&++n>s&&w("overflow"),_==e){for(g=n,y=a;!(g<(m=y<=o?u:y>=o+l?l:y-o));y+=a)A.push(b(T(m+(S=g-m)%(C=a-m),0))),g=x(S/C);A.push(b(T(g,0))),o=M(n,E,r==i),n=0,++r}++n,++e}return A.join("")}o={version:"1.4.1",ucs2:{decode:I,encode:S},decode:A,encode:P,toASCII:function(t){return C(t,function(t){return y.test(t)?"xn--"+P(t):t})},toUnicode:function(t){return C(t,function(t){return g.test(t)?A(t.slice(4).toLowerCase()):t})}},void 0===(i=(function(){return o}).call(e,n,e,t))||(t.exports=i)}()}).call(e,n("ZwkM")(t),n("fRUx"))},"653e":function(t,e,n){var r=n("s/ZR")({response:function(t){return{url:t.url,status:t.status&&t.status.code,headers:t.headers,entity:t.entity,error:t.error,callback:t.request&&t.request.callback,nextPage:t.nextPage}}});t.exports=r},"6Dv3":function(t,e,n){"use strict";n("eUNX");var r=n("s/ZR")({success:function(t){var e=t&&t.callback;return"function"==typeof e&&e(null,t.entity,t),t},error:function(t){var e=t&&t.callback;if("function"==typeof e){var n=t.error||t.entity;"object"!=typeof n&&(n=new Error(n)),e(n)}return t}});t.exports=r},"6GMu":function(t,e){t.exports={"country.6646126669086080":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.12862386939497690":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.10299371396720960":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.15589894856372040":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},"6Xbx":function(t,e,n){"use strict";e.b=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"a",function(){return i});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}},"7UKz":function(t,e,n){"use strict";var r=n("3v+G"),i=n("/Aon");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=v(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n("Xgfo");function v(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var v=t=l.join(a);if(v=v.trim(),!n&&1===t.split("#").length){var x=u.exec(v);if(x)return this.path=v,this.href=v,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=s.exec(v);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,v=v.substr(b.length)}if(n||b||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||b&&y[b]||(v=v.substr(2),this.slashes=!0)}if(!y[b]&&(E||b&&!m[b])){for(var C,I,S=-1,T=0;T<p.length;T++)-1!==(M=v.indexOf(p[T]))&&(-1===S||M<S)&&(S=M);for(-1!==(I=-1===S?v.lastIndexOf("@"):v.lastIndexOf("@",S))&&(C=v.slice(0,I),v=v.slice(I+1),this.auth=decodeURIComponent(C)),S=-1,T=0;T<h.length;T++){var M;-1!==(M=v.indexOf(h[T]))&&(-1===S||M<S)&&(S=M)}-1===S&&(S=v.length),this.host=v.slice(0,S),v=v.slice(S),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),L=(T=0,P.length);T<L;T++){var N=P[T];if(N&&!N.match(f)){for(var R="",O=0,D=N.length;O<D;O++)N.charCodeAt(O)>127?R+="x":R+=N[O];if(!R.match(f)){var k=P.slice(0,T),z=P.slice(T+1),F=N.match(d);F&&(k.push(F[1]),z.unshift(F[2])),z.length&&(v="/"+z.join(".")+v),this.hostname=k.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[w])for(T=0,L=c.length;T<L;T++){var j=c[T];if(-1!==v.indexOf(j)){var B=encodeURIComponent(j);B===j&&(B=escape(j)),v=v.split(j).join(B)}}var V=v.indexOf("#");-1!==V&&(this.hash=v.substr(V),v=v.slice(0,V));var q=v.indexOf("?");return-1!==q?(this.search=v.substr(q),this.query=v.substr(q+1),e&&(this.query=_.parse(this.query)),v=v.slice(0,q)):e&&(this.search="",this.query={}),v&&(this.pathname=v),m[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=t[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}return n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=_||g||n.host&&t.pathname,x=v,b=n.pathname&&n.pathname.split("/")||[],w=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),v=v&&(""===d[0]||""===b[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return w&&(n.hostname=n.host=b.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!b.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var E=b.slice(-1)[0],C=(n.host||t.host||b.length>1)&&("."===E||".."===E)||""===E,I=0,S=b.length;S>=0;S--)"."===(E=b[S])?b.splice(S,1):".."===E?(b.splice(S,1),I++):I&&(b.splice(S,1),I--);if(!v&&!x)for(;I--;I)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),C&&"/"!==b.join("/").substr(-1)&&b.push("");var T,M=""===b[0]||b[0]&&"/"===b[0].charAt(0);return w&&(n.hostname=n.host=M?"":b.length?b.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(v=v||n.host&&b.length)&&!M&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},AP4T:function(t,e,n){"use strict";var r=n("xIGM"),i=n("E9/g"),o=n("V7AE"),s=n("grVA"),a=n("mz3w");n.d(e,"a",function(){return u});var u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(r?r.call(a,this.source):a.add(this.source||!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?e=r.a.Rx.config.Promise:r.a.Promise&&(e=r.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i;i=n.subscribe(function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;if(t||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?t=r.a.Rx.config.Promise:r.a.Promise&&(t=r.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},B1iP:function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},B9i0:function(t,e,n){"use strict";var r,i,o;r=n("s/ZR"),i=n("GyQn"),o=n("MN+7"),t.exports=r({init:function(t){return t.params=t.params||{},t.template=t.template||"",t},request:function(t,e){var n,r;return n=t.path||e.template,r=o({},t.params,e.params),t.path=i.expand(n,r),delete t.params,t}})},CRau:function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&I(r),i&&S(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i,s=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(s&&I(s),t){case"Point":i=r(e).geometry;break;case"LineString":i=a(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=h(e).geometry;break;case"MultiLineString":i=c(e).geometry;break;case"MultiPolygon":i=p(e).geometry;break;default:throw new Error(t+" is invalid")}return s&&(i.bbox=s),i}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===i&&0===s&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return o(t,e)}),n)}function a(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return a(t,e)}),n)}function l(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&I(n),r&&S(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function c(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=_o[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=_o[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function m(t,e){return v(y(t,e))}function _(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function v(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function x(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function b(t,e,n){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(y(t,e),n||"kilometers")}function w(t,e,n){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=xo[e||"meters"];if(!r)throw new Error("invalid original units");var i=xo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function C(t){return!!t&&t.constructor===Object}function I(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!E(t))throw new Error("bbox must only contain numbers")})}function S(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function T(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,m=0;m<y;m++){a=(c=!!(l=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<a;_++){var v=0,x=0;if(null!==(s=c?l.geometries[_]:l)){u=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":e(u,p,m,v,x),p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,m,v,x),p++,"MultiPoint"===b&&v++;"LineString"===b&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,m,v,x),p++;"MultiLineString"===b&&v++,"Polygon"===b&&x++}"Polygon"===b&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===b&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,m,v,x),p++;x++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)T(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,n,r){var i=n;return T(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function A(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function P(t,e,n){var r=n;return A(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function L(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function N(t,e,n){var r=n;return L(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function R(t){var e=[];return T(t,function(t){e.push(t)}),e}function O(t,e){var n,r,i,o,s,a,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(l=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(u=!!(a=f?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,l,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,l,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,l,c,h);p++}}function D(t,e,n){var r=n;return O(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function k(t,n){O(t,function(t,r,i,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:s}),r,0)}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:a,coordinates:t},i),r,o)})})}function z(t,e,n){var r=n;return k(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function F(t,e){k(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&M(t,function(o,s,u,l,c,h){var p=a([o,s],t.properties);return e(p,n,r,h,i),i++,s})}})}function j(t,e,n){var r=n,i=!1;return F(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function B(t,e){if(!t)throw new Error("geojson is required");k(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.coordinates;switch(t.geometry.type){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)e(a(i[o],t.properties),n,r,o)}}})}function V(t,e,n){var r=n;return B(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function q(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function U(t){if(!t)throw new Error("obj is required");var e=G(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function G(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return X(e),e;throw new Error("No valid coordinates")}function X(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return X(t[0]);throw new Error("coordinates must only contain numbers")}function Z(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function Y(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function H(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function W(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function K(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var r=Object.keys(Co),i=0;i<r.length;i++){var o=r[i],s=n[o];Io[o]=s=null!=s?s:Co[o]}Io.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&5!==r.cval&&10!==r.cval&&!tt(r)){var s=function(t,e,n){var r,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],p=h.cval,f=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);a.push([n+f[0],e+f[1]]),f=nt(h,o=c[p]),a.push([n+f[0],e+f[1]]),et(h);for(var d=n+u[p],g=e+l[p],y=p;d>=0&&g>=0&&g<s&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(p=h.cval)||15===p)return{path:a,info:"mergeable"};o=c[p],r=u[p],i=l[p],5!==p&&10!==p||(5===p?h.flipped?-1===l[y]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[y]&&(o="bottom",r=0,i=-1):10===p&&(h.flipped?-1===u[y]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===l[y]&&(o="left",r=-1,i=0))),f=nt(h,o),a.push([d+f[0],g+f[1]]),et(h),d+=r,g+=i,y=p}return{path:a,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],l=s.path[s.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var h=s.path.length-2;h>=0;--h)e[c].unshift(s.path[h]);a=!0;break}a||(e[n++]=s.path)}})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var p,f,d,g,y=!1;if(5==(a|=h>=e?1:0)||10===a){var m=(u+l+c+h)/4;5===a&&m<e?(a=10,y=!0):10===a&&m<e&&(a=5,y=!0)}0!==a&&15!==a&&(p=f=d=g=.5,1===a?(d=1-$(e,u,h),f=1-$(e,c,h)):2===a?(f=$(e,h,c),g=1-$(e,l,c)):3===a?(d=1-$(e,u,h),g=1-$(e,l,c)):4===a?(p=$(e,u,l),g=$(e,c,l)):5===a?(p=$(e,u,l),g=$(e,c,l),f=1-$(e,c,h),d=1-$(e,u,h)):6===a?(f=$(e,h,c),p=$(e,u,l)):7===a?(d=1-$(e,u,h),p=$(e,u,l)):8===a?(d=$(e,h,u),p=1-$(e,l,u)):9===a?(f=1-$(e,c,h),p=1-$(e,l,u)):10===a?(p=1-$(e,l,u),g=1-$(e,l,c),f=$(e,h,c),d=$(e,h,u)):11===a?(p=1-$(e,l,u),g=1-$(e,l,c)):12===a?(d=$(e,h,u),g=$(e,c,l)):13===a?(f=1-$(e,c,h),g=$(e,c,l)):14===a?(d=$(e,h,u),f=$(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:y,top:p,right:g,bottom:f,left:d})}}}return i}(t,e));return"function"==typeof Io.successCallback&&Io.successCallback(a),a}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function it(t,e){if(!(this instanceof it))return new it(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){st(t,0,t.children.length,e,t)}function st(t,e,n,r,i){i||(i=dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],at(i,t.leaf?r(o):o);return i}function at(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ut(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function pt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,So(t,o,e,n,i),s.push(e,o,o,n))}function yt(t,e){return t(e={exports:{}},e.exports),e.exports}function mt(t,e){if(!(this instanceof mt))return new mt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function _t(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)jo(t[o],a)||u.push(t[o]);var l=Do(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=To(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=Et(u,r),s.push(r)}var l=To(16);for(a=0;a<s.length;a++)l.insert(wt(s[a]));for(var c=e*e,h=n*n;s.length;){var p=s.shift(),f=p.p,d=p.next.p,g=Ct(f,d);if(!(g<h)){var y=g/c;(u=function(t,e,n,r,i,o,s){for(var a=new zo(null,vt),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?It(c,n,r):function(t,e,n){if(xt(t,n)||xt(e,n))return 0;var r=St(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=St(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=St(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=St(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}(n,r,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,d=It(f,e,n),g=It(f,r,i);if(p.dist<d&&p.dist<g&&bt(n,f,s)&&bt(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}(o,p.prev.p,f,d,p.next.next.p,y,l))&&Math.min(Ct(u,f),Ct(u,d))<=y&&(s.push(p),s.push(Et(u,p)),o.remove(u),l.remove(p),l.insert(wt(p)),l.insert(wt(p.next)))}}p=r;var m=[];do{m.push(p.p),p=p.next}while(p!==r);return m.push(p.p),m}function vt(t,e){return t.dist-e.dist}function xt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function bt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&Bo(t,e,n)>0!=Bo(t,e,r)>0&&Bo(n,r,t)>0!=Bo(n,r,e)>0}(a[u].p,a[u].next.p,t,e))return!1;return!0}function wt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Et(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ct(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function It(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function St(t,e,n,r,i,o,s,a){var u,l,c,h,p=n-t,f=r-e,d=s-i,g=a-o,y=t-i,m=e-o,_=p*p+f*f,v=p*d+f*g,x=d*d+g*g,b=p*y+f*m,w=d*y+g*m,E=_*x-v*v,C=E,I=E;0===E?(l=0,C=1,h=w,I=x):(h=_*w-v*b,(l=v*w-x*b)<0?(l=0,h=w,I=x):l>C&&(l=C,h=w+v,I=x)),h<0?(h=0,-b<0?l=0:-b>_?l=C:(l=-b,C=_)):h>I&&(h=I,-b+v<0?l=0:-b+v>_?l=C:(l=-b+v,C=_));var S=(1-(c=0===h?0:h/I))*i+c*s-((1-(u=0===l?0:l/C))*t+u*n),T=(1-c)*o+c*a-((1-u)*e+u*r);return S*S+T*T}function Tt(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(T(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=Vo(r,n);return i.length>3?o([i]):null}function Mt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=U(t),o=G(e),s=e.bbox;if(s&&0==(s[0]<=i[0]&&s[1]<=i[1]&&s[2]>=i[0]&&s[3]>=i[1]))return!1;"Polygon"===(e.geometry?e.geometry.type:e.type)&&(o=[o]);for(var a=0,u=!1;a<o.length&&!u;a++)if(At(i,o[a][0],r)){for(var l=!1,c=1;c<o[a].length&&!l;)At(i,o[a][c],!r)&&(l=!0),c++;l||(u=!0)}return u}function At(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function Pt(t,e){var n=[];return O(e,function(e){L(t,function(t){Mt(t,e)&&n.push(t)})}),l(n)}function Lt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return l(function(t){if(t.length<3)return[];t.sort(Rt);for(var e,n,r,i=t.length-1,o=t[i].x,s=t[0].x,a=t[i].y,u=a;i--;)t[i].y<a&&(a=t[i].y),t[i].y>u&&(u=t[i].y);var l,c=s-o,h=u-a,p=c>h?c:h,f=.5*(s+o),d=.5*(u+a),g=[new Nt({x:f-20*p,y:d-p,__sentinel:!0},{x:f,y:d+20*p,__sentinel:!0},{x:f+20*p,y:d-p,__sentinel:!0})],y=[],m=[];for(i=t.length;i--;){for(m.length=0,l=g.length;l--;)(c=t[i].x-g[l].x)>0&&c*c>g[l].r?(y.push(g[l]),g.splice(l,1)):c*c+(h=t[i].y-g[l].y)*h>g[l].r||(m.push(g[l].a,g[l].b,g[l].b,g[l].c,g[l].c,g[l].a),g.splice(l,1));for(Ot(m),l=m.length;l;)n=m[--l],e=m[--l],r=t[i],Math.abs(2*((n.x-e.x)*(r.y-n.y)-(n.y-e.y)*(r.x-n.x)))>1e-12&&g.push(new Nt(e,n,r))}for(Array.prototype.push.apply(y,g),i=y.length;i--;)(y[i].a.__sentinel||y[i].b.__sentinel||y[i].c.__sentinel)&&y.splice(i,1);return y}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],s)}))}function Nt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,this.r=(r=this.x-t.x)*r+(i=this.y-t.y)*i}function Rt(t,e){return e.x-t.x}function Ot(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Dt(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=U(t),o=U(e),s=x(o[1]-i[1]),a=x(o[0]-i[0]),u=x(i[1]),l=x(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(l);return g(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function kt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return zt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return zt(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ft(t);default:throw new Error("unknown GeoJSON type")}}function zt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach(function(r){var i=e[r];n[r]="object"==typeof i?null===i?null:i.length?i.map(function(t){return t}):t(i):i}),n):n}(t.properties),e.geometry=Ft(t.geometry),e}function Ft(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Ft(t)}),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e)}function jt(t,e){function n(t,e){e.length&&e.pop();for(var n=u[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(a(n[r],r));t<0&&Go(e,i)}function r(t){return a(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}var a=Uo(t.transform),u=t.arcs;return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=i(e.arcs);break;case"MultiLineString":n=e.arcs.map(i);break;case"Polygon":n=s(e.arcs);break;case"MultiPolygon":n=e.arcs.map(s);break;default:return null}return{type:o,coordinates:n}}(e)}function Bt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Vt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(qt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?qt:Ut)(t)}function qt(t){var e,n=Ut(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ut(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ut)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Gt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Xt(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Zt(t){return t[0].toString()+","+t[1].toString()}function Yt(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=J(t),o=[];switch(i){case"LineString":o=Ht(t);break;case"MultiLineString":case"Polygon":G(t).forEach(function(t){o.push(Ht(t))});break;case"MultiPolygon":G(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Ht(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var s={};G(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox)}function Ht(t){var e=G(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i=[],o=e.length-1;i.push(e[0]);for(var s=1;s<o;s++)(function(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return(r-o)*c-(i-s)*l==0&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=a:a<=r&&r<=o:c>0?s<=i&&i<=u:u<=i&&i<=s)})(e[s-1],r=e[s+1],n=e[s])||i.push(n);return i.push(r),i}function Wt(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Kt(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function Jt(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var s,a=i,u=n+1;u<r;u++){var l=Kt(e[u],e[n],e[r]);l>a&&(s=u,a=l)}a>i&&(s-n>1&&t(e,n,s,i,o),o.push(e[s]),r-s>1&&t(e,s,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,s=t.length;o<s;o++)Wt(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),r)}function Qt(t,e,n){return Jt(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function $t(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=Jt(r,e,n).map(function(t){return[t.x,t.y]});i.length<3||3===i.length&&i[2][0]===i[0][0]&&i[2][1]===i[0][1];)i=Jt(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function te(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(n))throw new Error("resolution must be an number");if(!E(r))throw new Error("sharpness must be an number");for(var i=[],o=new Jo({points:W(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2==0&&i.push([u.x,u.y])}return a(i,t.properties)}function ee(t){I(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,n];return o([[s,[r,n],[r,i],[e,i],s]])}function ne(t){return ee(q(t))}function re(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Dt(t.slice(0,2),[r,n])>=Dt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function ie(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties,a=U(t),u=x(a[0]),l=x(a[1]),c=x(n),h=y(e,o),p=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(c));return r([v(u+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(p))),v(p)],s)}function oe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var s=[],a=0;a<r;a++)s.push(ie(t,e,-360*a/r,n).geometry.coordinates);return s.push(s[0]),o([s],i)}function se(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){return(se(e,t)+180)%360}(t,e);var r=U(t),i=U(e),o=x(r[0]),s=x(i[0]),a=x(r[1]),u=x(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return v(Math.atan2(l,c))}function ae(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=q(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ue(t,e){var n=0,i=0,o=0;return T(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function le(t){var e=[];return"FeatureCollection"===t.type?L(t,function(t){T(t,function(n){e.push(r(n,t.properties))})}):T(t,function(n){e.push(r(n,t.properties))}),l(e)}function ce(t,e,n){n=n||2;var r,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*n:t.length,p=he(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=he(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(s));for(a.sort(fe),i=0;i<a.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&ge(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&ve(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=xe(e,t);pe(n,n.next)}}(a[i],n),n=pe(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return function t(e,n,r,i,o,s,a){if(e){!a&&s&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=de(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(e,i,o,s);for(var u,l,c=e;e.prev!==e.next;)if(u=e.prev,l=e.next,s?function(t,e,n,r){var i=t.prev,o=t,s=t.next;if(ye(i,o,s)>=0)return!1;for(var a=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=de(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),c=de(a,u,e,n,r),h=t.nextZ;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&ge(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&ye(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&ge(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&ye(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}(e,i,o,s):function(t){var e=t.prev,n=t,r=t.next;if(ye(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(ge(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ye(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(e))n.push(u.i/r),n.push(e.i/r),n.push(l.i/r),we(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?t(e=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!me(i,o)&&_e(i,r,r.next,o)&&ve(i,o)&&ve(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),we(r),we(r.next),r=t=o),r=r.next}while(r!==t);return r}(e,n,r),n,r,i,o,s,2):2===a&&function(e,n,r,i,o,s){var a=e;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_e(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&ve(t,e)&&ve(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(a,u)){var l=xe(a,u);return a=pe(a,a.next),l=pe(l,l.next),t(a,n,r,i,o,s),void t(l,n,r,i,o,s)}u=u.next}a=a.next}while(a!==e)}(e,n,r,i,o,s):t(pe(e),n,r,i,o,s,1);break}}}(p,f,n,r,i,l),f}function he(t,e,n,r,i){var o,s;if(i===Ce(t,e,n,r)>0)for(o=e;o<n;o+=r)s=be(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=be(o,t[o],t[o+1],s);return s&&me(s,s.next)&&(we(s),s=s.next),s}function pe(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!me(r,r.next)&&0!==ye(r.prev,r,r.next))r=r.next;else{if(we(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function fe(t,e){return t.x-e.x}function de(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ge(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function ye(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function me(t,e){return t.x===e.x&&t.y===e.y}function _e(t,e,n,r){return!!(me(t,e)&&me(n,r)||me(t,r)&&me(n,e))||ye(t,e,n)>0!=ye(t,e,r)>0&&ye(n,r,t)>0!=ye(n,r,e)>0}function ve(t,e){return ye(t.prev,t,t.next)<0?ye(t,e,t.next)>=0&&ye(t,t.prev,e)>=0:ye(t,e,t.prev)<0||ye(t,t.next,e)<0}function xe(t,e){var n=new Ee(t.i,t.x,t.y),r=new Ee(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function be(t,e,n,r){var i=new Ee(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function we(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ee(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ce(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Ie(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n}(t),n=Qo(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var s=0;s<i.length;s+=3){var a=i.slice(s,s+3);a.push(i[s]),r.push(o([a]))}return r}function Se(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return L(e,function(e,i){var o=Dt(t,e);o<r&&((n=kt(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function Te(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*l/s+c)),Math.min(i,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],p=r,f=i;for(Me(e,r,n),o(e[i],h)>0&&Me(e,r,i);p<f;){for(Me(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[r],h)?Me(e,r,f):Me(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Me(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ae(t,e){if(!(this instanceof Ae))return new Ae(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pe(t,e){Le(t,0,t.children.length,e,t)}function Le(t,e,n,r,i){i||(i=je(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Ne(i,t.leaf?r(o):o);return i}function Ne(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Re(t,e){return t.minX-e.minX}function Oe(t,e){return t.minY-e.minY}function De(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ke(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ze(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Fe(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function je(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Be(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(Te(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function Ve(t){var e=Ae(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ue(t);return Ae.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=qe(t);n.bbox=t,e.push(n)}):L(t,function(t){t.bbox=t.bbox?t.bbox:Ue(t),e.push(t)}),Ae.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}return Ae.prototype.remove.call(this,t)},e.clear=function(){return Ae.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Ae.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Ae.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Ae.prototype.all.call(this)}},e.toJSON=function(){return Ae.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ae.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ue(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function qe(t){var e=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],e]]}}}function Ue(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Ge(t){if(!t)throw new Error("geojson is required");var e=[];return k(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=G(r);break;case"LineString":n=[G(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=a([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),l(e)}function Xe(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=Ze(t,n);return o&&i.push(o),l(i)}var s=Ve();return s.load(Ge(n)),L(Ge(t),function(t){L(s.search(t),function(e){var n=Ze(t,e);if(n){var o=G(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),l(i)}function Ze(t,e){var n=G(t),i=G(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],l=i[0][0],c=i[0][1],h=i[1][0],p=i[1][1],f=(p-c)*(a-o)-(h-l)*(u-s);if(0===f)return null;var d=((h-l)*(s-c)-(p-c)*(o-l))/f,g=((a-o)*(s-c)-(u-s)*(o-l))/f;return d>=0&&d<=1&&g>=0&&g<=1?r([o+d*(a-o),s+d*(u-s)]):null}function Ye(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),s=0;return k(t,function(t){for(var i=G(t),u=0;u<i.length-1;u++){var l=r(i[u]);l.properties.dist=Dt(e,l,n);var c=r(i[u+1]);c.properties.dist=Dt(e,c,n);var h=Dt(l,c,n),p=Math.max(l.properties.dist,c.properties.dist),f=se(l,c),d=ie(e,p,f+90,n),g=ie(e,p,f-90,n),y=Xe(a([d.geometry.coordinates,g.geometry.coordinates]),a([l.geometry.coordinates,c.geometry.coordinates])),m=null;y.features.length>0&&((m=y.features[0]).properties.dist=Dt(e,m,n),m.properties.location=s+Dt(l,m,n)),l.properties.dist<o.properties.dist&&((o=l).properties.index=u,o.properties.location=s),c.properties.dist<o.properties.dist&&((o=c).properties.index=u+1,o.properties.location=s+h),m&&m.properties.dist<o.properties.dist&&((o=m).properties.index=u),s+=h}}),o}function He(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=i?We(U(e),U(t)):We(U(t),U(e)))>180?-(360-r):r}function We(t,e){var n=x(t[1]),r=x(e[1]),i=x(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(v(Math.atan2(i,o))+360)%360}function Ke(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=U(t),o=U(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,b(function(t,e,n){var r=n=void 0===n?mo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+l*l*a*a)*r}(i,o),"meters",r)}function Je(t,e){return $e(t,"mercator",e)}function Qe(t,e){return $e(t,"wgs84",e)}function $e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?tn(t):en(t):(!0!==r&&(t=kt(t)),T(t,function(t){var n="mercator"===e?tn(t):en(t);t[0]=n[0],t[1]=n[1]})),t}function tn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function en(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function nn(t,n,i){if(!C(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):Y(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=a(n):"LineString"===n.type?n=e(n):Y(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return F(n,function(t){var e=function(t,e,n,i){var o=i.mercator,s=!0!==o?Dt(e,t,i):rn(e,t,i),a=_(!0!==o?se(e,t):He(e,t)),u=_(!0!==o?se(e,n):He(e,n)),l=Math.abs(a-u);if(l>90)return s;var c=(u+180)%360,h=_(!0!==o?se(n,t):He(n,t)),p=Math.abs(h-c);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?Dt(t,n,i):rn(t,n,i):!0!==o?s*Math.sin(x(l)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var s=r(n),a=Qe(function(t,e,n){var r=t[0],i=t[1],o=e[0]-r,s=e[1]-i,a=((n[0]-r)*o+(n[1]-i)*s)/(o*o+s*s);return[r+a*o,i+a*s]}(Je([t[0]+o,t[1]]),Je([e[0]+o,e[1]]),Je([n[0]+o,n[1]])));return 0!==o&&(a[0]-=o),Ke(s,a,i)}(e,n,t,i)}(s,t.geometry.coordinates[0],t.geometry.coordinates[1],i);o>e&&(o=e)}),o}function rn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=Je([t[0]+i,t[1]]),s=Je([e[0]+i,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return b(Math.sqrt(u),"meters",r)}function on(t){for(var n=function(t){return"FeatureCollection"!==t.type?l("Feature"!==t.type?[e(t)]:[t]):t}(t),i=ae(n),o=!1,s=0;!o&&s<n.features.length;){var a,u=n.features[s].geometry,c=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var h=!1;for(a=0;!h&&a<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[a][0]&&i.geometry.coordinates[1]===u.coordinates[a][1]&&(o=!0,h=!0),a++}else if("LineString"===u.type)for(a=0;!c&&a<u.coordinates.length-1;)sn(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[a][0],u.coordinates[a][1],u.coordinates[a+1][0],u.coordinates[a+1][1])&&(c=!0,o=!0),a++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){c=!1,a=0;for(var f=u.coordinates[p];!c&&a<f.length-1;)sn(i.geometry.coordinates[0],i.geometry.coordinates[1],f[a][0],f[a][1],f[a+1][0],f[a+1][1])&&(c=!0,o=!0),a++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Mt(i,u)&&(o=!0);s++}if(o)return i;var d=l([]);for(s=0;s<n.features.length;s++)d.features=d.features.concat(le(n.features[s]).features);return r(Se(i,d).geometry.coordinates)}function sn(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function an(t){return D(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return un(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=un(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}function un(t){var e=0;if(t&&t.length>0){e+=Math.abs(ln(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ln(t[n]))}return e}function ln(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(cn(t[o][0])-cn(e[0]))*Math.sin(cn(n[1]));a=a*es*es/2}return a}function cn(t){return t*Math.PI/180}function hn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return j(t,function(t,n){var r=n.geometry.coordinates;return t+Dt(r[0],r[1],e)},0)}function pn(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,u,l,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[h]),a(o);u=se(i[h],i[h-1])-180,l=ie(i[h],s,u,r),o.push(l.geometry.coordinates)}if(c>=n)return(s=n-c)?(u=se(i[h],i[h-1])-180,l=ie(i[h],s,u,r),o.push(l.geometry.coordinates),a(o)):(o.push(i[h]),a(o));if(c>=e&&o.push(i[h]),h===i.length-1)return a(o);c+=Dt(i[h],i[h+1],r)}return a(i[i.length-1])}function fn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!C(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=U(t),o=G(e),s=0;s<o.length-1;s++){var a=!1;if(r&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],l=e[1],c=u-s,h=l-a;return(n[0]-s)*h-(n[1]-a)*c==0&&(r?"start"===r?Math.abs(c)>=Math.abs(h)?c>0?s<i&&i<=u:u<=i&&i<s:h>0?a<o&&o<=l:l<=o&&o<a:"end"===r?Math.abs(c)>=Math.abs(h)?c>0?s<=i&&i<u:u<i&&i<=s:h>0?a<=o&&o<l:l<o&&o<=a:"both"===r?Math.abs(c)>=Math.abs(h)?c>0?s<i&&i<u:u<i&&i<s:h>0?a<o&&o<l:l<o&&o<a:void 0:Math.abs(c)>=Math.abs(h)?c>0?s<=i&&i<=u:u<=i&&i<=s:h>0?a<=o&&o<=l:l<=o&&o<=a)}(o[s],o[s+1],i,a))return!0}return!1}function dn(t,e){var n=J(t),r=J(e),i=W(t),o=W(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(yn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return fn(i,o,{ignoreEndVertices:!0});case"Polygon":return Mt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)yn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!fn(t.coordinates[r],e))return!1;n||(n=fn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Mt(t.coordinates[1],e);if(!i){n=!1;break}i=Mt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!fn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!gn(q(e),q(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!Mt(t.coordinates[r],e))return!1;n||(n=Mt(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=Mt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=q(t);if(!gn(q(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Mt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function gn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function yn(t,e){return t[0]===e[0]&&t[1]===e[1]}function mn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.mask,o=n.properties,s=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],c=t[2],h=t[3],p=e/Dt([a,u],[c,u],n)*(c-a),f=e/Dt([a,u],[a,h],n)*(h-u),d=c-a,g=h-u,y=Math.floor(d/p),m=(g-Math.floor(g/f)*f)/2,_=a+(d-y*p)/2;_<=c;){for(var v=u+m;v<=h;){var x=r([_,v],o);i?dn(x,i)&&s.push(x):s.push(x),v+=f}_+=p}return l(s)}function _n(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return T(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function vn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!vn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function xn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function bn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!bn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function wn(t,e){var n=[],r=Ve();return k(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Cn(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),L(En(o,e),function(t){n.push(t),r.insert(t)})}}else(n=En(t,e).features).forEach(function(t){t.bbox||(t.bbox=re(q(t)))}),r.load(l(n))}),l(n)}function En(t,e){var n=[],r=G(t)[0],i=G(t)[t.geometry.coordinates.length-1];if(In(r,U(e))||In(i,U(e)))return l([t]);var o=Ve(),s=Ge(t);o.load(s);var u=o.search(e);if(!u.features.length)return l([t]);var c=Cn(e,u),h=N(s,function(t,r,i){var o=G(r)[1],s=U(e);return i===c.id?(t.push(s),n.push(a(t)),In(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return h.length>1&&n.push(a(h)),l(n)}function Cn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return L(e,function(e){var i=Ye(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function In(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sn(t,e,n,r,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Tn(n),l=Tn(r),c=t.properties;if(u===l)return a(oe(t,e,i).geometry.coordinates[0],c);for(var h=u,p=u<l?l:l+360,f=h,d=[],g=0;f<p;)d.push(ie(t,e,f,s).geometry.coordinates),f=h+360*++g/o;return f>p&&d.push(ie(t,e,p,s).geometry.coordinates),a(d,c)}function Tn(t){var e=t%360;return e<0&&(e+=360),e}function Mn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=J(t),i=G(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return An(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(An(t,n))}),l(o);default:throw new Error("geom "+r+" not supported")}}function An(t,e){return t.length>1?c(t,e):a(t[0],e)}function Pn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(G(Ln(t,{},r,i)))}),p(o,n)}return Ln(t,n,r,i)}function Ln(t,e,n,r){e=e||t.properties||{};var i=G(t),s=J(t);if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(i=Nn(i)),o([i],e);case"MultiLineString":var u=[],l=0;return i.forEach(function(t){if(n&&(t=Nn(t)),r){var e=function(t){var e=t[1],n=t[3];return Math.abs(t[0]-t[2])*Math.abs(e-n)}(q(a(t)));e>l?(u.unshift(t),l=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function Nn(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]||t.push(e),t}function Rn(t,e,n){var r,i,o,s,a,u=t.length,l=Dn(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],s=a=Dn(o=t[r],e);;){if(!(l|s)){c.push(i),s!==a?(c.push(o),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(o);break}if(l&s)break;l?l=Dn(i=On(i,o,l,e),e):s=Dn(o=On(i,o,s,e),e)}l=a}return c.length&&n.push(c),n}function On(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Dn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function kn(t,e){for(var n=[],r=0;r<t.length;r++){var i=cs.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function zn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Fn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?t===e:function(t,e,n){var r,i;if(jn(t)||jn(e))return!1;if(t.prototype!==e.prototype)return!1;if(zn(t))return!!zn(e)&&Fn(t=hs.call(t),e=hs.call(e),n);if(Bn(t)){if(!Bn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;r>=0;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;r>=0;r--)if(!Fn(t[i=o[r]],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function jn(t){return null==t}function Bn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Vn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=Ve();return s.load(Ge(t)),F(e,function(t){var e=!1;L(s.search(t),function(n){if(!1===e){var o=G(t).sort(),s=G(n).sort();Fn(o,s)?(e=!0,r=r?qn(r,t):t):(0===i?fn(o[0],n)&&fn(o[1],n):Ye(n,o[0]).properties.dist<=i&&Ye(n,o[1]).properties.dist<=i)?(e=!0,r=r?qn(r,t):t):(0===i?fn(s[0],t)&&fn(s[1],t):Ye(t,s[0]).properties.dist<=i&&Ye(t,s[1]).properties.dist<=i)&&(r=r?qn(r,n):n)}}),!1===e&&r&&(o.push(r),r=void 0)}),r&&o.push(r),l(o)}function qn(t,e){var n=G(e),r=G(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Fn(n[0],i)?s.unshift(n[1]):Fn(n[0],o)?s.push(n[1]):Fn(n[1],i)?s.unshift(n[0]):Fn(n[1],o)&&s.push(n[0]),t}function Un(t){var e=t%360;return e<0&&(e+=360),e}function Gn(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var a=b(e,o,"meters"),u=U(t),l=function(t,e,n,r){var i=e/(r=void 0===r?mo:Number(r)),o=t[0]*Math.PI/180,s=x(t[1]),a=x(n),u=i*Math.cos(a),l=s+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(c)>1e-11?u/c:Math.cos(s);return[(180*(o+i*Math.sin(a)/h)/Math.PI+540)%360-180,180*l/Math.PI]}(u,a,n);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,r(l,s)}function Xn(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Zn(a,u,e),n<=0&&r>0?function(t,e,n){return Zn(t,a,i)<0}(e)||(i=a):n>0&&r<=0&&(function(t,e,n){return Zn(t,a,o)>0}(e)||(o=a)),n=r}return[i,o]}function Zn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Yn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=G(t),o=0,s=1;s<i.length;)n=r||i[0],o+=((r=i[s])[0]-n[0])*(r[1]+n[1]),s++;return o>0}function Hn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return O(t,function(t){Hn(t,e)}),t;case"LineString":return Wn(G(t),e),t;case"Polygon":return Kn(G(t),e),t;case"MultiLineString":return G(t).forEach(function(t){Wn(t,e)}),t;case"MultiPolygon":return G(t).forEach(function(t){Kn(t,e)}),t;case"Point":case"MultiPoint":return t}}function Wn(t,e){Yn(t)===e&&t.reverse()}function Kn(t,e){Yn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Yn(t[n])===e&&t[n].reverse()}function Jn(t,e,n,r){r=r||{};for(var i=Object.keys(ps),o=0;o<i.length;o++){var s=i[o],a=r[s];fs[s]=a=null!=a?a:ps[s]}fs.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=p<e?0:p>s?8:4;var d=+(l|=f<e?0:f>s?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(c+h+p+f)/4;g=y>s?2:y<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?g>0?(l=156,g=4):l=152:33===l?g>0?(l=139,g=4):l=137:72===l?g>0?(l=99,g=4):l=98:132===l&&(g>0?(l=39,g=4):l=38)}if(0!=l&&170!=l){var m,_,v,x,b,w,E,C;m=_=v=x=b=w=E=C=.5;var I=[];1===l?(v=1-Qn(e,p,f),C=1-Qn(e,c,f),I.push($s[l])):169===l?(v=Qn(s,f,p),C=Qn(s,f,c),I.push($s[l])):4===l?(w=1-Qn(e,h,p),x=Qn(e,f,p),I.push(Js[l])):166===l?(w=Qn(s,p,h),x=1-Qn(s,p,f),I.push(Js[l])):16===l?(b=Qn(e,p,h),_=Qn(e,c,h),I.push(Ks[l])):154===l?(b=1-Qn(s,h,p),_=1-Qn(s,h,c),I.push(Ks[l])):64===l?(E=Qn(e,f,c),m=1-Qn(e,h,c),I.push(ea[l])):106===l?(E=1-Qn(s,c,f),m=Qn(s,c,h),I.push(ea[l])):168===l?(x=Qn(s,f,p),v=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),I.push(Qs[l]),I.push($s[l])):2===l?(x=1-Qn(e,p,f),v=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),I.push(Qs[l]),I.push($s[l])):162===l?(b=Qn(s,p,h),w=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),I.push(Qs[l]),I.push($s[l])):8===l?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),I.push(Ks[l]),I.push(Js[l])):138===l?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),m=1-Qn(s,h,c),_=1-Qn(e,h,c),I.push(Ks[l]),I.push(Js[l])):32===l?(b=Qn(s,p,h),w=Qn(e,p,h),m=Qn(e,c,h),_=Qn(s,c,h),I.push(Ks[l]),I.push(Js[l])):42===l?(C=1-Qn(s,c,f),E=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h),I.push(ta[l]),I.push(ea[l])):128===l&&(C=Qn(e,f,c),E=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c),I.push(ta[l]),I.push(ea[l])),5===l?(w=1-Qn(e,h,p),C=1-Qn(e,c,f),I.push(Js[l])):165===l?(w=Qn(s,p,h),C=Qn(s,f,c),I.push(Js[l])):20===l?(x=Qn(e,f,p),_=Qn(e,c,h),I.push(Qs[l])):150===l?(x=1-Qn(s,p,f),_=1-Qn(s,h,c),I.push(Qs[l])):80===l?(b=Qn(e,p,h),E=Qn(e,f,c),I.push(Ks[l])):90===l?(b=1-Qn(s,h,p),E=1-Qn(s,c,f),I.push(Ks[l])):65===l?(v=1-Qn(e,p,f),m=1-Qn(e,h,c),I.push($s[l])):105===l?(v=Qn(s,f,p),m=Qn(s,c,h),I.push($s[l])):160===l?(b=Qn(s,p,h),w=Qn(e,p,h),C=Qn(e,f,c),E=Qn(s,f,c),I.push(Ks[l]),I.push(Js[l])):10===l?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),C=1-Qn(s,c,f),E=1-Qn(e,c,f),I.push(Ks[l]),I.push(Js[l])):130===l?(x=1-Qn(e,p,f),v=1-Qn(s,p,f),m=1-Qn(s,h,c),_=1-Qn(e,h,c),I.push(Qs[l]),I.push($s[l])):40===l?(x=Qn(s,f,p),v=Qn(e,f,p),m=Qn(e,c,h),_=Qn(s,c,h),I.push(Qs[l]),I.push($s[l])):101===l?(w=Qn(s,p,h),m=Qn(s,c,h),I.push(Js[l])):69===l?(w=1-Qn(e,h,p),m=1-Qn(e,h,c),I.push(Js[l])):149===l?(C=Qn(s,f,c),_=1-Qn(s,h,c),I.push(ta[l])):21===l?(C=1-Qn(e,c,f),_=Qn(e,c,h),I.push(ta[l])):86===l?(x=1-Qn(s,p,f),E=1-Qn(s,c,f),I.push(Qs[l])):84===l?(x=Qn(e,f,p),E=Qn(e,f,c),I.push(Qs[l])):89===l?(b=1-Qn(s,h,p),v=Qn(s,f,p),I.push($s[l])):81===l?(b=Qn(e,p,h),v=1-Qn(e,p,f),I.push($s[l])):96===l?(b=Qn(s,p,h),w=Qn(e,p,h),E=Qn(e,f,c),m=Qn(s,c,h),I.push(Ks[l]),I.push(Js[l])):74===l?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),E=1-Qn(s,c,f),m=1-Qn(e,h,c),I.push(Ks[l]),I.push(Js[l])):24===l?(b=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),_=Qn(e,c,h),I.push(Ks[l]),I.push($s[l])):146===l?(b=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),_=1-Qn(s,h,c),I.push(Ks[l]),I.push($s[l])):6===l?(w=1-Qn(e,h,p),x=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),I.push(Js[l]),I.push(Qs[l])):164===l?(w=Qn(s,p,h),x=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),I.push(Js[l]),I.push(Qs[l])):129===l?(v=1-Qn(e,p,f),C=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c),I.push($s[l]),I.push(ta[l])):41===l?(v=Qn(s,f,p),C=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h),I.push($s[l]),I.push(ta[l])):66===l?(x=1-Qn(e,p,f),v=1-Qn(s,p,f),E=1-Qn(s,c,f),m=1-Qn(e,h,c),I.push(Qs[l]),I.push($s[l])):104===l?(x=Qn(s,f,p),v=Qn(e,f,p),E=Qn(e,f,c),m=Qn(s,c,h),I.push($s[l]),I.push(na[l])):144===l?(b=Qn(e,p,h),C=Qn(e,f,c),E=Qn(s,f,c),_=1-Qn(s,h,c),I.push(Ks[l]),I.push(ea[l])):26===l?(b=1-Qn(s,h,p),C=1-Qn(s,c,f),E=1-Qn(e,c,f),_=Qn(e,c,h),I.push(Ks[l]),I.push(ea[l])):36===l?(w=Qn(s,p,h),x=Qn(e,f,p),m=Qn(e,c,h),_=Qn(s,c,h),I.push(Js[l]),I.push(Qs[l])):134===l?(w=1-Qn(e,h,p),x=1-Qn(s,p,f),m=1-Qn(s,h,c),_=1-Qn(e,h,c),I.push(Js[l]),I.push(Qs[l])):9===l?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),v=Qn(s,f,p),C=1-Qn(e,c,f),I.push(Ks[l]),I.push(Js[l])):161===l?(b=Qn(s,p,h),w=Qn(e,p,h),v=1-Qn(e,p,f),C=Qn(s,f,c),I.push(Ks[l]),I.push(Js[l])):37===l?(w=Qn(s,p,h),C=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h),I.push(Js[l]),I.push(ta[l])):133===l?(w=1-Qn(e,h,p),C=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c),I.push(Js[l]),I.push(ta[l])):148===l?(x=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),_=1-Qn(s,h,c),I.push(Qs[l]),I.push(ea[l])):22===l?(x=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),_=Qn(e,c,h),I.push(Qs[l]),I.push(ea[l])):82===l?(b=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),E=1-Qn(s,c,f),I.push(Ks[l]),I.push($s[l])):88===l?(b=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),E=Qn(e,f,c),I.push(Ks[l]),I.push($s[l])):73===l?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),v=Qn(s,f,p),m=1-Qn(e,h,c),I.push(Ks[l]),I.push(Js[l])):97===l?(b=Qn(s,p,h),w=Qn(e,p,h),v=1-Qn(e,p,f),m=Qn(s,c,h),I.push(Ks[l]),I.push(Js[l])):145===l?(b=Qn(e,p,h),v=1-Qn(e,p,f),C=Qn(s,f,c),_=1-Qn(s,h,c),I.push(Ks[l]),I.push(ta[l])):25===l?(b=1-Qn(s,h,p),v=Qn(s,f,p),C=1-Qn(e,c,f),_=Qn(e,c,h),I.push(Ks[l]),I.push(ta[l])):70===l?(w=1-Qn(e,h,p),x=1-Qn(s,p,f),E=1-Qn(s,c,f),m=1-Qn(e,h,c),I.push(Js[l]),I.push(Qs[l])):100===l?(w=Qn(s,p,h),x=Qn(e,f,p),E=Qn(e,f,c),m=Qn(s,c,h),I.push(Js[l]),I.push(Qs[l])):34===l?(0===g?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)):(b=Qn(s,p,h),w=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)),I.push(Ks[l]),I.push(Js[l]),I.push(ta[l]),I.push(ea[l])):35===l?(4===g?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)):(b=Qn(s,p,h),w=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)),I.push(Ks[l]),I.push(Js[l]),I.push($s[l]),I.push(ea[l])):136===l?(0===g?(b=Qn(s,p,h),w=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)):(b=1-Qn(e,h,p),w=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)),I.push(Ks[l]),I.push(Js[l]),I.push(ta[l]),I.push(ea[l])):153===l?(0===g?(b=Qn(e,p,h),v=1-Qn(e,p,f),C=1-Qn(e,c,f),_=Qn(e,c,h)):(b=1-Qn(s,h,p),v=Qn(s,f,p),C=Qn(s,f,c),_=1-Qn(s,h,c)),I.push(Ks[l]),I.push($s[l])):102===l?(0===g?(w=1-Qn(e,h,p),x=Qn(e,f,p),E=Qn(e,f,c),m=1-Qn(e,h,c)):(w=Qn(s,p,h),x=1-Qn(s,p,f),E=1-Qn(s,c,f),m=Qn(s,c,h)),I.push(Js[l]),I.push(ea[l])):155===l?(4===g?(b=Qn(e,p,h),v=1-Qn(e,p,f),C=1-Qn(e,c,f),_=Qn(e,c,h)):(b=1-Qn(s,h,p),v=Qn(s,f,p),C=Qn(s,f,c),_=1-Qn(s,h,c)),I.push(Ks[l]),I.push(ta[l])):103===l?(4===g?(w=1-Qn(e,h,p),x=Qn(e,f,p),E=Qn(e,f,c),m=1-Qn(e,h,c)):(w=Qn(s,p,h),x=1-Qn(s,p,f),E=1-Qn(s,c,f),m=Qn(s,c,h)),I.push(Js[l]),I.push(Qs[l])):152===l?(0===g?(b=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),_=Qn(e,c,h)):(b=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),_=1-Qn(s,h,c)),I.push(Ks[l]),I.push(Qs[l]),I.push($s[l])):156===l?(4===g?(b=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),_=Qn(e,c,h)):(b=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),_=1-Qn(s,h,c)),I.push(Ks[l]),I.push($s[l]),I.push(ea[l])):137===l?(0===g?(b=Qn(s,p,h),w=Qn(e,p,h),v=1-Qn(e,p,f),C=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)):(b=1-Qn(e,h,p),w=1-Qn(s,h,p),v=Qn(s,f,p),C=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)),I.push(Ks[l]),I.push(Js[l]),I.push($s[l])):139===l?(4===g?(b=Qn(s,p,h),w=Qn(e,p,h),v=1-Qn(e,p,f),C=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)):(b=1-Qn(e,h,p),w=1-Qn(s,h,p),v=Qn(s,f,p),C=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)),I.push(Ks[l]),I.push(Js[l]),I.push(ta[l])):98===l?(0===g?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),E=Qn(e,f,c),m=1-Qn(e,h,c)):(b=Qn(s,p,h),w=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),E=1-Qn(s,c,f),m=Qn(s,c,h)),I.push(Ks[l]),I.push(Js[l]),I.push(ea[l])):99===l?(4===g?(b=1-Qn(e,h,p),w=1-Qn(s,h,p),x=Qn(s,f,p),v=Qn(e,f,p),E=Qn(e,f,c),m=1-Qn(e,h,c)):(b=Qn(s,p,h),w=Qn(e,p,h),x=1-Qn(e,p,f),v=1-Qn(s,p,f),E=1-Qn(s,c,f),m=Qn(s,c,h)),I.push(Ks[l]),I.push(Js[l]),I.push($s[l])):38===l?(0===g?(w=1-Qn(e,h,p),x=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)):(w=Qn(s,p,h),x=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)),I.push(Js[l]),I.push(ta[l]),I.push(ea[l])):39===l?(4===g?(w=1-Qn(e,h,p),x=Qn(e,f,p),C=Qn(e,f,c),E=Qn(s,f,c),m=1-Qn(s,h,c),_=1-Qn(e,h,c)):(w=Qn(s,p,h),x=1-Qn(s,p,f),C=1-Qn(s,c,f),E=1-Qn(e,c,f),m=Qn(e,c,h),_=Qn(s,c,h)),I.push(Js[l]),I.push(Qs[l]),I.push(ea[l])):85===l&&(b=1,w=0,x=1,v=0,C=0,E=1,m=0,_=1),(m<0||m>1||_<0||_>1||b<0||b>1||x<0||x>1||C<0||C>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+p+","+f+" "+g+" "+m+" "+_+" "+b+" "+w+" "+x+" "+v+" "+C+" "+E),o.cells[a][u]={cval:l,cval_real:d,flipped:g,topleft:m,topright:_,righttop:b,rightbottom:w,bottomright:x,bottomleft:v,leftbottom:C,lefttop:E,edges:I}}}}}return o}(t,e,n);return fs.polygons?(fs.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return l.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=ia[t.cval](t);"object"==typeof o&&$n(o)?"object"==typeof o[0]&&$n(o[0])?"object"==typeof o[0][0]&&$n(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}()):(fs.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=function(t){if(t.edges.length>0){var e=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return e&gs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return e&ys?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return e&ys?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return e&ms?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return e&gs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return e&ys?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return e&ys?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return e&ms?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return e&ys?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return e&ms?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return e&ms?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return e&ds?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return e&ys?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return e&ms?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return e&ms?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return e&ds?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return e&ys?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return e&ds?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return e&ms?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return e&ds?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return e&ds?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return e&gs?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return e&ds?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return e&gs?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][s]),u=null,l=s,c=o;null!==a&&i.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=function(t,e,n,r){var i,o,s,a,u,l=t.cval;switch(e){case-1:switch(r){case 0:i=Js[l],s=Ts[l],a=Ms[l],u=As[l];break;default:i=Ks[l],s=Cs[l],a=Is[l],u=Ss[l]}break;case 1:switch(r){case 0:i=ta[l],s=js[l],a=Bs[l],u=Vs[l];break;default:i=ea[l],s=ks[l],a=zs[l],u=Fs[l]}break;default:switch(n){case-1:switch(r){case 0:i=na[l],s=_s[l],a=vs[l],u=xs[l];break;default:i=ra[l],s=bs[l],a=ws[l],u=Es[l]}break;case 1:switch(r){case 0:i=$s[l],s=Ps[l],a=Ls[l],u=Ns[l];break;default:i=Qs[l],s=Rs[l],a=Os[l],u=Ds[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&gs?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:l&ys?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:l&ys?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:l&ms?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&gs?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:l&ys?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:l&ys?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:l&ms?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:l&ys?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:l&ms?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:l&ms?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&ds?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:l&ys?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:l&ms?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:l&ms?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&ds?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:l&ys?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&ds?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:l&ms?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&ds?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&ds?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&gs?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&ds?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&gs?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}(t.cells[c][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=n||l<0||l>=r||void 0===t.cells[c][l]){var h=function(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(a=(s=t.cells[l-=i][u-=r]).cval_real,-1===i)if(0===o)if(a&ms)c.push([u,l]),r=-1,i=0,o=0;else{if(!(a&ys)){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+1,l]),r=1,i=0,o=0}else{if(!(a&ms)){if(a&ys){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),r=0,i=1,o=0,h=!0;break}c.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&gs)){if(a&ds){c.push([u+s.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),r=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}else c.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&ds)){if(a&ms){c.push([u,l+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}else{if(!(a&ds)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&ys)){c.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(a&ys)){if(a&gs){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(a&ms)){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&ds)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(a&gs)){c.push([u+s.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(a&ys)){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(a&ds)){c.push([u,l+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof fs.successCallback&&fs.successCallback(u),u}function Qn(t,e,n){return(t-e)/(n-e)}function $n(t){return t.constructor.toString().indexOf("Array")>-1}function tr(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=ue(t)),!1!==i&&void 0!==i||(t=kt(t)),T(t,function(t){var n=He(r,t)+e,i=Ke(r,t),o=G(Gn(r,i,n));t[0]=o[0],t[1]=o[1]}),t)}function er(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=kt(t)),"FeatureCollection"!==t.type||o?nr(t,e,r):(L(t,function(n,i){t.features[i]=nr(n,e,r)}),t)}function nr(t,e,n){var i="Point"===J(t);return n=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return U(e);var n=t.bbox?t.bbox:q(t),i=n[0],o=n[1],s=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,a]);case"ne":case"northeast":case"eastnorth":case"topright":return r([s,a]);case"center":return ae(t);case void 0:case null:case"centroid":return ue(t);default:throw new Error("invalid origin")}}(t,n),1===e||i?t:(T(t,function(t){var r=Ke(n,t),i=He(n,t),o=G(Gn(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function rr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function ir(t,e){return t[0]*e[1]-e[0]*t[1]}function or(t,e,n){var r=[],i=m(e,n),o=G(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]));return[[t[0]+n*(e[1]-t[1])/r,t[1]+n*(t[0]-e[0])/r],[e[0]+n*(e[1]-t[1])/r,e[1]+n*(t[0]-e[0])/r]]}(t,o[e+1],i);if(r.push(n),e>0){var a=r[e-1],u=function(t,e){return!function(t,e){return 0===ir(rr(t),rr(e))}(t,e)&&function(t,e){var n=t[0],r=rr(t),i=e[0],o=rr(e),s=ir(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*r[0],t*r[1]]}(ir([i[0]-n[0],i[1]-n[1]],o)/s))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}}),a(s,t.properties)}function sr(t,e,n){return Math.sign((e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))}function ar(t,e){return e.geometry.coordinates[0].every(function(e){return Mt(r(e),t)})}function ur(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=e[0]-t[0],i=e[1]-t[1];return(n[0]-t[0])*i-(n[1]-t[1])*r==0&&(Math.abs(r)>=Math.abs(i)?r>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:i>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function lr(t,e){return Xe(e,Mn(t)).features.length>0}function cr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function hr(t,e){return t[0]===e[0]&&t[1]===e[1]}function pr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),gr(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function fr(t,e){return Xe(t,Mn(e)).features.length>0}function dr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,s=0;s<o&&n&&i;)Mt(r(t.coordinates[0][s]),e)?n=!0:i=!0,s++;return i&&i}function gr(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];return 0==(n[0]-t[0])*o-(n[1]-t[1])*i&&(r?Math.abs(i)>=Math.abs(o)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:o>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(i)>=Math.abs(o)?i>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:o>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function yr(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function mr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function _r(t,e){return pa(t,e,{strict:!0})}function vr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=J(t);if(n!==J(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new da({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=R(t),o=R(e);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":F(t,function(t){F(e,function(e){Vn(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":F(t,function(t){F(e,function(e){Xe(t,e).features.length&&r++})})}return r>0}function xr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function br(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function wr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Er(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Cr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Cr(t,e,n){this.x=t,this.y=e,this.weight=n}function Ir(t){this.content=[],this.scoreFunction=t}function Sr(t){return t[0]}function Tr(t){return t[1]}function Mr(){this._=null}function Ar(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Lr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Nr(t){for(;t.L;)t=t.L;return t}function Rr(t,e,n,r){var i=[null,null],o=Pa.push(i)-1;return i.left=t,i.right=e,n&&Dr(i,t,e,n),r&&Dr(i,e,t,r),Ma[t.index].halfedges.push(o),Ma[e.index].halfedges.push(o),i}function Or(t,e,n){var r=[e,n];return r.left=t,r}function Dr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function kr(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,p=a[0]-u,f=a[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*p,l+c*f]),h<1&&(t[1]=[u+h*p,l+h*f]),!0)}}}}}function zr(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],p=l[1],f=c[0],d=c[1],g=(h+f)/2;if(d===p){if(g<e||g>=r)return;if(h>f){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=(p+d)/2-(s=(h-f)/(d-p))*g,s<-1||s>1)if(h>f){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Fr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function jr(t,e){return e[+(e.left!==t.site)]}function Br(t,e){return e[+(e.left===t.site)]}function Vr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,c=o[0]-s,h=o[1]-a,p=2*(u*h-l*c);if(!(p>=-Oa)){var f=u*u+l*l,d=c*c+h*h,g=(h*f-l*d)/p,y=(u*d-c*f)/p,m=La.pop()||new function(){Ar(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=i,m.x=g+s,m.y=(m.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=m;for(var _=null,v=Aa._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){_=v.P;break}v=v.L}else{if(!v.R){_=v;break}v=v.R}Aa.insert(_,m),_||(Sa=m)}}}}function qr(t){var e=t.circle;e&&(e.P||(Sa=e.N),Aa.remove(e),La.push(e),Ar(e),t.circle=null)}function Ur(t){var e=Na.pop()||new function(){Ar(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Gr(t){qr(t),Ta.remove(t),Na.push(t),Ar(t)}function Xr(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Gr(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Ra&&Math.abs(r-u.circle.cy)<Ra;)o=u.P,a.unshift(u),Gr(u),u=o;a.unshift(u),qr(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Ra&&Math.abs(r-l.circle.cy)<Ra;)s=l.N,a.push(l),Gr(l),l=s;a.push(l),qr(l);var c,h=a.length;for(c=1;c<h;++c)Dr((l=a[c]).edge,(u=a[c-1]).site,l.site,i);(l=a[h-1]).edge=Rr((u=a[0]).site,l.site,null,i),Vr(u),Vr(l)}function Zr(t){for(var e,n,r,i,o=t[0],s=t[1],a=Ta._;a;)if((r=Yr(a,s)-o)>Ra)a=a.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return Yr(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(a,s))>Ra)){r>-Ra?(e=a.P,n=a):i>-Ra?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ma[t.index]={site:t,halfedges:[]}}(t);var u=Ur(t);if(Ta.insert(e,u),e||n){if(e===n)return qr(e),n=Ur(e.site),Ta.insert(u,n),u.edge=n.edge=Rr(e.site,u.site),Vr(e),void Vr(n);if(n){qr(e),qr(n);var l=e.site,c=l[0],h=l[1],p=t[0]-c,f=t[1]-h,d=n.site,g=d[0]-c,y=d[1]-h,m=2*(p*y-f*g),_=p*p+f*f,v=g*g+y*y,x=[(y*_-f*v)/m+c,(p*v-g*_)/m+h];Dr(n.edge,l,d,x),u.edge=Rr(l,t,null,x),n.edge=Rr(t,d,null,x),Vr(e),Vr(n)}else u.edge=Rr(e.site,u.site)}}function Yr(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var c=a-r,h=1/o-1/l,p=c/l;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+a)/2}function Hr(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Wr(t,e){return e[1]-t[1]||e[0]-t[0]}function Kr(t,e){var n,r,i,o=t.sort(Wr).pop();for(Pa=[],Ma=new Array(t.length),Ta=new Mr,Aa=new Mr;;)if(i=Sa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Zr(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Xr(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ma.length;i<o;++i)if((t=Ma[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Fr(t,Pa[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=Pa.length;o--;)zr(i=Pa[o],t,e,n,r)&&kr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Ra||Math.abs(i[0][1]-i[1][1])>Ra)||delete Pa[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,c,h,p,f,d,g,y=Ma.length,m=!0;for(i=0;i<y;++i)if(o=Ma[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Pa[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(f=Br(o,Pa[u[a]]))[0],g=f[1],h=(c=jr(o,Pa[u[++a%l]]))[0],p=c[1],(Math.abs(d-h)>Ra||Math.abs(g-p)>Ra)&&(u.splice(a,0,Pa.push(Or(s,f,Math.abs(d-t)<Ra&&r-g>Ra?[t,Math.abs(h-t)<Ra?p:r]:Math.abs(g-r)<Ra&&n-d>Ra?[Math.abs(p-r)<Ra?h:n,r]:Math.abs(d-n)<Ra&&g-e>Ra?[n,Math.abs(h-n)<Ra?p:e]:Math.abs(g-e)<Ra&&d-t>Ra?[Math.abs(p-e)<Ra?h:t,e]:null))-1),++l);l&&(m=!1)}if(m){var _,v,x,b=1/0;for(i=0,m=null;i<y;++i)(o=Ma[i])&&(x=(_=(s=o.site)[0]-t)*_+(v=s[1]-e)*v)<b&&(b=x,m=o);if(m){var w=[t,e],E=[t,r],C=[n,r],I=[n,e];m.halfedges.push(Pa.push(Or(s=m.site,w,E))-1,Pa.push(Or(s,E,C))-1,Pa.push(Or(s,C,I))-1,Pa.push(Or(s,I,w))-1)}}for(i=0;i<y;++i)(o=Ma[i])&&(o.halfedges.length||delete Ma[i])}(s,a,u,l)}this.edges=Pa,this.cells=Ma,Ta=Aa=Pa=Ma=null}function Jr(t){return(t=t.slice()).push(t[0]),o([t])}function Qr(t,e,n,r){var i=(r=r||{}).steps||64,s=r.units||"kilometers",a=r.angle||0,u=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!C(r))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(a))throw new Error("angle must be a number");var c=U(t);if("degrees"===s)var h=x(a);else e=Gn(t,e,90,{units:s}),n=Gn(t,n,0,{units:s}),e=U(e)[0]-c[0],n=U(n)[1]-c[1];for(var p=[],f=0;f<i;f+=1){var d=-360*f/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow($r(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow($r(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===s){var m=g*Math.cos(h)+y*Math.sin(h),_=y*Math.cos(h)-g*Math.sin(h);g=m,y=_}p.push([g+c[0],y+c[1]])}return p.push(p[0]),"degrees"===s?o([p],l):tr(o([p],l),a,{pivot:u})}function $r(t){var e=t*Math.PI/180;return Math.tan(e)}function ti(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return O(t,function(t,e,n){var r=n[i];if(!E(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&T(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),r([o/a,s/a],n)}function ei(t,e,n,i){var o=n.properties.tolerance||.001,s=0,a=0,u=0,l=0;if(L(n,function(e){var n=e.properties.weight,r=null==n?1:n;if(!E(r=Number(r)))throw new Error("weight value must be a number");if(r>0){l+=1;var i=r*Dt(e,t);0===i&&(i=1);var o=r/i;s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o}}),l<1)throw new Error("no features to measure");var c=s/u,h=a/u;return 1===l||0===i||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?r([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),ei([c,h],t,n,i-1))}function ni(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ri(t){if(C(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*ai(),180*ai()]}function ii(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(ri(n)));return l(i)}function oi(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;null!=t||(t=1),E(r)||(r=10),E(i)||(i=10);for(var s=[],a=0;a<t;a++){var u=[],c=Array.apply(null,new Array(r+1)).map(Math.random);c.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),c.forEach(function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(ri(n))),s.push(o([u]))}return l(s)}function si(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null!=t||(t=1),(!E(r)||r<2)&&(r=10),E(i)||(i=1e-4),E(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var c=[ri(n)],h=0;h<r-1;h++){var p=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;c.push([c[h][0]+f*Math.cos(p),c[h][1]+f*Math.sin(p)])}s.push(a(c))}return l(s)}function ai(){return Math.random()-.5}function ui(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return L(t,function(t){pi(t.properties,e)&&n.push(t)}),l(n)}function li(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=hi(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],c=0;c<a.length;c++)u.push(t.features[a[c]]);n(l(u),s,o)}}function ci(t,e,n,r){var i=r;return li(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function hi(t,e){var n={};return L(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function pi(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!pi(t,e[r]))return!1;return!0}return fi(t,e)}function fi(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function di(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function gi(){}function yi(t){this.message=t||""}function mi(t){this.message=t||""}function _i(){}function vi(t){return null===t?el:t.color}function xi(t){return null===t?null:t.parent}function bi(t,e){null!==t&&(t.color=e)}function wi(t){return null===t?null:t.left}function Ei(t){return null===t?null:t.right}function Ci(){this.root_=null,this.size_=0}function Ii(){}function Si(){this.array_=[],arguments[0]instanceof Bu&&this.addAll(arguments[0])}function Ti(){}function Mi(t){this.message=t||""}function Ai(){this.array_=[]}function Pi(t){switch(t.type){case"Polygon":return an(t)>1?t:null;case"MultiPolygon":var e=[];if(k(t,function(t){an(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Li(){this.reset()}function Ni(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}function Ri(t){return t>1?af:t<-1?-af:Math.asin(t)}function Oi(){}function Di(t,e){t&&wf.hasOwnProperty(t.type)&&wf[t.type](t,e)}function ki(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function zi(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ki(t[n],e,1);e.polygonEnd()}function Fi(t){return[df(t[1],t[0]),Ri(t[2])]}function ji(t){var e=t[0],n=t[1],r=gf(n);return[r*gf(e),r*_f(e),_f(n)]}function Bi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vi(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ui(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Gi(t){var e=vf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Xi(t,e){return[t>sf?t-lf:t<-sf?t+lf:t,e]}function Zi(t,e,n){return(t%=lf)?e||n?Cf(Hi(t),Wi(e,n)):Hi(t):e||n?Wi(e,n):Xi}function Yi(t){return function(e,n){return[(e+=t)>sf?e-lf:e<-sf?e+lf:e,n]}}function Hi(t){var e=Yi(t);return e.invert=Yi(-t),e}function Wi(t,e){function n(t,e){var n=gf(e),a=gf(t)*n,u=_f(t)*n,l=_f(e),c=l*r+a*i;return[df(u*o-c*s,a*r-l*i),Ri(c*o+u*s)]}var r=gf(t),i=_f(t),o=gf(e),s=_f(e);return n.invert=function(t,e){var n=gf(e),a=gf(t)*n,u=_f(t)*n,l=_f(e),c=l*o-u*s;return[df(u*o+l*s,a*r+c*i),Ri(c*r-a*i)]},n}function Ki(t,e){(e=ji(e))[0]-=t,Gi(e);var n=function(t){return t>1?0:t<-1?sf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+lf-of)%lf}function Ji(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Qi(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function $i(t){return t.length>1}function to(t,e){return((t=t.x)[0]<0?t[1]-af-of:af-t[1])-((e=e.x)[0]<0?e[1]-af-of:af-e[1])}function eo(t){return function(e){var n=new no;for(var r in t)n[r]=t[r];return n.stream=e,n}}function no(){}function ro(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Ef(n,t.stream(jf));var s=jf.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}function io(t,e){return[t,mf(xf((af+e)/2))]}function oo(t,e){return[mf(xf((af+e)/2)),-t]}function so(t,n,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return O(t,function(t){var e=so(t,n,r,i);e&&a.push(e)}),l(a)}var u,c=q(t),h=c[1]>50&&c[3]>50;u=h?{type:s.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n(e):e.map(function(e){return t(e,n)})}(s.coordinates,ao(s))}:Je(s);var p,f=(new Gl).read(u),d=g(y(n,r),"meters"),m=Dh.bufferOp(f,d);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((m=(new Xl).write(m)).coordinates))return(p=h?{type:m.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n.invert(e):e.map(function(e){return t(e,n)})}(m.coordinates,ao(s))}:Qe(m)).geometry?p:e(p,o)}function ao(t){var e=ae(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Zf().center(e).rotate(n).scale(mo)}function uo(){for(var t=new Gl,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=ef.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new Xl).write(e),properties:arguments[0].properties}}function lo(t,n){var r=W(t),i=W(n);if(Yt(_n(i,{precision:4})).coordinates[0].length<4)return null;if(Yt(_n(r,{precision:4})).coordinates[0].length<4)return null;var o=new Gl,s=o.read(_n(r)),a=o.read(_n(i)),u=Zp.intersection(s,a);return u.isEmpty()?null:e((new Xl).write(u))}function co(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===i||o<i)&&(i=o,r=n)}),r}(t,e)}function ho(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,s=n.mask;if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(J(s)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],u=t[1],c=t[2],h=t[3],p=(u+h)/2,f=(a+c)/2,d=2*e/Dt([a,p],[c,p],n)*(c-a),g=2*e/Dt([f,u],[f,h],n)*(h-u),y=d/2,m=2*y,_=Math.sqrt(3)/2*g,v=c-a,x=h-u,b=.75*m,w=_,I=Math.floor((v-m)/(m-y/2)),S=(I*b-y/2-v)/2-y/2+b/2,T=Math.floor((x-_)/_),M=(x-T*_)/2,A=T*_-x>_/2;A&&(M-=_/4);for(var P=[],L=[],N=0;N<6;N++){var R=2*Math.PI/6*N;P.push(Math.cos(R)),L.push(Math.sin(R))}for(var O=[],D=0;D<=I;D++)for(var k=0;k<=T;k++){var z=D%2==1;if(!(0===k&&z||0===k&&A)){var F=D*b+a-S,j=k*w+u+M;if(z&&(j-=_/2),!0===i)(function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var l=[];l.push(t),l.push([t[0]+e*i[u],t[1]+n*s[u]]),l.push([t[0]+e*i[(u+1)%6],t[1]+n*s[(u+1)%6]]),l.push(t),a.push(o([l],r))}return a})([F,j],d/2,g/2,r,P,L).forEach(function(t){s?lo(s,t)&&O.push(t):O.push(t)});else{var B=function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++)a.push([t[0]+e*i[u],t[1]+n*s[u]]);return a.push(a[0].slice()),o([a],r)}([F,j],d/2,g/2,r,P,L);s?lo(s,B)&&O.push(B):O.push(B)}}}return l(O)}function po(t){if(t.features.length<=1)return t;var e=function(t){var e=To(),n=[];return k(t,function(t,e){var r=q(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return k(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},fo),r[i]=!0;;){var o=q(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0){var a=s.map(function(t){return r[t.index]=!0,e.remove({index:t.index},fo),t.geojson});a.push(t),t=uo.apply(this,a)}if(0===s.length)break}n.push(t)}),l(n)}function fo(t,e){return t.index===e.index}function go(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],c=t[2],h=t[3],p=e/Dt([a,u],[c,u],n)*(c-a),f=e/Dt([a,u],[a,h],n)*(h-u),d=c-a,g=h-u,y=Math.floor(d/p),m=Math.floor(g/f),_=(g-m*f)/2,v=a+(d-y*p)/2,x=0;x<y;x++){for(var b=u+_,w=0;w<m;w++){var I=o([[[v,b],[v,b+f],[v+p,b+f],[v+p,b],[v,b]]],r);i?lo(i,I)&&s.push(I):s.push(I),b+=f}v+=p}return l(s)}function yo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/Dt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/Dt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,h=t[0];h<=t[2];){for(var p=0,f=t[1];f<=t[3];){var d=null,g=null;c%2==0&&p%2==0?(d=o([[[h,f],[h,f+u],[h+a,f],[h,f]]],r),g=o([[[h,f+u],[h+a,f+u],[h+a,f],[h,f+u]]],r)):c%2==0&&p%2==1?(d=o([[[h,f],[h+a,f+u],[h+a,f],[h,f]]],r),g=o([[[h,f],[h,f+u],[h+a,f+u],[h,f]]],r)):p%2==0&&c%2==1?(d=o([[[h,f],[h,f+u],[h+a,f+u],[h,f]]],r),g=o([[[h,f],[h+a,f+u],[h+a,f],[h,f]]],r)):p%2==1&&c%2==1&&(d=o([[[h,f],[h,f+u],[h+a,f],[h,f]]],r),g=o([[[h,f+u],[h+a,f+u],[h+a,f],[h,f+u]]],r)),i?(lo(i,d)&&s.push(d),lo(i,g)&&s.push(g)):(s.push(d),s.push(g)),f+=u,p++}c++,h+=a}return l(s)}var mo=6371008.8,_o={meters:mo,metres:mo,millimeters:1e3*mo,millimetres:1e3*mo,centimeters:100*mo,centimetres:100*mo,kilometers:mo/1e3,kilometres:mo/1e3,miles:mo/1609.344,nauticalmiles:mo/1852,inches:39.37*mo,yards:mo/1.0936,feet:3.28084*mo,radians:1,degrees:mo/111325},vo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/mo,degrees:1/111325},xo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},bo=Object.freeze({earthRadius:mo,factors:_o,unitsFactors:vo,areaFactors:xo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:l,multiLineString:c,multiPoint:h,multiPolygon:p,geometryCollection:f,round:d,radiansToLength:g,lengthToRadians:y,lengthToDegrees:m,bearingToAzimuth:_,radiansToDegrees:v,degreesToRadians:x,convertLength:b,convertArea:w,isNumber:E,isObject:C,validateBBox:I,validateId:S,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),wo=Object.freeze({coordEach:T,coordReduce:M,propEach:A,propReduce:P,featureEach:L,featureReduce:N,coordAll:R,geomEach:O,geomReduce:D,flattenEach:k,flattenReduce:z,segmentEach:F,segmentReduce:j,lineEach:B,lineReduce:V}),Eo=Object.freeze({getCoord:U,getCoords:G,containsNumber:X,geojsonType:Z,featureOf:Y,collectionOf:H,getGeom:W,getGeomType:K,getType:J}),Co={successCallback:null,verbose:!1},Io={},So=function t(e,n,r,i,o){for(r=r||0,i=i||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};i>r;){if(i-r>600){var s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*l/s+c)),Math.min(i,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],p=r,f=i;for(rt(e,r,n),o(e[i],h)>0&&rt(e,r,i);p<f;){for(rt(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[r],h)?rt(e,r,f):rt(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}},To=it;it.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!ft(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],ft(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):pt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ft(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],ft(t,s=e.leaf?n(o):o)){if(e.leaf||pt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!pt(s,a)?r?(s=r.children[++n],o=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:ut,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return ot(i=dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=dt([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(gt(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(gt(t,a,l=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return ot(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=ct(s=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),at(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=dt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ot(n,this.toBBox),ot(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=st(t,0,r,this.toBBox),o=st(t,r,n,this.toBBox)),a=ct(i)+ct(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ut,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=st(t,0,e,s),u=st(t,n-e,n,s),l=ht(a)+ht(u);for(i=e;i<n-e;i++)o=t.children[i],at(a,t.leaf?s(o):o),l+=ht(a);for(i=n-e-1;i>=e;i--)o=t.children[i],at(u,t.leaf?s(o):o),l+=ht(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)at(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Mo=function(t,e,n){var r=t*e,i=Ao*t,o=i-(i-t),s=t-o,a=Ao*e,u=a-(a-e),l=e-u,c=s*l-(r-o*u-s*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},Ao=+(Math.pow(2,27)+1),Po=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,h=t[u],p=c(h),f=e[l],d=c(f);p<d?(o=h,(u+=1)<n&&(p=c(h=t[u]))):(o=f,(l+=1)<r&&(d=c(f=e[l]))),u<n&&p<d||l>=r?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=e[l])));for(var g,y,m=i+o,_=m-i,v=o-_,x=v,b=m;u<n&&l<r;)p<d?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=e[l]))),(v=(o=x)-(_=(m=i+o)-i))&&(s[a++]=v),x=b-((g=b+m)-(y=g-b))+(m-y),b=g;for(;u<n;)(v=(o=x)-(_=(m=(i=h)+o)-i))&&(s[a++]=v),x=b-((g=b+m)-(y=g-b))+(m-y),b=g,(u+=1)<n&&(h=t[u]);for(;l<r;)(v=(o=x)-(_=(m=(i=f)+o)-i))&&(s[a++]=v),x=b-((g=b+m)-(y=g-b))+(m-y),b=g,(l+=1)<r&&(f=e[l]);return x&&(s[a++]=x),b&&(s[a++]=b),a||(s[a++]=0),s.length=a,s},Lo=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},No=function(t,e){var n=t.length;if(1===n){var r=Mo(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Mo(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Mo(t[u],e,s),Lo(o[1],s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],c=o[1],h=l+c,p=c-(h-l);o[1]=h,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},Ro=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,h=t[u],p=c(h),f=-e[l],d=c(f);p<d?(o=h,(u+=1)<n&&(p=c(h=t[u]))):(o=f,(l+=1)<r&&(d=c(f=-e[l]))),u<n&&p<d||l>=r?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=-e[l])));for(var g,y,m=i+o,_=m-i,v=o-_,x=v,b=m;u<n&&l<r;)p<d?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=-e[l]))),(v=(o=x)-(_=(m=i+o)-i))&&(s[a++]=v),x=b-((g=b+m)-(y=g-b))+(m-y),b=g;for(;u<n;)(v=(o=x)-(_=(m=(i=h)+o)-i))&&(s[a++]=v),x=b-((g=b+m)-(y=g-b))+(m-y),b=g,(u+=1)<n&&(h=t[u]);for(;l<r;)(v=(o=x)-(_=(m=(i=f)+o)-i))&&(s[a++]=v),x=b-((g=b+m)-(y=g-b))+(m-y),b=g,(l+=1)<r&&(f=-e[l]);return x&&(s[a++]=x),b&&(s[a++]=b),a||(s[a++]=0),s.length=a,s},Oo=yt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",r(i(e(t,s))),",",n(s),t[0][s],")"].join(""));return o}function o(t){for(var n=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var l=r(n),c=r(o),h="orientation"+t+"Exact",p=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Po,Mo,No,Ro)}var s=o(3),a=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var u=3.3306690738754716e-16*r;return a>=u||a<=-u?a:s(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],d=o*c,g=s*l,y=s*u,m=i*c,_=i*l,v=o*u,x=h*(d-g)+p*(y-m)+f*(_-v),b=7.771561172376103e-16*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(m))*Math.abs(p)+(Math.abs(_)+Math.abs(v))*Math.abs(f));return x>b||-x>b?x:a(t,e,n,r)}];!function(){for(;u.length<=5;)u.push(o(u.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),r=0;r<=5;++r)t.exports[r]=u[r]}()}),Do=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],l=o.length;l>1&&ko(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&ko(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var p=s.length-2;p>0;--p)n[c++]=s[p];return n},ko=Oo[3],zo=mt,Fo=mt;mt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},zo.default=Fo;var jo=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][1];u>r!=l>r&&n<(e[s][0]-a)*(r-u)/(l-u)+a&&(i=!i)}return i},Bo=Oo[3],Vo=_t;Vo.default=_t;var qo=function(t){return t},Uo=function(t){if(null==t)return qo;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+s;u<l;)c[u]=t[u],++u;return c}},Go=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Xo=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;return{set:function(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}},Zo=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Yo=new ArrayBuffer(16),Ho=new Float64Array(Yo),Wo=new Uint32Array(Yo),Ko=function(t){Ho[0]=t[0],Ho[1]=t[1];var e=Wo[0]^Wo[1];return 2147483647&(e<<5^e>>7^Wo[2]^Wo[3])},Jo=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Jo.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Jo.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Jo.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Qo=ce,$o=ce;ce.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Ce(t,0,i?e[0]*n:t.length,n));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(Ce(t,e[s]*n,s<a-1?e[s+1]*n:t.length,n));var u=0;for(s=0;s<r.length;s+=3){var l=r[s]*n,c=r[s+1]*n,h=r[s+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},ce.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Qo.default=$o,Ae.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Fe(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Fe(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):ze(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Fe(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Fe(t,s=e.leaf?n(o):o)){if(e.leaf||ze(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=je([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!ze(s,a)?r?(s=r.children[++n],o=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Re,compareMinY:Oe,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Pe(i=je(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=je([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(Be(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Be(t,a,l=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Pe(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=De(s=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),Ne(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=je(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Pe(n,this.toBBox),Pe(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=je([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pe(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Le(t,0,r,this.toBBox),o=Le(t,r,n,this.toBBox)),a=De(i)+De(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Re,i=t.leaf?this.compareMinY:Oe;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Le(t,0,e,s),u=Le(t,n-e,n,s),l=ke(a)+ke(u);for(i=e;i<n-e;i++)o=t.children[i],Ne(a,t.leaf?s(o):o),l+=ke(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Ne(u,t.leaf?s(o):o),l+=ke(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ne(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Pe(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var ts=Object.freeze({toMercator:Je,toWgs84:Qe}),es=6378137,ns=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},rs=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var is=Math.PI/180,os=180/Math.PI,ss=function(t,e){this.lon=t,this.lat=e,this.x=is*t,this.y=is*e};ss.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ss.prototype.antipode=function(){return new ss(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var as=function(){this.coords=[],this.length=0};as.prototype.move_to=function(t){this.length++,this.coords.push(t)};var us=function(t){this.properties=t||{},this.geometries=[]};us.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},us.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var ls=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ss(t.x,t.y),this.end=new ss(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(i)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};ls.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=os*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[os*Math.atan2(i,r),s]},ls.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=this.interpolate(r*i);n.push(o)}for(var s=!1,a=0,u=e&&e.offset?e.offset:10,l=180-u,c=-180+u,h=360-u,p=1;p<n.length;++p){var f=n[p-1][0],d=n[p][0],g=Math.abs(d-f);g>h&&(d>l&&f<c||f>l&&d<c)?s=!0:g>a&&(a=g)}var y=[];if(s&&a<u){var m=[];y.push(m);for(var _=0;_<n.length;++_){var v=parseFloat(n[_][0]);if(_>0&&Math.abs(v-n[_-1][0])>h){var x=parseFloat(n[_-1][0]),b=parseFloat(n[_-1][1]),w=parseFloat(n[_][0]),E=parseFloat(n[_][1]);if(x>-180&&x<c&&180===w&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<c){m.push([-180,n[_][1]]),m.push([n[++_][0],n[_][1]]);continue}if(x>l&&x<180&&-180===w&&_+1<n.length&&n[_-1][0]>l&&n[_-1][0]<180){m.push([180,n[_][1]]),m.push([n[++_][0],n[_][1]]);continue}if(x<c&&w>l){var C=x;x=w,w=C;var I=b;b=E,E=I}if(x>l&&w<c&&(w+=360),x<=180&&w>=180&&x<w){var S=(180-x)/(w-x),T=S*E+(1-S)*b;m.push([n[_-1][0]>l?180:-180,T]),(m=[]).push([n[_-1][0]>l?-180:180,T]),y.push(m)}else y.push(m=[]);m.push([v,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var M=[];y.push(M);for(var A=0;A<n.length;++A)M.push([n[A][0],n[A][1]])}for(var P=new us(this.properties),L=0;L<y.length;++L){var N=new as;P.geometries.push(N);for(var R=y[L],O=0;O<R.length;++O)N.move_to(R[O])}return P};var cs=Rn;Rn.polyline=Rn,Rn.polygon=function(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Dn(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Dn(a=t[s],e)&r))!==o&&n.push(On(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n};var hs=Array.prototype.slice,ps={successCallback:null,verbose:!1,polygons:!1},fs={},ds=64,gs=16,ys=4,ms=1,_s=[],vs=[],xs=[],bs=[],ws=[],Es=[],Cs=[],Is=[],Ss=[],Ts=[],Ms=[],As=[],Ps=[],Ls=[],Ns=[],Rs=[],Os=[],Ds=[],ks=[],zs=[],Fs=[],js=[],Bs=[],Vs=[];Cs[85]=Ts[85]=-1,Is[85]=Ms[85]=0,Ss[85]=As[85]=1,ks[85]=js[85]=1,zs[85]=Bs[85]=0,Fs[85]=Vs[85]=1,_s[85]=bs[85]=0,vs[85]=ws[85]=-1,xs[85]=Ns[85]=0,Rs[85]=Ps[85]=0,Os[85]=Ls[85]=1,Es[85]=Ds[85]=1,js[1]=js[169]=0,Bs[1]=Bs[169]=-1,Vs[1]=Vs[169]=0,Ps[1]=Ps[169]=-1,Ls[1]=Ls[169]=0,Ns[1]=Ns[169]=0,Ts[4]=Ts[166]=0,Ms[4]=Ms[166]=-1,As[4]=As[166]=1,Rs[4]=Rs[166]=1,Os[4]=Os[166]=0,Ds[4]=Ds[166]=0,Cs[16]=Cs[154]=0,Is[16]=Is[154]=1,Ss[16]=Ss[154]=1,bs[16]=bs[154]=1,ws[16]=ws[154]=0,Es[16]=Es[154]=1,ks[64]=ks[106]=0,zs[64]=zs[106]=1,Fs[64]=Fs[106]=0,_s[64]=_s[106]=-1,vs[64]=vs[106]=0,xs[64]=xs[106]=1,ks[2]=ks[168]=0,zs[2]=zs[168]=-1,Fs[2]=Fs[168]=1,js[2]=js[168]=0,Bs[2]=Bs[168]=-1,Vs[2]=Vs[168]=0,Ps[2]=Ps[168]=-1,Ls[2]=Ls[168]=0,Ns[2]=Ns[168]=0,Rs[2]=Rs[168]=-1,Os[2]=Os[168]=0,Ds[2]=Ds[168]=1,Cs[8]=Cs[162]=0,Is[8]=Is[162]=-1,Ss[8]=Ss[162]=0,Ts[8]=Ts[162]=0,Ms[8]=Ms[162]=-1,As[8]=As[162]=1,Ps[8]=Ps[162]=1,Ls[8]=Ls[162]=0,Ns[8]=Ns[162]=1,Rs[8]=Rs[162]=1,Os[8]=Os[162]=0,Ds[8]=Ds[162]=0,Cs[32]=Cs[138]=0,Is[32]=Is[138]=1,Ss[32]=Ss[138]=1,Ts[32]=Ts[138]=0,Ms[32]=Ms[138]=1,As[32]=As[138]=0,_s[32]=_s[138]=1,vs[32]=vs[138]=0,xs[32]=xs[138]=0,bs[32]=bs[138]=1,ws[32]=ws[138]=0,Es[32]=Es[138]=1,js[128]=js[42]=0,Bs[128]=Bs[42]=1,Vs[128]=Vs[42]=1,ks[128]=ks[42]=0,zs[128]=zs[42]=1,Fs[128]=Fs[42]=0,_s[128]=_s[42]=-1,vs[128]=vs[42]=0,xs[128]=xs[42]=1,bs[128]=bs[42]=-1,ws[128]=ws[42]=0,Es[128]=Es[42]=0,Ts[5]=Ts[165]=-1,Ms[5]=Ms[165]=0,As[5]=As[165]=0,js[5]=js[165]=1,Bs[5]=Bs[165]=0,Vs[5]=Vs[165]=0,Rs[20]=Rs[150]=0,Os[20]=Os[150]=1,Ds[20]=Ds[150]=1,bs[20]=bs[150]=0,ws[20]=ws[150]=-1,Es[20]=Es[150]=1,Cs[80]=Cs[90]=-1,Is[80]=Is[90]=0,Ss[80]=Ss[90]=1,ks[80]=ks[90]=1,zs[80]=zs[90]=0,Fs[80]=Fs[90]=1,Ps[65]=Ps[105]=0,Ls[65]=Ls[105]=1,Ns[65]=Ns[105]=0,_s[65]=_s[105]=0,vs[65]=vs[105]=-1,xs[65]=xs[105]=0,Cs[160]=Cs[10]=-1,Is[160]=Is[10]=0,Ss[160]=Ss[10]=1,Ts[160]=Ts[10]=-1,Ms[160]=Ms[10]=0,As[160]=As[10]=0,js[160]=js[10]=1,Bs[160]=Bs[10]=0,Vs[160]=Vs[10]=0,ks[160]=ks[10]=1,zs[160]=zs[10]=0,Fs[160]=Fs[10]=1,Rs[130]=Rs[40]=0,Os[130]=Os[40]=1,Ds[130]=Ds[40]=1,Ps[130]=Ps[40]=0,Ls[130]=Ls[40]=1,Ns[130]=Ns[40]=0,_s[130]=_s[40]=0,vs[130]=vs[40]=-1,xs[130]=xs[40]=0,bs[130]=bs[40]=0,ws[130]=ws[40]=-1,Es[130]=Es[40]=1,Ts[37]=Ts[133]=0,Ms[37]=Ms[133]=1,As[37]=As[133]=1,js[37]=js[133]=0,Bs[37]=Bs[133]=1,Vs[37]=Vs[133]=0,_s[37]=_s[133]=-1,vs[37]=vs[133]=0,xs[37]=xs[133]=0,bs[37]=bs[133]=1,ws[37]=ws[133]=0,Es[37]=Es[133]=0,Rs[148]=Rs[22]=-1,Os[148]=Os[22]=0,Ds[148]=Ds[22]=0,js[148]=js[22]=0,Bs[148]=Bs[22]=-1,Vs[148]=Vs[22]=1,ks[148]=ks[22]=0,zs[148]=zs[22]=1,Fs[148]=Fs[22]=1,bs[148]=bs[22]=-1,ws[148]=ws[22]=0,Es[148]=Es[22]=1,Cs[82]=Cs[88]=0,Is[82]=Is[88]=-1,Ss[82]=Ss[88]=1,Rs[82]=Rs[88]=1,Os[82]=Os[88]=0,Ds[82]=Ds[88]=1,Ps[82]=Ps[88]=-1,Ls[82]=Ls[88]=0,Ns[82]=Ns[88]=1,ks[82]=ks[88]=0,zs[82]=zs[88]=-1,Fs[82]=Fs[88]=0,Cs[73]=Cs[97]=0,Is[73]=Is[97]=1,Ss[73]=Ss[97]=0,Ts[73]=Ts[97]=0,Ms[73]=Ms[97]=-1,As[73]=As[97]=0,Ps[73]=Ps[97]=1,Ls[73]=Ls[97]=0,Ns[73]=Ns[97]=0,_s[73]=_s[97]=1,vs[73]=vs[97]=0,xs[73]=xs[97]=1,Cs[145]=Cs[25]=0,Is[145]=Is[25]=-1,Ss[145]=Ss[25]=0,Ps[145]=Ps[25]=1,Ls[145]=Ls[25]=0,Ns[145]=Ns[25]=1,js[145]=js[25]=0,Bs[145]=Bs[25]=1,Vs[145]=Vs[25]=1,bs[145]=bs[25]=-1,ws[145]=ws[25]=0,Es[145]=Es[25]=0,Ts[70]=Ts[100]=0,Ms[70]=Ms[100]=1,As[70]=As[100]=0,Rs[70]=Rs[100]=-1,Os[70]=Os[100]=0,Ds[70]=Ds[100]=1,ks[70]=ks[100]=0,zs[70]=zs[100]=-1,Fs[70]=Fs[100]=1,_s[70]=_s[100]=1,vs[70]=vs[100]=0,xs[70]=xs[100]=0,Ts[101]=Ts[69]=0,Ms[101]=Ms[69]=1,As[101]=As[69]=0,_s[101]=_s[69]=1,vs[101]=vs[69]=0,xs[101]=xs[69]=0,js[149]=js[21]=0,Bs[149]=Bs[21]=1,Vs[149]=Vs[21]=1,bs[149]=bs[21]=-1,ws[149]=ws[21]=0,Es[149]=Es[21]=0,Rs[86]=Rs[84]=-1,Os[86]=Os[84]=0,Ds[86]=Ds[84]=1,ks[86]=ks[84]=0,zs[86]=zs[84]=-1,Fs[86]=Fs[84]=1,Cs[89]=Cs[81]=0,Is[89]=Is[81]=-1,Ss[89]=Ss[81]=0,Ps[89]=Ps[81]=1,Ls[89]=Ls[81]=0,Ns[89]=Ns[81]=1,Cs[96]=Cs[74]=0,Is[96]=Is[74]=1,Ss[96]=Ss[74]=0,Ts[96]=Ts[74]=-1,Ms[96]=Ms[74]=0,As[96]=As[74]=1,ks[96]=ks[74]=1,zs[96]=zs[74]=0,Fs[96]=Fs[74]=0,_s[96]=_s[74]=1,vs[96]=vs[74]=0,xs[96]=xs[74]=1,Cs[24]=Cs[146]=0,Is[24]=Is[146]=-1,Ss[24]=Ss[146]=1,Rs[24]=Rs[146]=1,Os[24]=Os[146]=0,Ds[24]=Ds[146]=1,Ps[24]=Ps[146]=0,Ls[24]=Ls[146]=1,Ns[24]=Ns[146]=1,bs[24]=bs[146]=0,ws[24]=ws[146]=-1,Es[24]=Es[146]=0,Ts[6]=Ts[164]=-1,Ms[6]=Ms[164]=0,As[6]=As[164]=1,Rs[6]=Rs[164]=-1,Os[6]=Os[164]=0,Ds[6]=Ds[164]=0,js[6]=js[164]=0,Bs[6]=Bs[164]=-1,Vs[6]=Vs[164]=1,ks[6]=ks[164]=1,zs[6]=zs[164]=0,Fs[6]=Fs[164]=0,Ps[129]=Ps[41]=0,Ls[129]=Ls[41]=1,Ns[129]=Ns[41]=1,js[129]=js[41]=0,Bs[129]=Bs[41]=1,Vs[129]=Vs[41]=0,_s[129]=_s[41]=-1,vs[129]=vs[41]=0,xs[129]=xs[41]=0,bs[129]=bs[41]=0,ws[129]=ws[41]=-1,Es[129]=Es[41]=0,Rs[66]=Rs[104]=0,Os[66]=Os[104]=1,Ds[66]=Ds[104]=0,Ps[66]=Ps[104]=-1,Ls[66]=Ls[104]=0,Ns[66]=Ns[104]=1,ks[66]=ks[104]=0,zs[66]=zs[104]=-1,Fs[66]=Fs[104]=0,_s[66]=_s[104]=0,vs[66]=vs[104]=-1,xs[66]=xs[104]=1,Cs[144]=Cs[26]=-1,Is[144]=Is[26]=0,Ss[144]=Ss[26]=0,js[144]=js[26]=1,Bs[144]=Bs[26]=0,Vs[144]=Vs[26]=1,ks[144]=ks[26]=0,zs[144]=zs[26]=1,Fs[144]=Fs[26]=1,bs[144]=bs[26]=-1,ws[144]=ws[26]=0,Es[144]=Es[26]=1,Ts[36]=Ts[134]=0,Ms[36]=Ms[134]=1,As[36]=As[134]=1,Rs[36]=Rs[134]=0,Os[36]=Os[134]=1,Ds[36]=Ds[134]=0,_s[36]=_s[134]=0,vs[36]=vs[134]=-1,xs[36]=xs[134]=1,bs[36]=bs[134]=1,ws[36]=ws[134]=0,Es[36]=Es[134]=0,Cs[9]=Cs[161]=-1,Is[9]=Is[161]=0,Ss[9]=Ss[161]=0,Ts[9]=Ts[161]=0,Ms[9]=Ms[161]=-1,As[9]=As[161]=0,Ps[9]=Ps[161]=1,Ls[9]=Ls[161]=0,Ns[9]=Ns[161]=0,js[9]=js[161]=1,Bs[9]=Bs[161]=0,Vs[9]=Vs[161]=1,Cs[136]=0,Is[136]=1,Ss[136]=1,Ts[136]=0,Ms[136]=1,As[136]=0,Rs[136]=-1,Os[136]=0,Ds[136]=1,Ps[136]=-1,Ls[136]=0,Ns[136]=0,js[136]=0,Bs[136]=-1,Vs[136]=0,ks[136]=0,zs[136]=-1,Fs[136]=1,_s[136]=1,vs[136]=0,xs[136]=0,bs[136]=1,ws[136]=0,Es[136]=1,Cs[34]=0,Is[34]=-1,Ss[34]=0,Ts[34]=0,Ms[34]=-1,As[34]=1,Rs[34]=1,Os[34]=0,Ds[34]=0,Ps[34]=1,Ls[34]=0,Ns[34]=1,js[34]=0,Bs[34]=1,Vs[34]=1,ks[34]=0,zs[34]=1,Fs[34]=0,_s[34]=-1,vs[34]=0,xs[34]=1,bs[34]=-1,ws[34]=0,Es[34]=0,Cs[35]=0,Is[35]=1,Ss[35]=1,Ts[35]=0,Ms[35]=-1,As[35]=1,Rs[35]=1,Os[35]=0,Ds[35]=0,Ps[35]=-1,Ls[35]=0,Ns[35]=0,js[35]=0,Bs[35]=-1,Vs[35]=0,ks[35]=0,zs[35]=1,Fs[35]=0,_s[35]=-1,vs[35]=0,xs[35]=1,bs[35]=1,ws[35]=0,Es[35]=1,Cs[153]=0,Is[153]=1,Ss[153]=1,Ps[153]=-1,Ls[153]=0,Ns[153]=0,js[153]=0,Bs[153]=-1,Vs[153]=0,bs[153]=1,ws[153]=0,Es[153]=1,Ts[102]=0,Ms[102]=-1,As[102]=1,Rs[102]=1,Os[102]=0,Ds[102]=0,ks[102]=0,zs[102]=1,Fs[102]=0,_s[102]=-1,vs[102]=0,xs[102]=1,Cs[155]=0,Is[155]=-1,Ss[155]=0,Ps[155]=1,Ls[155]=0,Ns[155]=1,js[155]=0,Bs[155]=1,Vs[155]=1,bs[155]=-1,ws[155]=0,Es[155]=0,Ts[103]=0,Ms[103]=1,As[103]=0,Rs[103]=-1,Os[103]=0,Ds[103]=1,ks[103]=0,zs[103]=-1,Fs[103]=1,_s[103]=1,vs[103]=0,xs[103]=0,Cs[152]=0,Is[152]=1,Ss[152]=1,Rs[152]=-1,Os[152]=0,Ds[152]=1,Ps[152]=-1,Ls[152]=0,Ns[152]=0,js[152]=0,Bs[152]=-1,Vs[152]=0,ks[152]=0,zs[152]=-1,Fs[152]=1,bs[152]=1,ws[152]=0,Es[152]=1,Cs[156]=0,Is[156]=-1,Ss[156]=1,Rs[156]=1,Os[156]=0,Ds[156]=1,Ps[156]=-1,Ls[156]=0,Ns[156]=0,js[156]=0,Bs[156]=-1,Vs[156]=0,ks[156]=0,zs[156]=1,Fs[156]=1,bs[156]=-1,ws[156]=0,Es[156]=1,Cs[137]=0,Is[137]=1,Ss[137]=1,Ts[137]=0,Ms[137]=1,As[137]=0,Ps[137]=-1,Ls[137]=0,Ns[137]=0,js[137]=0,Bs[137]=-1,Vs[137]=0,_s[137]=1,vs[137]=0,xs[137]=0,bs[137]=1,ws[137]=0,Es[137]=1,Cs[139]=0,Is[139]=1,Ss[139]=1,Ts[139]=0,Ms[139]=-1,As[139]=0,Ps[139]=1,Ls[139]=0,Ns[139]=0,js[139]=0,Bs[139]=1,Vs[139]=0,_s[139]=-1,vs[139]=0,xs[139]=0,bs[139]=1,ws[139]=0,Es[139]=1,Cs[98]=0,Is[98]=-1,Ss[98]=0,Ts[98]=0,Ms[98]=-1,As[98]=1,Rs[98]=1,Os[98]=0,Ds[98]=0,Ps[98]=1,Ls[98]=0,Ns[98]=1,ks[98]=0,zs[98]=1,Fs[98]=0,_s[98]=-1,vs[98]=0,xs[98]=1,Cs[99]=0,Is[99]=1,Ss[99]=0,Ts[99]=0,Ms[99]=-1,As[99]=1,Rs[99]=1,Os[99]=0,Ds[99]=0,Ps[99]=-1,Ls[99]=0,Ns[99]=1,ks[99]=0,zs[99]=-1,Fs[99]=0,_s[99]=1,vs[99]=0,xs[99]=1,Ts[38]=0,Ms[38]=-1,As[38]=1,Rs[38]=1,Os[38]=0,Ds[38]=0,js[38]=0,Bs[38]=1,Vs[38]=1,ks[38]=0,zs[38]=1,Fs[38]=0,_s[38]=-1,vs[38]=0,xs[38]=1,bs[38]=-1,ws[38]=0,Es[38]=0,Ts[39]=0,Ms[39]=1,As[39]=1,Rs[39]=-1,Os[39]=0,Ds[39]=0,js[39]=0,Bs[39]=-1,Vs[39]=1,ks[39]=0,zs[39]=1,Fs[39]=0,_s[39]=-1,vs[39]=0,xs[39]=1,bs[39]=1,ws[39]=0,Es[39]=0;var qs=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Us=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Gs=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Xs=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Zs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ys=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Hs=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ws=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ks=[],Js=[],Qs=[],$s=[],ta=[],ea=[],na=[],ra=[];$s[1]=ta[1]=18,$s[169]=ta[169]=18,Qs[4]=Js[4]=12,Qs[166]=Js[166]=12,Ks[16]=ra[16]=4,Ks[154]=ra[154]=4,ea[64]=na[64]=22,ea[106]=na[106]=22,Qs[2]=ea[2]=17,$s[2]=ta[2]=18,Qs[168]=ea[168]=17,$s[168]=ta[168]=18,Ks[8]=$s[8]=9,Js[8]=Qs[8]=12,Ks[162]=$s[162]=9,Js[162]=Qs[162]=12,Ks[32]=ra[32]=4,Js[32]=na[32]=1,Ks[138]=ra[138]=4,Js[138]=na[138]=1,ta[128]=ra[128]=21,ea[128]=na[128]=22,ta[42]=ra[42]=21,ea[42]=na[42]=22,Js[5]=ta[5]=14,Js[165]=ta[165]=14,Qs[20]=ra[20]=6,Qs[150]=ra[150]=6,Ks[80]=ea[80]=11,Ks[90]=ea[90]=11,$s[65]=na[65]=3,$s[105]=na[105]=3,Ks[160]=ea[160]=11,Js[160]=ta[160]=14,Ks[10]=ea[10]=11,Js[10]=ta[10]=14,Qs[130]=ra[130]=6,$s[130]=na[130]=3,Qs[40]=ra[40]=6,$s[40]=na[40]=3,Js[101]=na[101]=1,Js[69]=na[69]=1,ta[149]=ra[149]=21,ta[21]=ra[21]=21,Qs[86]=ea[86]=17,Qs[84]=ea[84]=17,Ks[89]=$s[89]=9,Ks[81]=$s[81]=9,Ks[96]=na[96]=0,Js[96]=ea[96]=15,Ks[74]=na[74]=0,Js[74]=ea[74]=15,Ks[24]=Qs[24]=8,$s[24]=ra[24]=7,Ks[146]=Qs[146]=8,$s[146]=ra[146]=7,Js[6]=ea[6]=15,Qs[6]=ta[6]=16,Js[164]=ea[164]=15,Qs[164]=ta[164]=16,$s[129]=ra[129]=7,ta[129]=na[129]=20,$s[41]=ra[41]=7,ta[41]=na[41]=20,Qs[66]=na[66]=2,$s[66]=ea[66]=19,Qs[104]=na[104]=2,$s[104]=ea[104]=19,Ks[144]=ta[144]=10,ea[144]=ra[144]=23,Ks[26]=ta[26]=10,ea[26]=ra[26]=23,Js[36]=ra[36]=5,Qs[36]=na[36]=2,Js[134]=ra[134]=5,Qs[134]=na[134]=2,Ks[9]=ta[9]=10,Js[9]=$s[9]=13,Ks[161]=ta[161]=10,Js[161]=$s[161]=13,Js[37]=ra[37]=5,ta[37]=na[37]=20,Js[133]=ra[133]=5,ta[133]=na[133]=20,Qs[148]=ta[148]=16,ea[148]=ra[148]=23,Qs[22]=ta[22]=16,ea[22]=ra[22]=23,Ks[82]=Qs[82]=8,$s[82]=ea[82]=19,Ks[88]=Qs[88]=8,$s[88]=ea[88]=19,Ks[73]=na[73]=0,Js[73]=$s[73]=13,Ks[97]=na[97]=0,Js[97]=$s[97]=13,Ks[145]=$s[145]=9,ta[145]=ra[145]=21,Ks[25]=$s[25]=9,ta[25]=ra[25]=21,Js[70]=na[70]=1,Qs[70]=ea[70]=17,Js[100]=na[100]=1,Qs[100]=ea[100]=17,Ks[34]=$s[34]=9,Js[34]=Qs[34]=12,ta[34]=ra[34]=21,ea[34]=na[34]=22,Ks[136]=ra[136]=4,Js[136]=na[136]=1,Qs[136]=ea[136]=17,$s[136]=ta[136]=18,Ks[35]=ra[35]=4,Js[35]=Qs[35]=12,$s[35]=ta[35]=18,ea[35]=na[35]=22,Ks[153]=ra[153]=4,$s[153]=ta[153]=18,Js[102]=Qs[102]=12,ea[102]=na[102]=22,Ks[155]=$s[155]=9,ta[155]=ra[155]=23,Js[103]=na[103]=1,Qs[103]=ea[103]=17,Ks[152]=ra[152]=4,Qs[152]=ea[152]=17,$s[152]=ta[152]=18,Ks[156]=Qs[156]=8,$s[156]=ta[156]=18,ea[156]=ra[156]=23,Ks[137]=ra[137]=4,Js[137]=na[137]=1,$s[137]=ta[137]=18,Ks[139]=ra[139]=4,Js[139]=$s[139]=13,ta[139]=na[139]=20,Ks[98]=$s[98]=9,Js[98]=Qs[98]=12,ea[98]=na[98]=22,Ks[99]=na[99]=0,Js[99]=Qs[99]=12,$s[99]=ea[99]=19,Js[38]=Qs[38]=12,ta[38]=ra[38]=21,ea[38]=na[38]=22,Js[39]=ra[39]=5,Qs[39]=ta[39]=16,ea[39]=na[39]=22;var ia=[];ia[1]=ia[169]=qs,ia[4]=ia[166]=Us,ia[16]=ia[154]=Gs,ia[64]=ia[106]=Xs,ia[168]=ia[2]=Zs,ia[162]=ia[8]=Ys,ia[138]=ia[32]=Hs,ia[42]=ia[128]=Ws,ia[5]=ia[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ia[20]=ia[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ia[80]=ia[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ia[65]=ia[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ia[160]=ia[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ia[130]=ia[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ia[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ia[101]=ia[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ia[149]=ia[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ia[86]=ia[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ia[89]=ia[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ia[96]=ia[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ia[24]=ia[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ia[6]=ia[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ia[129]=ia[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ia[66]=ia[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ia[144]=ia[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ia[36]=ia[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ia[9]=ia[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ia[37]=ia[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ia[148]=ia[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ia[82]=ia[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ia[73]=ia[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ia[145]=ia[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ia[70]=ia[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ia[34]=function(t){return[Ws(t),Ys(t)]},ia[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ia[136]=function(t){return[Hs(t),Zs(t)]},ia[153]=function(t){return[Gs(t),qs(t)]},ia[102]=function(t){return[Us(t),Xs(t)]},ia[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ia[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ia[152]=function(t){return[Gs(t),Zs(t)]},ia[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ia[137]=function(t){return[Hs(t),qs(t)]},ia[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ia[98]=function(t){return[Ys(t),Xs(t)]},ia[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ia[38]=function(t){return[Us(t),Ws(t)]},ia[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var oa=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};oa.buildId=function(t){return t.join(",")},oa.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},oa.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},oa.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},oa.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=sr(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},oa.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},oa.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},oa.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var sa=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};sa.prototype.getSymetric=function(){return this.symetric||(this.symetric=new sa(this.to,this.from),this.symetric.symetric=this),this.symetric},sa.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},sa.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},sa.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},sa.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},sa.prototype.compareTo=function(t){return sr(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var aa=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},ua={length:{configurable:!0}};aa.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},aa.prototype.get=function(t){return this.edges[t]},ua.length.get=function(){return this.edges.length},aa.prototype.forEach=function(t){this.edges.forEach(t)},aa.prototype.map=function(t){return this.edges.map(t)},aa.prototype.some=function(t){return this.edges.some(t)},aa.prototype.isValid=function(){return!0},aa.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=sr(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},aa.prototype.toMultiPoint=function(){return h(this.edges.map(function(t){return t.from.coordinates}))},aa.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},aa.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ne(this.toPolygon())},aa.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var s=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(s,o)&&ar(s,o)){var a=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});a&&e.inside(r(a))&&(i&&!ar(n,s)||(i=e))}}),i},aa.prototype.inside=function(t){return Mt(t,this.toPolygon())},Object.defineProperties(aa.prototype,ua);var la=function(){this.edges=[],this.nodes={}};la.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new la;return k(t,function(t){Y(t,"LineString","Graph::fromGeoJson"),M(t,function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n})}),e},la.prototype.getNode=function(t){var e=oa.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new oa(t)),n},la.prototype.addEdge=function(t,e){var n=new sa(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},la.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},la.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},la.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},la.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},la.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},la.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},la.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},la.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},la.prototype._findEdgeRing=function(t){var e=t,n=new aa;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},la.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},la.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var ca=yt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),ha=yt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r}),pa=yt(function(t){function e(t){return null==t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(ha(t))return!!ha(o)&&(t=r.call(t),o=r.call(o),i(t,o,s));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=ca(t),c=ca(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(!i(t[u=l[a]],o[u],s))return!1;return typeof t==typeof o}(t,o,s))}}),fa=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:_r};fa.prototype.compare=function(t,e){if(t.type!==e.type||!mr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=yr(t),i=yr(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},fa.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},fa.prototype.compareLine=function(t,e,n,r){if(!mr(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},fa.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},fa.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},fa.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},fa.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},fa.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},fa.prototype.removePseudo=function(t){return t};var da=fa,ga=yt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),ya=yt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),ma=yt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),_a=yt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=ma;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e];t.push([r,this._reachability[r]])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),va=yt(function(t){t.exports&&(t.exports={DBSCAN:ga,KMEANS:ya,OPTICS:_a,PriorityQueue:ma})}),xa=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},ba=xa,wa=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ea=xa,Ca={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Ca.heuristics.manhattan,o=r.closest||!1,s=new Ir(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return wr(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var p=l[c];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?wr(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Er.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ca.cleanNode(this.nodes[t])},Er.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ca.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Er.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Er.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Er.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Cr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Cr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Cr.prototype.isWall=function(){return 0===this.weight},Ir.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e&&(i=this.scoreFunction(this.content[s]))<r&&(a=s),o<e&&this.scoreFunction(this.content[o])<(null===a?r:i)&&(a=o),null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Ia=function(t){return function(){return t}};Mr.prototype={constructor:Mr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Nr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Pr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Lr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Lr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Pr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Nr(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Pr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Lr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Pr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Lr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Lr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Sa,Ta,Ma,Aa,Pa,La=[],Na=[],Ra=1e-6,Oa=1e-12;Kr.prototype={constructor:Kr,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return jr(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a=n.site,u=-1,l=e[i[o-1]],c=l.left===a?l.right:l.left;++u<o;)s=c,c=(l=e[i[u]]).left===a?l.right:l.left,s&&c&&r<s.index&&r<c.index&&Hr(a,s,c)<0&&t.push([a.data,s.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=r,null==n||c<=n*n?i.site:null}};var Da=Object.freeze({randomPosition:ri,randomPoint:ii,randomPolygon:oi,randomLineString:si}),ka=Object.freeze({getCluster:ui,clusterEach:li,clusterReduce:ci,createBins:hi,applyFilter:pi,propertiesContainsFilter:fi,filterProperties:di});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var za=function(){};za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za},za.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Fa=function(){},ja=function(){},Ba={MAX_VALUE:{configurable:!0}};ja.isNaN=function(t){return Number.isNaN(t)},ja.doubleToLongBits=function(t){return t},ja.longBitsToDouble=function(t){return t},ja.isInfinite=function(t){return!Number.isFinite(t)},Ba.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ja,Ba);var Va=function(){},qa=function(){},Ua=function(){},Ga=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Xa={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Ga.prototype.setOrdinate=function(t,e){switch(t){case Ga.X:this.x=e;break;case Ga.Y:this.y=e;break;case Ga.Z:this.z=e;break;default:throw new Fa("Invalid ordinate index: "+t)}},Ga.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!za.equalsWithTolerance(this.x,e.x,n)&&!!za.equalsWithTolerance(this.y,e.y,n)}},Ga.prototype.getOrdinate=function(t){switch(t){case Ga.X:return this.x;case Ga.Y:return this.y;case Ga.Z:return this.z}throw new Fa("Invalid ordinate index: "+t)},Ga.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||ja.isNaN(this.z))&&ja.isNaN(t.z)},Ga.prototype.equals=function(t){return t instanceof Ga&&this.equals2D(t)},Ga.prototype.equalInZ=function(t,e){return za.equalsWithTolerance(this.z,t.z,e)},Ga.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},Ga.prototype.clone=function(){},Ga.prototype.copy=function(){return new Ga(this)},Ga.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ga.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Ga.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Ga.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Ga.hashCode(this.x))+Ga.hashCode(this.y)},Ga.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Ga.prototype.interfaces_=function(){return[Va,qa,gi]},Ga.prototype.getClass=function(){return Ga},Ga.hashCode=function(){if(1===arguments.length){var t=ja.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},Xa.DimensionalComparator.get=function(){return Za},Xa.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Xa.NULL_ORDINATE.get=function(){return ja.NaN},Xa.X.get=function(){return 0},Xa.Y.get=function(){return 1},Xa.Z.get=function(){return 2},Object.defineProperties(Ga,Xa);var Za=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Fa("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Za.prototype.compare=function(t,e){var n=t,r=e,i=Za.compare(n.x,r.x);if(0!==i)return i;var o=Za.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Za.compare(n.z,r.z)},Za.prototype.interfaces_=function(){return[Ua]},Za.prototype.getClass=function(){return Za},Za.compare=function(t,e){return t<e?-1:t>e?1:ja.isNaN(t)?ja.isNaN(e)?0:-1:ja.isNaN(e)?1:0};var Ya=function(){};Ya.prototype.create=function(){},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya};var Ha=function(){},Wa={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha},Ha.toLocationSymbol=function(t){switch(t){case Ha.EXTERIOR:return"e";case Ha.BOUNDARY:return"b";case Ha.INTERIOR:return"i";case Ha.NONE:return"-"}throw new Fa("Unknown location value: "+t)},Wa.INTERIOR.get=function(){return 0},Wa.BOUNDARY.get=function(){return 1},Wa.EXTERIOR.get=function(){return 2},Wa.NONE.get=function(){return-1},Object.defineProperties(Ha,Wa);var Ka=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Ja=function(){},Qa={LOG_10:{configurable:!0}};Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja},Ja.log10=function(t){var e=Math.log(t);return ja.isInfinite(e)?e:ja.isNaN(e)?e:e/Ja.LOG_10},Ja.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Ja.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Ja.wrap=function(t,e){return t<0?e- -t%e:t%e},Ja.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},Ja.average=function(t,e){return(t+e)/2},Qa.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ja,Qa);var $a=function(t){this.str=t};$a.prototype.append=function(t){this.str+=t},$a.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},$a.prototype.toString=function(t){return this.str};var tu=function(t){this.value=t};tu.prototype.intValue=function(){return this.value},tu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},tu.isNaN=function(t){return Number.isNaN(t)};var eu=function(){};eu.isWhitespace=function(t){return t<=32&&t>=0||127===t},eu.toUpperCase=function(t){return t.toUpperCase()};var nu=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?this.init(arguments[0]):arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},ru={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};nu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},nu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=nu.magnitude(n._hi),i=nu.TEN.pow(r);(n=n.divide(i)).gt(nu.TEN)?(n=n.divide(nu.TEN),r+=1):n.lt(nu.ONE)&&(n=n.multiply(nu.TEN),r-=1);for(var o=r+1,s=new $a,a=nu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(nu.valueOf(l)).multiply(nu.TEN),c&&n.selfAdd(nu.TEN);var p=!0,f=nu.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},nu.prototype.sqr=function(){return this.multiply(this)},nu.prototype.doubleValue=function(){return this._hi+this._lo},nu.prototype.subtract=function(){return arguments[0]instanceof nu?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},nu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},nu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},nu.prototype.selfSubtract=function(){if(arguments[0]instanceof nu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},nu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},nu.prototype.min=function(t){return this.le(t)?this:t},nu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var e,n,r,i,o=arguments[0],s=null,a=null,u=null,l=null;return this._hi=l=(r=this._hi/o)+(u=(this._hi-(i=r*o)-(l=(s=(u=nu.SPLIT*r)-(s=u-r))*(a=(l=nu.SPLIT*o)-(a=l-o))-i+s*(n=o-a)+(e=r-s)*a+e*n)+this._lo-r*arguments[1])/o),this._lo=r-l+u,this}},nu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},nu.prototype.divide=function(){if(arguments[0]instanceof nu){var t,e,n,r,i=arguments[0],o=null,s=null,a=null,u=null;return t=(n=this._hi/i._hi)-(o=(a=nu.SPLIT*n)-(o=a-n)),u=o*(s=(u=nu.SPLIT*i._hi)-(s=u-i._hi))-(r=n*i._hi)+o*(e=i._hi-s)+t*s+t*e,new nu(u=n+(a=(this._hi-r-u+this._lo-n*i._lo)/i._hi),n-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return ja.isNaN(l)?nu.createNaN():nu.copy(this).selfDivide(l,0)}},nu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},nu.prototype.pow=function(t){if(0===t)return nu.valueOf(1);var e=new nu(this),n=nu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},nu.prototype.ceil=function(){if(this.isNaN())return nu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new nu(t,e)},nu.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},nu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},nu.prototype.setValue=function(){return arguments[0]instanceof nu?(this.init(arguments[0]),this):"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},nu.prototype.max=function(t){return this.ge(t)?this:t},nu.prototype.sqrt=function(){if(this.isZero())return nu.valueOf(0);if(this.isNegative())return nu.NaN;var t=1/Math.sqrt(this._hi),e=nu.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},nu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r,i,o,s=arguments[0];return this._hi=(e=(r=this._hi+s)+(o=s-(i=r-this._hi)+(this._hi-(r-i))+this._lo))+(n=o+(r-e)),this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var a,u,l,c,h=arguments[0],p=arguments[1],f=null,d=null,g=null;d=(l=this._hi+h)-(g=l-this._hi),f=(u=this._lo+p)-(c=u-this._lo);var y=(a=l+(g=(d=h-g+(this._hi-d))+u))+(g=(f=p-c+(this._lo-f))+(g+(l-a))),m=g+(a-y);return this._hi=y,this._lo=m,this}},nu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var e,n,r=arguments[0],i=null,o=null,s=null,a=null;i=(s=nu.SPLIT*this._hi)-this._hi,i=s-i;var u=(s=this._hi*r)+(a=i*(o=(a=nu.SPLIT*r)-(o=a-r))-s+i*(n=r-o)+(e=this._hi-i)*o+e*n+(this._hi*arguments[1]+this._lo*r)),l=a+(i=s-u);return this._hi=u,this._lo=l,this}},nu.prototype.selfSqr=function(){return this.selfMultiply(this)},nu.prototype.floor=function(){if(this.isNaN())return nu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new nu(t,e)},nu.prototype.negate=function(){return this.isNaN()?this:new nu(-this._hi,-this._lo)},nu.prototype.clone=function(){},nu.prototype.multiply=function(){if(arguments[0]instanceof nu){var t=arguments[0];return t.isNaN()?nu.createNaN():nu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return ja.isNaN(e)?nu.createNaN():nu.copy(this).selfMultiply(e,0)}},nu.prototype.isNaN=function(){return ja.isNaN(this._hi)},nu.prototype.intValue=function(){return Math.trunc(this._hi)},nu.prototype.toString=function(){var t=nu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},nu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;return"."===n.charAt(0)?i="0"+n:r<0?i="0."+nu.stringOfChar("0",-r)+n:-1===n.indexOf(".")&&(i=n+nu.stringOfChar("0",r-n.length)+".0"),this.isNegative()?"-"+i:i},nu.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=nu.SPLIT*n)-(i=s-n)),o=(a=nu.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new nu(u,n-u+s)},nu.prototype.toSciNotation=function(){if(this.isZero())return nu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=nu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},nu.prototype.abs=function(){return this.isNaN()?nu.NaN:this.isNegative()?this.negate():new nu(this)},nu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},nu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},nu.prototype.add=function(){if(arguments[0]instanceof nu){var t=arguments[0];return nu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nu.copy(this).selfAdd(e)}},nu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof nu){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var e=arguments[1];this._hi=arguments[0],this._lo=e}},nu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},nu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},nu.prototype.trunc=function(){return this.isNaN()?nu.NaN:this.isPositive()?this.floor():this.ceil()},nu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},nu.prototype.interfaces_=function(){return[gi,Va,qa]},nu.prototype.getClass=function(){return nu},nu.sqr=function(t){return nu.valueOf(t).selfMultiply(t)},nu.valueOf=function(){return"string"==typeof arguments[0]?nu.parse(arguments[0]):"number"==typeof arguments[0]?new nu(arguments[0]):void 0},nu.sqrt=function(t){return nu.valueOf(t).sqrt()},nu.parse=function(t){for(var e=0,n=t.length;eu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new nu,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,eu.isDigit(l)){var c=l-"0";o.selfMultiply(nu.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=tu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var d=nu.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=nu.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},nu.createNaN=function(){return new nu(ja.NaN,ja.NaN)},nu.copy=function(t){return new nu(t)},nu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},nu.stringOfChar=function(t,e){for(var n=new $a,r=0;r<e;r++)n.append(t);return n.toString()},ru.PI.get=function(){return new nu(3.141592653589793,1.2246467991473532e-16)},ru.TWO_PI.get=function(){return new nu(6.283185307179586,2.4492935982947064e-16)},ru.PI_2.get=function(){return new nu(1.5707963267948966,6.123233995736766e-17)},ru.E.get=function(){return new nu(2.718281828459045,1.4456468917292502e-16)},ru.NaN.get=function(){return new nu(ja.NaN,ja.NaN)},ru.EPS.get=function(){return 1.23259516440783e-32},ru.SPLIT.get=function(){return 134217729},ru.MAX_PRINT_DIGITS.get=function(){return 32},ru.TEN.get=function(){return nu.valueOf(10)},ru.ONE.get=function(){return nu.valueOf(1)},ru.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},ru.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(nu,ru);var iu=function(){},ou={DP_SAFE_EPSILON:{configurable:!0}};iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu},iu.orientationIndex=function(t,e,n){var r=iu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=nu.valueOf(e.x).selfAdd(-t.x),o=nu.valueOf(e.y).selfAdd(-t.y),s=nu.valueOf(n.x).selfAdd(-e.x),a=nu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},iu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},iu.intersection=function(t,e,n,r){var i=nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(nu.valueOf(e.x).selfSubtract(t.x)),o=nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(nu.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(nu.valueOf(t.y).selfSubtract(n.y)),u=nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(nu.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=nu.valueOf(t.x).selfAdd(nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(nu.valueOf(t.y).selfSubtract(n.y)),p=nu.valueOf(e.y).selfSubtract(t.y).selfMultiply(nu.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=nu.valueOf(n.y).selfAdd(nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new Ga(c,d)},iu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return iu.signum(s);r=i+o}else{if(!(i<0))return iu.signum(s);if(o>=0)return iu.signum(s);r=-i-o}var a=iu.DP_SAFE_EPSILON*r;return s>=a||-s>=a?iu.signum(s):2},iu.signum=function(t){return t>0?1:t<0?-1:0},ou.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(iu,ou);var su=function(){},au={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};au.X.get=function(){return 0},au.Y.get=function(){return 1},au.Z.get=function(){return 2},au.M.get=function(){return 3},su.prototype.setOrdinate=function(t,e,n){},su.prototype.size=function(){},su.prototype.getOrdinate=function(t,e){},su.prototype.getCoordinate=function(){},su.prototype.getCoordinateCopy=function(t){},su.prototype.getDimension=function(){},su.prototype.getX=function(t){},su.prototype.clone=function(){},su.prototype.expandEnvelope=function(t){},su.prototype.copy=function(){},su.prototype.getY=function(t){},su.prototype.toCoordinateArray=function(){},su.prototype.interfaces_=function(){return[qa]},su.prototype.getClass=function(){return su},Object.defineProperties(su,au);var uu=function(){},lu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uu),cu=function(){};cu.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},cu.getProperty=function(t){return{"line.separator":"\n"}[t]};var hu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1];this.x=arguments[0],this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof Ga&&arguments[1]instanceof Ga){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[1],u=arguments[2];this.x=arguments[0],this.y=a,this.w=u}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=l.y-c.y,d=c.x-l.x,g=l.x*c.y-c.x*l.y,y=h.y-p.y,m=p.x-h.x,_=h.x*p.y-p.x*h.y;this.x=d*_-m*g,this.y=y*g-f*_,this.w=f*m-y*d}};hu.prototype.getY=function(){var t=this.y/this.w;if(ja.isNaN(t)||ja.isInfinite(t))throw new lu;return t},hu.prototype.getX=function(){var t=this.x/this.w;if(ja.isNaN(t)||ja.isInfinite(t))throw new lu;return t},hu.prototype.getCoordinate=function(){var t=new Ga;return t.x=this.getX(),t.y=this.getY(),t},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu},hu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-a*o,h=(o*l-u*s)/c,p=(a*s-i*l)/c;if(ja.isNaN(h)||ja.isInfinite(h)||ja.isNaN(p)||ja.isInfinite(p))throw new lu;return new Ga(h,p)};var pu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof Ga){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},fu={serialVersionUID:{configurable:!0}};pu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},pu.prototype.equals=function(t){if(!(t instanceof pu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},pu.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new pu:new pu(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},pu.prototype.isNull=function(){return this._maxx<this._minx},pu.prototype.getMaxX=function(){return this._maxx},pu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Ga){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof pu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},pu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof pu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Ga){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},pu.prototype.getMinY=function(){return this._miny},pu.prototype.getMinX=function(){return this._minx},pu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Ga){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof pu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},pu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},pu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},pu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},pu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},pu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},pu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},pu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},pu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},pu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},pu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof pu)return this.covers(arguments[0]);if(arguments[0]instanceof Ga)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},pu.prototype.centre=function(){return this.isNull()?null:new Ga((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},pu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Ga){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof pu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},pu.prototype.getMaxY=function(){return this._maxy},pu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},pu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Ga.hashCode(this._minx))+Ga.hashCode(this._maxx))+Ga.hashCode(this._miny))+Ga.hashCode(this._maxy)},pu.prototype.interfaces_=function(){return[Va,gi]},pu.prototype.getClass=function(){return pu},pu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<a))}},fu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(pu,fu);var du={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},gu=function(t){this.geometryFactory=t||new Fl};gu.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var r=du.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=du.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),mu[n]&&(e=mu[n].apply(this,[r[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},gu.prototype.write=function(t){return this.extractGeometry(t)},gu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!yu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+yu[e].apply(this,[t])+")"};var yu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return yu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+yu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(yu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(yu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+yu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+yu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+yu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+yu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},mu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(du.spaces);return this.geometryFactory.createPoint(new Ga(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(mu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(du.spaces),r.push(new Ga(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(du.spaces),r.push(new Ga(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(du.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(mu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(du.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(du.trimParens,"$1"),n=mu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(du.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(mu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},_u=function(t){this.parser=new gu(t)};_u.prototype.write=function(t){return this.parser.write(t)},_u.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var vu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),xu=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vu),bu=function(){};bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.shouldNeverReachHere=function(){if(0===arguments.length)bu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new xu("Should never reach here"+(null!==t?": "+t:""))}},bu.isTrue=function(){var t;if(1===arguments.length)bu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new xu:new xu(t)},bu.equals=function(){var t,e,n;if(2===arguments.length)bu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new xu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var wu=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ga,this._intPt[1]=new Ga,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Eu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};wu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},wu.prototype.getTopologySummary=function(){var t=new $a;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},wu.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},wu.prototype.getIntersectionNum=function(){return this._result},wu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},wu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},wu.prototype.setPrecisionModel=function(t){this._precisionModel=t},wu.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},wu.prototype.getIntersection=function(t){return this._intPt[t]},wu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},wu.prototype.hasIntersection=function(){return this._result!==wu.NO_INTERSECTION},wu.prototype.getEdgeDistance=function(t,e){return wu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},wu.prototype.isCollinear=function(){return this._result===wu.COLLINEAR_INTERSECTION},wu.prototype.toString=function(){return _u.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+_u.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},wu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},wu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},wu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},wu.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return bu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},wu.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return bu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Eu.DONT_INTERSECT.get=function(){return 0},Eu.DO_INTERSECT.get=function(){return 1},Eu.COLLINEAR.get=function(){return 2},Eu.NO_INTERSECTION.get=function(){return 0},Eu.POINT_INTERSECTION.get=function(){return 1},Eu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(wu,Eu);var Cu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new pu(this._inputLines[0][0],this._inputLines[0][1]),n=new pu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,pu.intersects(n,r,e)&&0===Tu.orientationIndex(n,r,e)&&0===Tu.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=hu.intersection(t,n,r,i)}catch(s){if(!(s instanceof lu))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new Ga(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=iu.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);cu.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&cu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Ga(t),o=new Ga(e),s=new Ga(n),a=new Ga(r),u=new Ga;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=pu.intersects(e,n,r),s=pu.intersects(e,n,i),a=pu.intersects(r,i,e),u=pu.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((s>c?s:c)+(u<p?u:p))/2;i.x=((o>l?o:l)+(a<h?a:h))/2,i.y=f,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!pu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Tu.orientationIndex(e,n,r),s=Tu.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Tu.orientationIndex(r,i,e),u=Tu.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new Ga(r):0===s?this._intPt[0]=new Ga(i):0===a?this._intPt[0]=new Ga(e):0===u&&(this._intPt[0]=new Ga(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Tu.distancePointLine(t,n,r),s=Tu.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Tu.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Tu.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(wu),Iu=function(){};Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.orientationIndex=function(t,e,n){return Iu.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},Iu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Su=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Su.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.y-this._p.y,o=e.y-this._p.y,s=Iu.signOfDet2x2(t.x-this._p.x,i,e.x-this._p.x,o);if(0===s)return this._isPointOnSegment=!0,null;o<i&&(s=-s),s>0&&this._crossingCount++}},Su.prototype.isPointInPolygon=function(){return this.getLocation()!==Ha.EXTERIOR},Su.prototype.getLocation=function(){return this._isPointOnSegment?Ha.BOUNDARY:this._crossingCount%2==1?Ha.INTERIOR:Ha.EXTERIOR},Su.prototype.isOnSegment=function(){return this._isPointOnSegment},Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.locatePointInRing=function(){if(arguments[0]instanceof Ga&&Ka(arguments[1],su)){for(var t=arguments[1],e=new Su(arguments[0]),n=new Ga,r=new Ga,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof Ga&&arguments[1]instanceof Array){for(var o=arguments[1],s=new Su(arguments[0]),a=1;a<o.length;a++)if(s.countSegment(o[a],o[a-1]),s.isOnSegment())return s.getLocation();return s.getLocation()}};var Tu=function(){},Mu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu},Tu.orientationIndex=function(t,e,n){return iu.orientationIndex(t,e,n)},Tu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++)e+=(t[r].x-n)*(t[r-1].y-t[r+1].y);return e/2}if(Ka(arguments[0],su)){var i=arguments[0],o=i.size();if(o<3)return 0;var s=new Ga,a=new Ga,u=new Ga;i.getCoordinate(0,a),i.getCoordinate(1,u);var l=a.x;u.x-=l;for(var c=0,h=1;h<o-1;h++)s.y=a.y,a.x=u.x,a.y=u.y,i.getCoordinate(h+1,u),u.x-=l,c+=a.x*(s.y-u.y);return c/2}},Tu.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Tu.distancePointLine(t,n,r);if(n.equals(r))return Tu.distancePointLine(r,t,e);var i=!1;if(pu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,a=((t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y))/o;(a<0||a>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Ja.min(Tu.distancePointLine(t,n,r),Tu.distancePointLine(e,n,r),Tu.distancePointLine(n,t,e),Tu.distancePointLine(r,t,e)):0},Tu.isPointInRing=function(t,e){return Tu.locatePointInRing(t,e)!==Ha.EXTERIOR},Tu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Ga;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n},Tu.isCCW=function(t){var e=t.length-1;if(e<3)throw new Fa("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=Tu.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},Tu.locatePointInRing=function(t,e){return Su.locatePointInRing(t,e)},Tu.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r)*Math.sqrt(r)},Tu.computeOrientation=function(t,e,n){return Tu.orientationIndex(t,e,n)},Tu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Fa("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Tu.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;return l<=0?o.distance(s):l>=1?o.distance(a):Math.abs(((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u)*Math.sqrt(u)}},Tu.isOnLine=function(t,e){for(var n=new Cu,r=1;r<e.length;r++)if(n.computeIntersection(t,e[r-1],e[r]),n.hasIntersection())return!0;return!1},Mu.CLOCKWISE.get=function(){return-1},Mu.RIGHT.get=function(){return Tu.CLOCKWISE},Mu.COUNTERCLOCKWISE.get=function(){return 1},Mu.LEFT.get=function(){return Tu.COUNTERCLOCKWISE},Mu.COLLINEAR.get=function(){return 0},Mu.STRAIGHT.get=function(){return Tu.COLLINEAR},Object.defineProperties(Tu,Mu);var Au=function(){};Au.prototype.filter=function(t){},Au.prototype.interfaces_=function(){return[]},Au.prototype.getClass=function(){return Au};var Pu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Lu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Pu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Pu.SORTINDEX_GEOMETRYCOLLECTION},Pu.prototype.getFactory=function(){return this._factory},Pu.prototype.getGeometryN=function(t){return this},Pu.prototype.getArea=function(){return 0},Pu.prototype.isRectangle=function(){return!1},Pu.prototype.equals=function(){if(arguments[0]instanceof Pu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof Pu&&this.equalsExact(e)}},Pu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Pu.prototype.geometryChanged=function(){this.apply(Pu.geometryChangedFilter)},Pu.prototype.geometryChangedAction=function(){this._envelope=null},Pu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Pu.prototype.getLength=function(){return 0},Pu.prototype.getNumGeometries=function(){return 1},Pu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Pu.prototype.getUserData=function(){return this._userData},Pu.prototype.getSRID=function(){return this._SRID},Pu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Pu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Pu.SORTINDEX_GEOMETRYCOLLECTION)throw new Fa("This method does not support GeometryCollection arguments")},Pu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Pu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Pu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Pu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new pu(this._envelope)},Pu.prototype.setSRID=function(t){this._SRID=t},Pu.prototype.setUserData=function(t){this._userData=t},Pu.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Pu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Pu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Pu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Pu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Pu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Pu.SORTINDEX_MULTIPOLYGON},Pu.prototype.interfaces_=function(){return[qa,Va,gi]},Pu.prototype.getClass=function(){return Pu},Pu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Pu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Lu.serialVersionUID.get=function(){return 0x799ea46522854c00},Lu.SORTINDEX_POINT.get=function(){return 0},Lu.SORTINDEX_MULTIPOINT.get=function(){return 1},Lu.SORTINDEX_LINESTRING.get=function(){return 2},Lu.SORTINDEX_LINEARRING.get=function(){return 3},Lu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Lu.SORTINDEX_POLYGON.get=function(){return 5},Lu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Lu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Lu.geometryChangedFilter.get=function(){return Nu},Object.defineProperties(Pu,Lu);var Nu=function(){};Nu.interfaces_=function(){return[Au]},Nu.filter=function(t){t.geometryChangedAction()};var Ru=function(){};Ru.prototype.filter=function(t){},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru};var Ou=function(){},Du={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Ou.prototype.isInBoundary=function(t){},Ou.prototype.interfaces_=function(){return[]},Ou.prototype.getClass=function(){return Ou},Du.Mod2BoundaryNodeRule.get=function(){return ku},Du.EndPointBoundaryNodeRule.get=function(){return zu},Du.MultiValentEndPointBoundaryNodeRule.get=function(){return Fu},Du.MonoValentEndPointBoundaryNodeRule.get=function(){return ju},Du.MOD2_BOUNDARY_RULE.get=function(){return new ku},Du.ENDPOINT_BOUNDARY_RULE.get=function(){return new zu},Du.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Fu},Du.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ju},Du.OGC_SFS_BOUNDARY_RULE.get=function(){return Ou.MOD2_BOUNDARY_RULE},Object.defineProperties(Ou,Du);var ku=function(){};ku.prototype.isInBoundary=function(t){return t%2==1},ku.prototype.interfaces_=function(){return[Ou]},ku.prototype.getClass=function(){return ku};var zu=function(){};zu.prototype.isInBoundary=function(t){return t>0},zu.prototype.interfaces_=function(){return[Ou]},zu.prototype.getClass=function(){return zu};var Fu=function(){};Fu.prototype.isInBoundary=function(t){return t>1},Fu.prototype.interfaces_=function(){return[Ou]},Fu.prototype.getClass=function(){return Fu};var ju=function(){};ju.prototype.isInBoundary=function(t){return 1===t},ju.prototype.interfaces_=function(){return[Ou]},ju.prototype.getClass=function(){return ju};var Bu=function(){};Bu.prototype.add=function(){},Bu.prototype.addAll=function(){},Bu.prototype.isEmpty=function(){},Bu.prototype.iterator=function(){},Bu.prototype.size=function(){},Bu.prototype.toArray=function(){},Bu.prototype.remove=function(){};var Vu=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),qu=function(){};qu.prototype.hasNext=function(){},qu.prototype.next=function(){},qu.prototype.remove=function(){};var Uu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Bu);(yi.prototype=new Error).name="NoSuchElementException";var Gu=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Bu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Bu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Xu(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Vu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Uu),Xu=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new yi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(qu),Zu=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof Ga&&"boolean"==typeof arguments[1]){var e=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(e))return null;t.prototype.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];if(arguments[2])for(var i=0;i<n.length;i++)this.add(n[i],r);else for(var o=n.length-1;o>=0;o--)this.add(n[o],r);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ga){var s=arguments[0],a=arguments[1];if(!arguments[2]){var u=this.size();if(u>0){if(s>0&&this.get(s-1).equals2D(a))return null;if(s<u&&this.get(s).equals2D(a))return null}}t.prototype.add.call(this,s,a)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=1;h>p&&(f=-1);for(var d=h;d!==p;d+=f)this.add(l[d],c);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Ga(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Gu),Yu=function(){},Hu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Hu.ForwardComparator.get=function(){return Wu},Hu.BidirectionalComparator.get=function(){return Ku},Hu.coordArrayType.get=function(){return new Array(0).fill(null)},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu},Yu.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Yu.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Yu.indexOf(r,e)<0)return r}return null},Yu.scroll=function(t,e){var n=Yu.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);cu.arraycopy(t,n,r,0,t.length-n),cu.arraycopy(t,0,r,t.length-n,n),cu.arraycopy(r,0,t,0,t.length)},Yu.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Yu.intersection=function(t,e){for(var n=new Zu,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Yu.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Yu.removeRepeatedPoints=function(t){return Yu.hasRepeatedPoints(t)?new Zu(t,!1).toCoordinateArray():t},Yu.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Yu.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Yu.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Ga(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new Ga(r[i+u])},Yu.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Yu.envelope=function(t){for(var e=new pu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Yu.toCoordinateArray=function(t){return t.toArray(Yu.coordArrayType)},Yu.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Yu.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Yu.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},Yu.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Yu.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Yu.extract=function(t,e,n){e=Ja.clamp(e,0,t.length);var r=(n=Ja.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Yu,Hu);var Wu=function(){};Wu.prototype.compare=function(t,e){return Yu.compare(t,e)},Wu.prototype.interfaces_=function(){return[Ua]},Wu.prototype.getClass=function(){return Wu};var Ku=function(){};Ku.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Yu.compare(n,r);return Yu.isEqualReversed(n,r)?0:i},Ku.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Yu.increasingDirection(n),o=Yu.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},Ku.prototype.interfaces_=function(){return[Ua]},Ku.prototype.getClass=function(){return Ku};var Ju=function(){};Ju.prototype.get=function(){},Ju.prototype.put=function(){},Ju.prototype.size=function(){},Ju.prototype.values=function(){},Ju.prototype.entrySet=function(){};var Qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ju);(mi.prototype=new Error).name="OperationNotSupported",(_i.prototype=new Bu).contains=function(){};var $u=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Bu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new tl(this)},e}(_i),tl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new yi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new mi},e}(qu),el=0;(Ci.prototype=new Qu).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Ci.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:el,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:el,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Ci.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(xi(t)===wi(xi(xi(t)))){var e=Ei(xi(xi(t)));1===vi(e)?(bi(xi(t),el),bi(e,el),bi(xi(xi(t)),1),t=xi(xi(t))):(t===Ei(xi(t))&&(t=xi(t),this.rotateLeft(t)),bi(xi(t),el),bi(xi(xi(t)),1),this.rotateRight(xi(xi(t))))}else{var n=wi(xi(xi(t)));1===vi(n)?(bi(xi(t),el),bi(n,el),bi(xi(xi(t)),1),t=xi(xi(t))):(t===wi(xi(t))&&(t=xi(t),this.rotateRight(t)),bi(xi(t),el),bi(xi(xi(t)),1),this.rotateLeft(xi(xi(t))))}this.root_.color=el},Ci.prototype.values=function(){var t=new Gu,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Ci.successor(e));)t.add(e.value);return t},Ci.prototype.entrySet=function(){var t=new $u,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Ci.successor(e));)t.add(e);return t},Ci.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Ci.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Ci.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ci.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Ci.prototype.size=function(){return this.size_};var nl=function(){};nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},Ii.prototype=new _i,(Si.prototype=new Ii).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Si.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Si.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Si.prototype.remove=function(t){throw new mi},Si.prototype.size=function(){return this.array_.length},Si.prototype.isEmpty=function(){return 0===this.array_.length},Si.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Si.prototype.iterator=function(){return new rl(this)};var rl=function(t){this.treeSet_=t,this.position_=0};rl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new yi;return this.treeSet_.array_[this.position_++]},rl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},rl.prototype.remove=function(){throw new mi};var il=function(){};il.sort=function(){var t,e,n,r=arguments[0];if(1===arguments.length)r.sort(function(t,e){return t.compareTo(e)});else if(2===arguments.length)n=arguments[1],r.sort(function(t,e){return n.compare(t,e)});else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var i=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<i.length;t++)r.push(i[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],e.sort(function(t,e){return n.compare(t,e)}),i=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<i.length;t++)r.push(i[t])},il.asList=function(t){for(var e=new Gu,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var ol=function(){},sl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};sl.P.get=function(){return 0},sl.L.get=function(){return 1},sl.A.get=function(){return 2},sl.FALSE.get=function(){return-1},sl.TRUE.get=function(){return-2},sl.DONTCARE.get=function(){return-3},sl.SYM_FALSE.get=function(){return"F"},sl.SYM_TRUE.get=function(){return"T"},sl.SYM_DONTCARE.get=function(){return"*"},sl.SYM_P.get=function(){return"0"},sl.SYM_L.get=function(){return"1"},sl.SYM_A.get=function(){return"2"},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.toDimensionSymbol=function(t){switch(t){case ol.FALSE:return ol.SYM_FALSE;case ol.TRUE:return ol.SYM_TRUE;case ol.DONTCARE:return ol.SYM_DONTCARE;case ol.P:return ol.SYM_P;case ol.L:return ol.SYM_L;case ol.A:return ol.SYM_A}throw new Fa("Unknown dimension value: "+t)},ol.toDimensionValue=function(t){switch(eu.toUpperCase(t)){case ol.SYM_FALSE:return ol.FALSE;case ol.SYM_TRUE:return ol.TRUE;case ol.SYM_DONTCARE:return ol.DONTCARE;case ol.SYM_P:return ol.P;case ol.SYM_L:return ol.L;case ol.SYM_A:return ol.A}throw new Fa("Unknown dimension symbol: "+t)},Object.defineProperties(ol,sl);var al=function(){};al.prototype.filter=function(t){},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al};var ul=function(){};ul.prototype.filter=function(t,e){},ul.prototype.isDone=function(){},ul.prototype.isGeometryChanged=function(){},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var ll=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Fa("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new pu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();il.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=ol.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=ol.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Si(il.asList(this._geometries)),n=new Si(il.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=i.getGeometryN(a),c=u.compareToSameClass(l,r);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(Ka(arguments[0],Ru))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Ka(arguments[0],ul)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Ka(arguments[0],al)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Ka(arguments[0],Au)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),bu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Pu),cl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ol.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new hl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[nl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(ll),hl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Ou.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};hl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},hl.prototype.getBoundary=function(){return this._geom instanceof yl?this.boundaryLineString(this._geom):this._geom instanceof cl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},hl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},hl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},hl.prototype.computeBoundaryCoordinates=function(t){var e=new Gu;this._endpointMap=new Ci;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Yu.toCoordinateArray(e)},hl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new pl,this._endpointMap.put(t,e)),e.count++},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.getBoundary=function(){return 1===arguments.length?new hl(arguments[0]).getBoundary():2===arguments.length?new hl(arguments[0],arguments[1]).getBoundary():void 0};var pl=function(){this.count=null};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl};var fl=function(){},dl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},fl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[1],i="",o=new function(){}(new function(){}(fl.getStackTrace(arguments[0]))),s=0;s<r;s++)try{i+=o.readLine()+fl.NEWLINE}catch(t){if(!(t instanceof Ti))throw t;bu.shouldNeverReachHere()}return i}},fl.split=function(t,e){for(var n=e.length,r=new Gu,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},fl.toString=function(){if(1===arguments.length)return fl.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},fl.spaces=function(t){return fl.chars(" ",t)},dl.NEWLINE.get=function(){return cu.getProperty("line.separator")},dl.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(fl,dl);var gl=function(){};gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},gl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,su.X)===t.getOrdinate(e-1,su.X)&&t.getOrdinate(0,su.Y)===t.getOrdinate(e-1,su.Y)},gl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||ja.isNaN(s)&&ja.isNaN(a)))return!1}return!0},gl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(gl.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)gl.copy(e,i-1,r,o,1);return r},gl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)gl.swap(t,r,e-r)},gl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},gl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)gl.copyCoord(t,e+o,n,r+o)},gl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new $a;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(fl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},gl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?gl.createClosedRing(t,e,4):e.getOrdinate(0,su.X)===e.getOrdinate(n-1,su.X)&&e.getOrdinate(0,su.Y)===e.getOrdinate(n-1,su.Y)?e:gl.createClosedRing(t,e,n+1)},gl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();gl.copy(e,0,r,0,i);for(var o=i;o<n;o++)gl.copy(e,0,r,o,1);return r};var yl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new pu:this._points.expandEnvelope(new pu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&gl.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ol.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Tu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return gl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(Ka(arguments[0],Ru))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Ka(arguments[0],ul)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Ka(arguments[0],al)?arguments[0].filter(this):Ka(arguments[0],Au)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new hl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Fa("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[nl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Pu),ml=function(){};ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml};var _l=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new pu;var t=new pu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return ol.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(Ka(arguments[0],Ru)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Ka(arguments[0],ul)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Ka(arguments[0],al)?arguments[0].filter(this):Ka(arguments[0],Au)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),bu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[ml]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Pu),vl=function(){};vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};var xl=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new Fa("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new Fa("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Tu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Tu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(!this._shell.equalsExact(r._shell,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var i=0;i<this._holes.length;i++)if(!this._holes[i].equalsExact(r._holes[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);il.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);cu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Yu.minCoordinate(e.getCoordinates());Yu.scroll(r,i),cu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Tu.isCCW(e.getCoordinates())===n&&Yu.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var t=arguments[1],e=arguments[0],n=this._shell.compareToSameClass(e._shell,t);if(0!==n)return n;for(var r=this.getNumInteriorRing(),i=e.getNumInteriorRing(),o=0;o<r&&o<i;){var s=this.getInteriorRingN(o),a=e.getInteriorRingN(o),u=s.compareToSameClass(a,t);if(0!==u)return u;o++}return o<r?1:o<i?-1:0}},e.prototype.apply=function(t){if(Ka(t,Ru)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Ka(t,ul)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Ka(t,al))t.filter(this);else if(Ka(t,Au)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[vl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Pu),bl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return ol.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[ml]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(ll),wl=function(t){function e(e,n){e instanceof Ga&&n instanceof Fl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return ol.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return gl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Fa("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Fa("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(yl),El=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Gu,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[vl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(ll),Cl=function(t){this._factory=t||null,this._isUserDataCopied=!1},Il={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Cl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Cl.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Cl.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ll?this.editGeometryCollection(t,e):t instanceof xl?this.editPolygon(t,e):t instanceof _l?e.edit(t,this._factory):t instanceof yl?e.edit(t,this._factory):(bu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Cl.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Gu,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===bl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===cl?this._factory.createMultiLineString(r.toArray([])):n.getClass()===El?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Cl.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Gu,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.GeometryEditorOperation=function(){},Il.NoOpGeometryOperation.get=function(){return Sl},Il.CoordinateOperation.get=function(){return Tl},Il.CoordinateSequenceOperation.get=function(){return Ml},Object.defineProperties(Cl,Il);var Sl=function(){};Sl.prototype.edit=function(t,e){return t},Sl.prototype.interfaces_=function(){return[Cl.GeometryEditorOperation]},Sl.prototype.getClass=function(){return Sl};var Tl=function(){};Tl.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof wl?e.createLinearRing(n):t instanceof yl?e.createLineString(n):t instanceof _l?n.length>0?e.createPoint(n[0]):e.createPoint():t},Tl.prototype.interfaces_=function(){return[Cl.GeometryEditorOperation]},Tl.prototype.getClass=function(){return Tl};var Ml=function(){};Ml.prototype.edit=function(t,e){return t instanceof wl?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof yl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof _l?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Ml.prototype.interfaces_=function(){return[Cl.GeometryEditorOperation]},Ml.prototype.getClass=function(){return Ml};var Al=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Ga}else if(Ka(arguments[0],su)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new Ga}},Pl={serialVersionUID:{configurable:!0}};Al.prototype.setOrdinate=function(t,e,n){switch(e){case su.X:this._coordinates[t].x=n;break;case su.Y:this._coordinates[t].y=n;break;case su.Z:this._coordinates[t].z=n;break;default:throw new Fa("invalid ordinateIndex")}},Al.prototype.size=function(){return this._coordinates.length},Al.prototype.getOrdinate=function(t,e){switch(e){case su.X:return this._coordinates[t].x;case su.Y:return this._coordinates[t].y;case su.Z:return this._coordinates[t].z}return ja.NaN},Al.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}},Al.prototype.getCoordinateCopy=function(t){return new Ga(this._coordinates[t])},Al.prototype.getDimension=function(){return this._dimension},Al.prototype.getX=function(t){return this._coordinates[t].x},Al.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Al(t,this._dimension)},Al.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Al.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Al(t,this._dimension)},Al.prototype.toString=function(){if(this._coordinates.length>0){var t=new $a(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Al.prototype.getY=function(t){return this._coordinates[t].y},Al.prototype.toCoordinateArray=function(){return this._coordinates},Al.prototype.interfaces_=function(){return[su,gi]},Al.prototype.getClass=function(){return Al},Pl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Al,Pl);var Ll=function(){},Nl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ll.prototype.readResolve=function(){return Ll.instance()},Ll.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Al(arguments[0]);if(Ka(arguments[0],su))return new Al(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Al(t):new Al(t,e)}},Ll.prototype.interfaces_=function(){return[Ya,gi]},Ll.prototype.getClass=function(){return Ll},Ll.instance=function(){return Ll.instanceObject},Nl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Nl.instanceObject.get=function(){return new Ll},Object.defineProperties(Ll,Nl);var Rl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Gu,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new $u;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Ju),Ol=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof kl){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Dl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ol.prototype.equals=function(t){return t instanceof Ol&&this._modelType===t._modelType&&this._scale===t._scale},Ol.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new tu(n).compareTo(new tu(r))},Ol.prototype.getScale=function(){return this._scale},Ol.prototype.isFloating=function(){return this._modelType===Ol.FLOATING||this._modelType===Ol.FLOATING_SINGLE},Ol.prototype.getType=function(){return this._modelType},Ol.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Ol.FLOATING?t="Floating":this._modelType===Ol.FLOATING_SINGLE?t="Floating-Single":this._modelType===Ol.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Ol.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return ja.isNaN(t)?t:this._modelType===Ol.FLOATING_SINGLE?t:this._modelType===Ol.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Ga){var e=arguments[0];if(this._modelType===Ol.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Ol.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Ol.FLOATING?t=16:this._modelType===Ol.FLOATING_SINGLE?t=6:this._modelType===Ol.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Ol.prototype.setScale=function(t){this._scale=Math.abs(t)},Ol.prototype.interfaces_=function(){return[gi,Va]},Ol.prototype.getClass=function(){return Ol},Ol.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Dl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Dl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ol,Dl);var kl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},zl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};kl.prototype.readResolve=function(){return kl.nameToTypeMap.get(this._name)},kl.prototype.toString=function(){return this._name},kl.prototype.interfaces_=function(){return[gi]},kl.prototype.getClass=function(){return kl},zl.serialVersionUID.get=function(){return-552860263173159e4},zl.nameToTypeMap.get=function(){return new Rl},Object.defineProperties(kl,zl),Ol.Type=kl,Ol.FIXED=new kl("FIXED"),Ol.FLOATING=new kl("FLOATING"),Ol.FLOATING_SINGLE=new kl("FLOATING SINGLE");var Fl=function t(){this._precisionModel=new Ol,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Ka(arguments[0],Ya)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ol&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},jl={serialVersionUID:{configurable:!0}};Fl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Ga(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Ga(t.getMinX(),t.getMinY()),new Ga(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Ga(t.getMinX(),t.getMinY()),new Ga(t.getMinX(),t.getMaxY()),new Ga(t.getMaxX(),t.getMaxY()),new Ga(t.getMaxX(),t.getMinY()),new Ga(t.getMinX(),t.getMinY())]),null)},Fl.prototype.createLineString=function(t){return t?t instanceof Array?new yl(this.getCoordinateSequenceFactory().create(t),this):Ka(t,su)?new yl(t,this):void 0:new yl(this.getCoordinateSequenceFactory().create([]),this)},Fl.prototype.createMultiLineString=function(){return 0===arguments.length?new cl(null,this):1===arguments.length?new cl(arguments[0],this):void 0},Fl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Fl.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof xl)return this.createMultiPolygon(Fl.toPolygonArray(t));if(a instanceof yl)return this.createMultiLineString(Fl.toLineStringArray(t));if(a instanceof _l)return this.createMultiPoint(Fl.toPointArray(t));bu.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Fl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Fl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Ga){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ka(arguments[0],su))return new _l(arguments[0],this)}},Fl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Fl.prototype.createPolygon=function(){if(0===arguments.length)return new xl(null,null,this);if(1===arguments.length){if(Ka(arguments[0],su))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof wl)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new xl(arguments[0],arguments[1],this)},Fl.prototype.getSRID=function(){return this._SRID},Fl.prototype.createGeometryCollection=function(){return 0===arguments.length?new ll(null,this):1===arguments.length?new ll(arguments[0],this):void 0},Fl.prototype.createGeometry=function(t){return new Cl(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},Fl.prototype.getPrecisionModel=function(){return this._precisionModel},Fl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ka(arguments[0],su))return new wl(arguments[0],this)}},Fl.prototype.createMultiPolygon=function(){return 0===arguments.length?new El(null,this):1===arguments.length?new El(arguments[0],this):void 0},Fl.prototype.createMultiPoint=function(){if(0===arguments.length)return new bl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new bl(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ka(arguments[0],su)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());gl.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},Fl.prototype.interfaces_=function(){return[gi]},Fl.prototype.getClass=function(){return Fl},Fl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.getDefaultCoordinateSequenceFactory=function(){return Ll.instance()},Fl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},jl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Fl,jl);var Bl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Vl=function(t){this.geometryFactory=t||new Fl};Vl.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!ql[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Bl.indexOf(n)?ql[n].apply(this,[e.coordinates]):ql[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},Vl.prototype.write=function(t){var e=t.getGeometryType();if(!Ul[e])throw new Error("Geometry is not supported");return Ul[e].apply(this,[t])};var ql={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!ql[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ql.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Ga(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Ga(t[0],t[1]),new Ga(t[2],t[1]),new Ga(t[2],t[3]),new Ga(t[0],t[3]),new Ga(t[0],t[1])])},Point:function(t){var e=new Ga(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ql.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ql.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ql.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ql.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=ql.coordinates.apply(this,[t[i]]),s=this.geometryFactory.createLinearRing(o);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ql.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Ul={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ul.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Ul.Point.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r)e.push(Ul.coordinate.apply(this,[n[r]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Ul.LineString.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ul.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=Ul.LineString.apply(this,[t._holes[r]]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Ul.Polygon.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ul[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Gl=function(t){this.geometryFactory=t||new Fl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Vl(this.geometryFactory)};Gl.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ol.FIXED&&this.reducePrecision(e),e},Gl.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Xl=function(){this.parser=new Vl(this.geometryFactory)};Xl.prototype.write=function(t){return this.parser.write(t)};var Zl=function(){},Yl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl},Zl.opposite=function(t){return t===Zl.LEFT?Zl.RIGHT:t===Zl.RIGHT?Zl.LEFT:t},Yl.ON.get=function(){return 0},Yl.LEFT.get=function(){return 1},Yl.RIGHT.get=function(){return 2},Object.defineProperties(Zl,Yl),(Mi.prototype=new Error).name="EmptyStackException",(Ai.prototype=new Uu).add=function(t){return this.array_.push(t),!0},Ai.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Ai.prototype.push=function(t){return this.array_.push(t),t},Ai.prototype.pop=function(t){if(0===this.array_.length)throw new Mi;return this.array_.pop()},Ai.prototype.peek=function(){if(0===this.array_.length)throw new Mi;return this.array_[this.array_.length-1]},Ai.prototype.empty=function(){return 0===this.array_.length},Ai.prototype.isEmpty=function(){return this.empty()},Ai.prototype.search=function(t){return this.array_.indexOf(t)},Ai.prototype.size=function(){return this.array_.length},Ai.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Hl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Hl.prototype.getCoordinate=function(){return this._minCoord},Hl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Hl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();bu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Tu.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Tu.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Tu.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Hl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Zl.LEFT;return n[e].y<n[e+1].y&&(r=Zl.RIGHT),r},Hl.prototype.getEdge=function(){return this._orientedDe},Hl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Hl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Hl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}bu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Zl.LEFT&&(this._orientedDe=this._minDe.getSym())},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var Wl=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Ga(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(vu),Kl=function(){this.array_=[]};Kl.prototype.addLast=function(t){this.array_.push(t)},Kl.prototype.removeFirst=function(){return this.array_.shift()},Kl.prototype.isEmpty=function(){return 0===this.array_.length};var Jl=function(){this._finder=null,this._dirEdgeList=new Gu,this._nodes=new Gu,this._rightMostCoord=null,this._env=null,this._finder=new Hl};Jl.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Jl.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Jl.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Wl("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Jl.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Zl.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Jl.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Jl.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Zl.RIGHT)>=1&&e.getDepth(Zl.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Jl.prototype.computeDepths=function(t){var e=new $u,n=new Kl,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Jl.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Jl.prototype.getEnvelope=function(){if(null===this._env){for(var t=new pu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Jl.prototype.addReachable=function(t){var e=new Ai;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Jl.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Zl.LEFT,t.getDepth(Zl.RIGHT)),e.setDepth(Zl.RIGHT,t.getDepth(Zl.LEFT))},Jl.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Jl.prototype.getNodes=function(){return this._nodes},Jl.prototype.getDirectedEdges=function(){return this._dirEdgeList},Jl.prototype.interfaces_=function(){return[Va]},Jl.prototype.getClass=function(){return Jl};var Ql=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Zl.ON]=e}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[Zl.ON]=i,this.location[Zl.LEFT]=o,this.location[Zl.RIGHT]=s}};Ql.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ql.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Ha.NONE)return!1;return!0},Ql.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Ha.NONE&&(this.location[e]=t)},Ql.prototype.isLine=function(){return 1===this.location.length},Ql.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Zl.ON]=this.location[Zl.ON],e[Zl.LEFT]=Ha.NONE,e[Zl.RIGHT]=Ha.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Ha.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ql.prototype.getLocations=function(){return this.location},Ql.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Zl.LEFT];this.location[Zl.LEFT]=this.location[Zl.RIGHT],this.location[Zl.RIGHT]=t},Ql.prototype.toString=function(){var t=new $a;return this.location.length>1&&t.append(Ha.toLocationSymbol(this.location[Zl.LEFT])),t.append(Ha.toLocationSymbol(this.location[Zl.ON])),this.location.length>1&&t.append(Ha.toLocationSymbol(this.location[Zl.RIGHT])),t.toString()},Ql.prototype.setLocations=function(t,e,n){this.location[Zl.ON]=t,this.location[Zl.LEFT]=e,this.location[Zl.RIGHT]=n},Ql.prototype.get=function(t){return t<this.location.length?this.location[t]:Ha.NONE},Ql.prototype.isArea=function(){return this.location.length>1},Ql.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Ha.NONE)return!0;return!1},Ql.prototype.setLocation=function(){1===arguments.length?this.setLocation(Zl.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Ql.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Ha.NONE)},Ql.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ql.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ql(e),this.elt[1]=new Ql(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ql(n.elt[0]),this.elt[1]=new Ql(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ql(Ha.NONE),this.elt[1]=new Ql(Ha.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Ql(o,s,a),this.elt[1]=new Ql(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Ql(Ha.NONE,Ha.NONE,Ha.NONE),this.elt[1]=new Ql(Ha.NONE,Ha.NONE,Ha.NONE),this.elt[u].setLocations(l,c,h)}};$l.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},$l.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},$l.prototype.isNull=function(t){return this.elt[t].isNull()},$l.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},$l.prototype.isLine=function(t){return this.elt[t].isLine()},$l.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ql(t.elt[e]):this.elt[e].merge(t.elt[e])},$l.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$l.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Zl.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},$l.prototype.toString=function(){var t=new $a;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},$l.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},$l.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},$l.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Zl.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},$l.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},$l.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},$l.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ql(this.elt[t].location[0]))},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.toLineLabel=function(t){for(var e=new $l(Ha.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var tc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Gu,this._pts=new Gu,this._label=new $l(Ha.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Gu,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};tc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Tu.isCCW(this._ring.getCoordinates())},tc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},tc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Wl("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Wl("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();bu.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},tc.prototype.getLinearRing=function(){return this._ring},tc.prototype.getCoordinate=function(t){return this._pts.get(t)},tc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},tc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},tc.prototype.isHole=function(){return this._isHole},tc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},tc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Tu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},tc.prototype.addHole=function(t){this._holes.add(t)},tc.prototype.isShell=function(){return null===this._shell},tc.prototype.getLabel=function(){return this._label},tc.prototype.getEdges=function(){return this._edges},tc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},tc.prototype.getShell=function(){return this._shell},tc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Zl.RIGHT);if(n===Ha.NONE)return null;if(this._label.getLocation(e)===Ha.NONE)return this._label.setLocation(e,n),null}},tc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},tc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var ec=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tc),nc=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new Gu,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ec(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tc),rc=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=arguments[0])};rc.prototype.setVisited=function(t){this._isVisited=t},rc.prototype.setInResult=function(t){this._isInResult=t},rc.prototype.isCovered=function(){return this._isCovered},rc.prototype.isCoveredSet=function(){return this._isCoveredSet},rc.prototype.setLabel=function(t){this._label=t},rc.prototype.getLabel=function(){return this._label},rc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},rc.prototype.updateIM=function(t){bu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},rc.prototype.isInResult=function(){return this._isInResult},rc.prototype.isVisited=function(){return this._isVisited},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc};var ic=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[1];this._coord=arguments[0],this._edges=e,this._label=new $l(0,Ha.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Ha.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Ha.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new $l(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof $l)for(var t=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(t,n);this._label.getLocation(n)===Ha.NONE&&this._label.setLocation(n,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Ha.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Ha.BOUNDARY:n=Ha.INTERIOR;break;case Ha.INTERIOR:default:n=Ha.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rc),oc=function(){this.nodeMap=new Ci,this.nodeFact=null,this.nodeFact=arguments[0]};oc.prototype.find=function(t){return this.nodeMap.get(t)},oc.prototype.addNode=function(){if(arguments[0]instanceof Ga){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ic){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},oc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},oc.prototype.iterator=function(){return this.nodeMap.values().iterator()},oc.prototype.values=function(){return this.nodeMap.values()},oc.prototype.getBoundaryNodes=function(t){for(var e=new Gu,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Ha.BOUNDARY&&e.add(r)}return e},oc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc};var sc=function(){},ac={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.isNorthern=function(t){return t===sc.NE||t===sc.NW},sc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},sc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},sc.isInHalfPlane=function(t,e){return e===sc.SE?t===sc.SE||t===sc.SW:t===e||t===e+1},sc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Fa("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?sc.NE:sc.SE:e>=0?sc.NW:sc.SW}if(arguments[0]instanceof Ga&&arguments[1]instanceof Ga){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Fa("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?sc.NE:sc.SE:r.y>=n.y?sc.NW:sc.SW}},ac.NE.get=function(){return 0},ac.NW.get=function(){return 1},ac.SW.get=function(){return 2},ac.SE.get=function(){return 3},Object.defineProperties(sc,ac);var uc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var t=arguments[1],e=arguments[2];this._edge=arguments[0],this.init(t,e),this._label=null}else if(4===arguments.length){var n=arguments[1],r=arguments[2],i=arguments[3];this._edge=arguments[0],this.init(n,r),this._label=i}};uc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Tu.computeOrientation(t._p0,t._p1,this._p1)},uc.prototype.getDy=function(){return this._dy},uc.prototype.getCoordinate=function(){return this._p0},uc.prototype.setNode=function(t){this._node=t},uc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},uc.prototype.compareTo=function(t){return this.compareDirection(t)},uc.prototype.getDirectedCoordinate=function(){return this._p1},uc.prototype.getDx=function(){return this._dx},uc.prototype.getLabel=function(){return this._label},uc.prototype.getEdge=function(){return this._edge},uc.prototype.getQuadrant=function(){return this._quadrant},uc.prototype.getNode=function(){return this._node},uc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},uc.prototype.computeLabel=function(t){},uc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=sc.quadrant(this._dx,this._dy),bu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},uc.prototype.interfaces_=function(){return[Va]},uc.prototype.getClass=function(){return uc};var lc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new $l(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Wl("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Zl.LEFT)===Ha.INTERIOR&&this._label.getLocation(e,Zl.RIGHT)===Ha.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Zl.LEFT]+"/"+this._depth[Zl.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ha.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ha.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Zl.LEFT&&(r=-1);var i=Zl.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Ha.EXTERIOR&&e===Ha.INTERIOR?1:t===Ha.INTERIOR&&e===Ha.EXTERIOR?-1:0},e}(uc),cc=function(){};cc.prototype.createNode=function(t){return new ic(t,null)},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function(){this._edges=new Gu,this._nodes=null,this._edgeEndList=new Gu,0===arguments.length?this._nodes=new oc(new cc):1===arguments.length&&(this._nodes=new oc(arguments[0]))};hc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},hc.prototype.find=function(t){return this._nodes.find(t)},hc.prototype.addNode=function(){return arguments[0]instanceof ic?this._nodes.addNode(arguments[0]):arguments[0]instanceof Ga?this._nodes.addNode(arguments[0]):void 0},hc.prototype.getNodeIterator=function(){return this._nodes.iterator()},hc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},hc.prototype.debugPrintln=function(t){cu.out.println(t)},hc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Ha.BOUNDARY},hc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},hc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Tu.computeOrientation(t,e,r)===Tu.COLLINEAR&&sc.quadrant(t,e)===sc.quadrant(n,r)},hc.prototype.getEdgeEnds=function(){return this._edgeEndList},hc.prototype.debugPrint=function(t){cu.out.print(t)},hc.prototype.getEdgeIterator=function(){return this._edges.iterator()},hc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},hc.prototype.insertEdge=function(t){this._edges.add(t)},hc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},hc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new lc(n,!0),i=new lc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},hc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},hc.prototype.getNodes=function(){return this._nodes.values()},hc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var pc=function(){this._geometryFactory=null,this._shellList=new Gu,this._geometryFactory=arguments[0]};pc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},pc.prototype.computePolygons=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},pc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Wl("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},pc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Gu,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},pc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},pc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new nc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},pc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},pc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},pc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Tu.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},pc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return bu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},pc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];hc.linkResultDirectedEdges(arguments[1]);var n=this.buildMaximalEdgeRings(e),r=new Gu,i=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(i,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var fc=function(){};fc.prototype.getBounds=function(){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var dc=function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t};dc.prototype.getItem=function(){return this._item},dc.prototype.getBounds=function(){return this._bounds},dc.prototype.interfaces_=function(){return[fc,gi]},dc.prototype.getClass=function(){return dc};var gc=function(){this._size=null,this._items=null,this._size=0,this._items=new Gu,this._items.add(null)};gc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},gc.prototype.size=function(){return this._size},gc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},gc.prototype.clear=function(){this._size=0,this._items.clear()},gc.prototype.isEmpty=function(){return 0===this._size},gc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var yc=function(){};yc.prototype.visitItem=function(t){},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var mc=function(){};mc.prototype.insert=function(t,e){},mc.prototype.remove=function(t,e){},mc.prototype.query=function(){},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var _c=function(){this._childBoundables=new Gu,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=arguments[0])},vc={serialVersionUID:{configurable:!0}};_c.prototype.getLevel=function(){return this._level},_c.prototype.size=function(){return this._childBoundables.size()},_c.prototype.getChildBoundables=function(){return this._childBoundables},_c.prototype.addChildBoundable=function(t){bu.isTrue(null===this._bounds),this._childBoundables.add(t)},_c.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},_c.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},_c.prototype.interfaces_=function(){return[fc,gi]},_c.prototype.getClass=function(){return _c},vc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(_c,vc);var xc=function(){};xc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},xc.min=function(t){return xc.sort(t),t.get(0)},xc.sort=function(t,e){var n=t.toArray();e?il.sort(n,e):il.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},xc.singletonList=function(t){var e=new Gu;return e.add(t),e};var bc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[1],e=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=e,this._distance=this.distance()};bc.prototype.expandToQueue=function(t,e){var n=bc.isComposite(this._boundable1),r=bc.isComposite(this._boundable2);if(n&&r)return bc.area(this._boundable1)>bc.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Fa("neither boundable is composite")},bc.prototype.isLeaves=function(){return!(bc.isComposite(this._boundable1)||bc.isComposite(this._boundable2))},bc.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},bc.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new bc(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},bc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},bc.prototype.getDistance=function(){return this._distance},bc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},bc.prototype.interfaces_=function(){return[Va]},bc.prototype.getClass=function(){return bc},bc.area=function(t){return t.getBounds().getArea()},bc.isComposite=function(t){return t instanceof _c};var wc=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Gu,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var e=arguments[0];bu.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}},Ec={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};wc.prototype.getNodeCapacity=function(){return this._nodeCapacity},wc.prototype.lastNode=function(t){return t.get(t.size()-1)},wc.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof _c?t+=this.size(n):n instanceof dc&&(t+=1)}return t}},wc.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof dc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},wc.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Gu:t}if(1===arguments.length){for(var e=arguments[0],n=new Gu,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof _c){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof dc?n.add(i.getItem()):bu.shouldNeverReachHere()}return n.size()<=0?null:n}},wc.prototype.insert=function(t,e){bu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new dc(t,e))},wc.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Gu;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(bu.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof _c?this.boundablesAtLevel(n,s,i):(bu.isTrue(s instanceof dc),-1===n&&i.add(s))}return null}},wc.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Gu;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Ka(arguments[2],yc)&&arguments[0]instanceof Object&&arguments[1]instanceof _c)for(var i=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var u=s.get(a);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof _c?this.query(i,u,o):u instanceof dc?o.visitItem(u.getItem()):bu.shouldNeverReachHere())}else if(Ka(arguments[2],Uu)&&arguments[0]instanceof Object&&arguments[1]instanceof _c)for(var l=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),l)&&(f instanceof _c?this.query(l,f,c):f instanceof dc?c.add(f.getItem()):bu.shouldNeverReachHere())}},wc.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},wc.prototype.getRoot=function(){return this.build(),this._root},wc.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof _c&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},wc.prototype.createHigherLevels=function(t,e){bu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},wc.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof _c){var r=this.depth(n);r>t&&(t=r)}}return t+1}},wc.prototype.createParentBoundables=function(t,e){bu.isTrue(!t.isEmpty());var n=new Gu;n.add(this.createNode(e));var r=new Gu(t);xc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},wc.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},wc.prototype.interfaces_=function(){return[gi]},wc.prototype.getClass=function(){return wc},wc.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Ec.IntersectsOp.get=function(){return Cc},Ec.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Ec.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(wc,Ec);var Cc=function(){},Ic=function(){};Ic.prototype.distance=function(t,e){},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic};var Sc=function(t){function e(n){t.call(this,n=n||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){bu.isTrue(t.length>0);for(var n=new Gu,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Tc(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Gu;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(Ka(arguments[2],yc)&&arguments[0]instanceof Object&&arguments[1]instanceof _c?t.prototype.query.call(this,arguments[0],arguments[1],arguments[2]):Ka(arguments[2],Uu)&&arguments[0]instanceof Object&&arguments[1]instanceof _c&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2]))},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){bu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Gu(t);xc.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Ka(arguments[0],Ic)){var t=arguments[0],n=new bc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof bc)return this.nearestNeighbour(arguments[0],ja.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&Ka(arguments[1],Ic)){var r=arguments[0],i=arguments[1],o=new bc(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof bc&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=null,l=new gc;for(l.add(s);!l.isEmpty()&&a>0;){var c=l.poll(),h=c.getDistance();if(h>=a)break;c.isLeaves()?(a=h,u=c):c.expandToQueue(l,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],f=new dc(arguments[0],arguments[1]),d=new bc(this.getRoot(),f,p);return this.nearestNeighbour(d)[0]}},e.prototype.interfaces_=function(){return[mc,gi]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Tc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Ua]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Ua]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(wc),Tc=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new pu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_c),Mc=function(){};Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc},Mc.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Mc.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Mc.relativeSign(e.x,n.x),i=Mc.relativeSign(e.y,n.y);switch(t){case 0:return Mc.compareValue(r,i);case 1:return Mc.compareValue(i,r);case 2:return Mc.compareValue(i,-r);case 3:return Mc.compareValue(-r,i);case 4:return Mc.compareValue(-r,-i);case 5:return Mc.compareValue(-i,-r);case 6:return Mc.compareValue(-i,r);case 7:return Mc.compareValue(r,-i)}return bu.shouldNeverReachHere("invalid octant value"),0},Mc.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Ac=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Ga(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Ac.prototype.getCoordinate=function(){return this.coord},Ac.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Ac.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Mc.compare(this._segmentOctant,this.coord,e.coord)},Ac.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Ac.prototype.isInterior=function(){return this._isInterior},Ac.prototype.interfaces_=function(){return[Va]},Ac.prototype.getClass=function(){return Ac};var Pc=function(){this._nodeMap=new Ci,this._edge=null,this._edge=arguments[0]};Pc.prototype.getSplitCoordinates=function(){var t=new Zu;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Pc.prototype.addCollapsedNodes=function(){var t=new Gu;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Pc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Pc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new tu(e+1))}},Pc.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Ga(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Ga(e.coord))},Pc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Pc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Pc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Pc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new tu(e[0])),r=i}},Pc.prototype.getEdge=function(){return this._edge},Pc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Pc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Ga(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new Ga(e.coord)),new Oc(o,this._edge.getData())},Pc.prototype.add=function(t,e){var n=new Ac(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(bu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Pc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new vu("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new vu("bad split edge end point at "+i)},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc};var Lc=function(){};Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Fa("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Ga&&arguments[1]instanceof Ga){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new Fa("Cannot compute the octant for two identical points "+i);return Lc.octant(s,a)}};var Nc=function(){};Nc.prototype.getCoordinates=function(){},Nc.prototype.size=function(){},Nc.prototype.getCoordinate=function(t){},Nc.prototype.isClosed=function(){},Nc.prototype.setData=function(t){},Nc.prototype.getData=function(){},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc};var Rc=function(){};Rc.prototype.addIntersection=function(t,e){},Rc.prototype.interfaces_=function(){return[Nc]},Rc.prototype.getClass=function(){return Rc};var Oc=function(){this._nodeList=new Pc(this),this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};Oc.prototype.getCoordinates=function(){return this._pts},Oc.prototype.size=function(){return this._pts.length},Oc.prototype.getCoordinate=function(t){return this._pts[t]},Oc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Oc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Oc.prototype.setData=function(t){this._data=t},Oc.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Lc.octant(t,e)},Oc.prototype.getData=function(){return this._data},Oc.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var t=arguments[1],e=new Ga(arguments[0].getIntersection(arguments[3]));this.addIntersection(e,t)}},Oc.prototype.toString=function(){return _u.toLineString(new Al(this._pts))},Oc.prototype.getNodeList=function(){return this._nodeList},Oc.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;return r<this._pts.length&&t.equals2D(this._pts[r])&&(n=r),this._nodeList.add(t,n)},Oc.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Oc.prototype.interfaces_=function(){return[Rc]},Oc.prototype.getClass=function(){return Oc},Oc.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Gu;return Oc.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var Dc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Ga,this.p1=new Ga;else if(1===arguments.length){var t=arguments[0];this.p0=new Ga(t.p0),this.p1=new Ga(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[2],n=arguments[3];this.p0=new Ga(arguments[0],arguments[1]),this.p1=new Ga(e,n)}},kc={serialVersionUID:{configurable:!0}};Dc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Dc.prototype.orientationIndex=function(){if(arguments[0]instanceof Dc){var t=arguments[0],e=Tu.orientationIndex(this.p0,this.p1,t.p0),n=Tu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Ga)return Tu.orientationIndex(this.p0,this.p1,arguments[0])},Dc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Dc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Dc.prototype.equals=function(t){if(!(t instanceof Dc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Dc.prototype.intersection=function(t){var e=new Cu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Dc.prototype.project=function(){if(arguments[0]instanceof Ga){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Ga(t);var e=this.projectionFactor(t),n=new Ga;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Dc){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Dc(s,a)}},Dc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Dc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Dc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Dc.prototype.distancePerpendicular=function(t){return Tu.distancePointLinePerpendicular(t,this.p0,this.p1)},Dc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Dc.prototype.midPoint=function(){return Dc.midPoint(this.p0,this.p1)},Dc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?ja.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Dc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=ja.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Dc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Dc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Dc.prototype.getLength=function(){return this.p0.distance(this.p1)},Dc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Dc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Dc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Dc.prototype.lineIntersection=function(t){try{return hu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof lu))throw t}return null},Dc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Dc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new Ga(n-u,r+a)},Dc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Dc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||ja.isNaN(e))&&(e=1),e},Dc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Dc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Dc.prototype.distance=function(){if(arguments[0]instanceof Dc){var t=arguments[0];return Tu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Ga)return Tu.distancePointLine(arguments[0],this.p0,this.p1)},Dc.prototype.pointAlong=function(t){var e=new Ga;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Dc.prototype.hashCode=function(){var t=ja.doubleToLongBits(this.p0.x);t^=31*ja.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=ja.doubleToLongBits(this.p1.x);return n^=31*ja.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Dc.prototype.interfaces_=function(){return[Va,gi]},Dc.prototype.getClass=function(){return Dc},Dc.midPoint=function(t,e){return new Ga((t.x+e.x)/2,(t.y+e.y)/2)},kc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Dc,kc);var zc=function(){this.tempEnv1=new pu,this.tempEnv2=new pu,this._overlapSeg1=new Dc,this._overlapSeg2=new Dc};zc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[2],e=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Fc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[1],e=arguments[2],n=arguments[3];this._pts=arguments[0],this._start=t,this._end=e,this._context=n};Fc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Fc.prototype.computeSelect=function(t,e,n,r){if(r.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var i=Math.trunc((e+n)/2);e<i&&this.computeSelect(t,e,i,r),i<n&&this.computeSelect(t,i,n,r)},Fc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Fc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Fc.prototype.setId=function(t){this._id=t},Fc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Fc.prototype.getEnvelope=function(){return null===this._env&&(this._env=new pu(this._pts[this._start],this._pts[this._end])),this._env},Fc.prototype.getEndIndex=function(){return this._end},Fc.prototype.getStartIndex=function(){return this._start},Fc.prototype.getContext=function(){return this._context},Fc.prototype.getId=function(){return this._id},Fc.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var jc=function(){};jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.getChainStartIndices=function(t){var e=0,n=new Gu;n.add(new tu(e));do{var r=jc.findChainEnd(t,e);n.add(new tu(r)),e=r}while(e<t.length-1);return jc.toIntArray(n)},jc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=sc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||sc.quadrant(t[i-1],t[i])===r);)i++;return i-1},jc.getChains=function(){if(1===arguments.length)return jc.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new Gu,r=jc.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new Fc(t,r[i],r[i+1],e);n.add(o)}return n}},jc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Bc=function(){};Bc.prototype.computeNodes=function(t){},Bc.prototype.getNodedSubstrings=function(){},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var Vc=function(){this._segInt=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(arguments[0])};Vc.prototype.setSegmentIntersector=function(t){this._segInt=t},Vc.prototype.interfaces_=function(){return[Bc]},Vc.prototype.getClass=function(){return Vc};var qc=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Gu,this._index=new Sc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Oc.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=jc.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Uc(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Uc},Object.defineProperties(e,n),e}(Vc),Uc=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zc),Gc=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var e=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(e)}else if(4===arguments.length){var n=arguments[1],r=arguments[2],i=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n),this.setJoinStyle(r),this.setMitreLimit(i)}},Xc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Gc.prototype.getEndCapStyle=function(){return this._endCapStyle},Gc.prototype.isSingleSided=function(){return this._isSingleSided},Gc.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Gc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Gc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Gc.JOIN_ROUND&&(this._quadrantSegments=Gc.DEFAULT_QUADRANT_SEGMENTS)},Gc.prototype.getJoinStyle=function(){return this._joinStyle},Gc.prototype.setJoinStyle=function(t){this._joinStyle=t},Gc.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Gc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Gc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Gc.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Gc.prototype.getMitreLimit=function(){return this._mitreLimit},Gc.prototype.setMitreLimit=function(t){this._mitreLimit=t},Gc.prototype.setSingleSided=function(t){this._isSingleSided=t},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Xc.CAP_ROUND.get=function(){return 1},Xc.CAP_FLAT.get=function(){return 2},Xc.CAP_SQUARE.get=function(){return 3},Xc.JOIN_ROUND.get=function(){return 1},Xc.JOIN_MITRE.get=function(){return 2},Xc.JOIN_BEVEL.get=function(){return 3},Xc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Xc.DEFAULT_MITRE_LIMIT.get=function(){return 5},Xc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Gc,Xc);var Zc=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Tu.COUNTERCLOCKWISE,this._inputLine=t||null},Yc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Zc.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Zc.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Zc.DELETE,i=!0,r=!0),e=this.findNextNonDeletedIndex(t=i?n:e),n=this.findNextNonDeletedIndex(e)}return r},Zc.prototype.isShallowConcavity=function(t,e,n,r){return Tu.computeOrientation(t,e,n)===this._angleOrientation&&Tu.distancePointLine(e,t,n)<r},Zc.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Zc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Zc.prototype.isConcave=function(t,e,n){return Tu.computeOrientation(t,e,n)===this._angleOrientation},Zc.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Tu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Zc.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Zc.DELETE;)e++;return e},Zc.prototype.isShallow=function(t,e,n,r){return Tu.distancePointLine(e,t,n)<r},Zc.prototype.collapseLine=function(){for(var t=new Zu,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Zc.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.simplify=function(t,e){return new Zc(t).simplify(e)},Yc.INIT.get=function(){return 0},Yc.DELETE.get=function(){return 1},Yc.KEEP.get=function(){return 1},Yc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Zc,Yc);var Hc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Gu},Wc={COORDINATE_ARRAY_TYPE:{configurable:!0}};Hc.prototype.getCoordinates=function(){return this._ptList.toArray(Hc.COORDINATE_ARRAY_TYPE)},Hc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Hc.prototype.addPt=function(t){var e=new Ga(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Hc.prototype.revere=function(){},Hc.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Hc.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Hc.prototype.toString=function(){return(new Fl).createLineString(this.getCoordinates()).toString()},Hc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Ga(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Hc.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Wc.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Hc,Wc);var Kc=function(){},Jc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Kc.toDegrees=function(t){return 180*t/Math.PI},Kc.normalize=function(t){for(;t>Math.PI;)t-=Kc.PI_TIMES_2;for(;t<=-Math.PI;)t+=Kc.PI_TIMES_2;return t},Kc.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}},Kc.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},Kc.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},Kc.interiorAngle=function(t,e,n){var r=Kc.angle(e,t),i=Kc.angle(e,n);return Math.abs(i-r)},Kc.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Kc.PI_TIMES_2;t>=Kc.PI_TIMES_2&&(t=0)}else{for(;t>=Kc.PI_TIMES_2;)t-=Kc.PI_TIMES_2;t<0&&(t=0)}return t},Kc.angleBetween=function(t,e,n){var r=Kc.angle(e,t),i=Kc.angle(e,n);return Kc.diff(r,i)},Kc.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Kc.toRadians=function(t){return t*Math.PI/180},Kc.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Kc.COUNTERCLOCKWISE:n<0?Kc.CLOCKWISE:Kc.NONE},Kc.angleBetweenOriented=function(t,e,n){var r=Kc.angle(e,t),i=Kc.angle(e,n)-r;return i<=-Math.PI?i+Kc.PI_TIMES_2:i>Math.PI?i-Kc.PI_TIMES_2:i},Jc.PI_TIMES_2.get=function(){return 2*Math.PI},Jc.PI_OVER_2.get=function(){return Math.PI/2},Jc.PI_OVER_4.get=function(){return Math.PI/4},Jc.COUNTERCLOCKWISE.get=function(){return Tu.COUNTERCLOCKWISE},Jc.CLOCKWISE.get=function(){return Tu.CLOCKWISE},Jc.NONE.get=function(){return Tu.COLLINEAR},Object.defineProperties(Kc,Jc);var Qc=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Dc,this._seg1=new Dc,this._offset0=new Dc,this._offset1=new Dc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._bufParams=e,this._li=new Cu,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Gc.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},$c={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Qc.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Tu.computeOrientation(this._s0,this._s1,this._s2),r=n===Tu.CLOCKWISE&&this._side===Zl.LEFT||n===Tu.COUNTERCLOCKWISE&&this._side===Zl.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Qc.prototype.addLineEndCap=function(t,e){var n=new Dc(t,e),r=new Dc;this.computeOffsetSegment(n,Zl.LEFT,this._distance,r);var i=new Dc;this.computeOffsetSegment(n,Zl.RIGHT,this._distance,i);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Gc.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,Tu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Gc.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Gc.CAP_SQUARE:var s=new Ga;s.x=Math.abs(this._distance)*Math.cos(o),s.y=Math.abs(this._distance)*Math.sin(o);var a=new Ga(r.p1.x+s.x,r.p1.y+s.y),u=new Ga(i.p1.x+s.x,i.p1.y+s.y);this._segList.addPt(a),this._segList.addPt(u)}},Qc.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Qc.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=hu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof lu))throw t;o=new Ga(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Qc.prototype.addFilletCorner=function(t,e,n,r,i){var o=Math.atan2(e.y-t.y,e.x-t.x),s=Math.atan2(n.y-t.y,n.x-t.x);r===Tu.CLOCKWISE?o<=s&&(o+=2*Math.PI):o>=s&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,s,r,i),this._segList.addPt(n)},Qc.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Gc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Gc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Qc.prototype.createSquare=function(t){this._segList.addPt(new Ga(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Ga(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Ga(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Ga(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Qc.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Qc.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Qc.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Qc.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Qc.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Kc.angle(i,this._seg0.p0),s=Kc.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Kc.normalize(o+s),u=Kc.normalize(a+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),f=new Ga(h,p),d=new Dc(i,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Zl.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Qc.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Zl.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Qc.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Tu.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new Ga;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Qc.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Ga((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Ga((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Qc.prototype.createCircle=function(t){var e=new Ga(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Qc.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Qc.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Hc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Qc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Qc.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Gc.JOIN_BEVEL||this._bufParams.getJoinStyle()===Gc.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Tu.CLOCKWISE,this._distance))},Qc.prototype.closeRing=function(){this._segList.closeRing()},Qc.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},$c.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},$c.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},$c.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},$c.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Qc,$c);var th=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[1];this._precisionModel=arguments[0],this._bufParams=t};th.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Yu.reverse(o),o},th.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Zc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Zl.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Zc.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Zl.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},th.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Zl.RIGHT&&(r=-r);var i=Zc.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++)n.addNextSegment(i[s],1!==s);n.closeRing()},th.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Zc.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Zl.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Zc.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Zl.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},th.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Gc.CAP_ROUND:e.createCircle(t);break;case Gc.CAP_SQUARE:e.createSquare(t)}},th.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,r):this.computeLineBufferCurve(t,r),r.getCoordinates()},th.prototype.getBufferParameters=function(){return this._bufParams},th.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},th.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return th.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},th.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Zc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Zl.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Zc.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Zl.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},th.prototype.getSegGen=function(t){return new Qc(this._precisionModel,this._bufParams,t)},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Ga(t[n]);return e};var eh=function(){this._subgraphs=null,this._seg=new Dc,this._cga=new Tu,this._subgraphs=arguments[0]},nh={DepthSegment:{configurable:!0}};eh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Gu,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Ka(arguments[2],Uu)&&arguments[0]instanceof Ga&&arguments[1]instanceof lc){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Tu.computeOrientation(this._seg.p0,this._seg.p1,o)===Tu.RIGHT)){var c=s.getDepth(Zl.LEFT);this._seg.p0.equals(u[l])||(c=s.getDepth(Zl.RIGHT));var h=new rh(this._seg,c);a.add(h)}}else if(Ka(arguments[2],Uu)&&arguments[0]instanceof Ga&&Ka(arguments[1],Uu))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},eh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:xc.min(e)._leftDepth},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},nh.DepthSegment.get=function(){return rh},Object.defineProperties(eh,nh);var rh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[1];this._upwardSeg=new Dc(arguments[0]),this._leftDepth=t};rh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},rh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},rh.prototype.toString=function(){return this._upwardSeg.toString()},rh.prototype.interfaces_=function(){return[Va]},rh.prototype.getClass=function(){return rh};var ih=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};ih.prototype.area=function(){return ih.area(this.p0,this.p1,this.p2)},ih.prototype.signedArea=function(){return ih.signedArea(this.p0,this.p1,this.p2)},ih.prototype.interpolateZ=function(t){if(null===t)throw new Fa("Supplied point is null.");return ih.interpolateZ(t,this.p0,this.p1,this.p2)},ih.prototype.longestSideLength=function(){return ih.longestSideLength(this.p0,this.p1,this.p2)},ih.prototype.isAcute=function(){return ih.isAcute(this.p0,this.p1,this.p2)},ih.prototype.circumcentre=function(){return ih.circumcentre(this.p0,this.p1,this.p2)},ih.prototype.area3D=function(){return ih.area3D(this.p0,this.p1,this.p2)},ih.prototype.centroid=function(){return ih.centroid(this.p0,this.p1,this.p2)},ih.prototype.inCentre=function(){return ih.inCentre(this.p0,this.p1,this.p2)},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ih.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ih.det=function(t,e,n,r){return t*r-e*n},ih.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,h=t.x-i,p=t.y-o;return e.z+(l*h-a*p)/c*(n.z-e.z)+(-u*h+s*p)/c*(r.z-e.z)},ih.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},ih.isAcute=function(t,e,n){return!!Kc.isAcute(t,e,n)&&!!Kc.isAcute(e,n,t)&&!!Kc.isAcute(n,t,e)},ih.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*ih.det(o,s,a,u),c=ih.det(s,o*o+s*s,u,a*a+u*u),h=ih.det(o,o*o+s*s,a,a*a+u*u);return new Ga(r-c/l,i+h/l)},ih.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new hu(t.x+n/2,t.y+r/2,1),o=new hu(t.x-r+n/2,t.y+n+r/2,1);return new hu(i,o)},ih.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n));return new Ga(t.x+i*(n.x-t.x),t.y+i*(n.y-t.y))},ih.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,c=o*s-r*u,h=r*a-i*s;return Math.sqrt(l*l+c*c+h*h)/2},ih.centroid=function(t,e,n){return new Ga((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},ih.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o;return new Ga((r*t.x+i*e.x+o*n.x)/s,(r*t.y+i*e.y+o*n.y)/s)};var oh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Gu;var t=arguments[1],e=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=e};oh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Ha.EXTERIOR,Ha.INTERIOR)},oh.prototype.addPolygon=function(t){var e=this._distance,n=Zl.LEFT;this._distance<0&&(e=-this._distance,n=Zl.RIGHT);var r=t.getExteriorRing(),i=Yu.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Ha.EXTERIOR,Ha.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Yu.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Zl.opposite(n),Ha.INTERIOR,Ha.EXTERIOR)}},oh.prototype.isTriangleErodedCompletely=function(t,e){var n=new ih(t[0],t[1],t[2]),r=n.inCentre();return Tu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},oh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Yu.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Ha.EXTERIOR,Ha.INTERIOR)},oh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Oc(t,new $l(0,Ha.BOUNDARY,e,n));this._curveList.add(r)},oh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},oh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<wl.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=wl.MINIMUM_VALID_SIZE&&Tu.isCCW(t)&&(o=i,s=r,n=Zl.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},oh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof xl?this.addPolygon(t):t instanceof yl?this.addLineString(t):t instanceof _l?this.addPoint(t):t instanceof bl?this.addCollection(t):t instanceof cl?this.addCollection(t):t instanceof El?this.addCollection(t):t instanceof ll&&this.addCollection(t)},oh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},oh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var sh=function(){};sh.prototype.locate=function(t){},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh};var ah=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};ah.prototype.next=function(){if(this._atStart)return this._atStart=!1,ah.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new yi;var t=this._parent.getGeometryN(this._index++);return t instanceof ll?(this._subcollectionIterator=new ah(t),this._subcollectionIterator.next()):t},ah.prototype.remove=function(){throw new Error(this.getClass().getName())},ah.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ah.prototype.interfaces_=function(){return[qu]},ah.prototype.getClass=function(){return ah},ah.isAtomic=function(t){return!(t instanceof ll)};var uh=function(){this._geom=null,this._geom=arguments[0]};uh.prototype.locate=function(t){return uh.locate(t,this._geom)},uh.prototype.interfaces_=function(){return[sh]},uh.prototype.getClass=function(){return uh},uh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Tu.isPointInRing(t,e.getCoordinates())},uh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!uh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(uh.isPointInRing(t,i))return!1}return!0},uh.containsPoint=function(t,e){if(e instanceof xl)return uh.containsPointInPolygon(t,e);if(e instanceof ll)for(var n=new ah(e);n.hasNext();){var r=n.next();if(r!==e&&uh.containsPoint(t,r))return!0}return!1},uh.locate=function(t,e){return e.isEmpty()?Ha.EXTERIOR:uh.containsPoint(t,e)?Ha.INTERIOR:Ha.EXTERIOR};var lh=function(){this._edgeMap=new Ci,this._edgeList=null,this._ptInAreaLocation=[Ha.NONE,Ha.NONE]};lh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},lh.prototype.propagateSideLabels=function(t){for(var e=Ha.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Zl.LEFT)!==Ha.NONE&&(e=r.getLocation(t,Zl.LEFT))}if(e===Ha.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Zl.ON)===Ha.NONE&&a.setLocation(t,Zl.ON,i),a.isArea(t)){var u=a.getLocation(t,Zl.LEFT),l=a.getLocation(t,Zl.RIGHT);if(l!==Ha.NONE){if(l!==i)throw new Wl("side location conflict",s.getCoordinate());u===Ha.NONE&&bu.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else bu.isTrue(a.getLocation(t,Zl.LEFT)===Ha.NONE,"found single null side"),a.setLocation(t,Zl.RIGHT,i),a.setLocation(t,Zl.LEFT,i)}}},lh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},lh.prototype.print=function(t){cu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},lh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},lh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Zl.LEFT);bu.isTrue(r!==Ha.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();bu.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Zl.LEFT),u=s.getLocation(t,Zl.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},lh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},lh.prototype.iterator=function(){return this.getEdges().iterator()},lh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Gu(this._edgeMap.values())),this._edgeList},lh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Ha.NONE&&(this._ptInAreaLocation[t]=uh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},lh.prototype.toString=function(){var t=new $a;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},lh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},lh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Ha.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=Ha.NONE;if(e[u])l=Ha.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},lh.prototype.getDegree=function(){return this._edgeMap.size()},lh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var ch=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Wl("no outgoing dirEdge found",this.getCoordinate());bu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return sc.isNorthern(i)&&sc.isNorthern(o)?n:sc.isNorthern(i)||sc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(bu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){cu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Gu;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Zl.LEFT),r=t.getDepth(Zl.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Wl("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(Zl.RIGHT,s),s=u.getDepth(Zl.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(bu.isTrue(null!==e,"found null for first outgoing dirEdge"),bu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Ha.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Ha.INTERIOR;break}if(r.isInResult()){t=Ha.EXTERIOR;break}}}if(t===Ha.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Ha.INTERIOR):(s.isInResult()&&(i=Ha.EXTERIOR),a.isInResult()&&(i=Ha.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new $l(Ha.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Ha.INTERIOR&&o!==Ha.BOUNDARY||this._label.setLocation(i,Ha.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lh),hh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new ic(t,new ch)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cc),ph=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};ph.prototype.compareTo=function(t){return ph.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},ph.prototype.interfaces_=function(){return[Va]},ph.prototype.getClass=function(){return ph},ph.orientation=function(t){return 1===Yu.increasingDirection(t)},ph.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===s,p=(l+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var fh=function(){this._edges=new Gu,this._ocaMap=new Ci};fh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},fh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},fh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},fh.prototype.iterator=function(){return this._edges.iterator()},fh.prototype.getEdges=function(){return this._edges},fh.prototype.get=function(t){return this._edges.get(t)},fh.prototype.findEqualEdge=function(t){var e=new ph(t.getCoordinates());return this._ocaMap.get(e)},fh.prototype.add=function(t){this._edges.add(t);var e=new ph(t.getCoordinates());this._ocaMap.put(e,t)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh};var dh=function(){};dh.prototype.processIntersections=function(t,e,n,r){},dh.prototype.isDone=function(){},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var gh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};gh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(gh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},gh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},gh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},gh.prototype.getLineIntersector=function(){return this._li},gh.prototype.hasProperIntersection=function(){return this._hasProper},gh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},gh.prototype.hasIntersection=function(){return this._hasIntersection},gh.prototype.isDone=function(){return!1},gh.prototype.hasInteriorIntersection=function(){return this._hasInterior},gh.prototype.interfaces_=function(){return[dh]},gh.prototype.getClass=function(){return gh},gh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new Ga(arguments[0]),this.segmentIndex=t,this.dist=e};yh.prototype.getSegmentIndex=function(){return this.segmentIndex},yh.prototype.getCoordinate=function(){return this.coord},yh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},yh.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},yh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},yh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},yh.prototype.getDistance=function(){return this.dist},yh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},yh.prototype.interfaces_=function(){return[Va]},yh.prototype.getClass=function(){return yh};var mh=function(){this._nodeMap=new Ci,this.edge=null,this.edge=arguments[0]};mh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},mh.prototype.iterator=function(){return this._nodeMap.values().iterator()},mh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},mh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},mh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);r||n--;var i=new Array(n).fill(null),o=0;i[o++]=new Ga(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)i[o++]=this.edge.pts[s];return r&&(i[o]=e.coord),new wh(i,new $l(this.edge._label))},mh.prototype.add=function(t,e,n){var r=new yh(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},mh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var _h=function(){};_h.prototype.getChainStartIndices=function(t){var e=0,n=new Gu;n.add(new tu(e));do{var r=this.findChainEnd(t,e);n.add(new tu(r)),e=r}while(e<t.length-1);return _h.toIntArray(n)},_h.prototype.findChainEnd=function(t,e){for(var n=sc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&sc.quadrant(t[r-1],t[r])===n;)r++;return r-1},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h},_h.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var vh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new pu,this.env2=new pu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new _h;this.startIndex=e.getChainStartIndices(this.pts)};vh.prototype.getCoordinates=function(){return this.pts},vh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},vh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},vh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=arguments[5],l=this.pts[r],c=this.pts[i],h=o.pts[s],p=o.pts[a];if(i-r==1&&a-s==1)return u.addIntersections(this.e,r,o.e,s),null;if(this.env1.init(l,c),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+i)/2),d=Math.trunc((s+a)/2);r<f&&(s<d&&this.computeIntersectsForChain(r,f,o,s,d,u),d<a&&this.computeIntersectsForChain(r,f,o,d,a,u)),f<i&&(s<d&&this.computeIntersectsForChain(f,i,o,s,d,u),d<a&&this.computeIntersectsForChain(f,i,o,d,a,u))}},vh.prototype.getStartIndexes=function(){return this.startIndex},vh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var xh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},bh={NULL_VALUE:{configurable:!0}};xh.prototype.getDepth=function(t,e){return this._depth[t][e]},xh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},xh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==xh.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===xh.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===xh.NULL_VALUE:void 0},xh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},xh.prototype.getDelta=function(t){return this._depth[t][Zl.RIGHT]-this._depth[t][Zl.LEFT]},xh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Ha.EXTERIOR:Ha.INTERIOR},xh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},xh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Ha.EXTERIOR&&r!==Ha.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=xh.depthAtLocation(r):this._depth[e][n]+=xh.depthAtLocation(r))}else 3===arguments.length&&arguments[2]===Ha.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh},xh.depthAtLocation=function(t){return t===Ha.EXTERIOR?0:t===Ha.INTERIOR?1:xh.NULL_VALUE},bh.NULL_VALUE.get=function(){return-1},Object.defineProperties(xh,bh);var wh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new mh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new xh,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var n=arguments[1];this.pts=arguments[0],this._label=n}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,$l.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new vh(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new pu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new Ga(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;a<this.pts.length&&i.equals2D(this.pts[a])&&(o=a,s=0),this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new $a;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Zl.ON),e.getLocation(1,Zl.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Zl.LEFT),e.getLocation(1,Zl.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Zl.RIGHT),e.getLocation(1,Zl.RIGHT),2))},e}(rc),Eh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new fh,this._bufParams=t||null};Eh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Eh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $l(t.getLabel())).flip(),n.merge(r);var i=Eh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Eh.depthDelta(t.getLabel()))},Eh.prototype.buildSubgraphs=function(t,e){for(var n=new Gu,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new eh(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Eh.prototype.createSubgraphs=function(t){for(var e=new Gu,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Jl;i.create(r),e.add(i)}}return xc.sort(e,xc.reverseOrder()),e},Eh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Eh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new qc,n=new Cu;return n.setPrecisionModel(t),e.setSegmentIntersector(new gh(n)),e},Eh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new th(n,this._bufParams),i=new oh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new hc(new hh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new pc(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},Eh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new wh(i.getCoordinates(),new $l(s));this.insertUniqueEdge(a)}}},Eh.prototype.setNoder=function(t){this._workingNoder=t},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.depthDelta=function(t){var e=t.getLocation(0,Zl.LEFT),n=t.getLocation(0,Zl.RIGHT);return e===Ha.INTERIOR&&n===Ha.EXTERIOR?1:e===Ha.EXTERIOR&&n===Ha.INTERIOR?-1:0},Eh.convertSegStrings=function(t){for(var e=new Fl,n=new Gu;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var Ch=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[1];this._noder=arguments[0],this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var e=arguments[1],n=arguments[2],r=arguments[3];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=n,this._offsetY=r,this._isScaled=!this.isIntegerPrecision()}};Ch.prototype.rescale=function(){if(Ka(arguments[0],Bu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&cu.out.println(n)}},Ch.prototype.scale=function(){if(Ka(arguments[0],Bu)){for(var t=arguments[0],e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Oc(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new Ga(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Yu.removeRepeatedPoints(o)}},Ch.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Ch.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Ch.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Ch.prototype.interfaces_=function(){return[Bc]},Ch.prototype.getClass=function(){return Ch};var Ih=function(){this._li=new Cu,this._segStrings=null,this._segStrings=arguments[0]},Sh={fact:{configurable:!0}};Ih.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new vu("found endpt/interior pt intersection at index "+o+" :pt "+n)},Ih.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],m=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new vu("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},Ih.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Ih.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},Ih.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Ih.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new vu("found non-noded collapse at "+Ih.fact.createLineString([t,e,n]))},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Sh.fact.get=function(){return new Fl},Object.defineProperties(Ih,Sh);var Th=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Fa("Scale factor must be non-zero");1!==e&&(this._pt=new Ga(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Ga,this._p1Scaled=new Ga),this.initCorners(this._pt)},Mh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Th.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return bu.isTrue(!(s&&a),"Found bad envelope test"),a},Th.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Ga(this._maxx,this._maxy),this._corner[1]=new Ga(this._minx,this._maxy),this._corner[2]=new Ga(this._minx,this._miny),this._corner[3]=new Ga(this._maxx,this._miny)},Th.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Th.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Th.prototype.getCoordinate=function(){return this._originalPt},Th.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Th.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Th.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new pu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Th.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Th.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Th.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},Mh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Th,Mh);var Ah=function(){this.tempEnv1=new pu,this.selectedSegment=new Dc};Ah.prototype.select=function(){1===arguments.length||2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah};var Ph=function(){this._index=null,this._index=arguments[0]},Lh={HotPixelSnapAction:{configurable:!0}};Ph.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getSafeEnvelope(),i=new Nh(t,e,n);return this._index.query(r,{interfaces_:function(){return[yc]},visitItem:function(t){t.select(r,i)}}),i.isNodeAdded()}},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Lh.HotPixelSnapAction.get=function(){return Nh},Object.defineProperties(Ph,Lh);var Nh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[1],n=arguments[2];this._hotPixel=arguments[0],this._parentEdge=e,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ah),Rh=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new Gu};Rh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Rh.prototype.isDone=function(){return!1},Rh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Rh.prototype.interfaces_=function(){return[dh]},Rh.prototype.getClass=function(){return Rh};var Oh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Cu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Oh.prototype.checkCorrectness=function(t){var e=Oc.getNodedSubstrings(t),n=new Ih(e);try{n.checkValid()}catch(t){if(!(t instanceof uu))throw t;t.printStackTrace()}},Oh.prototype.getNodedSubstrings=function(){return Oc.getNodedSubstrings(this._nodedSegStrings)},Oh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Oh.prototype.findInteriorIntersections=function(t,e){var n=new Rh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Oh.prototype.computeVertexSnaps=function(){if(Ka(arguments[0],Bu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Oc)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Th(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},Oh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new qc,this._pointSnapper=new Ph(this._noder.getIndex()),this.snapRound(t,this._li)},Oh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Th(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},Oh.prototype.interfaces_=function(){return[Bc]},Oh.prototype.getClass=function(){return Oh};var Dh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Gc,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var t=arguments[1];this._argGeom=arguments[0],this._bufParams=t}},kh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Dh.prototype.bufferFixedPrecision=function(t){var e=new Ch(new Oh(new Ol(1)),t.getScale()),n=new Eh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Dh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Dh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Wl))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=Dh.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),r=new Ol(n);this.bufferFixedPrecision(r)}},Dh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ol.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Dh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Dh.prototype.bufferOriginalPrecision=function(){try{var t=new Eh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof vu))throw t;this._saveException=t}},Dh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Dh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Dh(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Pu&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new Dh(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Gc&&arguments[0]instanceof Pu&&"number"==typeof arguments[1]){var i=arguments[1];return new Dh(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=new Dh(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(a),u.getResultGeometry(o)}},Dh.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Ja.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},kh.CAP_ROUND.get=function(){return Gc.CAP_ROUND},kh.CAP_BUTT.get=function(){return Gc.CAP_FLAT},kh.CAP_FLAT.get=function(){return Gc.CAP_FLAT},kh.CAP_SQUARE.get=function(){return Gc.CAP_SQUARE},kh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Dh,kh);var zh=function(){this._pt=[new Ga,new Ga],this._distance=ja.NaN,this._isNull=!0};zh.prototype.getCoordinates=function(){return this._pt},zh.prototype.getCoordinate=function(t){return this._pt[t]},zh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},zh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},zh.prototype.getDistance=function(){return this._distance},zh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Fh=function(){};Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh},Fh.computeDistance=function(){if(arguments[2]instanceof zh&&arguments[0]instanceof yl&&arguments[1]instanceof Ga)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new Dc,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof zh&&arguments[0]instanceof xl&&arguments[1]instanceof Ga){var s=arguments[0],a=arguments[1],u=arguments[2];Fh.computeDistance(s.getExteriorRing(),a,u);for(var l=0;l<s.getNumInteriorRing();l++)Fh.computeDistance(s.getInteriorRingN(l),a,u)}else if(arguments[2]instanceof zh&&arguments[0]instanceof Pu&&arguments[1]instanceof Ga){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof yl)Fh.computeDistance(c,h,p);else if(c instanceof xl)Fh.computeDistance(c,h,p);else if(c instanceof ll)for(var f=c,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);Fh.computeDistance(g,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof zh&&arguments[0]instanceof Dc&&arguments[1]instanceof Ga){var y=arguments[1],m=arguments[2],_=arguments[0].closestPoint(y);m.setMinimum(_,y)}};var jh=function(t){this._maxPtDist=new zh,this._inputGeom=t||null},Bh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};jh.prototype.computeMaxMidpointDistance=function(t){var e=new qh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},jh.prototype.computeMaxVertexDistance=function(t){var e=new Vh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},jh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},jh.prototype.getDistancePoints=function(){return this._maxPtDist},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},Bh.MaxPointDistanceFilter.get=function(){return Vh},Bh.MaxMidpointDistanceFilter.get=function(){return qh},Object.defineProperties(jh,Bh);var Vh=function(t){this._maxPtDist=new zh,this._minPtDist=new zh,this._geom=t||null};Vh.prototype.filter=function(t){this._minPtDist.initialize(),Fh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Vh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Vh.prototype.interfaces_=function(){return[Ru]},Vh.prototype.getClass=function(){return Vh};var qh=function(t){this._maxPtDist=new zh,this._minPtDist=new zh,this._geom=t||null};qh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Ga((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Fh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},qh.prototype.isDone=function(){return!1},qh.prototype.isGeometryChanged=function(){return!1},qh.prototype.getMaxPointDistance=function(){return this._maxPtDist},qh.prototype.interfaces_=function(){return[ul]},qh.prototype.getClass=function(){return qh};var Uh=function(t){this._comps=t||null};Uh.prototype.filter=function(t){t instanceof xl&&this._comps.add(t)},Uh.prototype.interfaces_=function(){return[al]},Uh.prototype.getClass=function(){return Uh},Uh.getPolygons=function(){if(1===arguments.length)return Uh.getPolygons(arguments[0],new Gu);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof xl?e.add(t):t instanceof ll&&t.apply(new Uh(e)),e}};var Gh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}};Gh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof wl){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof yl&&this._lines.add(t)},Gh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Gh.prototype.interfaces_=function(){return[Au]},Gh.prototype.getClass=function(){return Gh},Gh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Gh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Gh.getLines(e,n))}},Gh.getLines=function(){if(1===arguments.length)return Gh.getLines(arguments[0],!1);if(2===arguments.length){if(Ka(arguments[0],Bu)&&Ka(arguments[1],Bu)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();Gh.getLines(n,t)}return t}if(arguments[0]instanceof Pu&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new Gu;return r.apply(new Gh(o,i)),o}if(arguments[0]instanceof Pu&&Ka(arguments[1],Bu)){var s=arguments[0],a=arguments[1];return s instanceof yl?a.add(s):s.apply(new Gh(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Ka(arguments[0],Bu)&&Ka(arguments[1],Bu)){for(var u=arguments[1],l=arguments[2],c=arguments[0].iterator();c.hasNext();){var h=c.next();Gh.getLines(h,u,l)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Pu&&Ka(arguments[1],Bu)){var p=arguments[1];return arguments[0].apply(new Gh(p,arguments[2])),p}}};var Xh=function(){if(this._boundaryRule=Ou.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Fa("Rule must be non-null");this._boundaryRule=t}};Xh.prototype.locateInternal=function(){if(arguments[0]instanceof Ga&&arguments[1]instanceof xl){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Ha.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Ha.EXTERIOR)return Ha.EXTERIOR;if(r===Ha.BOUNDARY)return Ha.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===Ha.INTERIOR)return Ha.EXTERIOR;if(s===Ha.BOUNDARY)return Ha.BOUNDARY}return Ha.INTERIOR}if(arguments[0]instanceof Ga&&arguments[1]instanceof yl){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return Ha.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?Tu.isOnLine(a,l)?Ha.INTERIOR:Ha.EXTERIOR:Ha.BOUNDARY}if(arguments[0]instanceof Ga&&arguments[1]instanceof _l){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Ha.INTERIOR:Ha.EXTERIOR}},Xh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Tu.locatePointInRing(t,e.getCoordinates()):Ha.EXTERIOR},Xh.prototype.intersects=function(t,e){return this.locate(t,e)!==Ha.EXTERIOR},Xh.prototype.updateLocationInfo=function(t){t===Ha.INTERIOR&&(this._isIn=!0),t===Ha.BOUNDARY&&this._numBoundaries++},Xh.prototype.computeLocation=function(t,e){if(e instanceof _l&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof yl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof xl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof cl)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof El)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof ll)for(var u=new ah(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Xh.prototype.locate=function(t,e){return e.isEmpty()?Ha.EXTERIOR:e instanceof yl?this.locateInternal(t,e):e instanceof xl?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Ha.BOUNDARY:this._numBoundaries>0||this._isIn?Ha.INTERIOR:Ha.EXTERIOR)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Zh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[1],n=arguments[2];this._component=arguments[0],this._segIndex=e,this._pt=n}},Yh={INSIDE_AREA:{configurable:!0}};Zh.prototype.isInsideArea=function(){return this._segIndex===Zh.INSIDE_AREA},Zh.prototype.getCoordinate=function(){return this._pt},Zh.prototype.getGeometryComponent=function(){return this._component},Zh.prototype.getSegmentIndex=function(){return this._segIndex},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Yh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Zh,Yh);var Hh=function(t){this._pts=t||null};Hh.prototype.filter=function(t){t instanceof _l&&this._pts.add(t)},Hh.prototype.interfaces_=function(){return[al]},Hh.prototype.getClass=function(){return Hh},Hh.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof _l?xc.singletonList(t):Hh.getPoints(t,new Gu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof _l?n.add(e):e instanceof ll&&e.apply(new Hh(n)),n}};var Wh=function(){this._locations=null,this._locations=arguments[0]};Wh.prototype.filter=function(t){(t instanceof _l||t instanceof yl||t instanceof xl)&&this._locations.add(new Zh(t,0,t.getCoordinate()))},Wh.prototype.interfaces_=function(){return[al]},Wh.prototype.getClass=function(){return Wh},Wh.getLocations=function(t){var e=new Gu;return t.apply(new Wh(e)),e};var Kh=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Xh,this._minDistanceLocation=null,this._minDistance=ja.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=n}};Kh.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Uh.getPolygons(this._geom[e]);if(i.size()>0){var o=Wh.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Ka(arguments[0],Uu)&&Ka(arguments[1],Uu)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zh&&arguments[1]instanceof xl){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(Ha.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Zh(f,g),null}},Kh.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Kh.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Gh.getLines(this._geom[0]),n=Gh.getLines(this._geom[1]),r=Hh.getPoints(this._geom[0]),i=Hh.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Kh.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Kh.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Kh.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Kh.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof yl&&arguments[1]instanceof _l){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=Tu.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new Dc(r[o],r[o+1]).closestPoint(i);n[0]=new Zh(t,o,a),n[1]=new Zh(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof yl&&arguments[1]instanceof yl){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=Tu.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new Dc(h[f],h[f+1]),m=new Dc(p[d],p[d+1]),_=y.closestPoints(m);c[0]=new Zh(u,f,_[0]),c[1]=new Zh(l,d,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},Kh.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Zh(i,0,i.getCoordinate()),n[1]=new Zh(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Kh.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Fa("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Kh.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Kh.distance=function(t,e){return new Kh(t,e).distance()},Kh.isWithinDistance=function(t,e,n){return new Kh(t,e,n).distance()<=n},Kh.nearestPoints=function(t,e){return new Kh(t,e).nearestPoints()};var Jh=function(){this._pt=[new Ga,new Ga],this._distance=ja.NaN,this._isNull=!0};Jh.prototype.getCoordinates=function(){return this._pt},Jh.prototype.getCoordinate=function(t){return this._pt[t]},Jh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Jh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},Jh.prototype.toString=function(){return _u.toLineString(this._pt[0],this._pt[1])},Jh.prototype.getDistance=function(){return this._distance},Jh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){};Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.computeDistance=function(){if(arguments[2]instanceof Jh&&arguments[0]instanceof yl&&arguments[1]instanceof Ga)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Dc,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof xl&&arguments[1]instanceof Ga){var a=arguments[0],u=arguments[1],l=arguments[2];Qh.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Qh.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof Pu&&arguments[1]instanceof Ga){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof yl)Qh.computeDistance(h,p,f);else if(h instanceof xl)Qh.computeDistance(h,p,f);else if(h instanceof ll)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Qh.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof Dc&&arguments[1]instanceof Ga){var m=arguments[1],_=arguments[2],v=arguments[0].closestPoint(m);_.setMinimum(v,m)}};var $h=function(){this._g0=null,this._g1=null,this._ptDist=new Jh,this._densifyFrac=0;var t=arguments[1];this._g0=arguments[0],this._g1=t},tp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};$h.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},$h.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Fa("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},$h.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},$h.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},$h.prototype.computeOrientedDistance=function(t,e,n){var r=new ep(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new np(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},$h.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},$h.distance=function(){if(2===arguments.length)return new $h(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new $h(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},tp.MaxPointDistanceFilter.get=function(){return ep},tp.MaxDensifiedByFractionDistanceFilter.get=function(){return np},Object.defineProperties($h,tp);var ep=function(){this._maxPtDist=new Jh,this._minPtDist=new Jh,this._euclideanDist=new Qh,this._geom=null,this._geom=arguments[0]};ep.prototype.filter=function(t){this._minPtDist.initialize(),Qh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},ep.prototype.interfaces_=function(){return[Ru]},ep.prototype.getClass=function(){return ep};var np=function(){this._maxPtDist=new Jh,this._minPtDist=new Jh,this._geom=null,this._numSubSegs=0;var t=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/t))};np.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=new Ga(n.x+s*i,n.y+s*o);this._minPtDist.initialize(),Qh.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},np.prototype.isDone=function(){return!1},np.prototype.isGeometryChanged=function(){return!1},np.prototype.getMaxPointDistance=function(){return this._maxPtDist},np.prototype.interfaces_=function(){return[ul]},np.prototype.getClass=function(){return np};var rp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},ip={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};rp.prototype.checkMaximumDistance=function(t,e,n){var r=new $h(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+_u.toLineString(i[0],i[1])+")"}},rp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=rp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),rp.VERBOSE&&cu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},rp.prototype.checkNegativeValid=function(){if(!(this._input instanceof xl||this._input instanceof El||this._input instanceof ll))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},rp.prototype.getErrorIndicator=function(){return this._errorIndicator},rp.prototype.checkMinimumDistance=function(t,e,n){var r=new Kh(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+_u.toLineString(i[0],i[1])+" )"}},rp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},rp.prototype.getErrorLocation=function(){return this._errorLocation},rp.prototype.getPolygonLines=function(t){for(var e=new Gu,n=new Gh(e),r=Uh.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},rp.prototype.getErrorMessage=function(){return this._errMsg},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},ip.VERBOSE.get=function(){return!1},ip.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(rp,ip);var op=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},sp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};op.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},op.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*op.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new pu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new pu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},op.prototype.checkDistance=function(){var t=new rp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},op.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},op.prototype.checkPolygonal=function(){this._result instanceof xl||this._result instanceof El||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},op.prototype.getErrorIndicator=function(){return this._errorIndicator},op.prototype.getErrorLocation=function(){return this._errorLocation},op.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},op.prototype.report=function(t){if(!op.VERBOSE)return null;cu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},op.prototype.getErrorMessage=function(){return this._errorMsg},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.isValidMsg=function(t,e,n){var r=new op(t,e,n);return r.isValid()?null:r.getErrorMessage()},op.isValid=function(t,e,n){return!!new op(t,e,n).isValid()},sp.VERBOSE.get=function(){return!1},sp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(op,sp);var ap=function(){this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};ap.prototype.getCoordinates=function(){return this._pts},ap.prototype.size=function(){return this._pts.length},ap.prototype.getCoordinate=function(t){return this._pts[t]},ap.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ap.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Lc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},ap.prototype.setData=function(t){this._data=t},ap.prototype.getData=function(){return this._data},ap.prototype.toString=function(){return _u.toLineString(new Al(this._pts))},ap.prototype.interfaces_=function(){return[Nc]},ap.prototype.getClass=function(){return ap};var up=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Gu,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};up.prototype.getInteriorIntersection=function(){return this._interiorIntersection},up.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},up.prototype.getIntersectionSegments=function(){return this._intSegments},up.prototype.count=function(){return this._intersectionCount},up.prototype.getIntersections=function(){return this._intersections},up.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},up.prototype.setKeepIntersections=function(t){this._keepIntersections=t},up.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},up.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},up.prototype.hasIntersection=function(){return null!==this._interiorIntersection},up.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},up.prototype.interfaces_=function(){return[dh]},up.prototype.getClass=function(){return up},up.createAllIntersectionsFinder=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e},up.createAnyIntersectionFinder=function(t){return new up(t)},up.createIntersectionCounter=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var lp=function(){this._li=new Cu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};lp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},lp.prototype.getIntersections=function(){return this._segInt.getIntersections()},lp.prototype.isValid=function(){return this.execute(),this._isValid},lp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},lp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new up(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new qc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},lp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Wl(this.getErrorMessage(),this._segInt.getInteriorIntersection())},lp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+_u.toLineString(t[0],t[1])+" and "+_u.toLineString(t[2],t[3])},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.computeIntersections=function(t){var e=new lp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var cp=function t(){this._nv=null,this._nv=new lp(t.toSegmentStrings(arguments[0]))};cp.prototype.checkValid=function(){this._nv.checkValid()},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.toSegmentStrings=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new ap(r.getCoordinates(),r))}return e},cp.checkValid=function(t){new cp(t).checkValid()};var hp=function(t){this._mapOp=t};hp.prototype.map=function(t){for(var e=new Gu,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Fl.toGeometryArray(e))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.map=function(t,e){return new hp(e).map(t)};var pp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Gu,this._resultLineList=new Gu;var t=arguments[1],e=arguments[2];this._op=arguments[0],this._geometryFactory=t,this._ptLocator=e};pp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},pp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},pp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},pp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Zp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},pp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},pp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},pp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},pp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(bu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Zp.isResultOfOp(r,e)&&e===Zp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var fp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Gu;var t=arguments[1];this._op=arguments[0],this._geometryFactory=t};fp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},fp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Zp.INTERSECTION)){var r=n.getLabel();Zp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},fp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var dp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};dp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},dp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof wl&&!r.isEmpty()||(n=!1);for(var i=new Gu,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof wl||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new Gu;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},dp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},dp.prototype.getInputGeometry=function(){return this._inputGeom},dp.prototype.transformMultiLineString=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.transformCoordinates=function(t,e){return this.copy(t)},dp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},dp.prototype.transformMultiPoint=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.transformMultiPolygon=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.copy=function(t){return t.copy()},dp.prototype.transformGeometryCollection=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Fl.toGeometryArray(n)):this._factory.buildGeometry(n)},dp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof _l)return this.transformPoint(t,null);if(t instanceof bl)return this.transformMultiPoint(t,null);if(t instanceof wl)return this.transformLinearRing(t,null);if(t instanceof yl)return this.transformLineString(t,null);if(t instanceof cl)return this.transformMultiLineString(t,null);if(t instanceof xl)return this.transformPolygon(t,null);if(t instanceof El)return this.transformMultiPolygon(t,null);if(t instanceof ll)return this.transformGeometryCollection(t,null);throw new Fa("Unknown Geometry subtype: "+t.getClass().getName())},dp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp};var gp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Dc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof yl&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};gp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Ga(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Ga(o)))}},gp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},gp.prototype.snapTo=function(t){var e=new Zu(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},gp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new Ga(i),!1)}},gp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=ja.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},gp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var yp=function(t){this._srcGeom=t||null},mp={SNAP_PRECISION_FACTOR:{configurable:!0}};yp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new _p(e,n).transform(this._srcGeom)},yp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new _p(t,n,!0).transform(this._srcGeom),i=r;return e&&Ka(i,vl)&&(i=r.buffer(0)),i},yp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},yp.prototype.extractTargetCoordinates=function(t){for(var e=new Si,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},yp.prototype.computeMinimumSegmentLength=function(t){for(var e=ja.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new yp(t);r[0]=i.snapTo(e,n);var o=new yp(e);return r[1]=o.snapTo(r[0],n),r},yp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=yp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ol.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[1];return Math.min(yp.computeOverlaySnapTolerance(arguments[0]),yp.computeOverlaySnapTolerance(i))}},yp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*yp.SNAP_PRECISION_FACTOR},yp.snapToSelf=function(t,e,n){return new yp(t).snapToSelf(e,n)},mp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(yp,mp);var _p=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new gp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dp),vp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};vp.prototype.getCommon=function(){return ja.longBitsToDouble(this._commonBits)},vp.prototype.add=function(t){var e=ja.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=vp.signExpBits(this._commonBits),this._isFirst=!1,null):vp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=vp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=vp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},vp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=ja.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+ja.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp},vp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},vp.signExpBits=function(t){return t>>52},vp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},vp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(vp.getBit(t,r)!==vp.getBit(e,r))return n;n++}return 52};var xp=function(){this._commonCoord=null,this._ccFilter=new wp},bp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};xp.prototype.addCommonBits=function(t){var e=new Ep(this._commonCoord);t.apply(e),t.geometryChanged()},xp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Ga(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ep(e);return t.apply(n),t.geometryChanged(),t},xp.prototype.getCommonCoordinate=function(){return this._commonCoord},xp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},bp.CommonCoordinateFilter.get=function(){return wp},bp.Translater.get=function(){return Ep},Object.defineProperties(xp,bp);var wp=function(){this._commonBitsX=new vp,this._commonBitsY=new vp};wp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},wp.prototype.getCommonCoordinate=function(){return new Ga(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},wp.prototype.interfaces_=function(){return[Ru]},wp.prototype.getClass=function(){return wp};var Ep=function(){this.trans=null,this.trans=arguments[0]};Ep.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Ep.prototype.isDone=function(){return!1},Ep.prototype.isGeometryChanged=function(){return!0},Ep.prototype.interfaces_=function(){return[ul]},Ep.prototype.getClass=function(){return Ep};var Cp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Cp.prototype.selfSnap=function(t){return new yp(t).snapTo(t,this._snapTolerance)},Cp.prototype.removeCommonBits=function(t){this._cbr=new xp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Cp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Cp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Zp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Cp.prototype.checkValid=function(t){t.isValid()||cu.out.println("Snapped geometry is invalid")},Cp.prototype.computeSnapTolerance=function(){this._snapTolerance=yp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Cp.prototype.snap=function(t){var e=this.removeCommonBits(t);return yp.snap(e[0],e[1],this._snapTolerance)},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp.overlayOp=function(t,e,n){return new Cp(t,e).getResultGeometry(n)},Cp.union=function(t,e){return Cp.overlayOp(t,e,Zp.UNION)},Cp.intersection=function(t,e){return Cp.overlayOp(t,e,Zp.INTERSECTION)},Cp.symDifference=function(t,e){return Cp.overlayOp(t,e,Zp.SYMDIFFERENCE)},Cp.difference=function(t,e){return Cp.overlayOp(t,e,Zp.DIFFERENCE)};var Ip=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Ip.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Zp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof vu))throw t;r=t}if(!n)try{e=Cp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof vu?r:t}return e},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Ip.overlayOp=function(t,e,n){return new Ip(t,e).getResultGeometry(n)},Ip.union=function(t,e){return Ip.overlayOp(t,e,Zp.UNION)},Ip.intersection=function(t,e){return Ip.overlayOp(t,e,Zp.INTERSECTION)},Ip.symDifference=function(t,e){return Ip.overlayOp(t,e,Zp.SYMDIFFERENCE)},Ip.difference=function(t,e){return Ip.overlayOp(t,e,Zp.DIFFERENCE)};var Sp=function(){this.mce=null,this.chainIndex=null;var t=arguments[1];this.mce=arguments[0],this.chainIndex=t};Sp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Tp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Mp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Tp.prototype.isDelete=function(){return this._eventType===Tp.DELETE},Tp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Tp.prototype.getObject=function(){return this._obj},Tp.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Tp.prototype.getInsertEvent=function(){return this._insertEvent},Tp.prototype.isInsert=function(){return this._eventType===Tp.INSERT},Tp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Tp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Tp.prototype.interfaces_=function(){return[Va]},Tp.prototype.getClass=function(){return Tp},Mp.INSERT.get=function(){return 1},Mp.DELETE.get=function(){return 2},Object.defineProperties(Tp,Mp);var Ap=function(){};Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap};var Pp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[1],e=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=e};Pp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Pp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Pp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Pp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Pp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Pp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Pp.prototype.hasProperIntersection=function(){return this._hasProper},Pp.prototype.hasIntersection=function(){return this._hasIntersection},Pp.prototype.isDone=function(){return this._isDone},Pp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Pp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Pp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Lp=function(t){function e(){t.call(this),this.events=new Gu,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){xc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Pp&&Ka(arguments[0],Uu)&&Ka(arguments[1],Uu)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Ka(arguments[0],Uu)&&arguments[1]instanceof Pp){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Sp(n,i),s=new Tp(e,n.getMinX(i),o);this.events.add(s),this.events.add(new Tp(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ap),Np=function(){this._min=ja.POSITIVE_INFINITY,this._max=ja.NEGATIVE_INFINITY},Rp={NodeComparator:{configurable:!0}};Np.prototype.getMin=function(){return this._min},Np.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Np.prototype.getMax=function(){return this._max},Np.prototype.toString=function(){return _u.toLineString(new Ga(this._min,0),new Ga(this._max,0))},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Rp.NodeComparator.get=function(){return Op},Object.defineProperties(Np,Rp);var Op=function(){};Op.prototype.compare=function(t,e){var n=(t._min+t._max)/2,r=(e._min+e._max)/2;return n<r?-1:n>r?1:0},Op.prototype.interfaces_=function(){return[Ua]},Op.prototype.getClass=function(){return Op};var Dp=function(t){function e(){t.call(this),this._item=null;var e=arguments[1],n=arguments[2];this._min=arguments[0],this._max=e,this._item=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Np),kp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[1];this._node1=arguments[0],this._node2=e,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Np),zp=function(){this._leaves=new Gu,this._root=null,this._level=0};zp.prototype.buildTree=function(){xc.sort(this._leaves,new Np.NodeComparator);for(var t=this._leaves,e=null,n=new Gu;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},zp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Dp(t,e,n))},zp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},zp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},zp.prototype.printNode=function(t){cu.out.println(_u.toLineString(new Ga(t._min,this._level),new Ga(t._max,this._level)))},zp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},zp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new kp(t.get(n),t.get(n+1));e.add(i)}}},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp};var Fp=function(){this._items=new Gu};Fp.prototype.visitItem=function(t){this._items.add(t)},Fp.prototype.getItems=function(){return this._items},Fp.prototype.interfaces_=function(){return[yc]},Fp.prototype.getClass=function(){return Fp};var jp=function(){this._index=null;var t=arguments[0];if(!Ka(t,vl))throw new Fa("Argument must be Polygonal");this._index=new qp(t)},Bp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};jp.prototype.locate=function(t){var e=new Su(t),n=new Vp(e);return this._index.query(t.y,t.y,n),e.getLocation()},jp.prototype.interfaces_=function(){return[sh]},jp.prototype.getClass=function(){return jp},Bp.SegmentVisitor.get=function(){return Vp},Bp.IntervalIndexedGeometry.get=function(){return qp},Object.defineProperties(jp,Bp);var Vp=function(){this._counter=null,this._counter=arguments[0]};Vp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Vp.prototype.interfaces_=function(){return[yc]},Vp.prototype.getClass=function(){return Vp};var qp=function(){this._index=new zp,this.init(arguments[0])};qp.prototype.init=function(t){for(var e=Gh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},qp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Dc(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},qp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Fp;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp};var Up=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Rl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Xh,2===arguments.length){var e=arguments[1],n=Ou.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[1],i=arguments[2];this._argIndex=arguments[0],this._parentGeom=r,this._boundaryNodeRule=i,null!==r&&this.add(r)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Zl.ON)===Ha.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var t=arguments[1],e=arguments[2],n=new Pp(arguments[0],!0,!1);return n.setIsDoneIfProperInt(e),this.createEdgeSetIntersector().computeIntersections(this._edges,n,t||!(this._parentGeom instanceof wl||this._parentGeom instanceof xl||this._parentGeom instanceof El)),this.addSelfIntersectionNodes(this._argIndex),n}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Pp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof _l){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Ha.INTERIOR)}else arguments[0]instanceof Ga&&this.insertPoint(this._argIndex,arguments[0],Ha.INTERIOR)},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Ha.EXTERIOR,Ha.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Ha.INTERIOR,Ha.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Ha.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Ha.BOUNDARY)},e.prototype.addLineString=function(t){var e=Yu.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new wh(e,new $l(this._argIndex,Ha.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),bu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Ha.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Yu.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Tu.isCCW(r)&&(i=n,o=e);var s=new wh(r,new $l(this._argIndex,Ha.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],Ha.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new $l(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Lp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof El&&(this._useBoundaryDeterminationRule=!1),e instanceof xl)this.addPolygon(e);else if(e instanceof yl)this.addLineString(e);else if(e instanceof _l)this.addPoint(e);else if(e instanceof bl)this.addCollection(e);else if(e instanceof cl)this.addCollection(e);else if(e instanceof El)this.addCollection(e);else{if(!(e instanceof ll))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Ka(this._parentGeom,vl)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new jp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Ha.BOUNDARY:Ha.INTERIOR},e}(hc),Gp=function(){if(this._li=new Cu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Up(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Ou.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Up(0,e,r),this._arg[1]=new Up(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Up(0,i,s),this._arg[1]=new Up(1,o,s)}};Gp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Gp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp};var Xp=function(){};Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.map=function(){if(arguments[0]instanceof Pu&&Ka(arguments[1],Xp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Gu,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Ka(arguments[0],Bu)&&Ka(arguments[1],Xp.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Gu,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Xp.MapOp=function(){};var Zp=function(t){function e(){var e=arguments[0];t.call(this,e,arguments[1]),this._ptLocator=new Xh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new fh,this._resultPolyList=new Gu,this._resultLineList=new Gu,this._resultPointList=new Gu,this._graph=new hc(new hh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $l(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Gu;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Ha.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Gu,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Gu;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),cp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new pc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new pp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new fp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Zl.RIGHT),i.getLocation(1,Zl.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(bu.isTrue(!r.isNull(i,Zl.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Zl.LEFT,r.getLocation(i,Zl.LEFT)),bu.isTrue(!r.isNull(i,Zl.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Zl.RIGHT,r.getLocation(i,Zl.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gp);Zp.overlayOp=function(t,e,n){return new Zp(t,e).getResultGeometry(n)},Zp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Zp.createEmptyResult(Zp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return hp.map(t,{interfaces_:function(){return[Xp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ip.overlayOp(t,e,Zp.INTERSECTION)},Zp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zp.createEmptyResult(Zp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ip.overlayOp(t,e,Zp.SYMDIFFERENCE)},Zp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Zp.INTERSECTION:o=Math.min(r,i);break;case Zp.UNION:o=Math.max(r,i);break;case Zp.DIFFERENCE:o=r;break;case Zp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Zp.createEmptyResult=function(t,e,n,r){var i=null;switch(Zp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Zp.difference=function(t,e){return t.isEmpty()?Zp.createEmptyResult(Zp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ip.overlayOp(t,e,Zp.DIFFERENCE))},Zp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Zp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===Ha.BOUNDARY&&(i=Ha.INTERIOR),o===Ha.BOUNDARY&&(o=Ha.INTERIOR),arguments[2]){case Zp.INTERSECTION:return i===Ha.INTERIOR&&o===Ha.INTERIOR;case Zp.UNION:return i===Ha.INTERIOR||o===Ha.INTERIOR;case Zp.DIFFERENCE:return i===Ha.INTERIOR&&o!==Ha.INTERIOR;case Zp.SYMDIFFERENCE:return i===Ha.INTERIOR&&o!==Ha.INTERIOR||i!==Ha.INTERIOR&&o===Ha.INTERIOR}return!1}},Zp.INTERSECTION=1,Zp.UNION=2,Zp.DIFFERENCE=3,Zp.SYMDIFFERENCE=4;var Yp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Xh,this._seg=new Dc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Yp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Yp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Ha.BOUNDARY:this._ptLocator.locate(t,this._g)},Yp.prototype.extractLinework=function(t){var e=new Hp;t.apply(e);var n=e.getLinework(),r=Fl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};var Hp=function(){this._linework=null,this._linework=new Gu};Hp.prototype.getLinework=function(){return this._linework},Hp.prototype.filter=function(t){if(t instanceof xl){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Hp.prototype.interfaces_=function(){return[al]},Hp.prototype.getClass=function(){return Hp};var Wp=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};Wp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Wp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Wp.prototype.getPoints=function(t){for(var e=new Gu,n=Gh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Wp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Ga(l-u,c+a);r.add(h)}if(this._doRight){var p=new Ga(l+u,c-a);r.add(p)}},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Kp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Gu;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Yp(this._geom[0],this._boundaryDistanceTolerance),new Yp(this._geom[1],this._boundaryDistanceTolerance),new Yp(this._geom[2],this._boundaryDistanceTolerance)]},Jp={TOLERANCE:{configurable:!0}};Kp.prototype.reportResult=function(t,e,n){cu.out.println("Overlay result invalid - A:"+Ha.toLocationSymbol(e[0])+" B:"+Ha.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Ha.toLocationSymbol(e[2]))},Kp.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Kp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Kp.hasLocation(this._location,Ha.BOUNDARY)||this.isValidResult(r,this._location)}},Kp.prototype.addTestPts=function(t){var e=new Wp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Kp.prototype.isValidResult=function(t,e){var n=Zp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Ha.INTERIOR);return r||this.reportResult(t,e,n),r},Kp.prototype.getInvalidLocation=function(){return this._invalidLocation},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Kp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(yp.computeSizeBasedSnapTolerance(t),yp.computeSizeBasedSnapTolerance(e))},Kp.isValid=function(t,e,n,r){return new Kp(t,e,r).isValid(n)},Jp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Kp,Jp);var Qp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Qp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Qp.prototype.combine=function(){for(var t=new Gu,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.combine=function(){return 1===arguments.length?new Qp(arguments[0]).combine():2===arguments.length?new Qp(Qp.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Qp(Qp.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Qp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Qp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Gu;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Gu;return s.add(r),s.add(i),s.add(o),s}};var $p=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new Gu)},tf={STRTREE_NODE_CAPACITY:{configurable:!0}};$p.prototype.reduceToGeometries=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Ka(r,Uu)?i=this.unionTree(r):r instanceof Pu&&(i=r),e.add(i)}return e},$p.prototype.extractByEnvelope=function(t,e,n){for(var r=new Gu,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},$p.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Qp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},$p.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Sc($p.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},$p.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=$p.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe($p.getGeometry(e,n),$p.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},$p.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},$p.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},$p.prototype.unionActual=function(t,e){return $p.restrictToPolygons(t.union(e))},$p.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},$p.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Gu,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Qp.combine(r)},$p.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.restrictToPolygons=function(t){if(Ka(t,vl))return t;var e=Uh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Fl.toPolygonArray(e))},$p.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},$p.union=function(t){return new $p(t).union()},tf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties($p,tf);var ef=function(){};ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zp.createEmptyResult(Zp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ip.overlayOp(t,e,Zp.UNION)};var nf=function(){return new Li};Li.prototype={constructor:Li,reset:function(){this.s=this.t=0},add:function(t){Ni(rf,t,this.t),Ni(this,rf.s,this.s),this.s?this.t+=rf.t:this.s=rf.t},valueOf:function(){return this.s}};var rf=new Li,of=1e-6,sf=Math.PI,af=sf/2,uf=sf/4,lf=2*sf,cf=180/sf,hf=sf/180,pf=Math.abs,ff=Math.atan,df=Math.atan2,gf=Math.cos,yf=Math.exp,mf=Math.log,_f=Math.sin,vf=Math.sqrt,xf=Math.tan,bf={Feature:function(t,e){Di(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Di(n[r].geometry,e)}},wf={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){ki(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ki(n[r],e,0)},Polygon:function(t,e){zi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)zi(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Di(n[r],e)}},Ef=function(t,e){t&&bf.hasOwnProperty(t.type)?bf[t.type](t,e):Di(t,e)},Cf=(nf(),nf(),nf(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});Xi.invert=Xi;var If=function(t){function e(e){return(e=t(e[0]*hf,e[1]*hf))[0]*=cf,e[1]*=cf,e}return t=Zi(t[0]*hf,t[1]*hf,t.length>2?t[2]*hf:0),e.invert=function(e){return(e=t.invert(e[0]*hf,e[1]*hf))[0]*=cf,e[1]*=cf,e},e},Sf=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Oi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Tf=function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,p=e[1]-u;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=r-u,p||!(s>0)){if(s/=p,p<0){if(s<l)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>l&&(l=s)}else if(p>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*p),c<1&&(e[0]=a+c*h,e[1]=u+c*p),!0}}}}},Mf=function(t,e){return pf(t[0]-e[0])<of&&pf(t[1]-e[1])<of},Af=function(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Mf(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new Ji(r,t,null,!0)),u.push(n.o=new Ji(r,null,n,!1)),a.push(n=new Ji(s,t,null,!1)),u.push(n.o=new Ji(s,null,n,!0))}}),a.length){for(u.sort(e),Qi(a),Qi(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,c,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=l.length;o<s;++o)i.point((c=l[o])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(o=(l=p.p.z).length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}},Pf=function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n},Lf=1e9,Nf=-Lf,Rf=nf(),Of=(nf(),function(t){return t}),Df=(nf(),nf(),1/0),kf=Df,zf=-Df,Ff=zf,jf={point:function(t,e){t<Df&&(Df=t),t>zf&&(zf=t),e<kf&&(kf=e),e>Ff&&(Ff=e)},lineStart:Oi,lineEnd:Oi,polygonStart:Oi,polygonEnd:Oi,result:function(){var t=[[Df,kf],[zf,Ff]];return zf=Ff=-(kf=Df=1/0),t}},Bf=(nf(),function(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);y.point(n[0],n[1])}function u(){b.point=a,y.lineStart()}function l(){b.point=s,y.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);v.point(n[0],n[1])}function h(){v.lineStart(),g=[]}function p(){c(g[0][0],g[0][1]),v.lineEnd();var t,e,n,r,i=v.clean(),s=_.result(),a=s.length;if(g.pop(),f.push(g),g=null,a)if(1&i){if((e=(n=s[0]).length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&s.push(s.pop().concat(s.shift())),d.push(s.filter($i))}var f,d,g,y=e(o),m=i.invert(r[0],r[1]),_=Sf(),v=e(_),x=!1,b={point:s,lineStart:u,lineEnd:l,polygonStart:function(){b.point=c,b.lineStart=h,b.lineEnd=p,d=[],f=[]},polygonEnd:function(){b.point=s,b.lineStart=u,b.lineEnd=l,d=Pf(d);var t=function(t,e){var n=e[0],r=e[1],i=[_f(n),-gf(n),0],o=0,s=0;Rf.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],p=h[0],f=h[1]/2+uf,d=_f(f),g=gf(f),y=0;y<c;++y,p=_,d=x,g=b,h=m){var m=l[y],_=m[0],v=m[1]/2+uf,x=_f(v),b=gf(v),w=_-p,E=w>=0?1:-1,C=E*w,I=C>sf,S=d*x;if(Rf.add(df(S*E*_f(C),g*b+S*gf(C))),o+=I?w+E*lf:w,I^p>=n^_>=n){var T=Vi(ji(h),ji(m));Gi(T);var M=Vi(i,T);Gi(M);var A=(I^w>=0?-1:1)*Ri(M[2]);(r>A||r===A&&(T[0]||T[1]))&&(s+=I^w>=0?1:-1)}}return(o<-of||o<of&&Rf<-of)^1&s}(f,m);d.length?(x||(o.polygonStart(),x=!0),Af(d,to,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}}),Vf=Bf(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?sf:-sf,u=pf(o-n);pf(u-sf)<of?(t.point(n,r=(r+s)/2>0?af:-af),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=sf&&(pf(n-i)<of&&(n-=i*of),pf(o-a)<of&&(o-=a*of),r=function(t,e,n,r){var i,o,s=_f(t-n);return pf(s)>of?ff((_f(e)*(o=gf(r))*_f(n)-_f(r)*(i=gf(e))*_f(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-sf,i=n*af),r.point(0,i),r.point(sf,i),r.point(sf,0),r.point(sf,-i),r.point(0,-i),r.point(-sf,-i),r.point(-sf,0),r.point(-sf,i);else if(pf(t[0]-e[0])>of){var o=t[0]<e[0]?sf:-sf;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-sf,-af]);no.prototype={constructor:no,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var qf=16,Uf=gf(30*hf),Gf=function(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,c,h,p,f,d,g,y){var m=l-r,_=c-i,v=m*m+_*_;if(v>4*e&&g--){var x=s+p,b=a+f,w=u+d,E=vf(x*x+b*b+w*w),C=Ri(w/=E),I=pf(pf(w)-1)<of||pf(o-h)<of?(o+h)/2:df(b,x),S=t(I,C),T=S[0],M=S[1],A=T-r,P=M-i,L=_*A-m*P;(L*L/v>e||pf((m*A+_*P)/v-.5)>.3||s*p+a*f+u*d<Uf)&&(n(r,i,o,s,a,u,T,M,I,x/=E,b/=E,w,g,y),y.point(T,M),n(T,M,I,x,b,w,l,c,h,p,f,d,g,y))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){m=NaN,w.point=o,e.lineStart()}function o(r,i){var o=ji([r,i]),s=t(r,i);n(m,_,y,v,x,b,m=s[0],_=s[1],y=r,v=o[0],x=o[1],b=o[2],qf,e),e.point(m,_)}function s(){w.point=r,e.lineEnd()}function a(){i(),w.point=u,w.lineEnd=l}function u(t,e){o(c=t,e),h=m,p=_,f=v,d=x,g=b,w.point=o}function l(){n(m,_,y,v,x,b,h,p,c,f,d,g,qf,e),w.lineEnd=s,s()}var c,h,p,f,d,g,y,m,_,v,x,b,w={point:r,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=a},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return eo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Xf=eo({point:function(t,e){this.stream.point(t*hf,e*hf)}});io.invert=function(t,e){return[t,2*ff(yf(e))-af]},oo.invert=function(t,e){return[-e,2*ff(yf(t))-af]};var Zf=function(){var t=function(t){function e(){var e=sf*a(),s=o(If(o.rotate()).invert([0,0]));return l(null==c?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===io?[[Math.max(s[0]-e,c),n],[Math.min(s[0]+e,r),i]]:[[c,Math.max(s[1]-e,n)],[r,Math.min(s[1]+e,i)]])}var n,r,i,o=function(t){return function(t){function e(t){return[(t=l(t[0]*hf,t[1]*hf))[0]*g+s,a-t[1]*g]}function n(t,e){return[(t=o(t,e))[0]*g+s,a-t[1]*g]}function r(){l=Cf(u=Zi(x,b,w),o);var t=o(_,v);return s=y-t[0]*g,a=m+t[1]*g,i()}function i(){return f=d=null,e}var o,s,a,u,l,c,h,p,f,d,g=150,y=480,m=250,_=0,v=0,x=0,b=0,w=0,E=null,C=Vf,I=null,S=Of,T=.5,M=Gf(n,T);return e.stream=function(t){return f&&d===t?f:f=Xf(C(u,M(S(d=t))))},e.clipAngle=function(t){return arguments.length?(C=+t?function(t,e){function n(t,e){return gf(t)*gf(e)>o}function r(t,e,n){var r=[1,0,0],i=Vi(ji(t),ji(e)),s=Bi(i,i),a=i[0],u=s-a*a;if(!u)return!n&&t;var l=o*s/u,c=-o*a/u,h=Vi(r,i),p=Ui(r,l);qi(p,Ui(i,c));var f=h,d=Bi(p,f),g=Bi(f,f),y=d*d-g*(Bi(p,p)-1);if(!(y<0)){var m=vf(y),_=Ui(f,(-d-m)/g);if(qi(_,p),_=Fi(_),!n)return _;var v,x=t[0],b=e[0],w=t[1],E=e[1];b<x&&(v=x,x=b,b=v);var C=b-x,I=pf(C-sf)<of;if(!I&&E<w&&(v=w,w=E,E=v),I||C<of?I?w+E>0^_[1]<(pf(_[0]-x)<of?w:E):w<=_[1]&&_[1]<=E:C>sf^(x<=_[0]&&_[0]<=b)){var S=Ui(f,(-d+m)/g);return qi(S,p),[_,Fi(S)]}}}function i(e,n){var r=s?t:sf-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=gf(t),s=o>0,a=pf(o)>of;return Bf(n,function(t){var e,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,p){var f,d=[h,p],g=n(h,p),y=s?g?0:i(h,p):g?i(h+(h<0?sf:-sf),p):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(f=r(e,d))||Mf(e,f)||Mf(d,f))&&(d[0]+=of,d[1]+=of,g=n(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),f=r(d,e),t.point(f[0],f[1])):(f=r(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(a&&e&&s^g){var m;y&o||!(m=r(d,e,!0))||(c=0,s?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Mf(e,d)||t.point(d[0],d[1]),e=d,u=g,o=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=gf(e),a=_f(e),u=r*n;null==i?(i=e+r*lf,o=e-u/2):(i=Ki(s,i),o=Ki(s,o),(r>0?i<o:i>o)&&(i+=r*lf));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Fi([s,-a*gf(c),-a*_f(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)},s?[0,-t]:[-sf,t-sf])}(E=t*hf,6*hf):(E=null,Vf),i()):E*cf},e.clipExtent=function(t){return arguments.length?(S=null==t?(I=c=h=p=null,Of):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(r,i){return pf(r[0]-t)<of?i>0?0:3:pf(r[0]-n)<of?i>0?2:1:pf(r[1]-e)<of?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){i(t,e)&&b.point(t,e)}function l(o,s){var a=i(o,s);if(h&&p.push([o,s]),v)f=o,d=s,g=a,v=!1,a&&(b.lineStart(),b.point(o,s));else if(a&&_)b.point(o,s);else{var u=[y=Math.max(Nf,Math.min(Lf,y)),m=Math.max(Nf,Math.min(Lf,m))],l=[o=Math.max(Nf,Math.min(Lf,o)),s=Math.max(Nf,Math.min(Lf,s))];Tf(u,l,t,e,n,r)?(_||(b.lineStart(),b.point(u[0],u[1])),b.point(l[0],l[1]),a||b.lineEnd(),x=!1):a&&(b.lineStart(),b.point(o,s),x=!1)}y=o,m=s,_=a}var c,h,p,f,d,g,y,m,_,v,x,b=s,w=Sf(),E={point:u,lineStart:function(){E.point=l,h&&h.push(p=[]),v=!0,_=!1,y=m=NaN},lineEnd:function(){c&&(l(f,d),g&&_&&w.rejoin(),c.push(w.result())),E.point=u,_&&b.lineEnd()},polygonStart:function(){b=w,c=[],h=[],x=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,s,a=h[n],u=1,l=a.length,c=a[0],p=c[0],f=c[1];u<l;++u)o=p,s=f,p=(c=a[u])[0],f=c[1],s<=r?f>r&&(p-o)*(r-s)>(f-s)*(t-o)&&++e:f<=r&&(p-o)*(r-s)<(f-s)*(t-o)&&--e;return e}(),n=x&&e,i=(c=Pf(c)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Af(c,a,e,o,s),s.polygonEnd()),b=s,c=h=p=null}};return E}}(I=+t[0][0],c=+t[0][1],h=+t[1][0],p=+t[1][1]),i()):null==I?null:[[I,c],[h,p]]},e.scale=function(t){return arguments.length?(g=+t,r()):g},e.translate=function(t){return arguments.length?(y=+t[0],m=+t[1],r()):[y,m]},e.center=function(t){return arguments.length?(_=t[0]%360*hf,v=t[1]%360*hf,r()):[_*cf,v*cf]},e.rotate=function(t){return arguments.length?(x=t[0]%360*hf,b=t[1]%360*hf,w=t.length>2?t[2]%360*hf:0,r()):[x*cf,b*cf,w*cf]},e.precision=function(t){return arguments.length?(M=Gf(n,T=t*t),i()):vf(T)},e.fitExtent=function(t,n){return ro(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return ro(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-s)/g,(a-t[1])/g))&&[t[0]*cf,t[1]*cf]},r()}}(function(){return t})()}(t),s=o.center,a=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}(oo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=ts,t.random=Da,t.clusters=ka,t.helpers=bo,t.invariant=Eo,t.meta=wo,t.isolines=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(H(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!C(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;H(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];l.push(h.properties[n]?h.properties[n]:0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0});return l(function(t,e,n){var r=q(n),i=r[0],o=r[1],s=(r[2]-r[0])/(e[0].length-1),a=(r[3]-r[1])/(e.length-1),u=function(t){t[0]=t[0]*s+i,t[1]=t[1]*a+o};return t.forEach(function(t){T(t,u)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},r,i[s]);u[n]=a;var l=c(Q(t,a),u);o.push(l)}return o}(s,e,r,i,o),s,t))},t.convex=Tt,t.pointsWithinPolygon=Pt,t.concave=function(t,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!E(r))throw new Error("maxEdge is invalid");var i=Lt(function(t){var e=[],n={};return L(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),l(e)}(t));if(i.features=i.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=Dt(e,i,n),a=Dt(i,o,n),u=Dt(e,o,n);return s<=r&&a<=r&&u<=r}),i.features.length<1)return null;var o=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=function(t){var e={};k(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=[],i=V(t,function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Zt(r[0]),s=Zt(r[r.length-1]),u=Zt(i[0]),l=Zt(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(u===s)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(s!==l)return null;n=r.concat(i.reverse().slice(1))}return a(n)}(t,e)||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:c(r.map(function(t){return t.coordinates})):null}(t,e);case"Polygon":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=[];k(t,function(t){r.push(t.geometry)});var i=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,s=1/0,a=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var c in t)e(t[c]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Vt(t[e]);return n}(t)),s=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-l)*f),Math.round((t[1]-c)*d)]}function i(t,e){for(var n,r,i,o,s,a=-1,u=0,h=t.length,p=new Array(h);++a<h;)n=t[a],o=Math.round((n[0]-l)*f),s=Math.round((n[1]-c)*d),o===r&&s===i||(p[u++]=[r=o,i=s]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var l=e[0],c=e[1],h=e[2],p=e[3],f=h-l?(n-1)/(h-l):1,d=p-c?(n-1)/(p-c):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/f,1/d],translate:[l,c]}}(t,o,e),a=function(t){function e(t){var e,n,r,i,o,s,a,u;if(r=f.get(e=l[t[0]]))for(a=0,u=r.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Zo(l[n],l[r]))return!1;return!0}(i=r[a],t))return t[0]=i[0],void(t[1]=i[1]);if(o=f.get(n=l[t[1]]))for(a=0,u=o.length;a<u;++a)if(s=o[a],function(t,e){var n=s[0],r=s[1],i=e[1];if(n-r!=e[0]-i)return!1;for(;n<=r;++n,--i)if(!Zo(l[n],l[i]))return!1;return!0}(0,t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var s=i(t),a=i(e),u=0;u<o;++u)if(!Zo(l[n+(u+s)%o],l[r+(u+a)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[1],o=t[1]-n;if(o!==r-e[0])return!1;for(var s=i(t),a=o-i(e),u=0;u<o;++u)if(!Zo(l[n+(u+s)%o],l[r-(u+a)%o]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=l[r];++r<n;){var s=l[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}var o,s,a,u,l=t.coordinates,c=t.lines,h=t.rings,p=c.length+h.length;for(delete t.lines,delete t.rings,a=0,u=c.length;a<u;++a)for(o=c[a];o=o.next;)++p;for(a=0,u=h.length;a<u;++a)for(s=h[a];s=s.next;)++p;var f=Xo(2*p*1.4,Ko,Zo),d=t.arcs=[];for(a=0,u=c.length;a<u;++a){o=c[a];do{e(o)}while(o=o.next)}for(a=0,u=h.length;a<u;++a)if((s=h[a]).next)do{e(s)}while(s=s.next);else!function(t){var e,o,s,a,u;if(o=f.get(l[t[0]]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(r(s,t))return t[0]=s[1],void(t[1]=s[0])}if(o=f.get(e=l[t[0]+i(t)]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(r(s,t))return t[0]=s[1],void(t[1]=s[0])}o?o.push(t):f.set(e,[t]),d.push(t)}(s);return t}(function(t){var e,n,r,i=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=f[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++y,g[n]=1)}else f[n]=e,d[n]=r}}function n(t){return Ko(u[t])}function r(t,e){return Zo(u[t],u[e])}var i,o,s,a,u=t.coordinates,l=t.lines,c=t.rings,h=function(){for(var t=Xo(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),y=0;for(i=0,o=u.length;i<o;++i)p[i]=f[i]=d[i]=-1;for(i=0,o=l.length;i<o;++i){var m=l[i],_=m[0],v=m[1];for(s=h[_],a=h[++_],++y,g[s]=1;++_<=v;)e(i,s,s=a,a=h[_]);++y,g[a]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=c.length;i<o;++i){var x=c[i],b=x[0]+1,w=x[1];for(e(i,h[w-1],s=h[b-1],a=h[b]);++b<=w;)e(i,s,s=a,a=h[b])}p=f=d=null;var E,C=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*y,Ko,Zo);for(i=0,o=u.length;i<o;++i)g[E=h[i]]&&C.add(u[E]);return C}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],p=h[0],f=p,d=h[1],g=i.has(o[p]);++f<d;)i.has(o[f])&&(g?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(function(t,e,n,r){Bt(t,e,n),Bt(t,e,e+r),Bt(t,e+r,n)}(o,p,d,d-f),o[d]=o[p],g=!0,f=p));return t}(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function i(t){return t.map(r)}var o=-1,s=[],a=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,l=Xo(1.4*a.arcs.length,Gt,Xt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return l.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)r=(l=o[s])[0],i=l[1],r===c&&i===h||(o[a++]=[r-c,i-h],c=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a}({geoms:f(r).geometry});return function(t){return jt(t,(function(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(i[e=e<0?~e:e]||(i[e]=[])).push(t)})}),o.push(t)}function r(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)o+=(e=i)[0]*(i=t[n])[1]-e[1]*i[0];return Math.abs(o)}(jt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var i={},o=[],s=[];return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),o.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){i[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){i[t<0?~t:t].length<2&&o.push(t)})})}),(n=(o=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}var r={},i={},o={},s=[],a=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,r,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var l=r===n?n:n.concat(r);i[l.start=n.start]=o[l.end=r.end]=l}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=a,r=o[a]){delete o[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=o[c.end=n.end]=c}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=a]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s}(t,o)).length)>1)for(var s,a,u=1,l=r(o[0]);u<n;++u)(s=r(o[u]))>l&&(a=o[0],o[0]=o[u],o[u]=a,l=s);return o})}}).apply(this,arguments))}(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=To(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=q(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Mt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),t},t.flip=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=kt(t)),T(t,function(t){var e=t[0];t[0]=t[1],t[1]=e}),t},t.simplify=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=kt(t)),O(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;Yt(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Qt(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return Qt(t,e,n)});break;case"Polygon":t.coordinates=$t(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return $t(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=te,t.tag=function(t,e,n,r){return t=kt(t),e=kt(e),L(t,function(t){t.properties||(t.properties={}),L(e,function(e){void 0===t.properties[r]&&Mt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return l(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.envelope=ne,t.square=re,t.circle=oe,t.midpoint=function(t,e){return ie(t,Dt(t,e)/2,se(t,e))},t.center=ae,t.centerOfMass=function t(e,n){switch(J(e)){case"Point":return e;case"Polygon":var i=[];T(e,function(t){i.push(t)});var o,s,a,u,l,c,h,p,f=ue(e,n),d=f.geometry.coordinates,g=0,y=0,m=0,_=i.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(o=0;o<i.length-1;o++)u=(s=_[o])[0],l=(a=_[o+1])[0],m+=p=u*(h=a[1])-l*(c=s[1]),g+=(u+l)*p,y+=(c+h)*p;if(0===m)return f;var v=1/(.5*m*6);return r([d[0]+v*g,d[1]+v*y],n);default:var x=Tt(e);return x?t(x,n):ue(e,n)}},t.centroid=ue,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return L(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),l(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=Dt,t.explode=le,t.bbox=q,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Ie(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Ie(t))}),e},t.bboxPolygon=ee,t.booleanPointInPolygon=Mt,t.nearestPoint=Se,t.nearestPointOnLine=Ye,t.nearestPointToLine=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return O(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,s=null;return L(t,function(t){var n=nn(t,e,{units:r});n<o&&(o=n,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var n=U(t),r=W(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],d=r[1][1],g=void 0!==s?s:r[1][2],y=r[2][0],m=r[2][1],_=void 0!==a?a:r[2][2];return(_*(u-c)*(l-d)+p*(u-f)*(l-m)+g*(u-y)*(l-h)-g*(u-c)*(l-m)-_*(u-f)*(l-h)-p*(u-y)*(l-d))/((u-c)*(l-d)+(u-f)*(l-m)+(u-y)*(l-h)-(u-c)*(l-m)-(u-f)*(l-h)-(u-y)*(l-d))},t.tin=Lt,t.bearing=se,t.destination=ie,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=function(t,e,n,r,i,o,s,a){var u,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==p.x&&null!==p.y&&p:(h=(s-i)*(l=e-o)-(a-o)*(c=t-i),c=((n-t)*l-(r-e)*c)/u,p.x=t+(l=h/u)*(n-t),p.y=e+l*(r-e),l>=0&&l<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&i.features.push(r([s[0],s[1]]))}})}),i},t.pointOnFeature=on,t.area=an,t.along=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,s=0;s<i.length&&!(e>=o&&s===i.length-1);s++){if(o>=e){var a=e-o;if(a){var u=se(i[s],i[s-1])-180;return ie(i[s],a,u,n)}return r(i[s])}o+=Dt(i[s],i[s+1],n)}return r(i[i.length-1])},t.length=hn,t.lineSlice=function(t,e,n){var r=G(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var i,o=Ye(n,t),s=Ye(n,e),u=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)u.push(r[l]);return u.push(i[1].geometry.coordinates),a(u,n.properties)},t.lineSliceAlong=pn,t.pointGrid=mn,t.truncate=_n,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return k(t,function(t){e.push(t)}),l(e)},t.lineIntersect=Xe,t.lineChunk=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return k(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=hn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(pn(t,e*s,e*(s+1),{units:n}))}(t,e,r,function(t){o.push(t)})}),l(o)},t.unkinkPolygon=function(t){var e=[];return k(t,function(t){"Polygon"===t.geometry.type&&L(function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&Mt(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&an(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,s=[],a=0;a<i;a++){var u=t.geometry.coordinates[a];bn(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=s.length,h=function(t,e,n){function r(t,n,r,i){var u,l,c=o[t][n],h=o[t][n+1],p=o[r][i],f=o[r][i+1],d=function(t,e,n,r){if(vn(t,n)||vn(t,r)||vn(e,n)||vn(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],c=r[0],h=r[1],p=(i-s)*(l-h)-(o-a)*(u-c);return 0===p?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/p,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/p]}(c,h,p,f);if(null!==d&&(l=f[0]!==p[0]?(d[0]-p[0])/(f[0]-p[0]):(d[1]-p[1])/(f[1]-p[1]),!((u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]))>=1||u<=0||l>=1||l<=0))){var g=!a[d];g&&(a[d]=!0),s.push(e?e(d,t,n,c,h,u,r,i,p,f,l,g):d)}}function i(t,e){var n,r,i,s,a=o[t][e],u=o[t][e+1];return a[0]<u[0]?(n=a[0],r=u[0]):(n=u[0],r=a[0]),a[1]<u[1]?(i=a[1],s=u[1]):(i=u[1],s=a[1]),{minX:n,minY:i,maxX:r,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,s=[],a={};if(n){for(var u=[],l=0;l<o.length;l++)for(var c=0;c<o[l].length-1;c++)u.push(i(l,c));var h=To();h.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)h.search(i(p,f)).forEach(function(t){r(p,f,t.ring,t.edge)});else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)r(p,f,d,g);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s}(t,function(t,e,n,r,i,o,s,a,u,l,c,h){return[t,e,n,r,i,o,s,a,u,l,c,h]}),p=h.length;if(0==p){var f=[];for(a=0;a<i;a++)f.push(o([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(xn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[a])}));var d=l(f);return e(),n(),d}var g=[],y=[];for(a=0;a<i;a++){g.push([]);for(var m=0;m<t.geometry.coordinates[a].length-1;m++)g[a].push([new ns(t.geometry.coordinates[a][(m+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,m],[a,(m+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),y.push(new rs(t.geometry.coordinates[a][m],[a,(m-1).modulo(t.geometry.coordinates[a].length-1)],[a,m],void 0,void 0,!1,!0))}for(a=0;a<p;a++)g[h[a][1]][h[a][2]].push(new ns(h[a][0],h[a][5],[h[a][1],h[a][2]],[h[a][6],h[a][7]],void 0)),h[a][11]&&y.push(new rs(h[a][0],[h[a][1],h[a][2]],[h[a][6],h[a][7]],void 0,void 0,!0,!0));var _=y.length;for(a=0;a<g.length;a++)for(m=0;m<g[a].length;m++)g[a][m].sort(function(t,e){return t.param<e.param?-1:1});var v=[];for(a=0;a<_;a++)v.push({minX:y[a].coord[0],minY:y[a].coord[1],maxX:y[a].coord[0],maxY:y[a].coord[1],index:a});var x=To();for(x.load(v),a=0;a<g.length;a++)for(m=0;m<g[a].length;m++)for(var b=0;b<g[a][m].length;b++){E=b==g[a][m].length-1?g[a][(m+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:g[a][m][b+1].coord;var w=x.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];g[a][m][b].nxtIsectAlongEdgeIn=w.index}for(a=0;a<g.length;a++)for(m=0;m<g[a].length;m++)for(b=0;b<g[a][m].length;b++){var E=g[a][m][b].coord,C=(w=x.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;C<c?y[C].nxtIsectAlongRingAndEdge2=g[a][m][b].nxtIsectAlongEdgeIn:bn(y[C].ringAndEdge1,g[a][m][b].ringAndEdgeIn)?y[C].nxtIsectAlongRingAndEdge1=g[a][m][b].nxtIsectAlongEdgeIn:y[C].nxtIsectAlongRingAndEdge2=g[a][m][b].nxtIsectAlongEdgeIn}var I=[];for(a=0,m=0;m<i;m++){var S=a;for(b=0;b<t.geometry.coordinates[m].length-1;b++)y[a].coord[0]<y[S].coord[0]&&(S=a),a++;var T=y[S].nxtIsectAlongRingAndEdge2;for(b=0;b<y.length;b++)if(y[b].nxtIsectAlongRingAndEdge1==S||y[b].nxtIsectAlongRingAndEdge2==S){var M=b;break}var A=xn([y[M].coord,y[S].coord,y[T].coord],!0)?1:-1;I.push({isect:S,parent:-1,winding:A})}for(I.sort(function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1}),f=[];I.length>0;){var P=I.pop(),L=P.isect,N=P.parent,R=P.winding,O=f.length,D=[y[L].coord],k=L;if(y[L].ringAndEdge1Walkable)var z=y[L].ringAndEdge1,F=y[L].nxtIsectAlongRingAndEdge1;else z=y[L].ringAndEdge2,F=y[L].nxtIsectAlongRingAndEdge2;for(;!bn(y[L].coord,y[F].coord);){D.push(y[F].coord);var j=void 0;for(a=0;a<I.length;a++)if(I[a].isect==F){j=a;break}if(null!=j&&I.splice(j,1),bn(z,y[F].ringAndEdge1)){if(z=y[F].ringAndEdge2,y[F].ringAndEdge2Walkable=!1,y[F].ringAndEdge1Walkable){var B={isect:F};xn([y[k].coord,y[F].coord,y[y[F].nxtIsectAlongRingAndEdge2].coord],1==R)?(B.parent=N,B.winding=-R):(B.parent=O,B.winding=R),I.push(B)}k=F,F=y[F].nxtIsectAlongRingAndEdge2}else z=y[F].ringAndEdge1,y[F].ringAndEdge1Walkable=!1,y[F].ringAndEdge2Walkable&&(B={isect:F},xn([y[k].coord,y[F].coord,y[y[F].nxtIsectAlongRingAndEdge1].coord],1==R)?(B.parent=N,B.winding=-R):(B.parent=O,B.winding=R),I.push(B)),k=F,F=y[F].nxtIsectAlongRingAndEdge1}D.push(y[F].coord),f.push(o([D],{index:O,parent:N,winding:R,netWinding:void 0}))}return d=l(f),e(),n(),d}(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),l(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=U(t),e=U(e),i=i||100,o=o||10,new ls({x:t[0],y:t[1]},{x:e[0],y:e[1]},r=r||{}).Arc(i,{offset:o}).json()},t.lineSegment=Ge,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),r=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=_n(e,{precision:7});switch(r){case"Point":return En(t,i);case"MultiPoint":return wn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wn(t,Xe(t,i))}},t.lineArc=Sn,t.polygonToLine=Mn,t.lineToPolygon=Pn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=G(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){cs(t,e,s)}),1===s.length?a(s[0],i):c(s,i);case"Polygon":return o(kn(r,e),i);case"MultiPolygon":return p(r.map(function(t){return kn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Vn,t.sector=function(t,e,n,r,i){if(!C(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Un(n)===Un(r))return oe(t,e,i);var s=G(t),a=[[s]];return T(Sn(t,e,n,r,i),function(t){a[0].push(t)}),a[0].push(s),o(a)},t.rhumbBearing=He,t.rhumbDistance=Ke,t.rhumbDestination=Gn,t.polygonTangents=function(t,e){var n,i,o,s=G(t),a=G(e);switch(J(e)){case"Polygon":n=a[0][0],i=a[0][0],o=Zn(a[0][0],a[0][a[0].length-1],s);var u=Xn(a[0],s,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=a[0][0][0],i=a[0][0][0],o=Zn(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=Xn(t[0],s,o,void 0,n,i);n=e[0],i=e[1]})}return l([r(n),r(i)])},t.rewind=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=kt(t));var i=[];switch(t.type){case"GeometryCollection":return O(t,function(t){Hn(t,n)}),t;case"FeatureCollection":return L(t,function(t){L(Hn(t,n),function(t){i.push(t)})}),l(i)}return Hn(t,n)},t.isobands=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},s=n.breaksProperties||[];if(H(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!C(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(s))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;H(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];l.push(h.properties[n]?h.properties[n]:0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var s=+e[i-1],a=+e[i],u=Jn(t,s,a-s),l=function(t){var e=[],n=[];u.forEach(function(t){var r=an(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}(),c=function(t){for(var e=l.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var s=o([e[r].lrCoordinates]),a=r+1;a<e.length;a++)if(!e[a].grouped){var u=o([e[a].lrCoordinates]);(function(t,e){for(var n=le(u),r=0;r<n.features.length;r++)if(!Mt(n.features[r],e))return!1;return!0})(0,s)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0)}n.push(i)}return n}(),h={};h.groupedRings=c,h[n]=s+"-"+a,r.push(h)}return r}(a,e,r);return l((u=function(t,e,n){var r=q(n),i=r[0],o=r[1],s=(r[2]-r[0])/(e[0].length-1),a=(r[3]-r[1])/(e.length-1),u=function(t){t[0]=t[0]*s+i,t[1]=t[1]*a+o};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(u)})})}),t}(u,a,t)).map(function(t,e){if(s[e]&&!C(s[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,s[e]);return n[r]=t[r],p(t.groupedRings,n)}))},t.transformRotate=tr,t.transformScale=er,t.transformTranslate=function(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==s&&void 0!==s||(t=kt(t)),T(t,function(t){var r=G(Gn(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=J(t),o=t.properties;switch(i){case"LineString":return or(t,e,r);case"MultiLineString":var s=[];return k(t,function(t){s.push(or(t,e,r).geometry.coordinates)}),c(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=la.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){aa.findEdgeRingContaining(t,r)&&r.push(t)}),l(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return k(t,function(t){k(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!ur(e,t);case"Polygon":return!Mt(t,e)}break;case"LineString":switch(e.type){case"Point":return!ur(t,e);case"LineString":return!function(t,e){return Xe(t,e).features.length>0}(t,e);case"Polygon":return!lr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Mt(e,t);case"LineString":return!lr(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Mt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Mt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)})}),n},t.booleanContains=function(t,e){var n=J(t),r=J(e),i=W(t),o=W(e),s=G(t),a=G(e);switch(n){case"Point":switch(r){case"Point":return hr(s,a);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(hr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(hr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return fn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(fn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!fn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(fn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!fn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Mt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!cr(q(t),q(e)))return!1;for(;r<e.coordinates.length-1;r++)if(Mt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(i,o);case"Polygon":return function(t,e){if(!cr(q(t),q(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!Mt(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Mt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),r=J(e),i=W(t),o=W(e);switch(n){case"MultiPoint":switch(r){case"LineString":return pr(i,o);case"Polygon":return dr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return pr(o,i);case"LineString":return function(t,e){if(Xe(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),gr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return fr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return dr(o,i);case"LineString":return fr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Yn,t.booleanOverlap=vr,t.booleanPointOnLine=fn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new da({precision:6}).compare(Yt(t),Yt(e))},t.booleanWithin=dn,t.clone=kt,t.cleanCoords=Yt,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(H(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(null==r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=kt(t),r=r||3;var o=new va.DBSCAN,s=-1;return o.run(R(t),b(e,i),r,Dt).forEach(function(e){s++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=s,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.dbscan=n.properties.cluster?"edge":"noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;H(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=kt(t));var o=R(t),s=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=1e4,c=t.length,h=t[0].length,p=h>0,f=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?ba:wa,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var p=1/0,f=0;f<u;f++){var d=n(t[h],r[f]);d<=p&&(p=d)}a[h]=p}for(var g=0;g<i;g++)l+=a[g];for(var y=0;y<i;y++)c[y]={i:y,v:t[y],pr:a[y]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var m=1;m<i;m++)c[m].cs=c[m-1].cs+c[m].pr;for(var _=Math.random(),v=0;v<i-1&&c[v++].cs<_;);r.push(c[v-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,i.push(t[g]))}do{xr(e,0,f);for(var y=0;y<c;y++){for(var m=1/0,_=0,v=0;v<e;v++)(a=p?Ea(t[y],i[v]):Math.abs(t[y]-i[v]))<=m&&(m=a,_=v);s[y]=_,f[_]++}for(var x=[],b=(o=[],0);b<e;b++)x[b]=p?xr(h,0,x[b]):0,o[b]=i[b];if(p){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<c;E++)for(var C=x[s[E]],I=t[E],S=0;S<h;S++)C[S]+=I[S];u=!0;for(var T=0;T<e;T++){for(var M=i[T],A=x[T],P=o[T],L=f[T],N=0;N<h;N++)M[N]=A[N]/L||0;if(u)for(var R=0;R<h;R++)if(P[R]!=M[R]){u=!1;break}}}else{for(var O=0;O<c;O++)x[s[O]]+=t[O];for(var D=0;D<e;D++)i[D]=x[D]/f[D]||0;u=!0;for(var k=0;k<e;k++)if(o[k]!=i[k]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}}(o,n,o.slice(0,n)),a={};return s.centroids.forEach(function(t,e){a[e]=t}),L(t,function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=a[n]}),t},t.pointToLineDistance=nn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==br(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==br(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Ge(Yt(t)).features,r=Ge(Yt(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){return _(He(o[0],o[1]))===_(He(e[0],e[1]))}(0,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,u=i.obstacles||l([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var c=U(t),h=U(n);switch(t=r(c),n=r(h),J(u)){case"FeatureCollection":if(0===u.features.length)return a([c,h]);break;case"Polygon":u=l([e(W(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=q(er(ee(q(p)),1.15));o||(o=Dt([f[0],f[1]],[f[2],f[1]],i)/100),p.features.pop(),p.features.pop();for(var d=f[0],g=f[1],y=f[2],m=f[3],_=o/Dt([d,g],[y,g],i)*(y-d),v=o/Dt([d,g],[d,m],i)*(m-g),x=y-d,b=m-g,w=(x-Math.floor(x/_)*_)/2,I=[],S=[],T=[],M=[],A=1/0,P=1/0,L=m-(b-Math.floor(b/v)*v)/2,N=0;L>=g;){for(var R=[],O=[],D=d+w,k=0;D<=y;){var z=r([D,L]),F=function(t,e){for(var n=0;n<e.features.length;n++)if(Mt(t,e.features[n]))return!0;return!1}(z,u);R.push(F?0:1),O.push(D+"|"+L);var j=Dt(z,t);!F&&j<A&&(A=j,T={x:k,y:N});var B=Dt(z,n);!F&&B<P&&(P=B,M={x:k,y:N}),D+=_,k++}S.push(R),I.push(O),L-=v,N++}var V=new Er(S,{diagonal:!0}),G=[c];return Ca.search(V,V.grid[T.y][T.x],V.grid[M.y][M.x]).forEach(function(t){var e=I[t.x][t.y].split("|");G.push([+e[0],+e[1]])}),G.push(h),Yt(a(G))},t.voronoi=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return H(t,"Point","points"),l(function(){function t(t){return new Kr(t.map(function(r,i){var o=[Math.round(e(r,i,t)/Ra)*Ra,Math.round(n(r,i,t)/Ra)*Ra];return o.index=i,o.data=r,o}),r)}var e=Sr,n=Tr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Ia(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Ia(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Jr))},t.ellipse=Qr,t.centerMean=ti,t.centerMedian=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var r=e.weight,i=ti(t,{weight:e.weight}),o=l([]);return L(t,function(t){o.features.push(ue(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},ei(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!C(i))throw new Error("properties must be a number");var o=R(t).length,s=ti(t,{weight:r}),a=0,u=0,c=0;L(t,function(t){var e=t.properties[r]||1,n=ni(G(t),G(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e});var h=a-u,p=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),f=Math.atan((h+p)/(2*c)),d=180*f/Math.PI,g=0,y=0,m=0;L(t,function(t){var e=t.properties[r]||1,n=ni(G(t),G(s));g+=Math.pow(n.x*Math.cos(f)-n.y*Math.sin(f),2)*e,y+=Math.pow(n.x*Math.sin(f)+n.y*Math.cos(f),2)*e,m+=e});var _=Math.sqrt(2*g/m),v=Math.sqrt(2*y/m),x=Qr(s,_,v,{units:"degrees",angle:d,steps:n,properties:i}),b=Pt(t,l([x])),w={meanCenterCoordinates:G(s),semiMajorAxis:_,semiMinorAxis:v,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*R(b).length/o};return x.properties.standardDeviationalEllipse=w,x},t.difference=function(t,n){var r=W(t),i=W(n),o=t.properties||{};if(r=Pi(r),i=Pi(i),!r)return null;if(!i)return e(r,o);var s=new Gl,a=s.read(r),u=s.read(i),l=Zp.difference(a,u);return l.isEmpty()?null:e((new Xl).write(l),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return O(t,function(t){var n=so(t,e,r,i);n&&o.push(n)}),l(o);case"FeatureCollection":return L(t,function(t){var n=so(t,e,r,i);n&&L(n,function(t){t&&o.push(t)})}),l(o)}return so(t,e,r,i)},t.union=uo,t.intersect=lo,t.dissolve=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;H(t,"Polygon","dissolve");var r=kt(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var s=Ve();for(var u in s.load(r),i){var l=i[u],c=!1;if(s.search(l).features.forEach(function(t){l=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=co(e,o);0!==r&&(e-=r)}if(e!==+u){var h=i[e];h&&l&&(void 0!==n&&h.properties[n]!==l.properties[n]||vr(l,h)&&function(t,e){return Xe(a(R(l)),a(R(e))).features.length>0}(0,h)&&(i[u]=uo(l,h),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),i.splice(e,1),l.properties.origIndexPosition=u,s.remove(l,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!l)continue;l.properties.origIndexPosition=u,s.insert(l),u--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.hexGrid=ho,t.mask=function(t,e){var n=o(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),r=function(t){var e=[],n=[];return k(t,function(t){var r=t.geometry.coordinates,i=r[0],s=r.slice(1);e.push(o([i])),s.forEach(function(t){n.push(o([t]))})}),[l(e),l(n)]}(t),i=r[0],s=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),k(e,function(t){r.push(t.geometry.coordinates[0])}),k(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}(n,i=po(i),s=po(s))},t.squareGrid=go,t.triangleGrid=yo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(H(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=q(t);switch(r){case"point":case"points":s=mn(a,e,n);break;case"square":case"squares":s=go(a,e,n);break;case"hex":case"hexes":s=ho(a,e,n);break;case"triangle":case"triangles":s=yo(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return L(s,function(e){var s=0,a=0;L(t,function(t){var u,l=Dt("point"===r?e:ue(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u});var l=kt(e);l.properties[i]=s/a,u.push(l)}),l(u)},t.pointOnSurface=on,t.polygonToLineString=Mn,t.lineStringToPolygon=Pn,t.inside=Mt,t.within=Pt,t.bezier=te,t.nearest=Se,t.pointOnLine=Ye,t.lineDistance=hn,t.radians2degrees=v,t.degrees2radians=x,t.distanceToDegrees=m,t.distanceToRadians=y,t.radiansToDistance=g,t.bearingToAngle=_,t.convertDistance=b,t.toMercator=Je,t.toWgs84=Qe,t.randomPosition=ri,t.randomPoint=ii,t.randomPolygon=oi,t.randomLineString=si,t.getCluster=ui,t.clusterEach=li,t.clusterReduce=ci,t.createBins=hi,t.applyFilter=pi,t.propertiesContainsFilter=fi,t.filterProperties=di,t.earthRadius=mo,t.factors=_o,t.unitsFactors=vo,t.areaFactors=xo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=l,t.multiLineString=c,t.multiPoint=h,t.multiPolygon=p,t.geometryCollection=f,t.round=d,t.radiansToLength=g,t.lengthToRadians=y,t.lengthToDegrees=m,t.bearingToAzimuth=_,t.radiansToDegrees=v,t.degreesToRadians=x,t.convertLength=b,t.convertArea=w,t.isNumber=E,t.isObject=C,t.validateBBox=I,t.validateId=S,t.getCoord=U,t.getCoords=G,t.containsNumber=X,t.geojsonType=Z,t.featureOf=Y,t.collectionOf=H,t.getGeom=W,t.getGeomType=K,t.getType=J,t.coordEach=T,t.coordReduce=M,t.propEach=A,t.propReduce=P,t.featureEach=L,t.featureReduce=N,t.coordAll=R,t.geomEach=O,t.geomReduce=D,t.flattenEach=k,t.flattenReduce=z,t.segmentEach=F,t.segmentReduce=j,t.lineEach=B,t.lineReduce=V,Object.defineProperty(t,"__esModule",{value:!0})}(e)},CvOP:function(t,e,n){"use strict";var r=n("QoYD");window.Suggestions=t.exports=r},"E9/g":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("6Xbx"),i=n("B1iP"),o=n("qLnt"),s=n("grVA"),a=n("V7AE"),u=function(t){function e(n,r,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.a;break;case 1:if(!n){this.destination=s.a;break}if("object"==typeof n){n instanceof e?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,n,r,i)}}return Object(r.b)(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.a),l=function(t){function e(e,n,r,o){var a;t.call(this),this._parentSubscriber=e;var u=this;Object(i.a)(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==s.a&&(u=Object.create(n),Object(i.a)(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=a,this._error=r,this._complete=o}return Object(r.b)(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},Fag2:function(t,e,n){"use strict";t.exports=function t(e,n){return{read:function(t){return JSON.parse(t,e)},write:function(t){return JSON.stringify(t,n)},extend:t}}()},GyQn:function(t,e,n){"use strict";var r,i,o;function s(t,e){var n;if((n=i[t.slice(0,1)])?t=t.slice(1):n=i[""],n.reserved)throw new Error("Reserved expression operations are not supported");return function(t,e,n){return e.split(",").reduce(function(e,i){var s,a;if(s={},"*"===i.slice(-1)&&(i=i.slice(0,-1),s.explode=!0),o.test(i)){var u=o.exec(i);i=u[1],s.maxLength=parseInt(u[2])}return i=r.decode(i),null==(a=n[i])?e:(Array.isArray(a)?e=a.reduce(function(e,n){return e.length?(e+=s.explode?t.separator:",",t.named&&s.explode&&(e+=t.encoder(i),e+=n.length?"=":t.empty)):(e+=t.first,t.named&&(e+=t.encoder(i),e+=n.length?"=":t.empty)),e+t.encoder(n)},e):"object"==typeof a?e=Object.keys(a).reduce(function(e,n){return e.length?e+=s.explode?t.separator:",":(e+=t.first,t.named&&!s.explode&&(e+=t.encoder(i),e+=a[n].length?"=":t.empty)),e+=t.encoder(n),(e+=s.explode?"=":",")+t.encoder(a[n])},e):(a=String(a),s.maxLength&&(a=a.slice(0,s.maxLength)),e+=e.length?t.separator:t.first,t.named&&(e+=t.encoder(i),e+=a.length?"=":t.empty),e+=t.encoder(a)),e)},"")}(n,t,e)}r=n("tjsL"),o=/^([^:]*):([0-9]+)$/,i={"":{first:"",separator:",",named:!1,empty:"",encoder:r.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:r.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:r.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:r.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:r.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:r.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:r.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:r.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},t.exports={expand:function(t,e){var n,r,i;for(i="",r=0;;){if(-1===(n=t.indexOf("{",r))){i+=t.slice(r);break}i+=t.slice(r,n),r=t.indexOf("}",n)+1,i+=s(t.slice(n+1,r-1),e)}return i}}},IPRB:function(t,e,n){"use strict";var r=n("Q1or"),i=n("z46Y"),o=n("p1qn"),s=n("UWqp");t.exports=function(t){return function(e,n){this.name=t,r("string"==typeof e,"accessToken required to instantiate Mapbox client");var a=i.DEFAULT_ENDPOINT;void 0!==n&&(r("object"==typeof n,"options must be an object"),n.endpoint&&(r("string"==typeof n.endpoint,"endpoint must be a string"),a=n.endpoint),n.account&&(r("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=o({endpoint:a,accessToken:e}),this.accessToken=e,this.endpoint=a,this.owner=this.owner||s(e),r(!!this.owner,"could not determine account from provided accessToken")}}},"J+GW":function(t,e,n){"use strict";var r,i,o,s,a,u;r=n("s/ZR"),i=n("SGHC"),o=n("rC1g"),u=n("QQ8X"),s={read:function(t){return t},write:function(t){return t}},a={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},t.exports=r({init:function(t){return t.registry=t.registry||o,t},request:function(t,e){var n,r;return r=t.headers||(t.headers={}),n=i.parse(r["Content-Type"]||e.mime||"text/plain"),r.Accept=r.Accept||e.accept||n.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in t?(r["Content-Type"]=n.raw,e.registry.lookup(n).catch(function(){if(e.permissive)return s;throw"mime-unknown"}).then(function(r){return u((r.write||a.write).bind(void 0,t.entity,{client:e.client||t.originator,request:t,mime:n,registry:e.registry})).catch(function(){throw"mime-serialization"}).then(function(e){return t.entity=e,t})})):t},response:function(t,e){if(!(t.headers&&t.headers["Content-Type"]&&t.entity))return t;var n=i.parse(t.headers["Content-Type"]);return e.registry.lookup(n).catch(function(){return s}).then(function(r){return u((r.read||a.read).bind(void 0,t.entity,{client:e.client||t.request&&t.request.originator,response:t,mime:n,registry:e.registry})).catch(function(e){throw t.error="mime-deserialization",t.cause=e,t}).then(function(e){return t.entity=e,t})})}})},LMZF:function(t,e,n){"use strict";(function(t){n.d(e,"e",function(){return Jt}),n.d(e,"G",function(){return Gt}),n.d(e,"I",function(){return Xt}),n.d(e,"F",function(){return Yt}),n.d(e,"q",function(){return Zt}),n.d(e,"a",function(){return it}),n.d(e,"u",function(){return at}),n.d(e,"t",function(){return ut}),n.d(e,"b",function(){return nt}),n.d(e,"c",function(){return rt}),n.d(e,"H",function(){return ce}),n.d(e,"A",function(){return kt}),n.d(e,"K",function(){return Ft}),n.d(e,"o",function(){return Re}),n.d(e,"d",function(){return ze}),n.d(e,"i",function(){return Mt}),n.d(e,"h",function(){return $}),n.d(e,"x",function(){return je}),n.d(e,"y",function(){return Fe}),n.d(e,"D",function(){return p}),n.d(e,"B",function(){return f}),n.d(e,"l",function(){return R}),n.d(e,"k",function(){return l}),n.d(e,"j",function(){return g}),n.d(e,"s",function(){return y}),n.d(e,"r",function(){return At}),n.d(e,"v",function(){return $t}),n.d(e,"w",function(){return te}),n.d(e,"f",function(){return pt}),n.d(e,"g",function(){return xt}),n.d(e,"p",function(){return Et}),n.d(e,"z",function(){return re}),n.d(e,"C",function(){return ie}),n.d(e,"m",function(){return Te}),n.d(e,"n",function(){return Me}),n.d(e,"E",function(){return fe}),n.d(e,"J",function(){return Ne}),n.d(e,"V",function(){return ge}),n.d(e,"M",function(){return ct}),n.d(e,"L",function(){return bt}),n.d(e,"T",function(){return b}),n.d(e,"_3",function(){return T}),n.d(e,"W",function(){return et}),n.d(e,"X",function(){return tt}),n.d(e,"N",function(){return An}),n.d(e,"O",function(){return Hn}),n.d(e,"P",function(){return Gi}),n.d(e,"Q",function(){return nn}),n.d(e,"R",function(){return yr}),n.d(e,"S",function(){return Pn}),n.d(e,"Y",function(){return jn}),n.d(e,"Z",function(){return Fn}),n.d(e,"_4",function(){return Dr}),n.d(e,"_5",function(){return Fr}),n.d(e,"_0",function(){return Oe}),n.d(e,"_1",function(){return De}),n.d(e,"_2",function(){return ke}),n.d(e,"U",function(){return ot});var r=n("6Xbx"),i=n("AP4T"),o=n("2kLc"),s=n("URbD"),a=n("TO51"),u=n("qLnt"),l=function(){function t(t){this._desc=t,this.ngMetadataName="InjectionToken"}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),c="__paramaters__";function h(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,e);for(var i in r)this[i]=r[i]}}}(e);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof i)return r.apply(this,t),this;var n,o=new((n=i).bind.apply(n,[void 0].concat(t)));return s.annotation=o,s;function s(t,e,n){for(var r=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}var p=function(){var t={Emulated:0,Native:1,None:2};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t}(),f=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},d=new f("5.2.4"),g=h("Inject",function(t){return{token:t}}),y=h("Optional"),m=h("Self"),_=h("SkipSelf"),v="undefined"!=typeof window&&window,x="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,b=v||"undefined"!=typeof t&&t||x,w=Promise.resolve(0),E=null;function C(){if(!E){var t=b.Symbol;if(t&&t.iterator)E=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(E=r)}}return E}function I(t){"undefined"==typeof Zone?w.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function S(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function T(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(T).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function M(t){return t.__forward_ref__=M,t.toString=function(){return T(this())},t}function A(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===M?t():t}var P="__source",L=new Object,N=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=L),e===L)throw new Error("NullInjectorError: No provider for "+T(t)+"!");return e},t}(),R=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new U(t,e):new U(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=L,t.NULL=new N,t}(),O=function(t){return t},D=[],k=O,z=function(){return Array.prototype.slice.call(arguments)},F={},j=function(t){for(var e in t)if(t[e]===F)return e;throw Error("!prop")}({provide:String,useValue:F}),B=R.NULL,V=/\n/gm,q="\u0275",U=function(){function t(t,e,n){void 0===e&&(e=B),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(R,{token:R,fn:O,deps:D,value:this,useNew:!1}),function t(e,n){if(n)if((n=A(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Z("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Z("Unexpected provider",n);var i=A(n.provide),o=function(t){var e=function(t){var e=D,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=A(n[r]))instanceof Array)for(var o=0,s=u;o<s.length;o++){var a=s[o];a instanceof y||a==y?i|=1:a instanceof _||a==_?i&=-3:a instanceof m||a==m?i&=-5:u=a instanceof g?a.token:A(a)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=A(t.useExisting),options:6}]}else if(!(n||j in t))throw Z("'deps' required",t);return e}(t),n=O,r=D,i=!1,o=A(t.provide);if(j in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=A(t.useClass);else{if("function"!=typeof o)throw Z("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var s=e.get(i);if(s){if(s.fn!==z)throw G(i)}else e.set(i,s={token:n.provide,deps:[],useNew:!1,fn:z,value:D});s.deps.push({token:i=n,options:6})}var a=e.get(i);if(a&&a.fn==z)throw G(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e){var n=this._records.get(t);try{return function t(e,n,r,i,o){try{return function(e,n,r,i,o){var s,a;if(n){if((s=n.value)==k)throw Error(q+"Circular dependency");if(s===D){n.value=k;var u=n.useNew,l=n.fn,c=n.deps,h=D;if(c.length){h=[];for(var p=0;p<c.length;p++){var f=c[p],d=f.options,g=2&d?r.get(f.token):void 0;h.push(t(f.token,g,r,g||4&d?i:B,1&d?null:R.THROW_IF_NOT_FOUND))}}n.value=s=u?new((a=l).bind.apply(a,[void 0].concat(h))):l.apply(void 0,h)}}else s=i.get(e,o);return s}(e,n,r,i,o)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==k&&(n.value=D),t}}(t,n,this._records,this.parent,e)}catch(e){var r=e.ngTempTokenPath;throw t[P]&&r.unshift(t[P]),e.message=X("\n"+e.message,r,this.source),e.ngTokenPath=r,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(T(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function G(t){return Z("Cannot mix multi providers and regular providers",t)}function X(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==q?t.substr(2):t;var r=T(e);if(e instanceof Array)r=e.map(T).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];i.push(o+":"+("string"==typeof s?JSON.stringify(s):T(s)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(V,"\n  ")}function Z(t,e){return new Error(X(t,e))}var Y="ngDebugContext",H="ngOriginalError",W="ngErrorLogger";function K(t){return t[Y]}function J(t){return t[H]}function Q(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,e)}var $=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[W]||Q}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?K(t)?K(t):this._findContext(J(t)):null},t.prototype._findOriginalError=function(t){for(var e=J(t);e&&J(e);)e=J(e);return e},t}();function tt(t){return!!t&&"function"==typeof t.then}function et(t){return!!t&&"function"==typeof t.subscribe}Function;var nt=new l("Application Initializer"),rt=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();tt(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),it=new l("AppId");function ot(){return""+st()+st()+st()}function st(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var at=new l("Platform Initializer"),ut=new l("Platform ID"),lt=new l("appBootstrapListener"),ct=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t.ctorParameters=function(){return[]},t}();function ht(){throw new Error("Runtime compiler is not loaded")}var pt=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw ht()},t.prototype.compileModuleAsync=function(t){throw ht()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw ht()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw ht()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}(),ft=function(){},dt=function(){};function gt(t){var e=Error("No component factory found for "+T(t)+". Did you add it to @NgModule.entryComponents?");return e[_t]=t,e}var yt,mt,_t="ngComponent",vt=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw gt(t)},t}(),xt=function(){function t(){}return t.NULL=new vt,t}(),bt=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw gt(t);return new wt(e,this._ngModule)},t}(),wt=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.b)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(dt),Et=function(){},Ct=function(){var t=b.wtf;return!(!t||!(yt=t.trace)||(mt=yt.events,0))}();function It(t,e){return null}var St=Ct?function(t,e){return void 0===e&&(e=null),mt.createScope(t,e)}:function(t,e){return It},Tt=Ct?function(t,e){return yt.leaveScope(t,e),e}:function(t,e){return e},Mt=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.b)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},s=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var a=t.prototype.subscribe.call(this,i,o,s);return e instanceof u.a&&e.add(a),a},e}(a.a),At=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mt(!1),this.onMicrotaskEmpty=new Mt(!1),this.onStable=new Mt(!1),this.onError=new Mt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,s){try{return Rt(e),t.invokeTask(r,i,o,s)}finally{Ot(e)}},onInvoke:function(t,n,r,i,o,s,a){try{return Rt(e),t.invoke(r,i,o,s,a)}finally{Ot(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,Nt(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Lt,Pt,Pt);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Pt(){}var Lt={};function Nt(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Rt(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ot(t){t._nesting--,Nt(t)}var Dt=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mt,this.onMicrotaskEmpty=new Mt,this.onStable=new Mt,this.onError=new Mt}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),kt=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){At.assertNotInAngularZone(),I(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?I(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),zt=function(){function t(){this._applications=new Map,Bt.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Bt.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}();function Ft(t){Bt=t}var jt,Bt=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Vt=!0,qt=!1,Ut=new l("AllowMultipleToken");function Gt(){if(qt)throw new Error("Cannot enable prod mode after platform setup.");Vt=!1}function Xt(){return qt=!0,Vt}var Zt=function(t,e){this.name=t,this.token=e};function Yt(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new l(r);return function(e){void 0===e&&(e=[]);var o=Ht();if(!o||o.injector.get(Ut,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var s=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(jt&&!jt.destroyed&&!jt.injector.get(Ut,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jt=t.get(Wt);var e=t.get(at,null);e&&e.forEach(function(t){return t()})}(R.create({providers:s,name:r}))}return function(t){var e=Ht();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ht(){return jt&&!jt.destroyed?jt:null}var Wt=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new Dt:("zone.js"===n?void 0:n)||new At({enableLongStackTrace:Xt()}),o=[{provide:At,useValue:i}];return i.run(function(){var e=R.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),s=n.injector.get($,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return Qt(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){s.handleError(t)}})}),function(t,e,i){try{var o=((s=n.injector.get(rt)).runInitializers(),s.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return tt(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var s}(s,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(ft),i=Kt({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(Jt);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+T(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Kt(t,e){return Array.isArray(e)?e.reduce(Kt,t):Object(r.a)({},t,e)}var Jt=function(){function t(t,e,n,r,a,u){var l=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Xt(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run(function(){l.tick()})}});var c=new i.a(function(t){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular(function(){t.next(l._stable),t.complete()})}),h=new i.a(function(t){var e;l._zone.runOutsideAngular(function(){e=l._zone.onStable.subscribe(function(){At.assertNotInAngularZone(),I(function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,t.next(!0))})})});var n=l._zone.onUnstable.subscribe(function(){At.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(c,s.a.call(h))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof dt?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof wt?null:this._injector.get(Et),o=n.create(R.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var s=o.injector.get(kt,null);return s&&o.injector.get(zt).registerApplication(o.location.nativeElement,s),this._loadComponent(o),Xt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Tt(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;Qt(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(lt,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),Qt(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=St("ApplicationRef#tick()"),t}();function Qt(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var $t=function(){},te=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),ee=function(t){this.nativeElement=t},ne=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Mt}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[C()]=function(){return this._results[C()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),re=function(){},ie=function(){},oe=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof se?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),se=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.b)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return ae(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return ue(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(oe);function ae(t,e,n){t.childNodes.forEach(function(t){t instanceof se&&(e(t)&&n.push(t),ae(t,e,n))})}function ue(t,e,n){t instanceof se&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof se&&ue(t,e,n)})}var le=new Map;function ce(t){return le.get(t)||null}function he(t){le.set(t.nativeNode,t)}function pe(t,e){var n=ge(t),r=ge(e);return n&&r?function(t,e,n){for(var r=t[C()](),i=e[C()]();;){var o=r.next(),s=i.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}(t,e,pe):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||S(t,e)}var fe=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),de=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function ge(t){return!!ye(t)&&(Array.isArray(t)||!(t instanceof Map)&&C()in t)}function ye(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var me=function(){function t(){}return t.prototype.supports=function(t){return ge(t)},t.prototype.create=function(t){return new ve(t)},t}(),_e=function(t,e){return e},ve=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_e}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Ee(n,r,i)?e:n,s=Ee(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,l=a-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,p=h+c;l<=p&&p<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}s!==a&&t(o,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!ge(t))throw new Error("Error trying to diff '"+T(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)i=this._trackByFn(a,r=t[a]),null!==o&&S(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,a)),S(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,a),s=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[C()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&S(o.trackById,i)?(s&&(o=e._verifyReinsertion(o,t,i,n)),S(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(S(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(S(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new xe(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new we),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new we),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),xe=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},be=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&S(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),we=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new be,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Ee(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Ce=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||ye(t)},t.prototype.create=function(){return new Ie},t}(),Ie=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||ye(t)))throw new Error("Error trying to diff '"+T(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Se(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){S(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Se=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Te=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();return new t(e=e.concat(r))}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _,new y]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t}(),Me=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _,new y]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Ae=[new Ce],Pe=new Te([new me]),Le=new Me(Ae),Ne=Yt(null,"core",[{provide:ut,useValue:"unknown"},{provide:Wt,deps:[R]},{provide:zt,deps:[]},{provide:ct,deps:[]}]),Re=new l("LocaleId");function Oe(){return Pe}function De(){return Le}function ke(t){return t||"en-US"}var ze=function(t){},Fe=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),je=function(){};function Be(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Ve(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function qe(t,e){return t.nodes[e]}function Ue(t,e){return t.nodes[e]}function Ge(t,e){return t.nodes[e]}function Xe(t,e){return t.nodes[e]}function Ze(t,e){return t.nodes[e]}var Ye={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function He(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return We(n,e),n}(i,t)}function We(t,e){t[Y]=e,t[W]=e.logError.bind(e)}function Ke(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Je=function(){},Qe=new Map;function $e(t){var e=Qe.get(t);return e||(e=T(t)+"_"+Qe.size,Qe.set(t,e)),e}var tn="$$undefined",en="$$empty";function nn(t){return{id:tn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var rn=0;function on(t,e,n,r){return!(!(2&t.state)&&S(t.oldValues[e.bindingIndex+n],r))}function sn(t,e,n,r){return!!on(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function an(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!pe(i,r)){var o=e.bindings[n].name;throw He(Ye.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function un(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function ln(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function cn(t,e,n,r){try{return un(33554432&t.def.nodes[e].flags?Ue(t,e).componentView:t),Ye.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function hn(t){return t.parent?Ue(t.parent,t.parentNodeDef.nodeIndex):null}function pn(t){return t.parent?t.parentNodeDef.parent:null}function fn(t,e){switch(201347067&e.flags){case 1:return Ue(t,e.nodeIndex).renderElement;case 2:return qe(t,e.nodeIndex).renderText}}function dn(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function gn(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function yn(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=t[0],o=t[1];"number"==typeof i?(e[i]=o,n|=function(t){return 1<<t%32}(i)):r[i]=o}),{matchedQueries:e,references:r,matchedQueryIds:n}}function mn(t,e){return t.map(function(t){var n,r;return Array.isArray(t)?(r=t[0],n=t[1]):(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,P,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:$e(n)}})}function _n(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===p.Native?Ue(t,n.renderParent.nodeIndex).renderElement:void 0:e}var vn=new WeakMap;function xn(t){var e=vn.get(t);return e||((e=t(function(){return Je})).factory=t,vn.set(t,e)),e}function bn(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(fn(t,t.def.lastRenderRootNode))),wn(t,e,0,t.def.nodes.length-1,n,r,i)}function wn(t,e,n,r,i,o,s){for(var a=n;a<=r;a++){var u=t.def.nodes[a];11&u.flags&&Cn(t,u,e,i,o,s),a+=u.childCount}}function En(t,e,n,r,i,o){for(var s=t;s&&!dn(s);)s=s.parent;for(var a=s.parent,u=pn(s),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=a.def.nodes[c];h.ngContentIndex===e&&Cn(a,h,n,r,i,o),c+=h.childCount}if(!a.parent){var p=t.root.projectableNodes[e];if(p)for(c=0;c<p.length;c++)In(t,p[c],n,r,i,o)}}function Cn(t,e,n,r,i,o){if(8&e.flags)En(t,e.ngContent.index,n,r,i,o);else{var s=fn(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&In(t,s,n,r,i,o),32&e.bindingFlags&&In(Ue(t,e.nodeIndex).componentView,s,n,r,i,o)):In(t,s,n,r,i,o),16777216&e.flags)for(var a=Ue(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)bn(a[u],n,r,i,o);1&e.flags&&!e.element.name&&wn(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function In(t,e,n,r,i,o){var s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}var Sn=/^:([^:]+):(.+)$/;function Tn(t){if(":"===t[0]){var e=t.match(Sn);return[e[1],e[2]]}return["",t]}function Mn(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function An(t,e,n,r,i,o){t|=1;var s=yn(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?xn(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Je},provider:null,text:null,query:null,ngContent:null}}function Pn(t,e,n,r,i,o,s,a,u,l,c,h){void 0===s&&(s=[]),l||(l=Je);var f=yn(n),d=f.matchedQueries,g=f.references,y=f.matchedQueryIds,m=null,_=null;o&&(m=(L=Tn(o))[0],_=L[1]),a=a||[];for(var v=new Array(a.length),x=0;x<a.length;x++){var b=a[x],w=b[0],E=b[2],C=Tn(b[1]),I=C[0],S=C[1],T=void 0,M=void 0;switch(15&w){case 4:M=E;break;case 1:case 8:T=E}v[x]={flags:w,ns:I,name:S,nonMinifiedName:S,securityContext:T,suffix:M}}u=u||[];var A=new Array(u.length);for(x=0;x<u.length;x++){var P=u[x];A[x]={type:0,target:P[0],eventName:P[1],propName:null}}var L,N=(s=s||[]).map(function(t){var e=t[1],n=Tn(t[0]);return[n[0],n[1],e]});return h=function(t){if(t&&t.id===tn){var e=null!=t.encapsulation&&t.encapsulation!==p.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+rn++:en}return t&&t.id===en&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:y,references:g,ngContentIndex:r,childCount:i,bindings:v,bindingFlags:Mn(v),outputs:A,element:{ns:m,name:_,attrs:N,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Je},provider:null,text:null,query:null,ngContent:null}}function Ln(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,s=t.renderer;if(t.parent||!o){r=i.name?s.createElement(i.name,i.ns):s.createComment("");var a=_n(t,e,n);a&&s.appendChild(a,r)}else r=s.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var l=i.attrs[u];s.setAttribute(r,l[1],l[2],l[0])}return r}function Nn(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],s=Rn(t,n.nodeIndex,(h=o.eventName,(c=o.target)?c+":"+h:h)),a=o.target,u=t;"component"===o.target&&(a=null,u=e);var l=u.renderer.listen(a||r,o.eventName,s);t.disposables[n.outputIndex+i]=l}var c,h}function Rn(t,e,n){return function(r){return cn(t,e,n,r)}}function On(t,e,n,r){if(!sn(t,e,n,r))return!1;var i=e.bindings[n],o=Ue(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Fe.STYLE,i);if(null!=o){o=o.toString();var s=e.suffix;null!=s&&(o+=s)}else o=null;var a=t.renderer;null!=o?a.setStyle(n,r,o):a.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}var Dn=new Object,kn=$e(R),zn=$e(Et);function Fn(t,e,n,r){return n=A(n),{index:-1,deps:mn(r,T(e)),flags:t,token:e,value:n}}function jn(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.index=n,e[$e(r.token)]=r}return{factory:null,providersByKey:e,providers:t}}function Bn(t,e,n){if(void 0===n&&(n=R.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var r=e.tokenKey;switch(r){case kn:case zn:return t}var i=t._def.providersByKey[r];if(i){var o=t._providers[i.index];return void 0===o&&(o=t._providers[i.index]=Vn(t,i)),o===Dn?void 0:o}return t._parent.get(e.token,n)}function Vn(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Bn(t,n[0]));case 2:return new e(Bn(t,n[0]),Bn(t,n[1]));case 3:return new e(Bn(t,n[0]),Bn(t,n[1]),Bn(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Bn(t,n[o]);return new(e.bind.apply(e,[void 0].concat(i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Bn(t,n[0]));case 2:return e(Bn(t,n[0]),Bn(t,n[1]));case 3:return e(Bn(t,n[0]),Bn(t,n[1]),Bn(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Bn(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Bn(t,e.deps[0]);break;case 256:n=e.value}return void 0===n?Dn:n}function qn(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Zn(n,e),Ye.dirtyParentQueries(r),Gn(r),r}function Un(t,e,n){var r=e?fn(e,e.def.lastRenderRootNode):t.renderElement;bn(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Gn(t){bn(t,3,null,null,void 0)}function Xn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Zn(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Yn=new Object;function Hn(t,e,n,r,i,o){return new Wn(t,e,n,r,i,o)}var Wn=function(t){function e(e,n,r,i,o,s){var a=t.call(this)||this;return a.selector=e,a.componentType=n,a._inputs=i,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=r,a}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=xn(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=Ye.createRootView(t,e||[],n,i,r,Yn),a=Ge(s,o).instance;return n&&s.renderer.setAttribute(Ue(s,0).renderElement,"ng-version",d.full),new Kn(s,new tr(s),a)},e}(dt),Kn=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new ee(Ue(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new ir(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(function(){});function Jn(t,e,n){return new Qn(t,e,n)}var Qn=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new ee(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new ir(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=pn(t),t=t.parent;return t?new ir(t,e):new ir(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=qn(this._data,t);Ye.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new tr(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof wt||(i=o.get(Et));var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,s=t;return o=(n=this._data).viewContainer._embeddedViews,null==(r=e)&&(r=o.length),(i=s._view).viewContainerParent=this._view,Xn(o,r,i),function(t,e){var n=hn(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),Ye.dirtyParentQueries(i),Un(n,r>0?o[r-1]:null,i),s.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,s,a=this._embeddedViews.indexOf(t._view);return i=e,s=(o=(n=this._data).viewContainer._embeddedViews)[r=a],Zn(o,r),null==i&&(i=o.length),Xn(o,i,s),Ye.dirtyParentQueries(s),Gn(s),Un(n,i>0?o[i-1]:null,s),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=qn(this._data,t);e&&Ye.destroyView(e)},t.prototype.detach=function(t){var e=qn(this._data,t);return e?new tr(e):null},t}();function $n(t){return new tr(t)}var tr=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return bn(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){un(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Ye.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Ye.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Ye.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Gn(this._view),Ye.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function er(t,e){return new nr(t,e)}var nr=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.b)(e,t),e.prototype.createEmbeddedView=function(t){return new tr(Ye.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new ee(Ue(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(re);function rr(t,e){return new ir(t,e)}var ir=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=R.THROW_IF_NOT_FOUND),Ye.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:$e(t)},e)},t}();function or(t){return new sr(t.renderer)}var sr=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=Tn(e),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=Tn(e),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function ar(t,e,n,r){return new ur(t,e,n,r)}var ur=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||(n[r]=Vn(t,i))}}(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=R.THROW_IF_NOT_FOUND),Bn(this,{token:t,tokenKey:$e(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(xt)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+T(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var i=t._providers[r];i&&i!==Dn&&i.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),lr=$e(function(){}),cr=$e(function(){}),hr=$e(ee),pr=$e(ie),fr=$e(re),dr=$e(function(){}),gr=$e(R);function yr(t,e,n,r,i,o,s,a){var u=[];if(s)for(var l in s){var c=s[l];u[c[0]]={flags:8,name:l,nonMinifiedName:c[1],ns:null,securityContext:null,suffix:null}}var h=[];if(a)for(var p in a)h.push({type:1,propName:p,target:null,eventName:a[p]});return function(t,e,n,r,i,o,s,a,u){var l=yn(n),c=l.matchedQueries,h=l.references,p=l.matchedQueryIds;u||(u=[]),a||(a=[]),o=A(o);var f=mn(s,T(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:p,references:h,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Mn(a),outputs:u,element:null,provider:{token:i,value:o,deps:f},text:null,query:null,ngContent:null}}(t,e|=16384,n,r,i,i,o,u,h)}function mr(t,e){return br(t,e)}function _r(t,e){for(var n=t;n.parent&&!dn(n);)n=n.parent;return wr(n.parent,pn(n),!0,e.provider.value,e.provider.deps)}function vr(t,e){var n=wr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(xr(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function xr(t,e,n){return function(r){return cn(t,e,n,r)}}function br(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return wr(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(Cr(t,e,n,i[0]));case 2:return r(Cr(t,e,n,i[0]),Cr(t,e,n,i[1]));case 3:return r(Cr(t,e,n,i[0]),Cr(t,e,n,i[1]),Cr(t,e,n,i[2]));default:for(var s=Array(o),a=0;a<o;a++)s[a]=Cr(t,e,n,i[a]);return r.apply(void 0,s)}}(t,e.parent,n,r.value,r.deps);case 2048:return Cr(t,e.parent,n,r.deps[0]);case 256:return r.value}}function wr(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(Cr(t,e,n,i[0]));case 2:return new r(Cr(t,e,n,i[0]),Cr(t,e,n,i[1]));case 3:return new r(Cr(t,e,n,i[0]),Cr(t,e,n,i[1]),Cr(t,e,n,i[2]));default:for(var s=new Array(o),a=0;a<o;a++)s[a]=Cr(t,e,n,i[a]);return new(r.bind.apply(r,[void 0].concat(s)))}}var Er={};function Cr(t,e,n,r,i){if(void 0===i&&(i=R.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var s=r.tokenKey;for(s===dr&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);t;){if(e)switch(s){case lr:return or(Ir(t,e,n));case cr:return Ir(t,e,n).renderer;case hr:return new ee(Ue(t,e.nodeIndex).renderElement);case pr:return Ue(t,e.nodeIndex).viewContainer;case fr:if(e.element.template)return Ue(t,e.nodeIndex).template;break;case dr:return $n(Ir(t,e,n));case gr:return rr(t,e);default:var a=(n?e.element.allProviders:e.element.publicProviders)[s];if(a){var u=Ge(t,a.nodeIndex);return u||(u={instance:br(t,a)},t.nodes[a.nodeIndex]=u),u.instance}}n=dn(t),e=pn(t),t=t.parent}var l=o.root.injector.get(r.token,Er);return l!==Er||i===Er?l:o.root.ngModule.injector.get(r.token,i)}function Ir(t,e,n){var r;if(n)r=Ue(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!dn(r);)r=r.parent;return r}function Sr(t,e,n,r,i,o){if(32768&n.flags){var s=Ue(t,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var a=fe.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new de(a,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Tr(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],s=o.parent;for(!s&&o.flags&e&&Ar(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=Mr(t,s,e,r)),s=s.parent}}function Mr(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Ar(t,i,o.flags&n,r++),i+=o.childCount}return r}function Ar(t,e,n,r){var i=Ge(t,e);if(i){var o=i.instance;o&&(Ye.setCurrentNode(t,e),1048576&n&&Ve(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ve(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Pr(t){for(var e=t.def.nodeMatchedQueries;t.parent&&gn(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Ze(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&Ze(t,i).setDirty(),i+=o.childCount}}function Lr(t,e){var n=Ze(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=Nr(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Ge(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=Nr(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var s=e.query.bindings,a=!1,u=0;u<s.length;u++){var l=s[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,a=!0}r[l.propName]=c}a&&n.notifyOnChanges()}}function Nr(t,e,n,r,i){for(var o=e;o<=n;o++){var s=t.def.nodes[o],a=s.matchedQueries[r.id];if(null!=a&&i.push(Rr(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Ue(t,o);if((s.childMatchedQueries&r.filterId)===r.filterId&&(Nr(t,o+1,o+s.childCount,r,i),o+=s.childCount),16777216&s.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],p=hn(h);p&&p===u&&Nr(h,0,h.def.nodes.length-1,r,i)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var d=f[c];Nr(d,0,d.def.nodes.length-1,r,i)}}(s.childMatchedQueries&r.filterId)!==r.filterId&&(o+=s.childCount)}return i}function Rr(t,e,n){if(null!=n)switch(n){case 1:return Ue(t,e.nodeIndex).renderElement;case 0:return new ee(Ue(t,e.nodeIndex).renderElement);case 2:return Ue(t,e.nodeIndex).template;case 3:return Ue(t,e.nodeIndex).viewContainer;case 4:return Ge(t,e.nodeIndex).instance}}function Or(t,e,n){var r=_n(t,e,n);r&&En(t,n.ngContent.index,1,r,null,void 0)}function Dr(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function kr(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=_n(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function zr(t,e){return(null!=t?t.toString():"")+e.suffix}function Fr(t,e,n,r){for(var i=0,o=0,s=0,a=0,u=0,l=null,c=null,h=!1,p=!1,f=null,d=0;d<e.length;d++){var g=e[d];if(g.nodeIndex=d,g.parent=l,g.bindingIndex=i,g.outputIndex=o,g.renderParent=c,s|=g.flags,u|=g.matchedQueryIds,g.element){var y=g.element;y.publicProviders=l?l.element.publicProviders:Object.create(null),y.allProviders=y.publicProviders,h=!1,p=!1,g.element.template&&(u|=g.element.template.nodeMatchedQueries)}if(Br(l,g,e.length),i+=g.bindings.length,o+=g.outputs.length,!c&&3&g.flags&&(f=g),20224&g.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var m=0!=(32768&g.flags);0==(8192&g.flags)||m?l.element.publicProviders[$e(g.provider.token)]=g:(p||(p=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[$e(g.provider.token)]=g),m&&(l.element.componentProvider=g)}if(l?(l.childFlags|=g.flags,l.directChildFlags|=g.flags,l.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(l.childMatchedQueries|=g.element.template.nodeMatchedQueries)):a|=g.flags,g.childCount>0)l=g,jr(g)||(c=g);else for(;l&&d===l.nodeIndex+l.childCount;){var _=l.parent;_&&(_.childFlags|=l.childFlags,_.childMatchedQueries|=l.childMatchedQueries),c=(l=_)&&jr(l)?l.renderParent:l}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Je,updateRenderer:r||Je,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:f}}function jr(t){return 0!=(1&t.flags)&&null===t.element.name}function Br(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Vr(t,e,n,r){var i=Gr(t.root,t.renderer,t,e,n);return Xr(i,t.component,r),Zr(i),i}function qr(t,e,n){var r=Gr(t,t.renderer,null,null,e);return Xr(r,n,n),Zr(r),r}function Ur(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,Gr(t.root,i,t,e.element.componentProvider,n)}function Gr(t,e,n,r,i){var o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Xr(t,e,n){t.component=e,t.context=n}function Zr(t){var e;dn(t)&&(e=Ue(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];Ye.setCurrentNode(t,i);var s=void 0;switch(201347067&o.flags){case 1:var a=Ln(t,e,o),u=void 0;if(33554432&o.flags){var l=xn(o.element.componentView);u=Ye.createComponentView(t,o,l,a)}Nn(t,u,o,a),s={renderElement:a,componentView:u,viewContainer:null,template:o.element.template?er(t,o):void 0},16777216&o.flags&&(s.viewContainer=Jn(t,o,s));break;case 2:s=kr(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:mr(t,o)});break;case 16:s={instance:_r(t,o)};break;case 16384:(s=r[i])||(s={instance:vr(t,o)}),32768&o.flags&&Xr(Ue(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new ne;break;case 8:Or(t,e,o),s=void 0}r[i]=s}ei(t,ti.CreateViewNodes),oi(t,201326592,268435456,0)}function Yr(t){Kr(t),Ye.updateDirectives(t,1),ni(t,ti.CheckNoChanges),Ye.updateRenderer(t,1),ei(t,ti.CheckNoChanges),t.state&=-97}function Hr(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Be(t,0,256),Kr(t),Ye.updateDirectives(t,0),ni(t,ti.CheckAndUpdate),oi(t,67108864,536870912,0);var e=Be(t,256,512);Tr(t,2097152|(e?1048576:0)),Ye.updateRenderer(t,0),ei(t,ti.CheckAndUpdate),oi(t,134217728,536870912,0),Tr(t,8388608|((e=Be(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Be(t,768,1024)}function Wr(t,e,n,r,i,o,s,a,u,l,c,h,p){return 0===n?function(t,e,n,r,i,o,s,a,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,u,l,c,h){var p=e.bindings.length,f=!1;return p>0&&On(t,e,0,n)&&(f=!0),p>1&&On(t,e,1,r)&&(f=!0),p>2&&On(t,e,2,i)&&(f=!0),p>3&&On(t,e,3,o)&&(f=!0),p>4&&On(t,e,4,s)&&(f=!0),p>5&&On(t,e,5,a)&&(f=!0),p>6&&On(t,e,6,u)&&(f=!0),p>7&&On(t,e,7,l)&&(f=!0),p>8&&On(t,e,8,c)&&(f=!0),p>9&&On(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,o,s,a,u,l,c,h);case 2:return function(t,e,n,r,i,o,s,a,u,l,c,h){var p=!1,f=e.bindings,d=f.length;if(d>0&&sn(t,e,0,n)&&(p=!0),d>1&&sn(t,e,1,r)&&(p=!0),d>2&&sn(t,e,2,i)&&(p=!0),d>3&&sn(t,e,3,o)&&(p=!0),d>4&&sn(t,e,4,s)&&(p=!0),d>5&&sn(t,e,5,a)&&(p=!0),d>6&&sn(t,e,6,u)&&(p=!0),d>7&&sn(t,e,7,l)&&(p=!0),d>8&&sn(t,e,8,c)&&(p=!0),d>9&&sn(t,e,9,h)&&(p=!0),p){var g=e.text.prefix;d>0&&(g+=zr(n,f[0])),d>1&&(g+=zr(r,f[1])),d>2&&(g+=zr(i,f[2])),d>3&&(g+=zr(o,f[3])),d>4&&(g+=zr(s,f[4])),d>5&&(g+=zr(a,f[5])),d>6&&(g+=zr(u,f[6])),d>7&&(g+=zr(l,f[7])),d>8&&(g+=zr(c,f[8])),d>9&&(g+=zr(h,f[9]));var y=qe(t,e.nodeIndex).renderText;t.renderer.setValue(y,g)}return p}(t,e,n,r,i,o,s,a,u,l,c,h);case 16384:return function(t,e,n,r,i,o,s,a,u,l,c,h){var p=Ge(t,e.nodeIndex),f=p.instance,d=!1,g=void 0,y=e.bindings.length;return y>0&&on(t,e,0,n)&&(d=!0,g=Sr(t,p,e,0,n,g)),y>1&&on(t,e,1,r)&&(d=!0,g=Sr(t,p,e,1,r,g)),y>2&&on(t,e,2,i)&&(d=!0,g=Sr(t,p,e,2,i,g)),y>3&&on(t,e,3,o)&&(d=!0,g=Sr(t,p,e,3,o,g)),y>4&&on(t,e,4,s)&&(d=!0,g=Sr(t,p,e,4,s,g)),y>5&&on(t,e,5,a)&&(d=!0,g=Sr(t,p,e,5,a,g)),y>6&&on(t,e,6,u)&&(d=!0,g=Sr(t,p,e,6,u,g)),y>7&&on(t,e,7,l)&&(d=!0,g=Sr(t,p,e,7,l,g)),y>8&&on(t,e,8,c)&&(d=!0,g=Sr(t,p,e,8,c,g)),y>9&&on(t,e,9,h)&&(d=!0,g=Sr(t,p,e,9,h,g)),g&&f.ngOnChanges(g),65536&e.flags&&Ve(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),d}(t,e,n,r,i,o,s,a,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,u,l,c,h){var p=e.bindings,f=!1,d=p.length;if(d>0&&sn(t,e,0,n)&&(f=!0),d>1&&sn(t,e,1,r)&&(f=!0),d>2&&sn(t,e,2,i)&&(f=!0),d>3&&sn(t,e,3,o)&&(f=!0),d>4&&sn(t,e,4,s)&&(f=!0),d>5&&sn(t,e,5,a)&&(f=!0),d>6&&sn(t,e,6,u)&&(f=!0),d>7&&sn(t,e,7,l)&&(f=!0),d>8&&sn(t,e,8,c)&&(f=!0),d>9&&sn(t,e,9,h)&&(f=!0),f){var g=Xe(t,e.nodeIndex),y=void 0;switch(201347067&e.flags){case 32:y=new Array(p.length),d>0&&(y[0]=n),d>1&&(y[1]=r),d>2&&(y[2]=i),d>3&&(y[3]=o),d>4&&(y[4]=s),d>5&&(y[5]=a),d>6&&(y[6]=u),d>7&&(y[7]=l),d>8&&(y[8]=c),d>9&&(y[9]=h);break;case 64:y={},d>0&&(y[p[0].name]=n),d>1&&(y[p[1].name]=r),d>2&&(y[p[2].name]=i),d>3&&(y[p[3].name]=o),d>4&&(y[p[4].name]=s),d>5&&(y[p[5].name]=a),d>6&&(y[p[6].name]=u),d>7&&(y[p[7].name]=l),d>8&&(y[p[8].name]=c),d>9&&(y[p[9].name]=h);break;case 128:var m=n;switch(d){case 1:y=m.transform(n);break;case 2:y=m.transform(r);break;case 3:y=m.transform(r,i);break;case 4:y=m.transform(r,i,o);break;case 5:y=m.transform(r,i,o,s);break;case 6:y=m.transform(r,i,o,s,a);break;case 7:y=m.transform(r,i,o,s,a,u);break;case 8:y=m.transform(r,i,o,s,a,u,l);break;case 9:y=m.transform(r,i,o,s,a,u,l,c);break;case 10:y=m.transform(r,i,o,s,a,u,l,c,h)}}g.value=y}return f}(t,e,n,r,i,o,s,a,u,l,c,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,u,l,c,h,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)On(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)sn(t,e,o,n[o])&&(i=!0);if(i){var s="";for(o=0;o<n.length;o++)s+=zr(n[o],r[o]);s=e.text.prefix+s;var a=qe(t,e.nodeIndex).renderText;t.renderer.setValue(a,s)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Ge(t,e.nodeIndex),i=r.instance,o=!1,s=void 0,a=0;a<n.length;a++)on(t,e,a,n[a])&&(o=!0,s=Sr(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&Ve(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)sn(t,e,o,n[o])&&(i=!0);if(i){var s=Xe(t,e.nodeIndex),a=void 0;switch(201347067&e.flags){case 32:a=n;break;case 64:for(a={},o=0;o<n.length;o++)a[r[o].name]=n[o];break;case 128:var u=n[0],l=n.slice(1);a=u.transform.apply(u,l)}s.value=a}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Kr(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Ue(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var s=i[o];s.state|=32,ln(s,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Jr(t,e,n,r,i,o,s,a,u,l,c,h,p){return 0===n?function(t,e,n,r,i,o,s,a,u,l,c,h){var p=e.bindings.length;p>0&&an(t,e,0,n),p>1&&an(t,e,1,r),p>2&&an(t,e,2,i),p>3&&an(t,e,3,o),p>4&&an(t,e,4,s),p>5&&an(t,e,5,a),p>6&&an(t,e,6,u),p>7&&an(t,e,7,l),p>8&&an(t,e,8,c),p>9&&an(t,e,9,h)}(t,e,r,i,o,s,a,u,l,c,h,p):function(t,e,n){for(var r=0;r<n.length;r++)an(t,e,r,n[r])}(t,e,r),!1}function Qr(t,e){if(Ze(t,e.nodeIndex).dirty)throw He(Ye.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function $r(t){if(!(128&t.state)){if(ni(t,ti.Destroy),ei(t,ti.Destroy),Tr(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=hn(t);if(e){var n=e.template._projectedViews;n&&(Zn(n,n.indexOf(t)),Ye.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Ue(t,n).renderElement):2&r.flags?t.renderer.destroyNode(qe(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Ze(t,n).destroy()}}(t),dn(t)&&t.renderer.destroy(),t.state|=128}}var ti=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function ei(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?ri(Ue(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ni(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Ue(t,r).viewContainer._embeddedViews,s=0;s<o.length;s++)ri(o[s],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ri(t,e){var n=t.state;switch(e){case ti.CheckNoChanges:0==(128&n)&&(12==(12&n)?Yr(t):64&n&&ii(t,ti.CheckNoChangesProjectedViews));break;case ti.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Yr(t):64&n&&ii(t,e));break;case ti.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Hr(t):64&n&&ii(t,ti.CheckAndUpdateProjectedViews));break;case ti.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Hr(t):64&n&&ii(t,e));break;case ti.Destroy:$r(t);break;case ti.CreateViewNodes:Zr(t)}}function ii(t,e){ni(t,e),ei(t,e)}function oi(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var s=t.def.nodes[o];if(s.flags&e&&s.flags&n)switch(Ye.setCurrentNode(t,s.nodeIndex),r){case 0:Lr(t,s);break;case 1:Qr(t,s)}s.childFlags&e&&s.childFlags&n||(o+=s.childCount)}}var si=!1;function ai(t,e,n,r,i,o){return qr(li(t,i,i.injector.get($t),e,n),r,o)}function ui(t,e,n,r,i,o){var s=i.injector.get($t),a=li(t,i,new qi(s),e,n),u=_i(r);return Bi(Ti.create,qr,null,[a,u,o])}function li(t,e,n,r,i){var o=e.injector.get(je),s=e.injector.get($);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function ci(t,e,n,r){var i=_i(n);return Bi(Ti.create,Vr,null,[t,e,i,r])}function hi(t,e,n,r){return n=di.get(e.element.componentProvider.provider.token)||_i(n),Bi(Ti.create,Ur,null,[t,e,n,r])}function pi(t,e,n,r){return ar(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===fi.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=fi.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=fi.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=mn(i.deps),r.value=i.value)}}(t=t.factory(function(){return Je})),t):t}(r))}var fi=new Map,di=new Map;function gi(t){fi.set(t.token,t)}function yi(t,e){var n=xn(xn(e.viewDefFactory).nodes[0].element.componentView);di.set(t,n)}function mi(){fi.clear(),di.clear()}function _i(t){if(0===fi.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&fi.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Je});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=fi.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=mn(o.deps),i.value=o.value)}}}}function vi(t,e,n,r,i,o,s,a,u,l,c,h,p){var f=t.def.nodes[e];return Wr(t,f,n,r,i,o,s,a,u,l,c,h,p),224&f.flags?Xe(t,e).value:void 0}function xi(t,e,n,r,i,o,s,a,u,l,c,h,p){var f=t.def.nodes[e];return Jr(t,f,n,r,i,o,s,a,u,l,c,h,p),224&f.flags?Xe(t,e).value:void 0}function bi(t){return Bi(Ti.detectChanges,Hr,null,[t])}function wi(t){return Bi(Ti.checkNoChanges,Yr,null,[t])}function Ei(t){return Bi(Ti.destroy,$r,null,[t])}var Ci,Ii,Si,Ti=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function Mi(t,e){Ii=t,Si=e}function Ai(t,e,n,r){return Mi(t,e),Bi(Ti.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Pi(t,e){if(128&t.state)throw Ke(Ti[Ci]);return Mi(t,ki(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=t.def.nodes[n];return 0===e?Ni(t,s,r,i):Ri(t,s,r,i),16384&s.flags&&Mi(t,ki(t,n)),224&s.flags?Xe(t,s.nodeIndex).value:void 0},t)}function Li(t,e){if(128&t.state)throw Ke(Ti[Ci]);return Mi(t,zi(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=t.def.nodes[n];return 0===e?Ni(t,s,r,i):Ri(t,s,r,i),3&s.flags&&Mi(t,zi(t,n)),224&s.flags?Xe(t,s.nodeIndex).value:void 0},t)}function Ni(t,e,n,r){if(Wr.apply(void 0,[t,e,n].concat(r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],u=i[s];8&a.flags&&(o[(p=a.nonMinifiedName,"ng-reflect-"+(p=p.replace(/[$@]/g,"_").replace(Oi,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Di(u))}var l=e.parent,c=Ue(t,l.nodeIndex).renderElement;if(l.element.name)for(var h in o)null!=(u=o[h])?t.renderer.setAttribute(c,h,u):t.renderer.removeAttribute(c,h);else t.renderer.setValue(c,"bindings="+JSON.stringify(o,null,2))}}var p}function Ri(t,e,n,r){Jr.apply(void 0,[t,e,n].concat(r))}var Oi=/([A-Z])/g;function Di(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function ki(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function zi(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Fi=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=pn(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Ue(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return rr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){ji(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&ji(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!dn(t);)t=t.parent;return t.parent?Ue(t.parent,pn(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?fn(this.view,this.nodeDef):fn(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){return++s===o?(e=t.error).bind.apply(e,[t].concat(r)):Je;var e}),s<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,r))},t}();function ji(t,e,n){for(var r in e.references)n[r]=Rr(t,e,e.references[r])}function Bi(t,e,n,r){var i=Ci,o=Ii,s=Si;try{Ci=t;var a=e.apply(n,r);return Ii=o,Si=s,Ci=i,a}catch(t){if(K(t)||!Ii)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),We(t,e),t}(t,Vi())}}function Vi(){return Ii?new Fi(Ii,Si):null}var qi=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Ui(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Ui=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){le.delete(t.nativeNode)}(ce(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=Vi();if(r){var i=new se(n,null,r);i.name=t,he(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Vi();return n&&he(new oe(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Vi();return n&&he(new oe(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=ce(t),r=ce(e);n&&r&&n instanceof se&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=ce(t),i=ce(e),o=ce(n);r&&i&&r instanceof se&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=ce(t),r=ce(e);n&&r&&n instanceof se&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Vi();return n&&he(new se(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=ce(t);i&&i instanceof se&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=ce(t);r&&r instanceof se&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=ce(t);n&&n instanceof se&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=ce(t);n&&n instanceof se&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=ce(t);i&&i instanceof se&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=ce(t);r&&r instanceof se&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=ce(t);r&&r instanceof se&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=ce(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function Gi(t,e,n){return new Zi(t,e,n)}var Xi,Zi=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.b)(e,t),e.prototype.create=function(t){!function(){if(!si){si=!0;var t=Xt()?{setCurrentNode:Mi,createRootView:ui,createEmbeddedView:ci,createComponentView:hi,createNgModuleRef:pi,overrideProvider:gi,overrideComponentView:yi,clearOverrides:mi,checkAndUpdateView:bi,checkNoChangesView:wi,destroyView:Ei,createDebugContext:function(t,e){return new Fi(t,e)},handleEvent:Ai,updateDirectives:Pi,updateRenderer:Li}:{setCurrentNode:function(){},createRootView:ai,createEmbeddedView:Vr,createComponentView:Ur,createNgModuleRef:ar,overrideProvider:Je,overrideComponentView:Je,clearOverrides:Je,checkAndUpdateView:Hr,checkNoChangesView:Yr,destroyView:$r,createDebugContext:function(t,e){return new Fi(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?vi:xi,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?vi:xi,t)}};Ye.setCurrentNode=t.setCurrentNode,Ye.createRootView=t.createRootView,Ye.createEmbeddedView=t.createEmbeddedView,Ye.createComponentView=t.createComponentView,Ye.createNgModuleRef=t.createNgModuleRef,Ye.overrideProvider=t.overrideProvider,Ye.overrideComponentView=t.overrideComponentView,Ye.clearOverrides=t.clearOverrides,Ye.checkAndUpdateView=t.checkAndUpdateView,Ye.checkNoChangesView=t.checkNoChangesView,Ye.destroyView=t.destroyView,Ye.resolveDep=Cr,Ye.createDebugContext=t.createDebugContext,Ye.handleEvent=t.handleEvent,Ye.updateDirectives=t.updateDirectives,Ye.updateRenderer=t.updateRenderer,Ye.dirtyParentQueries=Pr}}();var e=xn(this._ngModuleDefFactory);return Ye.createNgModuleRef(this.moduleType,t||R.NULL,this._bootstrapComponents,e)},e}(function(){});"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0)),Xi=function(t,e,n){return{parent:Xi,id:null,node:null,data:[],ngStaticData:[],cleanup:null,renderer:null,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}()}).call(e,n("fRUx"))},"MN+7":function(t,e,n){"use strict";var r={};t.exports=function(t){var e,n,i,o;for(t||(t={}),e=1,n=arguments.length;e<n;e+=1)for(o in i=arguments[e])o in t&&(t[o]===i[o]||o in r&&r[o]===i[o])||(t[o]=i[o]);return t}},"N/q0":function(t,e,n){(function(e){var n,r;r=function(){return function t(e,r,i){function o(a,u){if(!r[a]){if(!e[a]){if(!u&&"function"==typeof n&&n)return n(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){return o(e[a][1][t]||t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){var r;r=function(){"use strict";return function(){var t=new Float32Array(3);t[0]=0,t[1]=0,t[2]=0}(),function(){var t=new Float32Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0}(),{vec3:{transformMat3:function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},vec4:{transformMat4:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}},mat2:{create:function(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*a,t[1]=i*u+s*a,t[2]=r*-a+o*u,t[3]=i*-a+s*u,t},scale:function(t,e,n){var r=e[1],i=e[2],o=e[3],s=n[0],a=n[1];return t[0]=e[0]*s,t[1]=r*s,t[2]=i*a,t[3]=o*a,t}},mat3:{create:function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},mat4:{create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},translate:function(t,e,n){var r,i,o,s,a,u,l,c,h,p,f,d,g=n[0],y=n[1],m=n[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*m+e[12],t[13]=e[1]*g+e[5]*y+e[9]*m+e[13],t[14]=e[2]*g+e[6]*y+e[10]*m+e[14],t[15]=e[3]*g+e[7]*y+e[11]*m+e[15]):(i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*g+a*y+h*m+e[12],t[13]=i*g+u*y+p*m+e[13],t[14]=o*g+l*y+f*m+e[14],t[15]=s*g+c*y+d*m+e[15]),t},scale:function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},multiply:function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],g=e[12],y=e[13],m=e[14],_=e[15],v=n[0],x=n[1],b=n[2],w=n[3];return t[0]=v*r+x*a+b*h+w*g,t[1]=v*i+x*u+b*p+w*y,t[2]=v*o+x*l+b*f+w*m,t[3]=v*s+x*c+b*d+w*_,t[4]=(v=n[4])*r+(x=n[5])*a+(b=n[6])*h+(w=n[7])*g,t[5]=v*i+x*u+b*p+w*y,t[6]=v*o+x*l+b*f+w*m,t[7]=v*s+x*c+b*d+w*_,t[8]=(v=n[8])*r+(x=n[9])*a+(b=n[10])*h+(w=n[11])*g,t[9]=v*i+x*u+b*p+w*y,t[10]=v*o+x*l+b*f+w*m,t[11]=v*s+x*c+b*d+w*_,t[12]=(v=n[12])*r+(x=n[13])*a+(b=n[14])*h+(w=n[15])*g,t[13]=v*i+x*u+b*p+w*y,t[14]=v*o+x*l+b*f+w*m,t[15]=v*s+x*c+b*d+w*_,t},perspective:function(t,e,n,r,i){var o=1/Math.tan(e/2),s=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*s,t[15]=0,t},rotateX:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+c*r,t[6]=a*i+h*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-s*r,t[10]=h*i-a*r,t[11]=p*i-u*r,t},rotateZ:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+c*r,t[2]=a*i+h*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-s*r,t[6]=h*i-a*r,t[7]=p*i-u*r,t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],g=e[13],y=e[14],m=e[15],_=n*a-r*s,v=n*u-i*s,x=n*l-o*s,b=r*u-i*a,w=r*l-o*a,E=i*l-o*u,C=c*g-h*d,I=c*y-p*d,S=c*m-f*d,T=h*y-p*g,M=h*m-f*g,A=p*m-f*y,P=_*A-v*M+x*T+b*S-w*I+E*C;return P?(t[0]=(a*A-u*M+l*T)*(P=1/P),t[1]=(i*M-r*A-o*T)*P,t[2]=(g*E-y*w+m*b)*P,t[3]=(p*w-h*E-f*b)*P,t[4]=(u*S-s*A-l*I)*P,t[5]=(n*A-i*S+o*I)*P,t[6]=(y*x-d*E-m*v)*P,t[7]=(c*E-p*x+f*v)*P,t[8]=(s*M-a*S+l*C)*P,t[9]=(r*S-n*M-o*C)*P,t[10]=(d*w-g*x+m*_)*P,t[11]=(h*x-c*w-f*_)*P,t[12]=(a*I-s*T-u*C)*P,t[13]=(n*T-r*I+i*C)*P,t[14]=(g*v-d*b-y*_)*P,t[15]=(c*b-h*v+p*_)*P,t):null},ortho:function(t,e,n,r,i,o,s){var a=1/(e-n),u=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(s+o)*l,t[15]=1,t}}}},"object"==typeof n&&"undefined"!=typeof e?e.exports=r():this.glMatrix=r()},{}],2:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],3:[function(t,e,n){var r;r=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o=[],s=0;s<t.length;s++)if(r=t[s].h||t[s].height,(n=t[s].w||t[s].width)&&r){if(!(i=this.packOne(n,r,t[s].id)))continue;e.inPlace&&(t[s].x=i.x,t[s].y=i.y,t[s].id=i.id),o.push(i)}return this.shrink(),o},t.prototype.packOne=function(t,n,r){var i,o,s,a,u,l,c,h,p={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(a=0;a<this.freebins.length;a++){if(n===(i=this.freebins[a]).maxh&&t===i.maxw)return this.allocFreebin(a,t,n,r);n>i.maxh||t>i.maxw||n<=i.maxh&&t<=i.maxw&&(s=i.maxw*i.maxh-t*n)<p.waste&&(p.waste=s,p.freebin=a)}for(a=0;a<this.shelves.length;a++)if(f+=(o=this.shelves[a]).h,!(t>o.free)){if(n===o.h)return this.allocShelf(a,t,n,r);n>o.h||n<o.h&&(s=(o.h-n)*t)<p.waste&&(p.freebin=-1,p.waste=s,p.shelf=a)}return-1!==p.freebin?this.allocFreebin(p.freebin,t,n,r):-1!==p.shelf?this.allocShelf(p.shelf,t,n,r):n<=this.h-f&&t<=this.w?(o=new e(f,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,r)):this.autoResize?(u=l=this.h,((c=h=this.w)<=u||t>c)&&(h=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(h,l),this.packOne(t,n,r)):null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t].alloc(e,n,r);return this.bins[r]=i,this.ref(i),i},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];e+=r.h,t=Math.max(r.w-r.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new function(t,e,n,r,i,o,s){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=s||i,this.refcount=0}(n,r,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t},"object"==typeof n&&"undefined"!=typeof e?e.exports=r():this.ShelfPack=r()},{}],4:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var s=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.d=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Int16Array(s),this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,s,a){for(var u=0;u<e;u++){for(var l=0;l<n;l++)r[l]=t[l*e+u];for(o(r,i,s,a,n),l=0;l<n;l++)t[l*e+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<e;u++)r[u]=t[l*e+u];for(o(r,i,s,a,e),u=0;u<e;u++)t[l*e+u]=Math.sqrt(i[u])}}function o(t,e,n,r,i){n[0]=0,r[0]=-s,r[1]=+s;for(var o=1,a=0;o<i;o++){for(var u=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);u<=r[a];)u=(t[o]+o*o-(t[n[--a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=u,r[a+1]=+s}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}e.exports=r;var s=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=e.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?s:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?s:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n}},{}],5:[function(t,e,n){function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}e.exports=r,r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,s;for(void 0===e&&(e=1e-6),i=t,s=0;s<8;s++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=o/a}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],6:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":7,"./lib/vectortilefeature.js":8,"./lib/vectortilelayer.js":9}],7:[function(t,e,n){"use strict";function r(t,e,n){if(3===t){var r=new i(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var i=t("./vectortilelayer");e.exports=function(t,e){this.layers=t.readFields(r,{},e)}},{"./vectortilelayer":9}],8:[function(t,e,n){"use strict";function r(t,e,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=o,t.readFields(i,this,e)}function i(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t){for(var e,n,r=0,i=0,o=t.length,s=o-1;i<o;s=i++)r+=((n=t[s]).x-(e=t[i]).x)*(e.y+n.y);return r}var s=t("@mapbox/point-geometry");e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,u=[];t.pos<n;){if(!i){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new s(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,s=1/0,a=-1/0,u=1/0,l=-1/0;t.pos<e;){if(!r){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<s&&(s=i),i>a&&(a=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,u,a,l]},r.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+c)/u)*Math.PI/180))-90]}}var s,a,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,h=this.loadGeometry(),p=r.types[this.type];switch(this.type){case 1:var f=[];for(s=0;s<h.length;s++)f[s]=h[s][0];i(h=f);break;case 2:for(s=0;s<h.length;s++)i(h[s]);break;case 3:for(h=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],s=0;s<e;s++){var a=o(t[s]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[s]]):n.push(t[s]))}return n&&i.push(n),i}(h),s=0;s<h.length;s++)for(a=0;a<h[s].length;a++)i(h[s][a])}1===h.length?h=h[0]:p="Multi"+p;var d={type:"Feature",geometry:{type:p,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":2}],9:[function(t,e,n){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}var o=t("./vectortilefeature.js");e.exports=r,r.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":8}],10:[function(t,e,n){!function(t){function e(t,e,r){var i=n(256*t,256*(e=Math.pow(2,r)-e-1),r),o=n(256*(t+1),256*(e+1),r);return i[0]+","+i[1]+","+o[0]+","+o[1]}function n(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=function(t,n,r,i,o,s){return s=s||{},t+"?"+["bbox="+e(r,i,o),"format="+(s.format||"image/png"),"service="+(s.service||"WMS"),"version="+(s.version||"1.1.1"),"request="+(s.request||"GetMap"),"srs="+(s.srs||"EPSG:3857"),"width="+(s.width||256),"height="+(s.height||256),"layers="+n].join("&")},t.getTileBBox=e,t.getMercCoords=n,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&"undefined"!=typeof e?n:this.WhooTS=this.WhooTS||{})},{}],11:[function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,a,u,l,c,f,g,y=e&&e.length,m=y?e[0]*n:t.length,_=i(t,0,m,n,!0),v=[];if(!_)return v;if(y&&(_=function(t,e,n,r){var s,a,u,l=[];for(s=0,a=e.length;s<a;s++)(u=i(t,e[s]*r,s<a-1?e[s+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),l.push(d(u));for(l.sort(h),s=0;s<l.length;s++)p(l[s],n),n=o(n,n.next);return n}(t,e,_,n)),t.length>80*n){r=u=t[0],a=l=t[1];for(var x=n;x<m;x+=n)(c=t[x])<r&&(r=c),(f=t[x+1])<a&&(a=f),c>u&&(u=c),f>l&&(l=f);g=Math.max(u-r,l-a)}return s(_,v,n,r,a,g),v}function i(t,e,n,r,i){var o,s;if(i===I(t,e,n,r)>0)for(o=e;o<n;o+=r)s=w(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=w(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(E(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)return null;n=!0}}while(n||r!==e);return e}function s(t,e,n,r,i,h,p){if(t){!p&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0===a?(i=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,a--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,h);for(var d,g,y=t;t.prev!==t.next;)if(d=t.prev,g=t.next,h?u(t,r,i,h):a(t))e.push(d.i/n),e.push(t.i/n),e.push(g.i/n),E(t),t=g.next,y=g.next;else if((t=g)===y){p?1===p?s(t=l(t,e,n),e,n,r,i,h,2):2===p&&c(t,e,n,r,i,h):s(o(t),e,n,r,i,h,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=f(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),c=f(a,u,e,n,r),h=t.nextZ;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&m(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&m(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!_(i,o)&&v(i,r,r.next,o)&&x(i,o)&&x(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),E(r),E(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,i,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&y(u,l)){var c=b(u,l);return u=o(u,u.next),c=o(c,c.next),s(u,e,n,r,i,a),void s(c,e,n,r,i,a)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&g(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&x(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=b(e,t);o(n,n.next)}}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){return!!(_(t,e)&&_(n,r)||_(t,r)&&_(n,e))||m(t,e,n)>0!=m(t,e,r)>0&&m(n,r,t)>0!=m(n,r,e)>0}function x(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function b(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(I(t,0,i?e[0]*n:t.length,n));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(I(t,e[s]*n,s<a-1?e[s+1]*n:t.length,n));var u=0;for(s=0;s<r.length;s+=3){var l=r[s]*n,c=r[s+1]*n,h=r[s+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n}},{}],12:[function(t,e,n){function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e=0;if(t.length>2){for(var n,r,i=0;i<t.length-1;i++)e+=o((r=t[i+1])[0]-(n=t[i])[0])*(2+Math.sin(o(n[1]))+Math.sin(o(r[1])));e=e*s.RADIUS*s.RADIUS/2}return e}function o(t){return t*Math.PI/180}var s=t("wgs84");e.exports.geometry=function(t){if("Polygon"===t.type)return r(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=r(t.coordinates[n]);return e}return null},e.exports.ring=i},{wgs84:40}],13:[function(t,e,n){function r(t,e){return function(n){return t(n,e)}}function i(t,e){t[0]=o(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=o(t[n],!e);return t}function o(t,e){return function(t){return s.ring(t)>=0}(t)===e?t:t.reverse()}var s=t("geojson-area");e.exports=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(r(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=i(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(r(i,e))),t}(e,n);default:return e}}},{"geojson-area":12}],14:[function(t,e,n){"use strict";function r(t,e,n,r){for(var i=[],o=0;o<t.length;o++){var s=t[o],a=s[r];a>=e&&a<=n&&i.push(s)}return i}function i(t,e,n,r,i,s){for(var a=[],u=0;u<t.length;u++){var l,c,h,p=0,f=0,d=null,g=t[u],y=g.area,m=g.dist,_=g.outer,v=g.length,x=[];for(c=0;c<v-1;c++)l=d||g[c],p=f||l[r],f=(d=g[c+1])[r],p<e?f>n?(x.push(i(l,d,e),i(l,d,n)),s||(x=o(a,x,y,m,_))):f>=e&&x.push(i(l,d,e)):p>n?f<e?(x.push(i(l,d,n),i(l,d,e)),s||(x=o(a,x,y,m,_))):f<=n&&x.push(i(l,d,n)):(x.push(l),f<e?(x.push(i(l,d,e)),s||(x=o(a,x,y,m,_))):f>n&&(x.push(i(l,d,n)),s||(x=o(a,x,y,m,_))));(p=(l=g[v-1])[r])>=e&&p<=n&&x.push(l),h=x[x.length-1],s&&h&&(x[0][0]!==h[0]||x[0][1]!==h[1])&&x.push(x[0]),o(a,x,y,m,_)}return a}function o(t,e,n,r,i){return e.length&&(e.area=n,e.dist=r,void 0!==i&&(e.outer=i),t.push(e)),[]}e.exports=function(t,e,n,o,a,u,l,c){if(o/=e,l>=(n/=e)&&c<=o)return t;if(l>o||c<n)return null;for(var h=[],p=0;p<t.length;p++){var f,d,g=t[p],y=g.geometry,m=g.type;if(d=g.max[a],(f=g.min[a])>=n&&d<=o)h.push(g);else if(!(f>o||d<n)){var _=1===m?r(y,n,o,a):i(y,n,o,a,u,3===m);_.length&&h.push(s(g.tags,m,_,g.id))}}return h.length?h:null};var s=t("./feature")},{"./feature":16}],15:[function(t,e,n){"use strict";function r(t,e,n){if(null!==e.geometry){var s,u,l,c,h=e.geometry,p=h.type,f=h.coordinates,d=e.properties,g=e.id;if("Point"===p)t.push(a(d,1,[o(f)],g));else if("MultiPoint"===p)t.push(a(d,1,i(f),g));else if("LineString"===p)t.push(a(d,2,[i(f,n)],g));else if("MultiLineString"===p||"Polygon"===p){for(l=[],s=0;s<f.length;s++)c=i(f[s],n),"Polygon"===p&&(c.outer=0===s),l.push(c);t.push(a(d,"Polygon"===p?3:2,l,g))}else if("MultiPolygon"===p){for(l=[],s=0;s<f.length;s++)for(u=0;u<f[s].length;u++)(c=i(f[s][u],n)).outer=0===u,l.push(c);t.push(a(d,3,l,g))}else{if("GeometryCollection"!==p)throw new Error("Input data is not a valid GeoJSON object.");for(s=0;s<h.geometries.length;s++)r(t,{geometry:h.geometries[s],properties:d},n)}}}function i(t,e){for(var n=[],r=0;r<t.length;r++)n.push(o(t[r]));return e&&(s(n,e),function(t){for(var e,n,r=0,i=0,o=0;o<t.length-1;o++)r+=(e=n||t[o])[0]*(n=t[o+1])[1]-n[0]*e[1],i+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(r/2),t.dist=i}(n)),n}function o(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return[n,r=r<0?0:r>1?1:r,0]}e.exports=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)r(n,t.features[i],e);else r(n,"Feature"===t.type?t:{geometry:t},e);return n};var s=t("./simplify"),a=t("./feature")},{"./feature":16,"./simplify":18}],16:[function(t,e,n){"use strict";function r(t,e,n){for(var r,i=0;i<n.length;i++)r=n[i],t[0]=Math.min(r[0],t[0]),e[0]=Math.max(r[0],e[0]),t[1]=Math.min(r[1],t[1]),e[1]=Math.max(r[1],e[1])}e.exports=function(t,e,n,i){var o={id:i||null,type:e,geometry:n,tags:t||null,min:[1/0,1/0],max:[-1/0,-1/0]};return function(t){var e=t.geometry,n=t.min,i=t.max;if(1===t.type)r(n,i,e);else for(var o=0;o<e.length;o++)r(n,i,e[o])}(o),o}},{}],17:[function(t,e,n){"use strict";function r(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;n&&console.time("preprocess data");var r=u(t,e.tolerance/((1<<e.maxZoom)*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=h(r,e.buffer/e.extent,o)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function i(t,e,n){return 32*((1<<t)*n+e)+t}function o(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function s(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function a(t,e,n){var r=t.source;if(1!==r.length)return!1;var i=r[0];if(3!==i.type||i.geometry.length>1)return!1;var o=i.geometry[0].length;if(5!==o)return!1;for(var s=0;s<o;s++){var a=l.point(i.geometry[0][s],e,t.z2,t.x,t.y);if(a[0]!==-n&&a[0]!==e+n||a[1]!==-n&&a[1]!==e+n)return!1}return!0}e.exports=function(t,e){return new r(t,e)};var u=t("./convert"),l=t("./transform"),c=t("./clip"),h=t("./wrap"),p=t("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,n,r,u,l,h){for(var f=[t,e,n,r],d=this.options,g=d.debug,y=null;f.length;){r=f.pop(),n=f.pop(),e=f.pop(),t=f.pop();var m=1<<e,_=i(e,n,r),v=this.tiles[_],x=e===d.maxZoom?0:d.tolerance/(m*d.extent);if(!v&&(g>1&&console.time("creation"),v=this.tiles[_]=p(t,m,n,r,x,e===d.maxZoom),this.tileCoords.push({z:e,x:n,y:r}),g)){g>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,v.numFeatures,v.numPoints,v.numSimplified),console.timeEnd("creation"));var b="z"+e;this.stats[b]=(this.stats[b]||0)+1,this.total++}if(v.source=t,u){if(e===d.maxZoom||e===u)continue;var w=1<<u-e;if(n!==Math.floor(l/w)||r!==Math.floor(h/w))continue}else if(e===d.indexMaxZoom||v.numPoints<=d.indexMaxPoints)continue;if(d.solidChildren||!a(v,d.extent,d.buffer)){v.source=null,g>1&&console.time("clipping");var E,C,I,S,T,M,A=.5*d.buffer/d.extent,P=.5-A,L=.5+A,N=1+A;E=C=I=S=null,T=c(t,m,n-A,n+L,0,o,v.min[0],v.max[0]),M=c(t,m,n+P,n+N,0,o,v.min[0],v.max[0]),T&&(E=c(T,m,r-A,r+L,1,s,v.min[1],v.max[1]),C=c(T,m,r+P,r+N,1,s,v.min[1],v.max[1])),M&&(I=c(M,m,r-A,r+L,1,s,v.min[1],v.max[1]),S=c(M,m,r+P,r+N,1,s,v.min[1],v.max[1])),g>1&&console.timeEnd("clipping"),t.length&&(f.push(E||[],e+1,2*n,2*r),f.push(C||[],e+1,2*n,2*r+1),f.push(I||[],e+1,2*n+1,2*r),f.push(S||[],e+1,2*n+1,2*r+1))}else u&&(y=e)}return y},r.prototype.getTile=function(t,e,n){var r=this.options,o=r.extent,s=r.debug,u=1<<t,c=i(t,e=(e%u+u)%u,n);if(this.tiles[c])return l.tile(this.tiles[c],o);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var h,p=t,f=e,d=n;!h&&p>0;)p--,f=Math.floor(f/2),d=Math.floor(d/2),h=this.tiles[i(p,f,d)];if(!h||!h.source)return null;if(s>1&&console.log("found parent tile z%d-%d-%d",p,f,d),a(h,o,r.buffer))return l.tile(h,o);s>1&&console.time("drilling down");var g=this.splitTile(h.source,p,f,d,t,e,n);if(s>1&&console.timeEnd("drilling down"),null!==g){var y=1<<t-g;c=i(g,Math.floor(e/y),Math.floor(n/y))}return this.tiles[c]?l.tile(this.tiles[c],o):null}},{"./clip":14,"./convert":15,"./tile":19,"./transform":20,"./wrap":21}],18:[function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=n[0],s=n[1],a=t[0],u=t[1],l=o-r,c=s-i;if(0!==l||0!==c){var h=((a-r)*l+(u-i)*c)/(l*l+c*c);h>1?(r=o,i=s):h>0&&(r+=l*h,i+=c*h)}return(l=a-r)*l+(c=u-i)*c}e.exports=function(t,e){var n,i,o,s,a=e*e,u=0,l=t.length-1,c=[];for(t[u][2]=1,t[l][2]=1;l;){for(i=0,n=u+1;n<l;n++)(o=r(t[n],t[u],t[l]))>i&&(s=n,i=o);i>a?(t[s][2]=i,c.push(u),c.push(s),u=s):(l=c.pop(),u=c.pop())}}},{}],19:[function(t,e,n){"use strict";function r(t,e,n,r){var o,s,a,u,l=e.geometry,c=e.type,h=[],p=n*n;if(1===c)for(o=0;o<l.length;o++)h.push(l[o]),t.numPoints++,t.numSimplified++;else for(o=0;o<l.length;o++)if(a=l[o],r||!(2===c&&a.dist<n||3===c&&a.area<p)){var f=[];for(s=0;s<a.length;s++)u=a[s],(r||u[2]>p)&&(f.push(u),t.numSimplified++),t.numPoints++;3===c&&i(f,a.outer),h.push(f)}else t.numPoints+=a.length;if(h.length){var d={geometry:h,type:c,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function i(t,e){(function(t){for(var e,n,r=0,i=0,o=t.length,s=o-1;i<o;s=i++)r+=((n=t[s])[0]-(e=t[i])[0])*(e[1]+n[1]);return r})(t)<0===e&&t.reverse()}e.exports=function(t,e,n,i,o,s){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){a.numFeatures++,r(a,t[u],o,s);var l=t[u].min,c=t[u].max;l[0]<a.min[0]&&(a.min[0]=l[0]),l[1]<a.min[1]&&(a.min[1]=l[1]),c[0]>a.max[0]&&(a.max[0]=c[0]),c[1]>a.max[1]&&(a.max[1]=c[1])}return a}},{}],20:[function(t,e,n){"use strict";function r(t,e,n,r,i){return[Math.round(e*(t[0]*n-r)),Math.round(e*(t[1]*n-i))]}n.tile=function(t,e){if(t.transformed)return t;var n,i,o,s=t.z2,a=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry;if(1===l.type)for(i=0;i<c.length;i++)c[i]=r(c[i],e,s,a,u);else for(i=0;i<c.length;i++){var h=c[i];for(o=0;o<h.length;o++)h[o]=r(h[o],e,s,a,u)}}return t.transformed=!0,t},n.point=r},{}],21:[function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<t.length;r++){var o,a=t[r],u=a.type;if(1===u)o=i(a.geometry,e);else{o=[];for(var l=0;l<a.geometry.length;l++)o.push(i(a.geometry[l],e))}n.push(s(a.tags,u,o,a.id))}return n}function i(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var r=0;r<t.length;r++)n.push([t[r][0]+e,t[r][1],t[r][2]]);return n}var o=t("./clip"),s=t("./feature");e.exports=function(t,e,n){var i=t,s=o(t,1,-1-e,e,0,n,-1,2),a=o(t,1,1-e,2+e,0,n,-1,2);return(s||a)&&(i=o(t,1,-e,1+e,0,n,-1,2)||[],s&&(i=r(s,1).concat(i)),a&&(i=i.concat(r(a,-1)))),i}},{"./clip":14,"./feature":16}],22:[function(t,e,n){"use strict";function r(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],this.d=(e=o[1])+2*(n=o[2]);for(var s=0;s<this.d*this.d;s++){var a=o[i+s],u=o[i+s+1];r.push(a===u?null:o.subarray(a,u))}var l=o[i+r.length+1];this.keys=o.subarray(o[i+r.length],l),this.bboxes=o.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}e.exports=r;var i=3;r.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{}),s},r.prototype._queryCell=function(t,e,n,r,i,o,s){var a=this.cells[i];if(null!==a)for(var u=this.keys,l=this.bboxes,c=0;c<a.length;c++){var h=a[c];if(void 0===s[h]){var p=4*h;t<=l[p+2]&&e<=l[p+3]&&n>=l[p+0]&&r>=l[p+1]?(s[h]=!0,o.push(u[h])):s[h]=!1}}},r.prototype._forEachCell=function(t,e,n,r,i,o,s){for(var a=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),h=a;h<=l;h++)for(var p=u;p<=c;p++)if(i.call(this,t,e,n,r,this.d*p+h,o,s))return},r.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var s=e,a=0;a<t.length;a++){var u=t[a];o[i+a]=s,o.set(u,s),s+=u.length}return o[i+t.length]=s,o.set(this.keys,s),o[i+t.length+1]=s+=this.keys.length,o.set(this.bboxes,s),s+=this.bboxes.length,o.buffer}},{}],23:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=255&s,f+=d,s/=256,l-=8);t[n+f-d]|=128*g}},{}],24:[function(t,e,n){"use strict";function r(t,e,n,r,a){e=e||i,n=n||o,a=a||Array,this.nodeSize=r||64,this.points=t,this.ids=new a(t.length),this.coords=new a(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function i(t){return t[0]}function o(t){return t[1]}var s=t("./sort"),a=t("./range"),u=t("./within");e.exports=function(t,e,n,i,o){return new r(t,e,n,i,o)},r.prototype={range:function(t,e,n,r){return a(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return u(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":25,"./sort":26,"./within":27}],25:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,o,s){for(var a,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),p=l.pop(),f=l.pop();if(p-f<=s)for(var d=f;d<=p;d++)u=e[2*d+1],(a=e[2*d])>=n&&a<=i&&u>=r&&u<=o&&c.push(t[d]);else{var g=Math.floor((f+p)/2);u=e[2*g+1],(a=e[2*g])>=n&&a<=i&&u>=r&&u<=o&&c.push(t[g]);var y=(h+1)%2;(0===h?n<=a:r<=u)&&(l.push(f),l.push(g-1),l.push(y)),(0===h?i>=a:o>=u)&&(l.push(g+1),l.push(p),l.push(y))}}return c}},{}],26:[function(t,e,n){"use strict";function r(t,e,n,r){i(t,n,r),i(e,2*n,2*r),i(e,2*n+1,2*r+1)}function i(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=function t(e,n,i,o,s,a){if(!(s-o<=i)){var u=Math.floor((o+s)/2);(function t(e,n,i,o,s,a){for(;s>o;){if(s-o>600){var u=s-o+1,l=i-o+1,c=Math.log(u),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1);t(e,n,i,Math.max(o,Math.floor(i-l*h/u+p)),Math.min(s,Math.floor(i+(u-l)*h/u+p)),a)}var f=n[2*i+a],d=o,g=s;for(r(e,n,o,i),n[2*s+a]>f&&r(e,n,o,s);d<g;){for(r(e,n,d,g),d++,g--;n[2*d+a]<f;)d++;for(;n[2*g+a]>f;)g--}n[2*o+a]===f?r(e,n,o,g):r(e,n,++g,s),g<=i&&(o=g+1),i<=g&&(s=g-1)}})(e,n,u,o,s,a%2),t(e,n,i,o,u-1,a+1),t(e,n,i,u+1,s,a+1)}}},{}],27:[function(t,e,n){"use strict";function r(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}e.exports=function(t,e,n,i,o,s){for(var a=[0,t.length-1,0],u=[],l=o*o;a.length;){var c=a.pop(),h=a.pop(),p=a.pop();if(h-p<=s)for(var f=p;f<=h;f++)r(e[2*f],e[2*f+1],n,i)<=l&&u.push(t[f]);else{var d=Math.floor((p+h)/2),g=e[2*d],y=e[2*d+1];r(g,y,n,i)<=l&&u.push(t[d]);var m=(c+1)%2;(0===c?n-o<=g:i-o<=y)&&(a.push(p),a.push(d-1),a.push(m)),(0===c?n+o>=g:i+o>=y)&&(a.push(d+1),a.push(h),a.push(m))}}return u}},{}],28:[function(t,e,n){"use strict";function r(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&"Worker"in window&&"Uint8ClampedArray"in window&&function(t){return void 0===i[t]&&(i[t]=function(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t)),i[t]}(t&&t.failIfMajorPerformanceCaveat))}"undefined"!=typeof e&&e.exports?e.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var i={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],29:[function(t,e,n){"use strict";function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function o(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function a(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function m(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}e.exports=r;var v=t("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5,r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*_(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=v.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=v.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,s=n.buf;if(r=(112&(i=s[n.pos++]))>>4,i<128)return o(t,r,e);if(r|=(127&(i=s[n.pos++]))<<3,i<128)return o(t,r,e);if(r|=(127&(i=s[n.pos++]))<<10,i<128)return o(t,r,e);if(r|=(127&(i=s[n.pos++]))<<17,i<128)return o(t,r,e);if(r|=(127&(i=s[n.pos++]))<<24,i<128)return o(t,r,e);if(r|=(1&(i=s[n.pos++]))<<31,i<128)return o(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,s,a,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&((l=(15&u)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&((l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=i(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&s(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),v.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),v.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&s(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,a,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,h,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},{ieee754:23}],30:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(){g&&f&&(g=!1,f.length?d=f.concat(d):y=-1,d.length&&a())}function a(){if(!g){var t=o(s);g=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,g=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,d=[],g=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||g||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],31:[function(t,e,n){"use strict";function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e){return t<e?-1:t>e?1:0}e.exports=function t(e,n,o,s,a){for(o=o||0,s=s||e.length-1,a=a||i;s>o;){if(s-o>600){var u=s-o+1,l=n-o+1,c=Math.log(u),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1);t(e,n,Math.max(o,Math.floor(n-l*h/u+p)),Math.min(s,Math.floor(n+(u-l)*h/u+p)),a)}var f=e[n],d=o,g=s;for(r(e,o,n),a(e[s],f)>0&&r(e,o,s);d<g;){for(r(e,d,g),d++,g--;a(e[d],f)<0;)d++;for(;a(e[g],f)>0;)g--}0===a(e[o],f)?r(e,o,g):r(e,++g,s),g<=n&&(o=g+1),n<=g&&(s=g-1)}}},{}],32:[function(t,e,n){"use strict";function r(t){this.options=c(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function i(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function o(t,e){var n=t.geometry.coordinates;return{x:u(n[0]),y:l(n[1]),zoom:1/0,id:e,parentId:-1}}function s(t){return{type:"Feature",properties:a(t),geometry:{type:"Point",coordinates:[function(t){return 360*(t-.5)}(t.x),function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}(t.y)]}}}function a(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return c(c({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function u(t){return t/360+.5}function l(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function c(t,e){for(var n in e)t[n]=e[n];return t}function h(t){return t.x}function p(t){return t.y}var f=t("kdbush");e.exports=function(t){return new r(t)},r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var r=t.map(o);e&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var s=+Date.now();this.trees[i+1]=f(r,h,p,this.options.nodeSize,Float32Array),r=this._cluster(r,i),e&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-s)}return this.trees[this.options.minZoom]=f(r,h,p,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],r=n.range(u(t[0]),l(t[3]),u(t[2]),l(t[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.numPoints?s(a):this.points[a.id])}return i},getChildren:function(t,e){for(var n=this.trees[e+1].points[t],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=this.trees[e+1].within(n.x,n.y,r),o=[],a=0;a<i.length;a++){var u=this.trees[e+1].points[i[a]];u.parentId===t&&o.push(u.numPoints?s(u):this.points[u.id])}return o},getLeaves:function(t,e,n,r){var i=[];return this._appendLeaves(i,t,e,n=n||10,r=r||0,0),i},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.radius/this.options.extent,s=(n-o)/i,a=(n+1+o)/i,u={features:[]};return this._addTileFeatures(r.range((e-o)/i,s,(e+1+o)/i,a),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-o/i,s,1,a),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,s,o/i,a),r.points,-1,n,i,u),u.features.length?u:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var n=this.getChildren(t,e);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i,o){for(var s=this.getChildren(e,n),a=0;a<s.length;a++){var u=s[a].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(t,u.cluster_id,n+1,r,i,o):o<i?o++:t.push(s[a]),t.length===r)break}return o},_addTileFeatures:function(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var u=e[t[s]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.numPoints?a(u):this.points[u.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var s=t[o];if(!(s.zoom<=e)){s.zoom=e;var a=this.trees[e+1],u=a.within(s.x,s.y,r),l=s.numPoints||1,c=s.x*l,h=s.y*l,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,s));for(var f=0;f<u.length;f++){var d=a.points[u[f]];if(e<d.zoom){var g=d.numPoints||1;d.zoom=e,c+=d.x*g,h+=d.y*g,l+=g,d.parentId=o,this.options.reduce&&this._accumulate(p,d)}}1===l?n.push(s):(s.parentId=o,n.push(i(c/l,h/l,l,o,p)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}}},{kdbush:24}],33:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}e.exports=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length,i=r>>1,o=e[t];t<i;){var s=1+(t<<1),a=s+1,u=e[s];if(a<r&&n(e[a],u)<0&&(s=a,u=e[a]),n(u,o)>=0)break;e[t]=u,t=s}e[t]=o}}},{}],34:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],35:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],36:[function(t,n,r){(function(e,n){function i(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(e)?n.showHidden=e:e&&r._extend(n,e),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),a(n,t,n.depth)}function o(t,e){var n=i.styles[e];return n?"\x1b["+i.colors[n][0]+"m"+t+"\x1b["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t,e,n){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return d(i)||(i=a(t,i,n)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(d(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return f(e)?t.stylize(""+e,"number"):h(e)?t.stylize(""+e,"boolean"):p(e)?t.stylize("null","null"):void 0}(t,e);if(o)return o;var s=Object.keys(e),m=function(t){var e={};return s.forEach(function(t,n){e[t]=!0}),e}();if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),v(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(e);if(0===s.length){if(x(e))return t.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(y(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return t.stylize(Date.prototype.toString.call(e),"date");if(v(e))return u(e)}var b,w="",C=!1,I=["{","}"];return c(e)&&(C=!0,I=["[","]"]),x(e)&&(w=" [Function"+(e.name?": "+e.name:"")+"]"),y(e)&&(w=" "+RegExp.prototype.toString.call(e)),_(e)&&(w=" "+Date.prototype.toUTCString.call(e)),v(e)&&(w=" "+u(e)),0!==s.length||C&&0!=e.length?n<0?y(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),b=C?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)E(e,String(s))?o.push(l(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}(t,e,n,m,s):s.map(function(r){return l(t,e,n,m,r,C)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(b,w,I)):I[0]+w+I[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i,o){var s,u,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=t.stylize(l.set?"[Getter/Setter]":"[Getter]","special"):l.set&&(u=t.stylize("[Setter]","special")),E(r,i)||(s="["+i+"]"),u||(t.seen.indexOf(l.value)<0?(u=p(n)?a(t,l.value,null):a(t,l.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),g(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function c(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function p(t){return null===t}function f(t){return"number"==typeof t}function d(t){return"string"==typeof t}function g(t){return void 0===t}function y(t){return m(t)&&"[object RegExp]"===b(t)}function m(t){return"object"==typeof t&&null!==t}function _(t){return m(t)&&"[object Date]"===b(t)}function v(t){return m(t)&&("[object Error]"===b(t)||t instanceof Error)}function x(t){return"function"==typeof t}function b(t){return Object.prototype.toString.call(t)}function w(t){return t<10?"0"+t.toString(10):t.toString(10)}function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;r.format=function(t){if(!d(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<o;a=r[++n])p(a)||!m(a)?s+=" "+a:s+=" "+i(a);return s},r.deprecate=function(t,i){if(g(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var I,S={};r.debuglog=function(t){if(g(I)&&(I=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!S[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var n=e.pid;S[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else S[t]=function(){};return S[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=c,r.isBoolean=h,r.isNull=p,r.isNullOrUndefined=function(t){return null==t},r.isNumber=f,r.isString=d,r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=g,r.isRegExp=y,r.isObject=m,r.isDate=_,r.isError=v,r.isFunction=x,r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){var t,e;console.log("%s - %s",(e=[w((t=new Date).getHours()),w(t.getMinutes()),w(t.getSeconds())].join(":"),[t.getDate(),T[t.getMonth()],e].join(" ")),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!m(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":35,_process:30,inherits:34}],37:[function(t,e,n){function r(t){var e=new h;return function(t,e){for(var n in t.layers)e.writeMessage(3,i,t.layers[n])}(t,e),e.finish()}function i(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,o,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var s=r.values;for(n=0;n<s.length;n++)e.writeMessage(4,c,s[n])}function o(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,s,t),e.writeVarintField(3,n.type),e.writeMessage(4,l,n)}function s(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,s=t.valuecache;for(var a in n.properties){var u=o[a];void 0===u&&(r.push(a),o[a]=u=r.length-1),e.writeVarint(u);var l=n.properties[a],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,p=s[h];void 0===p&&(i.push(l),s[h]=p=i.length-1),e.writeVarint(p)}}function a(t,e){return(e<<3)+(7&t)}function u(t){return t<<1^t>>31}function l(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,s=n.length,l=0;l<s;l++){var c=n[l],h=1;1===r&&(h=c.length),e.writeVarint(a(1,h));for(var p=0;p<c.length;p++){1===p&&1!==r&&e.writeVarint(a(2,c.length-1));var f=c[p].x-i,d=c[p].y-o;e.writeVarint(u(f)),e.writeVarint(u(d)),i+=f,o+=d}}}function c(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}var h=t("pbf"),p=t("./lib/geojson_wrapper");e.exports=r,e.exports.fromVectorTileJs=r,e.exports.fromGeojsonVt=function(t){var e={};for(var n in t)e[n]=new p(t[n].features),e[n].name=n;return r({layers:e})},e.exports.GeoJSONWrapper=p},{"./lib/geojson_wrapper":38,pbf:29}],38:[function(t,e,n){"use strict";function r(t){this.features=t,this.length=t.length}function i(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("@mapbox/point-geometry"),s=t("@mapbox/vector-tile").VectorTileFeature;e.exports=r,r.prototype.feature=function(t){return new i(this.features[t])},i.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var u=s[a];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},i.prototype.toGeoJSON=s.prototype.toGeoJSON},{"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],39:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],s=JSON.stringify;e.exports=function(t,e){for(var n,a=Object.keys(o),u=0,l=a.length;u<l;u++){var c=o[p=a[u]].exports;if(c===t||c&&c.default===t){n=p;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(u=0,l=a.length;u<l;u++){var p;h[p=a[u]]=p}i[n]=[Function(["require","module","exports"],"("+t+")(self)"),h]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[n]=n,i[f]=[Function(["require"],"var f = require("+s(n)+");(f.default ? f.default : f)(self);"),d];var g={};!function t(e){for(var n in g[e]=!0,i[e][1]){var r=i[e][1][n];g[r]||t(r)}}(f);var y="("+r+")({"+Object.keys(g).map(function(t){return s(t)+":["+i[t][0]+","+s(i[t][1])+"]"}).join(",")+"},{},["+s(f)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return _;var v=m.createObjectURL(_),x=new Worker(v);return x.objectURL=v,x}},{}],40:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],41:[function(t,e,n){e.exports={version:"0.40.1"}},{}],42:[function(t,e,n){"use strict";var r=t("../util/util");e.exports={deserialize:function(t,e){var n={};if(!e)return n;for(var i=0,o=t;i<o.length;i+=1){var s=o[i],a=s.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length)for(var u=a[0].createBucket(r.extend({layers:a},s)),l=0,c=a;l<c.length;l+=1)n[c[l].id]=u}return n}}},{"../util/util":223}],43:[function(t,e,n){"use strict";function r(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var i=t("../segment").SegmentVector,o=t("../../gl/vertex_buffer"),s=t("../../gl/index_buffer"),a=t("../program_configuration").ProgramConfigurationSet,u=t("../vertex_array_type"),l=t("../index_array_type").TriangleIndexArray,c=t("../load_geometry"),h=t("../extent"),p={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:l,paintAttributes:[{property:"circle-color"},{property:"circle-radius"},{property:"circle-blur"},{property:"circle-opacity"},{property:"circle-stroke-color"},{property:"circle-stroke-width"},{property:"circle-stroke-opacity"}]},f=u(p.layoutAttributes),d=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new f(t.layoutVertexArray),this.indexArray=new l(t.indexArray),this.programConfigurations=new a(p,t.layers,t.zoom,t.programConfigurations),this.segments=new i(t.segments)};d.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.feature,a=o.index,u=o.sourceLayerIndex;if(n.layers[0].filter(s)){var l=c(s);n.addFeature(s,l),e.featureIndex.insert(s,l,a,u,n.index)}}},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get()}},d.prototype.upload=function(t){this.layoutVertexBuffer=new o(t,this.layoutVertexArray),this.indexBuffer=new s(t,this.indexArray),this.programConfigurations.upload(t)},d.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},d.prototype.addFeature=function(t,e){for(var n=this,i=0,o=e;i<o.length;i+=1)for(var s=0,a=o[i];s<a.length;s+=1){var u=a[s],l=u.x,c=u.y;if(!(l<0||l>=h||c<0||c>=h)){var p=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=p.vertexLength;r(n.layoutVertexArray,l,c,-1,-1),r(n.layoutVertexArray,l,c,1,-1),r(n.layoutVertexArray,l,c,1,1),r(n.layoutVertexArray,l,c,-1,1),n.indexArray.emplaceBack(f,f+1,f+2),n.indexArray.emplaceBack(f,f+3,f+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t.properties)},d.programInterface=p,e.exports=d},{"../../gl/index_buffer":61,"../../gl/vertex_buffer":62,"../extent":48,"../index_array_type":50,"../load_geometry":51,"../program_configuration":53,"../segment":55,"../vertex_array_type":56}],44:[function(t,e,n){"use strict";var r=t("../segment").SegmentVector,i=t("../../gl/vertex_buffer"),o=t("../../gl/index_buffer"),s=t("../program_configuration").ProgramConfigurationSet,a=t("../vertex_array_type"),u=t("../index_array_type"),l=u.LineIndexArray,c=u.TriangleIndexArray,h=t("../load_geometry"),p=t("earcut"),f=t("../../util/classify_rings"),d={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:c,indexArrayType2:l,paintAttributes:[{property:"fill-color"},{property:"fill-outline-color"},{property:"fill-opacity"}]},g=a(d.layoutAttributes),y=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new g(t.layoutVertexArray),this.indexArray=new c(t.indexArray),this.indexArray2=new l(t.indexArray2),this.programConfigurations=new s(d,t.layers,t.zoom,t.programConfigurations),this.segments=new r(t.segments),this.segments2=new r(t.segments2)};y.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.feature,a=o.index,u=o.sourceLayerIndex;if(n.layers[0].filter(s)){var l=h(s);n.addFeature(s,l),e.featureIndex.insert(s,l,a,u,n.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),indexArray2:this.indexArray2.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get(),segments2:this.segments2.get()}},y.prototype.upload=function(t){this.layoutVertexBuffer=new i(t,this.layoutVertexArray),this.indexBuffer=new o(t,this.indexArray),this.indexBuffer2=new o(t,this.indexArray2),this.programConfigurations.upload(t)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},y.prototype.addFeature=function(t,e){for(var n=this,r=0,i=f(e,500);r<i.length;r+=1){for(var o=i[r],s=0,a=0,u=o;a<u.length;a+=1)s+=u[a].length;for(var l=n.segments.prepareSegment(s,n.layoutVertexArray,n.indexArray),c=l.vertexLength,h=[],d=[],g=0,y=o;g<y.length;g+=1){var m=y[g];if(0!==m.length){m!==o[0]&&d.push(h.length/2);var _=n.segments2.prepareSegment(m.length,n.layoutVertexArray,n.indexArray2),v=_.vertexLength;n.layoutVertexArray.emplaceBack(m[0].x,m[0].y),n.indexArray2.emplaceBack(v+m.length-1,v),h.push(m[0].x),h.push(m[0].y);for(var x=1;x<m.length;x++)n.layoutVertexArray.emplaceBack(m[x].x,m[x].y),n.indexArray2.emplaceBack(v+x-1,v+x),h.push(m[x].x),h.push(m[x].y);_.vertexLength+=m.length,_.primitiveLength+=m.length}}for(var b=p(h,d),w=0;w<b.length;w+=3)n.indexArray.emplaceBack(c+b[w],c+b[w+1],c+b[w+2]);l.vertexLength+=s,l.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t.properties)},y.programInterface=d,e.exports=y},{"../../gl/index_buffer":61,"../../gl/vertex_buffer":62,"../../util/classify_rings":205,"../index_array_type":50,"../load_geometry":51,"../program_configuration":53,"../segment":55,"../vertex_array_type":56,earcut:11}],45:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,s,a){t.emplaceBack(e,n,2*Math.floor(r*_)+s,i*_*2,o*_*2,Math.round(a))}function i(t,e){return t.x===e.x&&(t.x<0||t.x>d)||t.y===e.y&&(t.y<0||t.y>d)}var o=t("../segment"),s=o.SegmentVector,a=o.MAX_VERTEX_ARRAY_LENGTH,u=t("../../gl/vertex_buffer"),l=t("../../gl/index_buffer"),c=t("../program_configuration").ProgramConfigurationSet,h=t("../vertex_array_type"),p=t("../index_array_type").TriangleIndexArray,f=t("../load_geometry"),d=t("../extent"),g=t("earcut"),y=t("../../util/classify_rings"),m={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],indexArrayType:p,paintAttributes:[{property:"fill-extrusion-base"},{property:"fill-extrusion-height"},{property:"fill-extrusion-color"}]},_=Math.pow(2,13),v=h(m.layoutAttributes),x=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new v(t.layoutVertexArray),this.indexArray=new p(t.indexArray),this.programConfigurations=new c(m,t.layers,t.zoom,t.programConfigurations),this.segments=new s(t.segments)};x.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.feature,a=o.index,u=o.sourceLayerIndex;if(n.layers[0].filter(s)){var l=f(s);n.addFeature(s,l),e.featureIndex.insert(s,l,a,u,n.index)}}},x.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},x.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get()}},x.prototype.upload=function(t){this.layoutVertexBuffer=new u(t,this.layoutVertexArray),this.indexBuffer=new l(t,this.indexArray),this.programConfigurations.upload(t)},x.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},x.prototype.addFeature=function(t,e){for(var n=this,o=0,s=y(e,500);o<s.length;o+=1){for(var u=s[o],l=0,c=0,h=u;c<h.length;c+=1)l+=h[c].length;for(var p=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=0,d=u;f<d.length;f+=1){var m=d[f];if(0!==m.length)for(var _=0,v=0;v<m.length;v++){var x=m[v];if(v>=1){var b=m[v-1];if(!i(x,b)){p.vertexLength+4>a&&(p=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var w=x.sub(b)._perp()._unit();r(n.layoutVertexArray,x.x,x.y,w.x,w.y,0,0,_),r(n.layoutVertexArray,x.x,x.y,w.x,w.y,0,1,_),_+=b.dist(x),r(n.layoutVertexArray,b.x,b.y,w.x,w.y,0,0,_),r(n.layoutVertexArray,b.x,b.y,w.x,w.y,0,1,_);var E=p.vertexLength;n.indexArray.emplaceBack(E,E+1,E+2),n.indexArray.emplaceBack(E+1,E+2,E+3),p.vertexLength+=4,p.primitiveLength+=2}}}}p.vertexLength+l>a&&(p=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var C=[],I=[],S=p.vertexLength,T=0,M=u;T<M.length;T+=1){var A=M[T];if(0!==A.length){A!==u[0]&&I.push(C.length/2);for(var P=0;P<A.length;P++){var L=A[P];r(n.layoutVertexArray,L.x,L.y,0,0,1,1,0),C.push(L.x),C.push(L.y)}}}for(var N=g(C,I),R=0;R<N.length;R+=3)n.indexArray.emplaceBack(S+N[R],S+N[R+1],S+N[R+2]);p.primitiveLength+=N.length/3,p.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t.properties)},x.programInterface=m,e.exports=x},{"../../gl/index_buffer":61,"../../gl/vertex_buffer":62,"../../util/classify_rings":205,"../extent":48,"../index_array_type":50,"../load_geometry":51,"../program_configuration":53,"../segment":55,"../vertex_array_type":56,earcut:11}],46:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,s){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(f*n.x)+128,Math.round(f*n.y)+128,1+(0===o?0:o<0?-1:1)|(s*g&63)<<2,s*g>>6)}var i=t("../segment").SegmentVector,o=t("../../gl/vertex_buffer"),s=t("../../gl/index_buffer"),a=t("../program_configuration").ProgramConfigurationSet,u=t("../vertex_array_type"),l=t("../index_array_type").TriangleIndexArray,c=t("../load_geometry"),h=t("../extent"),p=t("@mapbox/vector-tile").VectorTileFeature.types,f=63,d=Math.cos(Math.PI/180*37.5),g=.5,y=Math.pow(2,14)/g,m={layoutAttributes:[{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color"},{property:"line-blur"},{property:"line-opacity"},{property:"line-gap-width",name:"gapwidth"},{property:"line-offset"},{property:"line-width"},{property:"line-width",name:"floorwidth",useIntegerZoom:!0}],indexArrayType:l},_=u(m.layoutAttributes),v=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new _(t.layoutVertexArray),this.indexArray=new l(t.indexArray),this.programConfigurations=new a(m,t.layers,t.zoom,t.programConfigurations),this.segments=new i(t.segments)};v.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.feature,a=o.index,u=o.sourceLayerIndex;if(n.layers[0].filter(s)){var l=c(s);n.addFeature(s,l),e.featureIndex.insert(s,l,a,u,n.index)}}},v.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},v.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get()}},v.prototype.upload=function(t){this.layoutVertexBuffer=new o(t,this.layoutVertexArray),this.indexBuffer=new s(t,this.indexArray),this.programConfigurations.upload(t)},v.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},v.prototype.addFeature=function(t,e){for(var n=this.layers[0].layout,r=this.layers[0].getLayoutValue("line-join",{zoom:this.zoom},t.properties),i=n["line-cap"],o=n["line-miter-limit"],s=n["line-round-limit"],a=0,u=e;a<u.length;a+=1)this.addLine(u[a],t,r,i,o,s)},v.prototype.addLine=function(t,e,n,r,i,o){for(var s=this,a=e.properties,u="Polygon"===p[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var c=0;c<l-1&&t[c].equals(t[c+1]);)c++;if(!(l<(u?3:2))){"bevel"===n&&(i=1.05);var f=h/(512*this.overscaling)*15,g=t[c],y=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var m,_,v,x=r,b=u?"butt":r,w=!0,E=void 0,C=void 0,I=void 0,S=void 0;this.e1=this.e2=this.e3=-1,u&&(S=g.sub(m=t[l-2])._unit()._perp());for(var T=c;T<l;T++)if(!(C=u&&T===l-1?t[c+1]:t[T+1])||!t[T].equals(C)){S&&(I=S),m&&(E=m),m=t[T],S=C?C.sub(m)._unit()._perp():I;var M=(I=I||S).add(S);0===M.x&&0===M.y||M._unit();var A=M.x*S.x+M.y*S.y,P=0!==A?1/A:1/0,L=A<d&&E&&C;if(L&&T>c){var N=m.dist(E);if(N>2*f){var R=m.sub(m.sub(E)._mult(f/N)._round());s.distance+=R.dist(E),s.addCurrentVertex(R,s.distance,I.mult(1),0,0,!1,y),E=R}}var O=E&&C,D=O?n:C?x:b;if(O&&"round"===D&&(P<o?D="miter":P<=2&&(D="fakeround")),"miter"===D&&P>i&&(D="bevel"),"bevel"===D&&(P>2&&(D="flipbevel"),P<i&&(D="miter")),E&&(s.distance+=m.dist(E)),"miter"===D)M._mult(P),s.addCurrentVertex(m,s.distance,M,0,0,!1,y);else if("flipbevel"===D){if(P>100)M=S.clone().mult(-1);else{var k=I.x*S.y-I.y*S.x>0?-1:1,z=P*I.add(S).mag()/I.sub(S).mag();M._perp()._mult(z*k)}s.addCurrentVertex(m,s.distance,M,0,0,!1,y),s.addCurrentVertex(m,s.distance,M.mult(-1),0,0,!1,y)}else if("bevel"===D||"fakeround"===D){var F=I.x*S.y-I.y*S.x>0,j=-Math.sqrt(P*P-1);if(F?(v=0,_=j):(_=0,v=j),w||s.addCurrentVertex(m,s.distance,I,_,v,!1,y),"fakeround"===D){for(var B=Math.floor(8*(.5-(A-.5))),V=void 0,q=0;q<B;q++)V=S.mult((q+1)/(B+1))._add(I)._unit(),s.addPieSliceVertex(m,s.distance,V,F,y);s.addPieSliceVertex(m,s.distance,M,F,y);for(var U=B-1;U>=0;U--)V=I.mult((U+1)/(B+1))._add(S)._unit(),s.addPieSliceVertex(m,s.distance,V,F,y)}C&&s.addCurrentVertex(m,s.distance,S,-_,-v,!1,y)}else"butt"===D?(w||s.addCurrentVertex(m,s.distance,I,0,0,!1,y),C&&s.addCurrentVertex(m,s.distance,S,0,0,!1,y)):"square"===D?(w||(s.addCurrentVertex(m,s.distance,I,1,1,!1,y),s.e1=s.e2=-1),C&&s.addCurrentVertex(m,s.distance,S,-1,-1,!1,y)):"round"===D&&(w||(s.addCurrentVertex(m,s.distance,I,0,0,!1,y),s.addCurrentVertex(m,s.distance,I,1,1,!0,y),s.e1=s.e2=-1),C&&(s.addCurrentVertex(m,s.distance,S,-1,-1,!0,y),s.addCurrentVertex(m,s.distance,S,0,0,!1,y)));if(L&&T<l-1){var G=m.dist(C);if(G>2*f){var X=m.add(C.sub(m)._mult(f/G)._round());s.distance+=X.dist(m),s.addCurrentVertex(X,s.distance,S.mult(1),0,0,!1,y),m=X}}w=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a)}},v.prototype.addCurrentVertex=function(t,e,n,i,o,s,a){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(l,t,u,s,!1,i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(l,t,u,s,!0,-o,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>y/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,o,s,a))},v.prototype.addPieSliceVertex=function(t,e,n,i,o){n=n.mult(i?-1:1);var s=this.indexArray;r(this.layoutVertexArray,t,n,!1,i,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},v.programInterface=m,e.exports=v},{"../../gl/index_buffer":61,"../../gl/vertex_buffer":62,"../extent":48,"../index_array_type":50,"../load_geometry":51,"../program_configuration":53,"../segment":55,"../vertex_array_type":56,"@mapbox/vector-tile":6}],47:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,s,a){t.emplaceBack(e,n,Math.round(64*r),Math.round(64*i),o,s,a?a[0]:void 0,a?a[1]:void 0)}function i(t,e,n,r){var i=2*Math.PI,o=_((n+i)%i/i*255,10*r);t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o)}function o(t,e,n,r,i,o){return t.emplaceBack(e.x,e.y,n.x,n.y,Math.round(r.x),Math.round(r.y),10*i,10*o)}function s(t,e,n){var r={};if(r.isFeatureConstant=e.isLayoutValueFeatureConstant(n),r.isZoomConstant=e.isLayoutValueZoomConstant(n),r.isFeatureConstant&&(r.layoutSize=e.getLayoutValue(n,{zoom:t+1})),!r.isZoomConstant){for(var i=e.getLayoutValueStopZoomLevels(n),o=0;o<i.length&&i[o]<=t;)o++;for(var s=o=Math.max(0,o-1);s<i.length&&i[s]<t+1;)s++;s=Math.min(i.length-1,s),r.coveringZoomRange=[i[o],i[s]],e.isLayoutValueFeatureConstant(n)&&(r.coveringStopValues=[e.getLayoutValue(n,{zoom:i[o]}),e.getLayoutValue(n,{zoom:i[s]})]),r.functionBase=e.getLayoutProperty(n).base,void 0===r.functionBase&&(r.functionBase=1),r.functionType=e.getLayoutProperty(n).type||"exponential"}return r}function a(t,e,n,r,i){return t.isLayoutValueZoomConstant(r)&&!t.isLayoutValueFeatureConstant(r)?[10*t.getLayoutValue(r,{},i)]:t.isLayoutValueZoomConstant(r)||t.isLayoutValueFeatureConstant(r)?null:[10*t.getLayoutValue(r,{zoom:n[0]},i),10*t.getLayoutValue(r,{zoom:n[1]},i)]}var u=t("@mapbox/point-geometry"),l=t("../segment").SegmentVector,c=t("../../gl/vertex_buffer"),h=t("../../gl/index_buffer"),p=t("../program_configuration").ProgramConfigurationSet,f=t("../vertex_array_type"),d=t("../index_array_type"),g=d.TriangleIndexArray,y=d.LineIndexArray,m=t("../extent"),_=t("../../shaders/encode_attribute").packUint8ToFloat,v=t("../../symbol/anchor"),x=t("../../symbol/get_anchors"),b=t("../../util/token"),w=t("../../symbol/quads"),E=w.getGlyphQuads,C=w.getIconQuads,I=t("../../symbol/shaping"),S=I.shapeText,T=I.shapeIcon,M=I.WritingMode,A=t("../../symbol/transform_text"),P=t("../../symbol/mergelines"),L=t("../../symbol/clip_line"),N=t("../../util/util"),R=t("../../util/script_detection"),O=t("../load_geometry"),D=t("../../symbol/collision_feature"),k=t("../../util/find_pole_of_inaccessibility"),z=t("../../util/classify_rings"),F=t("@mapbox/vector-tile").VectorTileFeature.types,j=t("../../util/struct_array"),B=t("../../util/verticalize_punctuation"),V=j({members:[{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Float32",name:"placementZoom"},{type:"Uint8",name:"vertical"}]}),q=j({members:[{type:"Float32",name:"offsetX"}]}),U=j({members:[{type:"Int16",name:"x"},{type:"Int16",name:"y"}]}),G=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],X=[{name:"a_projected_pos",components:3,type:"Float32"}],Z={text:{layoutAttributes:G,dynamicLayoutAttributes:X,indexArrayType:g,paintAttributes:[{property:"text-color",name:"fill_color"},{property:"text-halo-color",name:"halo_color"},{property:"text-halo-width",name:"halo_width"},{property:"text-halo-blur",name:"halo_blur"},{property:"text-opacity",name:"opacity"}]},icon:{layoutAttributes:G,dynamicLayoutAttributes:X,indexArrayType:g,paintAttributes:[{property:"icon-color",name:"fill_color"},{property:"icon-halo-color",name:"halo_color"},{property:"icon-halo-width",name:"halo_width"},{property:"icon-halo-blur",name:"halo_blur"},{property:"icon-opacity",name:"opacity"}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}],indexArrayType:y}},Y=function(t,e,n,r){this.programInterface=t;var i=f(t.layoutAttributes),o=t.indexArrayType;if(this.layoutVertexArray=new i(r&&r.layoutVertexArray),this.indexArray=new o(r&&r.indexArray),this.programConfigurations=new p(t,e,n,r&&r.programConfigurations),this.segments=new l(r&&r.segments),t.dynamicLayoutAttributes){var s=f(t.dynamicLayoutAttributes);this.dynamicLayoutVertexArray=new s(r&&r.dynamicLayoutVertexArray)}};Y.prototype.serialize=function(t){return{layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get(),dynamicLayoutVertexArray:this.dynamicLayoutVertexArray&&this.dynamicLayoutVertexArray.serialize(t)}},Y.prototype.upload=function(t){this.layoutVertexBuffer=new c(t,this.layoutVertexArray),this.indexBuffer=new h(t,this.indexArray),this.programConfigurations.upload(t),this.programInterface.dynamicLayoutAttributes&&(this.dynamicLayoutVertexBuffer=new c(t,this.dynamicLayoutVertexArray,!0))},Y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer&&this.dynamicLayoutVertexBuffer.destroy())};var H=function(t){if(this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.pixelRatio=t.pixelRatio,t.text)this.text=new Y(Z.text,t.layers,t.zoom,t.text),this.icon=new Y(Z.icon,t.layers,t.zoom,t.icon),this.collisionBox=new Y(Z.collisionBox,t.layers,t.zoom,t.collisionBox),this.textSizeData=t.textSizeData,this.iconSizeData=t.iconSizeData,this.placedGlyphArray=new V(t.placedGlyphArray),this.placedIconArray=new V(t.placedIconArray),this.glyphOffsetArray=new q(t.glyphOffsetArray),this.lineVertexArray=new U(t.lineVertexArray);else{var e=this.layers[0];this.textSizeData=s(this.zoom,e,"text-size"),this.iconSizeData=s(this.zoom,e,"icon-size")}};H.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r["text-font"],o=(!n.isLayoutValueFeatureConstant("text-field")||r["text-field"])&&i,s=!n.isLayoutValueFeatureConstant("icon-image")||r["icon-image"];if(this.features=[],o||s){for(var a=e.iconDependencies,u=e.glyphDependencies,l=u[i]=u[i]||{},c={zoom:this.zoom},h=0,p=t;h<p.length;h+=1){var f=p[h],d=f.feature,g=f.index,y=f.sourceLayerIndex;if(n.filter(d)){var m=void 0;o&&(m=n.getLayoutValue("text-field",c,d.properties),n.isLayoutValueFeatureConstant("text-field")&&(m=b(d.properties,m)),m=A(m,n,c,d.properties));var _=void 0;if(s&&(_=n.getLayoutValue("icon-image",c,d.properties),n.isLayoutValueFeatureConstant("icon-image")&&(_=b(d.properties,_))),(m||_)&&(this.features.push({text:m,icon:_,index:g,sourceLayerIndex:y,geometry:O(d),properties:d.properties,type:F[d.type]}),_&&(a[_]=!0),m))for(var v="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],x=R.allowsVerticalWritingMode(m),w=0;w<m.length;w++)if(l[m.charCodeAt(w)]=!0,v&&x){var E=B.lookup[m.charAt(w)];E&&(l[E.charCodeAt(0)]=!0)}}}"line"===r["symbol-placement"]&&(this.features=P(this.features))}},H.prototype.isEmpty=function(){return 0===this.icon.layoutVertexArray.length&&0===this.text.layoutVertexArray.length&&0===this.collisionBox.layoutVertexArray.length},H.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,placedGlyphArray:this.placedGlyphArray.serialize(t),placedIconArray:this.placedIconArray.serialize(t),glyphOffsetArray:this.glyphOffsetArray.serialize(t),lineVertexArray:this.lineVertexArray.serialize(t),text:this.text.serialize(t),icon:this.icon.serialize(t),collisionBox:this.collisionBox.serialize(t)}},H.prototype.upload=function(t){this.text.upload(t),this.icon.upload(t),this.collisionBox.upload(t)},H.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy()},H.prototype.prepare=function(t,e,n,r){var i=this;this.symbolInstances=[],this.tilePixelRatio=m/(512*this.overscaling),this.compareText={},this.iconsNeedLinear=!1;for(var o=this.layers[0].layout,s=24*o["text-line-height"],a=o["text-font"].join(","),u="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],l=t[a]||{},c=e[a]||{},h=0,p=i.features;h<p.length;h+=1){var f=p[h],d={},g=f.text;if(g){var y=i.layers[0].getLayoutValue("text-offset",{zoom:i.zoom},f.properties).map(function(t){return 24*t}),_=24*i.layers[0].getLayoutValue("text-letter-spacing",{zoom:i.zoom},f.properties),v=R.allowsLetterSpacing(g)?_:0,x=i.layers[0].getLayoutValue("text-anchor",{zoom:i.zoom},f.properties),b=i.layers[0].getLayoutValue("text-justify",{zoom:i.zoom},f.properties),w="line"!==o["symbol-placement"]?24*i.layers[0].getLayoutValue("text-max-width",{zoom:i.zoom},f.properties):0,E=function(t,e){return S(t,l,w,s,x,b,v,y,24,e)};d[M.horizontal]=E(g,M.horizontal),R.allowsVerticalWritingMode(g)&&u&&(d[M.vertical]=E(g,M.vertical))}var C=void 0;if(f.icon){var I=n[f.icon];I&&(C=T(r[f.icon],i.layers[0].getLayoutValue("icon-offset",{zoom:i.zoom},f.properties),i.layers[0].getLayoutValue("icon-anchor",{zoom:i.zoom},f.properties)),void 0===i.sdfIcons?i.sdfIcons=I.sdf:i.sdfIcons!==I.sdf&&N.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),I.pixelRatio!==i.pixelRatio?i.iconsNeedLinear=!0:0===o["icon-rotate"]&&i.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(i.iconsNeedLinear=!0))}(d[M.horizontal]||C)&&i.addFeature(f,d,C,c)}},H.prototype.addFeature=function(t,e,n,r){var i=this,o=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1},t.properties),s=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1},t.properties),a=this.layers[0].getLayoutValue("text-offset",{zoom:this.zoom},t.properties),u=this.layers[0].getLayoutValue("icon-offset",{zoom:this.zoom},t.properties),l=this.layers[0].getLayoutValue("text-size",{zoom:18},t.properties);void 0===l&&(l=o);var c=this.layers[0].layout,h=this.tilePixelRatio*(o/24),p=this.tilePixelRatio*l/24,f=this.tilePixelRatio*s,d=this.tilePixelRatio*c["symbol-spacing"],g=c["symbol-avoid-edges"],y=c["text-padding"]*this.tilePixelRatio,_=c["icon-padding"]*this.tilePixelRatio,b=c["text-max-angle"]/180*Math.PI,w="map"===c["text-rotation-alignment"]&&"line"===c["symbol-placement"],E="map"===c["icon-rotation-alignment"]&&"line"===c["symbol-placement"],C=c["text-allow-overlap"]||c["icon-allow-overlap"]||c["text-ignore-placement"]||c["icon-ignore-placement"],I=d/2,S=function(o,s){var l=!(s.x<0||s.x>m||s.y<0||s.y>m);g&&!l||i.addSymbolInstance(s,o,e,n,i.layers[0],l||C,i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,h,y,w,a,f,_,E,u,{zoom:i.zoom},t.properties,r)};if("line"===c["symbol-placement"])for(var T=0,A=L(t.geometry,0,0,m,m);T<A.length;T+=1)for(var P=A[T],N=0,R=x(P,d,b,e[M.vertical]||e[M.horizontal],n,24,p,i.overscaling,m);N<R.length;N+=1){var O=R[N],D=e[M.horizontal];D&&i.anchorIsTooClose(D.text,I,O)||S(P,O)}else if("Polygon"===t.type)for(var F=0,j=z(t.geometry,0);F<j.length;F+=1){var B=j[F],V=k(B,16);S(B[0],new v(V.x,V.y,0))}else if("LineString"===t.type)for(var q=0,U=t.geometry;q<U.length;q+=1){var G=U[q];S(G,new v(G[0].x,G[0].y,0))}else if("Point"===t.type)for(var X=0,Z=t.geometry;X<Z.length;X+=1)for(var Y=0,H=Z[X];Y<H.length;Y+=1){var W=H[Y];S([W],new v(W.x,W.y,0))}},H.prototype.anchorIsTooClose=function(t,e,n){var r=this.compareText;if(t in r){for(var i=r[t],o=i.length-1;o>=0;o--)if(n.dist(i[o])<e)return!0}else r[t]=[];return r[t].push(n),!1},H.prototype.place=function(t,e){var n=this;this.text=new Y(Z.text,this.layers,this.zoom),this.icon=new Y(Z.icon,this.layers,this.zoom),this.collisionBox=new Y(Z.collisionBox,this.layers,this.zoom),this.placedGlyphArray=new V,this.placedIconArray=new V,this.glyphOffsetArray=new q,this.lineVertexArray=new U;var r=this.layers[0],i=r.layout,o=t.maxScale,s="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],u="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"];if(i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"]){var l=t.angle,c=Math.sin(l),h=Math.cos(l);this.symbolInstances.sort(function(t,e){return(c*t.anchor.x+h*t.anchor.y|0)-(c*e.anchor.x+h*e.anchor.y|0)||e.featureIndex-t.featureIndex})}for(var p=0,f=n.symbolInstances;p<f.length;p+=1){var d=f[p],g={boxStartIndex:d.textBoxStartIndex,boxEndIndex:d.textBoxEndIndex},y={boxStartIndex:d.iconBoxStartIndex,boxEndIndex:d.iconBoxEndIndex},m=!(d.textBoxStartIndex===d.textBoxEndIndex),_=!(d.iconBoxStartIndex===d.iconBoxEndIndex),v=i["text-optional"]||!m,x=i["icon-optional"]||!_,b=m?t.placeCollisionFeature(g,i["text-allow-overlap"],i["symbol-avoid-edges"]):t.minScale,w=_?t.placeCollisionFeature(y,i["icon-allow-overlap"],i["symbol-avoid-edges"]):t.minScale;if(v||x?!x&&b?b=Math.max(w,b):!v&&w&&(w=Math.max(w,b)):w=b=Math.max(w,b),m||_){for(var E=d.line,C=n.lineVertexArray.length,I=0;I<E.length;I++)n.lineVertexArray.emplaceBack(E[I].x,E[I].y);var S=n.lineVertexArray.length-C;if(m&&(t.insertCollisionFeature(g,b,i["text-ignore-placement"]),b<=o)){var T=a(r,0,n.textSizeData.coveringZoomRange,"text-size",d.featureProperties);n.addSymbols(n.text,d.glyphQuads,b,T,i["text-keep-upright"],d.textOffset,s,t.angle,d.featureProperties,d.writingModes,d.anchor,C,S,n.placedGlyphArray)}if(_&&(t.insertCollisionFeature(y,w,i["icon-ignore-placement"]),w<=o)){var M=a(r,0,n.iconSizeData.coveringZoomRange,"icon-size",d.featureProperties);n.addSymbols(n.icon,d.iconQuads,w,M,i["icon-keep-upright"],d.iconOffset,u,t.angle,d.featureProperties,0,d.anchor,C,S,n.placedIconArray)}}}e&&this.addToDebugBuffers(t)},H.prototype.addSymbols=function(t,e,n,o,s,a,u,l,c,h,p,f,d,g){for(var y=t.indexArray,m=t.layoutVertexArray,_=t.dynamicLayoutVertexArray,v=this.zoom,x=Math.max(Math.log(n)/Math.LN2+v,0),b=this.glyphOffsetArray.length,w=(p.angle+l+2*Math.PI)%(2*Math.PI),E=w>1*Math.PI/4&&w<=3*Math.PI/4||w>5*Math.PI/4&&w<=7*Math.PI/4,C=Boolean(h&M.vertical)&&E,I=0,S=e;I<S.length;I+=1){var T=S[I];if(!u||!s||T.writingMode===M.vertical===C){var A=T.tl,P=T.tr,L=T.bl,N=T.br,R=T.tex,O=t.segments.prepareSegment(4,t.layoutVertexArray,t.indexArray),D=O.vertexLength,k=T.glyphOffset[1];r(m,p.x,p.y,A.x,k+A.y,R.x,R.y,o),r(m,p.x,p.y,P.x,k+P.y,R.x+R.w,R.y,o),r(m,p.x,p.y,L.x,k+L.y,R.x,R.y+R.h,o),r(m,p.x,p.y,N.x,k+N.y,R.x+R.w,R.y+R.h,o),i(_,p,0,x),y.emplaceBack(D,D+1,D+2),y.emplaceBack(D+1,D+2,D+3),O.vertexLength+=4,O.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T.glyphOffset[0])}}g.emplaceBack(p.x,p.y,b,this.glyphOffsetArray.length-b,f,d,p.segment,o?o[0]:0,o?o[1]:0,a[0],a[1],x,C),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c)},H.prototype.addToDebugBuffers=function(t){for(var e=this,n=this.collisionBox,r=n.layoutVertexArray,i=n.indexArray,s=-t.angle,a=t.yStretch,l=0,c=e.symbolInstances;l<c.length;l+=1){var h=c[l];h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var p=0;p<2;p++){var f=h[0===p?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var d=f.boxStartIndex;d<f.boxEndIndex;d++){var g=e.collisionBoxArray.get(d);if(!(1===t.perspectiveRatio&&g.maxScale<1)){var y=g.anchorPoint,m=new u(g.x1,g.y1*a)._rotate(s),_=new u(g.x2,g.y1*a)._rotate(s),v=new u(g.x1,g.y2*a)._rotate(s),x=new u(g.x2,g.y2*a)._rotate(s),b=Math.max(0,Math.min(25,e.zoom+Math.log(g.maxScale)/Math.LN2)),w=Math.max(0,Math.min(25,e.zoom+Math.log(g.placementScale)/Math.LN2)),E=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),C=E.vertexLength;o(r,y,h.anchor,m,b,w),o(r,y,h.anchor,_,b,w),o(r,y,h.anchor,x,b,w),o(r,y,h.anchor,v,b,w),i.emplaceBack(C,C+1),i.emplaceBack(C+1,C+2),i.emplaceBack(C+2,C+3),i.emplaceBack(C+3,C),E.vertexLength+=4,E.primitiveLength+=4}}}}},H.prototype.addSymbolInstance=function(t,e,n,r,i,o,s,a,u,l,c,h,p,f,d,g,y,m,_,v,x){var b,w,I=[],S=[];for(var T in n){var A=parseInt(T,10);n[A]&&(S=S.concat(o?E(t,n[A],i,p,_,v,x):[]),b=new D(s,e,t,a,u,l,n[A],c,h,p,!1))}var P=b?b.boxStartIndex:this.collisionBoxArray.length,L=b?b.boxEndIndex:this.collisionBoxArray.length;r&&(I=o?C(t,r,i,y,n[M.horizontal],_,v):[],w=new D(s,e,t,a,u,l,r,d,g,y,!0));var R=w?w.boxStartIndex:this.collisionBoxArray.length,O=w?w.boxEndIndex:this.collisionBoxArray.length;L>H.MAX_INSTANCES&&N.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),O>H.MAX_INSTANCES&&N.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstances.push({textBoxStartIndex:P,textBoxEndIndex:L,iconBoxStartIndex:R,iconBoxEndIndex:O,glyphQuads:S,iconQuads:I,textOffset:f,iconOffset:m,anchor:t,line:e,featureIndex:a,featureProperties:v,writingModes:(n[M.vertical]?M.vertical:0)|(n[M.horizontal]?M.horizontal:0)})},H.programInterfaces=Z,H.MAX_INSTANCES=65535,H.addDynamicAttributes=i,e.exports=H},{"../../gl/index_buffer":61,"../../gl/vertex_buffer":62,"../../shaders/encode_attribute":85,"../../symbol/anchor":167,"../../symbol/clip_line":169,"../../symbol/collision_feature":171,"../../symbol/get_anchors":173,"../../symbol/mergelines":174,"../../symbol/quads":176,"../../symbol/shaping":177,"../../symbol/transform_text":179,"../../util/classify_rings":205,"../../util/find_pole_of_inaccessibility":211,"../../util/script_detection":218,"../../util/struct_array":220,"../../util/token":222,"../../util/util":223,"../../util/verticalize_punctuation":225,"../extent":48,"../index_array_type":50,"../load_geometry":51,"../program_configuration":53,"../segment":55,"../vertex_array_type":56,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],48:[function(t,e,n){"use strict";e.exports=8192},{}],49:[function(t,e,n){"use strict";function r(t,e){return e-t}t("@mapbox/point-geometry");var i=t("./load_geometry"),o=t("./extent"),s=t("../style-spec/feature_filter"),a=t("../util/struct_array"),u=t("grid-index"),l=t("../util/dictionary_coder"),c=t("@mapbox/vector-tile"),h=t("pbf"),p=t("../util/vectortile_to_geojson"),f=t("../util/util").arraysIntersect,d=a({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),g=function(t,e,n,r){this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.grid=n||new u(o,16,0),this.featureIndexArray=r||new d};g.deserialize=function(t,e,n){var r=new g(t.coord,t.overscaling,new u(t.grid),new d(t.featureIndexArray));return r.rawTileData=e,r.bucketLayerIDs=t.bucketLayerIDs,r.setCollisionTile(n),r},g.prototype.insert=function(t,e,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=0;s<e.length;s++){for(var a=e[s],u=[1/0,1/0,-1/0,-1/0],l=0;l<a.length;l++){var c=a[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}this.grid.insert(o,u[0],u[1],u[2],u[3])}},g.prototype.setCollisionTile=function(t){this.collisionTile=t},g.prototype.serialize=function(t){var e=this.grid.toArrayBuffer();return t&&t.push(e),{coord:this.coord,overscaling:this.overscaling,grid:e,featureIndexArray:this.featureIndexArray.serialize(t),bucketLayerIDs:this.bucketLayerIDs}},g.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new c.VectorTile(new h(this.rawTileData)).layers,this.sourceLayerCoder=new l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},i=t.params||{},a=o/t.tileSize/t.scale,u=s(i.filter),p=t.queryGeometry,f=t.additionalRadius*a,d=1/0,g=1/0,y=-1/0,m=-1/0,_=0;_<p.length;_++)for(var v=p[_],x=0;x<v.length;x++){var b=v[x];d=Math.min(d,b.x),g=Math.min(g,b.y),y=Math.max(y,b.x),m=Math.max(m,b.y)}var w=this.grid.query(d-f,g-f,y+f,m+f);w.sort(r),this.filterMatching(n,w,this.featureIndexArray,p,u,i.layers,e,t.bearing,a);var E=this.collisionTile.queryRenderedSymbols(p,t.scale);return E.sort(),this.filterMatching(n,E,this.collisionTile.collisionBoxArray,p,u,i.layers,e,t.bearing,a),n},g.prototype.filterMatching=function(t,e,n,r,o,s,a,u,l){for(var c,h=this,d=0;d<e.length;d++){var g=e[d];if(g!==c){c=g;var y=n.get(g),m=h.bucketLayerIDs[y.bucketIndex];if(!s||f(s,m)){var _=h.sourceLayerCoder.decode(y.sourceLayerIndex),v=h.vtLayers[_].feature(y.featureIndex);if(o(v))for(var x=null,b=0;b<m.length;b++){var w=m[b];if(!(s&&s.indexOf(w)<0)){var E=a[w];if(E&&("symbol"===E.type||(x||(x=i(v)),E.queryIntersectsFeature(r,v,x,h.z,u,l)))){var C=new p(v,h.z,h.x,h.y);C.layer=E.serialize();var I=t[w];void 0===I&&(I=t[w]=[]),I.push({featureIndex:g,feature:C})}}}}}}},g.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},e.exports=g},{"../style-spec/feature_filter":110,"../util/dictionary_coder":207,"../util/struct_array":220,"../util/util":223,"../util/vectortile_to_geojson":224,"./extent":48,"./load_geometry":51,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,"grid-index":22,pbf:29}],50:[function(t,e,n){"use strict";function r(t){return i({members:[{type:"Uint16",name:"vertices",components:t}]})}var i=t("../util/struct_array");e.exports={LineIndexArray:r(2),TriangleIndexArray:r(3)}},{"../util/struct_array":220}],51:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("./extent"),o={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};e.exports=function(t){for(var e=i/t.extent,n=t.loadGeometry(),s=0;s<n.length;s++)for(var a=n[s],u=0;u<a.length;u++){var l=a[u];l.x=Math.round(l.x*e),l.y=Math.round(l.y*e),(l.x<o.min||l.x>o.max||l.y<o.min||l.y>o.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":223,"./extent":48}],52:[function(t,e,n){"use strict";var r=t("../util/struct_array")({members:[{name:"a_pos",type:"Int16",components:2}]});e.exports=r},{"../util/struct_array":220}],53:[function(t,e,n){"use strict";function r(t){return[s(255*t[0],255*t[1]),s(255*t[2],255*t[3])]}var i=t("./vertex_array_type"),o=t("../style-spec/function").interpolationFactor,s=t("../shaders/encode_attribute").packUint8ToFloat,a=t("../gl/vertex_buffer"),u=function(t,e,n,r){this.name=t,this.type=e,this.property=n,this.useIntegerZoom=r};u.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},u.prototype.populatePaintArray=function(){},u.prototype.setUniforms=function(t,e,n,r){var i=r.zoom,o=n.getPaintValue(this.property,{zoom:this.useIntegerZoom?Math.floor(i):i});"color"===this.type?t.uniform4fv(e.uniforms["u_"+this.name],o):t.uniform1f(e.uniforms["u_"+this.name],o)};var l=function(t,e,n){this.name=t,this.type=e,this.property=n};l.prototype.defines=function(){return[]},l.prototype.populatePaintArray=function(t,e,n,i,o,s){var a=this,u=t.getPaintValue(this.property,void 0,s);if("color"===this.type)for(var l=r(u),c=i;c<o;c++){var h=e.get(c);h["a_"+a.name+"0"]=l[0],h["a_"+a.name+"1"]=l[1]}else{for(var p=i;p<o;p++)e.get(p)["a_"+a.name]=u;var f=n[this.property];f.max=Math.max(f.max,u)}},l.prototype.setUniforms=function(t,e){t.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var c=function(t,e,n,r,i){this.name=t,this.type=e,this.property=n,this.useIntegerZoom=r,this.zoom=i};c.prototype.defines=function(){return[]},c.prototype.populatePaintArray=function(t,e,n,i,o,s){var a=this,u=t.getPaintValue(this.property,{zoom:this.zoom},s),l=t.getPaintValue(this.property,{zoom:this.zoom+1},s);if("color"===this.type)for(var c=r(u),h=r(l),p=i;p<o;p++){var f=e.get(p);f["a_"+a.name+"0"]=c[0],f["a_"+a.name+"1"]=c[1],f["a_"+a.name+"2"]=h[0],f["a_"+a.name+"3"]=h[1]}else{for(var d=i;d<o;d++){var g=e.get(d);g["a_"+a.name+"0"]=u,g["a_"+a.name+"1"]=l}var y=n[this.property];y.max=Math.max(y.max,u,l)}},c.prototype.setUniforms=function(t,e,n,r){var i=r.zoom,s=o(this.useIntegerZoom?Math.floor(i):i,1,this.zoom,this.zoom+1);t.uniform1f(e.uniforms["a_"+this.name+"_t"],s)};var h=function(){this.binders={},this.cacheKey=""};h.createDynamic=function(t,e,n){for(var r=new h,o=[],s=0,a=t.paintAttributes||[];s<a.length;s+=1){var p=a[s],f=p.property,d=p.useIntegerZoom||!1,g=p.name||f.replace(e.type+"-","").replace(/-/g,"_"),y=e._paintSpecifications[f].type;e.isPaintValueFeatureConstant(f)?(r.binders[g]=new u(g,y,f,d),r.cacheKey+="/u_"+g):e.isPaintValueZoomConstant(f)?(r.binders[g]=new l(g,y,f),r.cacheKey+="/a_"+g,o.push({name:"a_"+g,type:"Float32",components:"color"===y?2:1})):(r.binders[g]=new c(g,y,f,d,n),r.cacheKey+="/z_"+g,o.push({name:"a_"+g,type:"Float32",components:"color"===y?4:2}))}return r.PaintVertexArray=i(o),r.interface=t,r.layer=e,r},h.createBasicFill=function(){var t=new h;return t.binders.color=new u("color","color","fill-color",!1),t.cacheKey+="/u_color",t.binders.opacity=new u("opacity","number","fill-opacity",!1),t.cacheKey+="/u_opacity",t},h.prototype.createPaintPropertyStatistics=function(){var t={};for(var e in this.binders)t[this.binders[e].property]={max:-1/0};return t},h.prototype.populatePaintArray=function(t,e){var n=this,r=this.paintVertexArray;if(0!==r.bytesPerElement){var i=r.length;for(var o in r.resize(t),n.binders)n.binders[o].populatePaintArray(n.layer,r,n.paintPropertyStatistics,i,t,e)}},h.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},h.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)this.binders[i].setUniforms(t,e,n,r)},h.prototype.serialize=function(t){return 0===this.paintVertexArray.length?null:{array:this.paintVertexArray.serialize(t),type:this.paintVertexArray.constructor.serialize(),statistics:this.paintPropertyStatistics}},h.deserialize=function(t,e,n,r){var o=h.createDynamic(t,e,n);return r&&(o.PaintVertexArray=i(r.type.members),o.paintVertexArray=new o.PaintVertexArray(r.array),o.paintPropertyStatistics=r.statistics),o},h.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=new a(t,this.paintVertexArray))},h.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var p=function(t,e,n,r){if(this.programConfigurations={},r)for(var i=0,o=e;i<o.length;i+=1){var s=o[i];this.programConfigurations[s.id]=h.deserialize(t,s,n,r[s.id])}else for(var a=0,u=e;a<u.length;a+=1){var l=u[a],c=h.createDynamic(t,l,n);c.paintVertexArray=new c.PaintVertexArray,c.paintPropertyStatistics=c.createPaintPropertyStatistics(),this.programConfigurations[l.id]=c}};p.prototype.populatePaintArrays=function(t,e){for(var n in this.programConfigurations)this.programConfigurations[n].populatePaintArray(t,e)},p.prototype.serialize=function(t){var e={};for(var n in this.programConfigurations){var r=this.programConfigurations[n].serialize(t);r&&(e[n]=r)}return e},p.prototype.get=function(t){return this.programConfigurations[t]},p.prototype.upload=function(t){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t)},p.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},e.exports={ProgramConfiguration:h,ProgramConfigurationSet:p}},{"../gl/vertex_buffer":62,"../shaders/encode_attribute":85,"../style-spec/function":112,"./vertex_array_type":56}],54:[function(t,e,n){"use strict";var r=t("../util/struct_array")({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});e.exports=r},{"../util/struct_array":220}],55:[function(t,e,n){"use strict";var r=t("../util/util").warnOnce,i=Math.pow(2,16)-1,o=function(t){void 0===t&&(t=[]),this.segments=t};o.prototype.prepareSegment=function(t,n,o){var s=this.segments[this.segments.length-1];return t>i&&r("Max vertices per segment is "+i+": bucket requested "+t),(!s||s.vertexLength+t>e.exports.MAX_VERTEX_ARRAY_LENGTH)&&this.segments.push(s={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0}),s},o.prototype.get=function(){return this.segments},o.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},e.exports={SegmentVector:o,MAX_VERTEX_ARRAY_LENGTH:i}},{"../util/util":223}],56:[function(t,e,n){"use strict";var r=t("../util/struct_array");e.exports=function(t){return r({members:t,alignment:4})}},{"../util/struct_array":220}],57:[function(t,e,n){"use strict";var r=function(t,e,n){this.column=t,this.row=e,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},r.prototype.sub=function(t){return this.clone()._sub(t)},r.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},r.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=r},{}],58:[function(t,e,n){"use strict";var r=t("../util/util").wrap,i=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.prototype.toBounds=function(e){var n=360*e/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(t("./lng_lat_bounds"))(new i(this.lng-r,this.lat-n),new i(this.lng+r,this.lat+n))},i.convert=function(t){if(t instanceof i)return t;if(Array.isArray(t)&&2===t.length)return new i(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new i(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=i},{"../util/util":223,"./lng_lat_bounds":59}],59:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};i.prototype.setNorthEast=function(t){return this._ne=t instanceof r?new r(t.lng,t.lat):r.convert(t),this},i.prototype.setSouthWest=function(t){return this._sw=t instanceof r?new r(t.lng,t.lat):r.convert(t),this},i.prototype.extend=function(t){var e,n,o=this._sw,s=this._ne;if(t instanceof r)e=t,n=t;else{if(!(t instanceof i))return Array.isArray(t)?t.every(Array.isArray)?this.extend(i.convert(t)):this.extend(r.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return o||s?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),s.lng=Math.max(n.lng,s.lng),s.lat=Math.max(n.lat,s.lat)):(this._sw=new r(e.lng,e.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.convert=function(t){return!t||t instanceof i?t:new i(t)},e.exports=i},{"./lng_lat":58}],60:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=t("@mapbox/point-geometry"),o=t("./coordinate"),s=t("../util/util"),a=t("../style-spec/util/interpolate"),u=t("../source/tile_coord"),l=t("../data/extent"),c=t("@mapbox/gl-matrix"),h=c.vec4,p=c.mat4,f=c.mat2,d=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},g={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};g.minZoom.get=function(){return this._minZoom},g.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},g.maxZoom.get=function(){return this._maxZoom},g.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},g.renderWorldCopies.get=function(){return this._renderWorldCopies},g.worldSize.get=function(){return this.tileSize*this.scale},g.centerPoint.get=function(){return this.size._div(2)},g.size.get=function(){return new i(this.width,this.height)},g.bearing.get=function(){return-this.angle/Math.PI*180},g.bearing.set=function(t){var e=-s.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=f.create(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},g.pitch.get=function(){return this._pitch/Math.PI*180},g.pitch.set=function(t){var e=s.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},g.fov.get=function(){return this._fov/Math.PI*180},g.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},g.zoom.get=function(){return this._zoom},g.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},g.center.get=function(){return this._center},g.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},d.prototype.getVisibleWrappedCoordinates=function(t){for(var e=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(e.column),o=Math.floor(n.column),s=[t],a=r;a<=o;a++)0!==a&&s.push(new u(t.z,t.x,t.y,a));return s},d.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var r=this.pointCoordinate(this.centerPoint,e),o=new i(r.column-.5,r.row-.5),s=[this.pointCoordinate(new i(0,0),e),this.pointCoordinate(new i(this.width,0),e),this.pointCoordinate(new i(this.width,this.height),e),this.pointCoordinate(new i(0,this.height),e)];return u.cover(e,s,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t)-o.dist(e)})},d.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},g.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(t){return Math.pow(2,t)},d.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},d.prototype.project=function(t){return new i(this.lngX(t.lng),this.latY(t.lat))},d.prototype.unproject=function(t){return new r(this.xLng(t.x),this.yLat(t.y))},g.x.get=function(){return this.lngX(this.center.lng)},g.y.get=function(){return this.latY(this.center.lat)},g.point.get=function(){return new i(this.x,this.y)},d.prototype.lngX=function(t){return(180+t)*this.worldSize/360},d.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},d.prototype.xLng=function(t){return 360*t/this.worldSize-180},d.prototype.yLat=function(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t/this.worldSize)*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},d.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},d.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},d.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new r(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},d.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];h.transformMat4(n,n,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],s=r[3],u=n[1]/i,l=r[1]/s,c=n[2]/i,p=r[2]/s,f=c===p?0:(0-c)/(p-c);return new o(a(n[0]/i,r[0]/s,f)/this.tileSize,a(u,l,f)/this.tileSize,this.zoom)._zoomTo(e)},d.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(t,e){var n=t.toCoordinate(e),r=this.worldSize/this.zoomScale(n.zoom),i=p.identity(new Float64Array(16));return p.translate(i,i,[n.column*r,n.row*r,0]),p.scale(i,i,[r/l,r/l,1]),p.multiply(i,this.projMatrix,i),new Float32Array(i)},d.prototype.cameraToTileDistance=function(t){var e=this.calculatePosMatrix(t.coord,t.sourceMaxZoom),n=[t.tileSize/2,t.tileSize/2,0,1];return h.transformMat4(n,n,e),n[3]},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,r,o=-90,s=90,a=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=this.latY(h[1]),t=(s=this.latY(h[0]))-o<l.y?l.y/(s-o):0}if(this.lngRange){var p=this.lngRange;a=this.lngX(p[0]),e=(u=this.lngX(p[1]))-a<l.x?l.x/(u-a):0}var f=Math.max(e||0,t||0);if(f)return this.center=this.unproject(new i(e?(u+a)/2:this.x,t?(s+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,g=l.y/2;d-g<o&&(r=o+g),d+g>s&&(r=s-g)}if(this.lngRange){var y=this.x,m=l.x/2;y-m<a&&(n=a+m),y+m>u&&(n=u-m)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),i=new Float64Array(16);p.perspective(i,this._fov,this.width/this.height,1,r),p.scale(i,i,[1,-1,1]),p.translate(i,i,[0,0,-this.cameraToCenterDistance]),p.rotateX(i,i,this._pitch),p.rotateZ(i,i,this.angle),p.translate(i,i,[-this.x,-this.y,0]);var o=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(p.scale(i,i,[1,1,o,1]),this.projMatrix=i,i=p.create(),p.scale(i,i,[this.width/2,-this.height/2,1]),p.translate(i,i,[1,-1,0]),this.pixelMatrix=p.multiply(new Float64Array(16),i,this.projMatrix),!(i=p.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=i}},Object.defineProperties(d.prototype,g),e.exports=d},{"../data/extent":48,"../source/tile_coord":101,"../style-spec/util/interpolate":127,"../util/util":223,"./coordinate":57,"./lng_lat":58,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],61:[function(t,e,n){"use strict";var r=function(t,e){this.gl=t,this.buffer=t.createBuffer(),void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object")),t.extVertexArrayObject&&t.extVertexArrayObject.bindVertexArrayOES(null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,t.STATIC_DRAW),delete e.arrayBuffer};r.prototype.bind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)},r.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=r},{}],62:[function(t,e,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},i=function(t,e,n){this.length=e.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.gl=t,this.buffer=t.createBuffer(),this.gl.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.gl.bufferData(t.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?t.DYNAMIC_DRAW:t.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};i.prototype.bind=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)},i.prototype.updateData=function(t){this.bind(),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,t.arrayBuffer)},i.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},i.prototype.setVertexAttribPointers=function(t,e,n){for(var i=this,o=0;o<this.attributes.length;o++){var s=i.attributes[o],a=e.attributes[s.name];void 0!==a&&t.vertexAttribPointer(a,s.components,t[r[s.type]],!1,i.itemSize,s.offset+i.itemSize*(n||0))}},i.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=i},{}],63:[function(t,e,n){"use strict";var r=t("mapbox-gl-supported"),i=t("./util/browser"),o=t("../package.json").version,s=t("./ui/map"),a=t("./ui/control/navigation_control"),u=t("./ui/control/geolocate_control"),l=t("./ui/control/attribution_control"),c=t("./ui/control/scale_control"),h=t("./ui/control/fullscreen_control"),p=t("./ui/popup"),f=t("./ui/marker"),d=t("./style/style"),g=t("./geo/lng_lat"),y=t("./geo/lng_lat_bounds"),m=t("@mapbox/point-geometry"),_=t("./util/evented"),v=t("./util/config"),x=t("./source/rtl_text_plugin");e.exports={version:o,supported:r,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:x.setRTLTextPlugin,Map:s,NavigationControl:a,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:h,Popup:p,Marker:f,Style:d,LngLat:g,LngLatBounds:y,Point:m,Evented:_,config:v,get accessToken(){return v.ACCESS_TOKEN},set accessToken(t){v.ACCESS_TOKEN=t}}},{"../package.json":41,"./geo/lng_lat":58,"./geo/lng_lat_bounds":59,"./source/rtl_text_plugin":96,"./style/style":156,"./ui/control/attribution_control":182,"./ui/control/fullscreen_control":183,"./ui/control/geolocate_control":184,"./ui/control/navigation_control":186,"./ui/control/scale_control":187,"./ui/map":197,"./ui/marker":198,"./ui/popup":199,"./util/browser":202,"./util/config":206,"./util/evented":210,"@mapbox/point-geometry":2,"mapbox-gl-supported":28}],64:[function(t,e,n){"use strict";var r=t("./pattern");e.exports=function(t,e,n){var i=t.gl,o=t.transform,s=o.tileSize,a=n.paint["background-color"],u=n.paint["background-pattern"],l=n.paint["background-opacity"];if(t.renderPass===(u||1!==a[3]||1!==l?"translucent":"opaque")){var c;if(i.disable(i.STENCIL_TEST),t.setDepthSublayer(0),u){if(r.isPatternMissing(u,t))return;c=t.useProgram("fillPattern",t.basicFillProgramConfiguration),r.prepare(u,t,c),t.tileExtentPatternVAO.bind(i,c,t.tileExtentBuffer)}else c=t.useProgram("fill",t.basicFillProgramConfiguration),i.uniform4fv(c.uniforms.u_color,a),t.tileExtentVAO.bind(i,c,t.tileExtentBuffer);i.uniform1f(c.uniforms.u_opacity,l);for(var h=0,p=o.coveringTiles({tileSize:s});h<p.length;h+=1){var f=p[h];u&&r.setTile({coord:f,tileSize:s},t,c),i.uniformMatrix4fv(c.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(f)),i.drawArrays(i.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}},{"./pattern":80}],65:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,o){if("translucent"===t.renderPass){var s=t.gl;t.setDepthSublayer(0),t.depthMask(!1),s.disable(s.STENCIL_TEST);for(var a=0;a<o.length;a++){var u=o[a],l=e.getTile(u),c=l.getBucket(n);if(c){var h=c.programConfigurations.get(n.id),p=t.useProgram("circle",h);if(h.setUniforms(s,p,n,{zoom:t.transform.zoom}),s.uniform1f(p.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),s.uniform1i(p.uniforms.u_scale_with_map,"map"===n.paint["circle-pitch-scale"]?1:0),"map"===n.paint["circle-pitch-alignment"]){s.uniform1i(p.uniforms.u_pitch_with_map,1);var f=i(l,1,t.transform.zoom);s.uniform2f(p.uniforms.u_extrude_scale,f,f)}else s.uniform1i(p.uniforms.u_pitch_with_map,0),s.uniform2fv(p.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);s.uniform1f(p.uniforms.u_devicepixelratio,r.devicePixelRatio),s.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(u.posMatrix,l,n.paint["circle-translate"],n.paint["circle-translate-anchor"])),p.draw(s,s.TRIANGLES,n.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,h)}}}}},{"../source/pixels_to_tile_units":93,"../util/browser":202}],66:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=t.gl;i.enable(i.STENCIL_TEST);var o=t.useProgram("collisionBox");i.activeTexture(i.TEXTURE1),t.frameHistory.bind(i),i.uniform1i(o.uniforms.u_fadetexture,1);for(var s=0;s<r.length;s++){var a=r[s],u=e.getTile(a),l=u.getBucket(n);if(l){i.uniformMatrix4fv(o.uniforms.u_matrix,!1,a.posMatrix),t.enableTileClippingMask(a),t.lineWidth(1),i.uniform1f(o.uniforms.u_scale,Math.pow(2,t.transform.zoom-u.coord.z)),i.uniform1f(o.uniforms.u_zoom,10*t.transform.zoom);var c=Math.max(0,Math.min(25,u.coord.z+Math.log(u.collisionTile.maxScale)/Math.LN2));i.uniform1f(o.uniforms.u_maxzoom,10*c),i.uniform1f(o.uniforms.u_collision_y_stretch,u.collisionTile.yStretch),i.uniform1f(o.uniforms.u_pitch,t.transform.pitch/360*2*Math.PI),i.uniform1f(o.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),o.draw(i,i.LINES,n.id,l.collisionBox.layoutVertexBuffer,l.collisionBox.indexBuffer,l.collisionBox.segments)}}}},{}],67:[function(t,e,n){"use strict";function r(t,e,n){var r=t.gl;r.disable(r.STENCIL_TEST),t.lineWidth(1*i.devicePixelRatio);var h=n.posMatrix,p=t.useProgram("debug");r.uniformMatrix4fv(p.uniforms.u_matrix,!1,h),r.uniform4f(p.uniforms.u_color,1,0,0,1),t.debugVAO.bind(r,p,t.debugBuffer),r.drawArrays(r.LINE_STRIP,0,t.debugBuffer.length);for(var f=function(t,e,n,r){r=r||1;var i,o,s,a,u,l,h,p,f=[];for(i=0,o=t.length;i<o;i++)if(u=c[t[i]]){for(p=null,s=0,a=u[1].length;s<a;s+=2)-1===u[1][s]&&-1===u[1][s+1]?p=null:(l=e+u[1][s]*r,h=200-u[1][s+1]*r,p&&f.push(p.x,p.y,l,h),p={x:l,y:h});e+=u[0]*r}return f}(n.toString(),50,0,5),d=new l,g=0;g<f.length;g+=2)d.emplaceBack(f[g],f[g+1]);var y=new a(r,d);(new u).bind(r,p,y),r.uniform4f(p.uniforms.u_color,1,1,1,1);for(var m=e.getTile(n).tileSize,_=s/(Math.pow(2,t.transform.zoom-n.z)*m),v=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<v.length;x++){var b=v[x];r.uniformMatrix4fv(p.uniforms.u_matrix,!1,o.translate([],h,[_*b[0],_*b[1],0])),r.drawArrays(r.LINES,0,y.length)}r.uniform4f(p.uniforms.u_color,0,0,0,1),r.uniformMatrix4fv(p.uniforms.u_matrix,!1,h),r.drawArrays(r.LINES,0,y.length)}var i=t("../util/browser"),o=t("@mapbox/gl-matrix").mat4,s=t("../data/extent"),a=t("../gl/vertex_buffer"),u=t("./vertex_array_object"),l=t("../data/pos_array");e.exports=function(t,e,n){for(var i=0;i<n.length;i++)r(t,e,n[i])};var c={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/extent":48,"../data/pos_array":52,"../gl/vertex_buffer":62,"../util/browser":202,"./vertex_array_object":84,"@mapbox/gl-matrix":1}],68:[function(t,e,n){"use strict";function r(t,e,n,r,i){if(!a.isPatternMissing(n.paint["fill-pattern"],t))for(var o=!0,s=0,u=r;s<u.length;s+=1){var l=u[s],c=e.getTile(l),h=c.getBucket(n);h&&(t.enableTileClippingMask(l),i(t,e,n,c,l,h,o),o=!1)}}function i(t,e,n,r,i,o,a){var u=t.gl,l=o.programConfigurations.get(n.id);s("fill",n.paint["fill-pattern"],t,l,n,r,i,a).draw(u,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function o(t,e,n,r,i,o,a){var u=t.gl,l=o.programConfigurations.get(n.id),c=s("fillOutline",n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),t,l,n,r,i,a);u.uniform2f(c.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),c.draw(u,u.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function s(t,e,n,r,i,o,s,u){var l,c=n.currentProgram;return e?(l=n.useProgram(t+"Pattern",r),(u||l!==c)&&(r.setUniforms(n.gl,l,i,{zoom:n.transform.zoom}),a.prepare(i.paint["fill-pattern"],n,l)),a.setTile(o,n,l)):(l=n.useProgram(t,r),(u||l!==c)&&r.setUniforms(n.gl,l,i,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(s.posMatrix,o,i.paint["fill-translate"],i.paint["fill-translate-anchor"])),l}var a=t("./pattern");e.exports=function(t,e,n,s){var a=t.gl;a.enable(a.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"]?"opaque":"translucent";t.renderPass===u&&(t.setDepthSublayer(1),t.depthMask("opaque"===t.renderPass),r(t,e,n,s,i)),"translucent"===t.renderPass&&n.paint["fill-antialias"]&&(t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),r(t,e,n,s,o))}},{"./pattern":80}],69:[function(t,e,n){"use strict";function r(t,e,n,r){var i=e.getTile(r),a=i.getBucket(n);if(a){var l=t.gl,c=n.paint["fill-extrusion-pattern"],h=a.programConfigurations.get(n.id),p=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",h);if(h.setUniforms(l,p,n,{zoom:t.transform.zoom}),c){if(o.isPatternMissing(c,t))return;o.prepare(c,t,p),o.setTile(i,t,p),l.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,r.z)/i.tileSize/8)}t.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(r.posMatrix,i,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),function(t,e){var n=e.gl,r=e.style.light,i=r.calculated.position,o=[i.x,i.y,i.z],a=s.create();"viewport"===r.calculated.anchor&&s.fromRotation(a,-e.transform.angle),u.transformMat3(o,o,a),n.uniform3fv(t.uniforms.u_lightpos,o),n.uniform1f(t.uniforms.u_lightintensity,r.calculated.intensity),n.uniform3fv(t.uniforms.u_lightcolor,r.calculated.color.slice(0,3))}(p,t),p.draw(l,l.TRIANGLES,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,h)}}var i=t("@mapbox/gl-matrix"),o=t("./pattern"),s=i.mat3,a=i.mat4,u=i.vec3;e.exports=function(t,e,n,i){if("3d"===t.renderPass){var o=t.gl;o.disable(o.STENCIL_TEST),o.enable(o.DEPTH_TEST),t.clearColor(),t.depthMask(!0);for(var s=0;s<i.length;s++)r(t,e,n,i[s])}else"translucent"===t.renderPass&&function(t,e){var n=t.prerenderedFrames[e.id];if(n){var r=t.gl,i=t.useProgram("extrusionTexture");r.disable(r.STENCIL_TEST),r.disable(r.DEPTH_TEST),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.texture),r.uniform1f(i.uniforms.u_opacity,e.paint["fill-extrusion-opacity"]),r.uniform1i(i.uniforms.u_image,0);var o=a.create();a.ortho(o,0,t.width,t.height,0,0,1),r.uniformMatrix4fv(i.uniforms.u_matrix,!1,o),r.uniform2f(i.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),n.vao.bind(r,i,n.buffer),r.drawArrays(r.TRIANGLE_STRIP,0,4),t.viewportFrames.push(n),delete t.prerenderedFrames[e.id]}}(t,n)}},{"./pattern":80,"@mapbox/gl-matrix":1}],70:[function(t,e,n){"use strict";function r(t,e,n,r,s,a,u,l,c){var h,p,f,d,g=e.gl,y=s.paint["line-dasharray"],m=s.paint["line-pattern"];if(l||c){var _=1/o(n,1,e.transform.tileZoom);if(y){h=e.lineAtlas.getDash(y.from,"round"===s.layout["line-cap"]),p=e.lineAtlas.getDash(y.to,"round"===s.layout["line-cap"]);var v=h.width*y.fromScale,x=p.width*y.toScale;g.uniform2f(t.uniforms.u_patternscale_a,_/v,-h.height/2),g.uniform2f(t.uniforms.u_patternscale_b,_/x,-p.height/2),g.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(v,x)*i.devicePixelRatio)/2)}else if(m){if(f=e.imageManager.getPattern(m.from),d=e.imageManager.getPattern(m.to),!f||!d)return;g.uniform2f(t.uniforms.u_pattern_size_a,f.displaySize[0]*m.fromScale/_,d.displaySize[1]),g.uniform2f(t.uniforms.u_pattern_size_b,d.displaySize[0]*m.toScale/_,d.displaySize[1]);var b=e.imageManager.getPixelSize();g.uniform2fv(t.uniforms.u_texsize,[b.width,b.height])}g.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}l&&(y?(g.uniform1i(t.uniforms.u_image,0),g.activeTexture(g.TEXTURE0),e.lineAtlas.bind(g),g.uniform1f(t.uniforms.u_tex_y_a,h.y),g.uniform1f(t.uniforms.u_tex_y_b,p.y),g.uniform1f(t.uniforms.u_mix,y.t)):m&&(g.uniform1i(t.uniforms.u_image,0),g.activeTexture(g.TEXTURE0),e.imageManager.bind(g),g.uniform2fv(t.uniforms.u_pattern_tl_a,f.tl),g.uniform2fv(t.uniforms.u_pattern_br_a,f.br),g.uniform2fv(t.uniforms.u_pattern_tl_b,d.tl),g.uniform2fv(t.uniforms.u_pattern_br_b,d.br),g.uniform1f(t.uniforms.u_fade,m.t))),e.enableTileClippingMask(a);var w=e.translatePosMatrix(a.posMatrix,n,s.paint["line-translate"],s.paint["line-translate-anchor"]);g.uniformMatrix4fv(t.uniforms.u_matrix,!1,w),g.uniform1f(t.uniforms.u_ratio,1/o(n,1,e.transform.zoom)),t.draw(g,g.TRIANGLES,s.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}var i=t("../util/browser"),o=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,i){if("translucent"===t.renderPass){t.setDepthSublayer(0),t.depthMask(!1);var o=t.gl;if(o.enable(o.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var s,a=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,l=0,c=i;l<c.length;l+=1){var h=c[l],p=e.getTile(h),f=p.getBucket(n);if(f){var d=f.programConfigurations.get(n.id),g=t.currentProgram,y=t.useProgram(a,d),m=u||y!==g,_=s!==p.coord.z;m&&d.setUniforms(t.gl,y,n,{zoom:t.transform.zoom}),r(y,t,p,f,n,h,d,m,_),s=p.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":93,"../util/browser":202}],71:[function(t,e,n){"use strict";function r(t,e,n,r,o){var s=r.paint["raster-fade-duration"];if(s>0){var a=Date.now(),u=(a-t.timeAdded)/s,l=e?(a-e.timeAdded)/s:-1,c=n.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!e||Math.abs(e.coord.z-h)>Math.abs(t.coord.z-h),f=p&&t.refreshedUponExpiration?1:i.clamp(p?u:1-l,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var i=t("../util/util"),o=t("../source/image_source");e.exports=function(t,e,n,i){if("translucent"===t.renderPass){var s=t.gl,a=e.getSource(),u=t.useProgram("raster");s.enable(s.DEPTH_TEST),t.depthMask(!0),s.depthFunc(s.LESS),s.disable(s.STENCIL_TEST),s.uniform1f(u.uniforms.u_brightness_low,n.paint["raster-brightness-min"]),s.uniform1f(u.uniforms.u_brightness_high,n.paint["raster-brightness-max"]),s.uniform1f(u.uniforms.u_saturation_factor,function(t){return t>0?1-1/(1.001-t):-t}(n.paint["raster-saturation"])),s.uniform1f(u.uniforms.u_contrast_factor,function(t){return t>0?1/(1-t):1+t}(n.paint["raster-contrast"])),s.uniform3fv(u.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(n.paint["raster-hue-rotate"])),s.uniform1f(u.uniforms.u_buffer_scale,1),s.uniform1i(u.uniforms.u_image0,0),s.uniform1i(u.uniforms.u_image1,1);for(var l=i.length&&i[0].z,c=0,h=i;c<h.length;c+=1){var p=h[c];t.setDepthSublayer(p.z-l);var f=e.getTile(p),d=t.transform.calculatePosMatrix(p,e.getSource().maxzoom);f.registerFadeDuration(t.style.animationLoop,n.paint["raster-fade-duration"]),s.uniformMatrix4fv(u.uniforms.u_matrix,!1,d);var g=e.findLoadedParent(p,0,{}),y=r(f,g,e,n,t.transform),m=void 0,_=void 0;if(s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,f.texture),s.activeTexture(s.TEXTURE1),g?(s.bindTexture(s.TEXTURE_2D,g.texture),m=Math.pow(2,g.coord.z-f.coord.z),_=[f.coord.x*m%1,f.coord.y*m%1]):s.bindTexture(s.TEXTURE_2D,f.texture),s.uniform2fv(u.uniforms.u_tl_parent,_||[0,0]),s.uniform1f(u.uniforms.u_scale_parent,m||1),s.uniform1f(u.uniforms.u_fade_t,y.mix),s.uniform1f(u.uniforms.u_opacity,y.opacity*n.paint["raster-opacity"]),a instanceof o){var v=a.boundsBuffer;a.boundsVAO.bind(s,u,v),s.drawArrays(s.TRIANGLE_STRIP,0,v.length)}else{var x=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(s,u,x),s.drawArrays(s.TRIANGLE_STRIP,0,x.length)}}s.depthFunc(s.LEQUAL)}}},{"../source/image_source":91,"../util/util":223}],72:[function(t,e,n){"use strict";function r(t,e,n,r,s,a,c,p,f,d){var g=t.gl,y=t.transform,m="map"===p,_="map"===f,v=m&&"line"===n.layout["symbol-placement"],x=m&&!_&&!v,b=_;b?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST);for(var w,E=0,C=r;E<C.length;E+=1){var I=C[E],S=e.getTile(I),T=S.getBucket(n);if(T){var M=s?T.text:T.icon;if(M&&M.segments.get().length){var A=M.programConfigurations.get(n.id),P=s||T.sdfIcons,L=s?T.textSizeData:T.iconSizeData;if(w||(w=t.useProgram(P?"symbolSDF":"symbolIcon",A),A.setUniforms(g,w,n,{zoom:t.transform.zoom}),i(w,t,n,s,x,_,L)),g.activeTexture(g.TEXTURE0),g.uniform1i(w.uniforms.u_texture,0),s)S.glyphAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),g.uniform2fv(w.uniforms.u_texsize,S.glyphAtlasTexture.size);else{var N=!n.isLayoutValueFeatureConstant("icon-size")||!n.isLayoutValueZoomConstant("icon-size")||1!==n.getLayoutValue("icon-size",{zoom:y.zoom})||T.iconsNeedLinear;S.iconAtlasTexture.bind(P||t.options.rotating||t.options.zooming||N||_||0!==y.pitch?g.LINEAR:g.NEAREST,g.CLAMP_TO_EDGE),g.uniform2fv(w.uniforms.u_texsize,S.iconAtlasTexture.size)}t.enableTileClippingMask(I),g.uniformMatrix4fv(w.uniforms.u_matrix,!1,t.translatePosMatrix(I.posMatrix,S,a,c));var R=u(S,1,t.transform.zoom),O=l.getLabelPlaneMatrix(I.posMatrix,_,m,t.transform,R),D=l.getGlCoordMatrix(I.posMatrix,_,m,t.transform,R);g.uniformMatrix4fv(w.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(D,S,a,c,!0)),v?(g.uniformMatrix4fv(w.uniforms.u_label_plane_matrix,!1,h),l.updateLineLabels(T,I.posMatrix,t,s,O,D,_,d,R,n)):g.uniformMatrix4fv(w.uniforms.u_label_plane_matrix,!1,O),g.uniform1f(w.uniforms.u_collision_y_stretch,S.collisionTile.yStretch),o(w,0,t,n,0,M,s,P,_)}}}b||g.enable(g.DEPTH_TEST)}function i(t,e,n,r,i,o,s){var a=e.gl,u=e.transform;a.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),a.uniform1f(t.uniforms.u_is_text,r?1:0),a.activeTexture(a.TEXTURE1),e.frameHistory.bind(a),a.uniform1i(t.uniforms.u_fadetexture,1),a.uniform1f(t.uniforms.u_pitch,u.pitch/360*2*Math.PI),a.uniform1i(t.uniforms.u_is_size_zoom_constant,s.isZoomConstant?1:0),a.uniform1i(t.uniforms.u_is_size_feature_constant,s.isFeatureConstant?1:0),a.uniform1f(t.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var l=c.evaluateSizeForZoom(s,u,n,r);void 0!==l.uSizeT&&a.uniform1f(t.uniforms.u_size_t,l.uSizeT),void 0!==l.uSize&&a.uniform1f(t.uniforms.u_size,l.uSize),a.uniform1f(t.uniforms.u_aspect_ratio,u.width/u.height),a.uniform1i(t.uniforms.u_rotate_symbol,i?1:0)}function o(t,e,n,r,i,o,a,u,l){var c=n.gl,h=n.transform;if(u){var p=(a?"text":"icon")+"-halo-width",f=!r.isPaintValueFeatureConstant(p)||r.paint[p],d=l?Math.cos(h._pitch)*h.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,d),f&&(c.uniform1f(t.uniforms.u_is_halo,1),s(o,r,c,t)),c.uniform1f(t.uniforms.u_is_halo,0)}s(o,r,c,t)}function s(t,e,n,r){r.draw(n,n.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer)}var a=t("./draw_collision_debug"),u=t("../source/pixels_to_tile_units"),l=t("../symbol/projection"),c=t("../symbol/symbol_size"),h=t("@mapbox/gl-matrix").mat4.identity(new Float32Array(16));e.exports=function(t,e,n,i){if("translucent"===t.renderPass){var o=t.gl;n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),r(t,e,n,i,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-pitch-alignment"],n.layout["icon-keep-upright"]),r(t,e,n,i,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"],n.layout["text-keep-upright"]),e.map.showCollisionBoxes&&a(t,e,n,i)}}},{"../source/pixels_to_tile_units":93,"../symbol/projection":175,"../symbol/symbol_size":178,"./draw_collision_debug":66,"@mapbox/gl-matrix":1}],73:[function(t,e,n){"use strict";var r=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};r.prototype.record=function(t,e,n){var r,i=this;if(this.firstFrame&&(t=0,this.firstFrame=!1),(e=Math.floor(10*e))<this.previousZoom)for(r=e+1;r<=this.previousZoom;r++)i.changeTimes[r]=t,i.changeOpacities[r]=i.opacities[r];else for(r=e;r>this.previousZoom;r--)i.changeTimes[r]=t,i.changeOpacities[r]=i.opacities[r];for(r=0;r<256;r++){var o=255*(n?(t-i.changeTimes[r])/n:1);i.opacities[r]=r<=e?i.changeOpacities[r]+o:i.changeOpacities[r]-o}this.changed=!0,this.previousZoom=e},r.prototype.isVisible=function(t){return 0!==this.opacities[Math.floor(10*t)]},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))},e.exports=r},{}],74:[function(t,e,n){"use strict";var r=t("@mapbox/shelf-pack"),i=t("../util/image").AlphaImage;e.exports={makeGlyphAtlas:function(t){var e=i.create({width:0,height:0}),n={},o=new r(0,0,{autoResize:!0});for(var s in t){var a=t[s],u=n[s]={};for(var l in a){var c=a[+l];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var h=o.packOne(c.bitmap.width+2,c.bitmap.height+2);i.resize(e,{width:o.w,height:o.h}),i.copy(c.bitmap,e,{x:0,y:0},{x:h.x+1,y:h.y+1},c.bitmap),u[l]={rect:h,metrics:c.metrics}}}}return o.shrink(),i.resize(e,{width:o.w,height:o.h}),{image:e,positions:n}}}},{"../util/image":213,"@mapbox/shelf-pack":3}],75:[function(t,e,n){"use strict";var r=t("../style/load_glyph_range"),i=t("@mapbox/tiny-sdf"),o=t("../util/is_char_in_unicode_block"),s=t("../util/util").asyncAll,a=t("../util/image").AlphaImage,u=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};u.prototype.setURL=function(t){this.url=t},u.prototype.getGlyphs=function(t,e){var n=this,i=[];for(var o in t)for(var a=0,u=t[o];a<u.length;a+=1)i.push({stack:o,id:u[a]});s(i,function(t,e){var i=t.stack,o=t.id,s=n.entries[i];s||(s=n.entries[i]={glyphs:{},requests:{}});var a=s.glyphs[o];if(void 0===a)if(a=n._tinySDF(s,i,o))e(null,{stack:i,id:o,glyph:a});else{var u=Math.floor(o/256);if(256*u>65535)e(new Error("glyphs > 65535 not supported"));else{var l=s.requests[u];l||(l=s.requests[u]=[],r(i,u,n.url,n.requestTransform,function(t,e){if(e)for(var n in e)s.glyphs[+n]=e[+n];for(var r=0,i=l;r<i.length;r+=1)(0,i[r])(t,e);delete s.requests[u]})),l.push(function(t,n){t?e(t):n&&e(null,{stack:i,id:o,glyph:n[o]||null})})}}else e(null,{stack:i,id:o,glyph:a})},function(t,n){if(t)e(t);else if(n){for(var r={},i=0,o=n;i<o.length;i+=1){var s=o[i],a=s.stack,u=s.id,l=s.glyph;(r[a]||(r[a]={}))[u]=l}e(null,r)}})},u.prototype._tinySDF=function(t,e,n){var r=this.localIdeographFontFamily;if(r&&(o["CJK Unified Ideographs"](n)||o["Hangul Syllables"](n))){var s=t.tinySDF;if(!s){var u="400";/bold/i.test(e)?u="900":/medium/i.test(e)?u="500":/light/i.test(e)&&(u="200"),s=t.tinySDF=new i(24,3,8,.25,r,u)}return{id:n,bitmap:a.create({width:30,height:30},s.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},e.exports=u},{"../style/load_glyph_range":152,"../util/image":213,"../util/is_char_in_unicode_block":215,"../util/util":223,"@mapbox/tiny-sdf":4}],76:[function(t,e,n){"use strict";function r(t,e){var n=e.pixelRatio,r={x:t.x+s,y:t.y+s,w:t.w-2*s,h:t.h-2*s};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}var i=t("@mapbox/shelf-pack"),o=t("../util/image").RGBAImage,s=1;e.exports={imagePosition:r,makeImageAtlas:function(t){var e=o.create({width:0,height:0}),n={},a=new i(0,0,{autoResize:!0});for(var u in t){var l=t[u],c=a.packOne(l.data.width+2*s,l.data.height+2*s);o.resize(e,{width:a.w,height:a.h}),o.copy(l.data,e,{x:0,y:0},{x:c.x+s,y:c.y+s},l.data),n[u]=r(c,l)}return a.shrink(),o.resize(e,{width:a.w,height:a.h}),{image:e,positions:n}}}},{"../util/image":213,"@mapbox/shelf-pack":3}],77:[function(t,e,n){"use strict";var r=t("@mapbox/shelf-pack"),i=t("../util/image").RGBAImage,o=t("./image_atlas").imagePosition,s=t("./texture"),a=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=i.create({width:64,height:64}),this.dirty=!0};a.prototype.isLoaded=function(){return this.loaded},a.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},a.prototype.getImage=function(t){return this.images[t]},a.prototype.addImage=function(t,e){this.images[t]=e},a.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},a.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},a.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],s=this.images[o];s&&(n[o]=s)}e(null,n)},a.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},a.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var n=this.getImage(t);if(!n)return null;var r=this.shelfPack.packOne(n.data.width+2,n.data.height+2);if(!r)return null;i.resize(this.atlasImage,this.getPixelSize());var s=n.data,a=this.atlasImage,u=r.x+1,l=r.y+1,c=s.width,h=s.height;i.copy(s,a,{x:0,y:0},{x:u,y:l},{width:c,height:h}),i.copy(s,a,{x:0,y:h-1},{x:u,y:l-1},{width:c,height:1}),i.copy(s,a,{x:0,y:0},{x:u,y:l+h},{width:c,height:1}),i.copy(s,a,{x:c-1,y:0},{x:u-1,y:l},{width:1,height:h}),i.copy(s,a,{x:0,y:0},{x:u+c,y:l},{width:1,height:h}),this.dirty=!0;var p=o(r,n);return this.patterns[t]={bin:r,position:p},p},a.prototype.bind=function(t){this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s(t,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},e.exports=a},{"../util/image":213,"./image_atlas":76,"./texture":83,"@mapbox/shelf-pack":3}],78:[function(t,e,n){"use strict";var r=t("../util/util"),i=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},i.prototype.addDash=function(t,e){var n=this,i=e?7:0,o=2*i+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var s=0,a=0;a<t.length;a++)s+=t[a];for(var u=this.width/s,l=u/2,c=t.length%2==1,h=-i;h<=i;h++)for(var p=n.width*(n.nextRow+i+h),f=c?-t[t.length-1]:0,d=t[0],g=1,y=0;y<this.width;y++){for(;d<y/u;)f=d,d+=t[g],c&&g===t.length-1&&(d+=t[0]),g++;var m=Math.abs(y-f*u),_=Math.abs(y-d*u),v=Math.min(m,_),x=g%2==1,b=void 0;if(e){var w=i?h/i*(l+1):0;if(x){var E=l-Math.abs(w);b=Math.sqrt(v*v+E*E)}else b=l-Math.sqrt(v*v+w*w)}else b=(x?1:-1)*v;n.data[3+4*(p+y)]=Math.max(0,Math.min(255,b+128))}var C={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:s};return this.nextRow+=o,this.dirty=!0,C},i.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},e.exports=i},{"../util/util":223}],79:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("@mapbox/gl-matrix").mat4,o=t("./frame_history"),s=t("../source/source_cache"),a=t("../data/extent"),u=t("../source/pixels_to_tile_units"),l=t("../util/util"),c=t("../gl/vertex_buffer"),h=t("./vertex_array_object"),p=t("../data/raster_bounds_array"),f=t("../data/pos_array"),d=t("../data/program_configuration").ProgramConfiguration,g=t("../shaders"),y=t("./program"),m=t("./render_texture"),_={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},v=function(t,e){this.gl=t,this.transform=e,this._tileTextures={},this.prerenderedFrames={},this.viewportFrames=[],this.frameHistory=new o,this.setup(),this.numSublayers=s.maxUnderzooming+s.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=d.createBasicFill(),this.emptyProgramConfiguration=new d};v.prototype.resize=function(t,e){var n=this,i=this.gl;this.width=t*r.devicePixelRatio,this.height=e*r.devicePixelRatio,i.viewport(0,0,this.width,this.height);for(var o=0,s=n.viewportFrames;o<s.length;o+=1){var a=s[o];n.gl.deleteTexture(a.texture),n.gl.deleteFramebuffer(a.fbo)}this.viewportFrames=[],this.depthRbo&&(this.gl.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},v.prototype.setup=function(){var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=new f;e.emplaceBack(0,0),e.emplaceBack(a,0),e.emplaceBack(0,a),e.emplaceBack(a,a),this.tileExtentBuffer=new c(t,e),this.tileExtentVAO=new h,this.tileExtentPatternVAO=new h;var n=new f;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=new c(t,n),this.debugVAO=new h;var r=new p;r.emplaceBack(0,0,0,0),r.emplaceBack(a,0,a,0),r.emplaceBack(0,a,0,a),r.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=new c(t,r),this.rasterBoundsVAO=new h,this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))},v.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},v.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},v.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},v.prototype._renderTileClippingMasks=function(t){var e=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(255),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var r=1;this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var s=o[i],a=e._tileClippingMaskIDs[s.id]=r++;n.stencilFunc(n.ALWAYS,a,255);var u=e.useProgram("fill",e.basicFillProgramConfiguration);n.uniformMatrix4fv(u.uniforms.u_matrix,!1,s.posMatrix),e.tileExtentVAO.bind(n,u,e.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},v.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],255)},v.prototype.render=function(t,e){var n=this;for(var r in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.frameHistory.record(Date.now(),this.transform.zoom,t.getTransition().duration),n.style.sourceCaches){var i=n.style.sourceCaches[r];i.used&&i.prepare(n.gl)}var o=this.style._order;this.renderPass="3d";for(var s,a=!0,u=[],l=0;l<o.length;l++){var c=n.style._layers[o[l]];if(c.has3DPass()&&!c.isHidden(n.transform.zoom)&&(c.source!==(s&&s.id)&&(u=[],(s=n.style.sourceCaches[c.source])&&(n.clearStencil(),u=s.getVisibleCoordinates()),u.reverse()),u.length)){n._setup3DRenderbuffer();var h=n.viewportFrames.pop()||new m(n);h.bindWithDepth(n.depthRbo),a&&(n.clearDepth(),a=!1),n.renderLayer(n,s,c,u),h.unbind(),n.prerenderedFrames[c.id]=h}}this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var p,f=[];for(this.currentLayer=o.length-1,this._showOverdrawInspector||this.gl.disable(this.gl.BLEND);this.currentLayer>=0;this.currentLayer--){var d=n.style._layers[o[n.currentLayer]];d.source!==(p&&p.id)&&(f=[],(p=n.style.sourceCaches[d.source])&&(n.clearStencil(),f=p.getVisibleCoordinates(),p.getSource().isTileClipped&&n._renderTileClippingMasks(f))),n.renderLayer(n,p,d,f)}this.renderPass="translucent";var g,y=[];for(this.gl.enable(this.gl.BLEND),this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){var v=n.style._layers[o[n.currentLayer]];v.source!==(g&&g.id)&&(y=[],(g=n.style.sourceCaches[v.source])&&(n.clearStencil(),y=g.getVisibleCoordinates(),g.getSource().isTileClipped&&n._renderTileClippingMasks(y)),y.reverse()),n.renderLayer(n,g,v,y)}if(this.options.showTileBoundaries){var x=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];x&&_.debug(this,x,x.getVisibleCoordinates())}},v.prototype._setup3DRenderbuffer=function(){if(!this.depthRbo){var t=this.gl;this.depthRbo=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.depthRbo),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.width,this.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}this.depthRboAttached=!0},v.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},v.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,_[n.type](t,e,n,r))},v.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;this.gl.depthRange(e-1+this.depthRange,e)},v.prototype.translatePosMatrix=function(t,e,n,r,o){if(!n[0]&&!n[1])return t;var s=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(s){var a=Math.sin(s),l=Math.cos(s);n=[n[0]*l-n[1]*a,n[0]*a+n[1]*l]}var c=[o?n[0]:u(e,n[0],this.transform.zoom),o?n[1]:u(e,n[1],this.transform.zoom),0],h=new Float32Array(16);return i.translate(h,t,c),h},v.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size];e?e.push(t):this._tileTextures[t.size]=[t]},v.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},v.prototype.lineWidth=function(t){this.gl.lineWidth(l.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},v.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;t?(e.blendFunc(e.CONSTANT_COLOR,e.ONE),e.blendColor(1/8,1/8,1/8,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)):e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}},v.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new y(this.gl,g[t],e,this._showOverdrawInspector)),this.cache[n]},v.prototype.useProgram=function(t,e){var n=this.gl,r=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.currentProgram!==r&&(n.useProgram(r.program),this.currentProgram=r),r},e.exports=v},{"../data/extent":48,"../data/pos_array":52,"../data/program_configuration":53,"../data/raster_bounds_array":54,"../gl/vertex_buffer":62,"../shaders":86,"../source/pixels_to_tile_units":93,"../source/source_cache":98,"../util/browser":202,"../util/util":223,"./draw_background":64,"./draw_circle":65,"./draw_debug":67,"./draw_fill":68,"./draw_fill_extrusion":69,"./draw_line":70,"./draw_raster":71,"./draw_symbol":72,"./frame_history":73,"./program":81,"./render_texture":82,"./vertex_array_object":84,"@mapbox/gl-matrix":1}],80:[function(t,e,n){"use strict";var r=t("../source/pixels_to_tile_units");n.isPatternMissing=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!n||!r},n.prepare=function(t,e,n){var r=e.gl,i=e.imageManager.getPattern(t.from),o=e.imageManager.getPattern(t.to);r.uniform1i(n.uniforms.u_image,0),r.uniform2fv(n.uniforms.u_pattern_tl_a,i.tl),r.uniform2fv(n.uniforms.u_pattern_br_a,i.br),r.uniform2fv(n.uniforms.u_pattern_tl_b,o.tl),r.uniform2fv(n.uniforms.u_pattern_br_b,o.br);var s=e.imageManager.getPixelSize();r.uniform2fv(n.uniforms.u_texsize,[s.width,s.height]),r.uniform1f(n.uniforms.u_mix,t.t),r.uniform2fv(n.uniforms.u_pattern_size_a,i.displaySize),r.uniform2fv(n.uniforms.u_pattern_size_b,o.displaySize),r.uniform1f(n.uniforms.u_scale_a,t.fromScale),r.uniform1f(n.uniforms.u_scale_b,t.toScale),r.activeTexture(r.TEXTURE0),e.imageManager.bind(r)},n.setTile=function(t,e,n){var i=e.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(t,1,e.transform.tileZoom));var o=Math.pow(2,t.coord.z),s=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,a=s*(t.coord.x+t.coord.w*o),u=s*t.coord.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,a>>16,u>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&a,65535&u)}},{"../source/pixels_to_tile_units":93}],81:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("../shaders"),o=(t("../data/program_configuration"),t("./vertex_array_object")),s=function(t,e,n,o){var s=this;this.gl=t,this.program=t.createProgram();var a=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));o&&a.push("#define OVERDRAW_INSPECTOR;");var u=a.concat(i.prelude.fragmentSource,e.fragmentSource).join("\n"),l=a.concat(i.prelude.vertexSource,e.vertexSource).join("\n"),c=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(c,u),t.compileShader(c),t.attachShader(this.program,c);var h=t.createShader(t.VERTEX_SHADER);t.shaderSource(h,l),t.compileShader(h),t.attachShader(this.program,h);for(var p=n.interface?n.interface.layoutAttributes:[],f=0;f<p.length;f++)t.bindAttribLocation(s.program,f,p[f].name);t.linkProgram(this.program),this.numAttributes=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var d=0;d<this.numAttributes;d++){var g=t.getActiveAttrib(s.program,d);g&&(s.attributes[g.name]=t.getAttribLocation(s.program,g.name))}for(var y=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),m=0;m<y;m++){var _=t.getActiveUniform(s.program,m);_&&(s.uniforms[_.name]=t.getUniformLocation(s.program,_.name))}};s.prototype.draw=function(t,e,n,r,i,s,a,u){for(var l,c=(l={},l[t.LINES]=2,l[t.TRIANGLES]=3,l)[e],h=0,p=s.get();h<p.length;h+=1){var f=p[h],d=f.vaos||(f.vaos={});(d[n]||(d[n]=new o)).bind(t,this,r,i,a&&a.paintVertexBuffer,f.vertexOffset,u),t.drawElements(e,f.primitiveLength*c,t.UNSIGNED_SHORT,f.primitiveOffset*c*2)}},e.exports=s},{"../data/program_configuration":53,"../shaders":86,"../util/browser":202,"./vertex_array_object":84}],82:[function(t,e,n){"use strict";var r=t("../gl/vertex_buffer"),i=t("./vertex_array_object"),o=t("../data/pos_array"),s=function(t){var e=this.gl=t.gl,n=this.texture=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null);var s=this.fbo=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=new o;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.buffer=new r(e,a),this.vao=new i};s.prototype.bindWithDepth=function(t){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.fbo),this.attachedRbo!==t&&(e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.attachedRbo=t)},s.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},e.exports=s},{"../data/pos_array":52,"../gl/vertex_buffer":62,"./vertex_array_object":84}],83:[function(t,e,n){"use strict";var r=function(t,e,n){this.gl=t,this.size=[e.width,e.height],this.format=n,this.texture=t.createTexture(),this.update(e)};r.prototype.update=function(t){var e=t.width,n=t.height,r=t.data;this.size=[e,n];var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.pixelStorei(i.UNPACK_ALIGNMENT,1),this.format===i.RGBA&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,this.format,e,n,0,this.format,i.UNSIGNED_BYTE,r)},r.prototype.bind=function(t,e){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture),this.texture=null},e.exports=r},{}],84:[function(t,e,n){"use strict";var r=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(t,e,n,r,i,o,s){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object")),t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundVertexBuffer===n&&this.boundVertexBuffer2===i&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===s?(t.extVertexArrayObject.bindVertexArrayOES(this.vao),s&&s.bind()):(this.freshBind(t,e,n,r,i,o,s),this.gl=t)},r.prototype.freshBind=function(t,e,n,r,i,o,s){var a,u=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),a=0,this.boundProgram=e,this.boundVertexBuffer=n,this.boundVertexBuffer2=i,this.boundIndexBuffer=r,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=s;else{a=t.currentNumAttributes||0;for(var l=u;l<a;l++)t.disableVertexAttribArray(l)}n.enableAttributes(t,e),i&&i.enableAttributes(t,e),s&&s.enableAttributes(t,e),n.bind(),n.setVertexAttribPointers(t,e,o),i&&(i.bind(),i.setVertexAttribPointers(t,e,o)),s&&(s.bind(),s.setVertexAttribPointers(t,e,o)),r&&r.bind(),t.currentNumAttributes=u},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=r},{}],85:[function(t,e,n){"use strict";var r=t("../util/util");n.packUint8ToFloat=function(t,e){return 256*(t=r.clamp(Math.floor(t),0,255))+r.clamp(Math.floor(e),0,255)}},{"../util/util":223}],86:[function(t,e,n){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\n// u_maxzoom is derived from the maximum scale considered by the CollisionTile\n// Labels with placement zoom greater than this value will not be placed,\n// regardless of perspective effects.\nuniform float u_maxzoom;\nuniform sampler2D u_fadetexture;\n\n// v_max_zoom is a collision-box-specific value that controls when line-following\n// collision boxes are used.\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\nvarying float v_perspective_zoom_adjust;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Green = no collisions, label is showing\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    // Red = collision, label hidden\n    if (texture2D(u_fadetexture, v_fade_tex).a < 1.0) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    // Faded black = this collision box is not used at this zoom (for curved labels)\n    if (u_zoom >= v_max_zoom + v_perspective_zoom_adjust) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    // Faded blue = the placement scale for this label is beyond the CollisionTile\n    // max scale, so it's impossible for this label to show without collision detection\n    // being run again (the label's glyphs haven't even been added to the symbol bucket)\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\nuniform float u_pitch;\nuniform float u_collision_y_stretch;\nuniform float u_camera_to_center_distance;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\nvarying float v_perspective_zoom_adjust;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 1.0 + 0.5 * ((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\n\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\n\n    gl_Position = u_matrix * vec4(a_pos + a_extrude * collision_perspective_ratio * collision_adjustment / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n\n    v_perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\n    v_fade_tex = vec2((v_placement_zoom + v_perspective_zoom_adjust) / 255.0, 0.0);\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    gl_Position = u_matrix * vec4(a_pos, step(8192.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_collision_y_stretch;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp vec2 angle_labelminzoom = unpack_float(a_projected_pos[2]);\n    highp float segment_angle = -angle_labelminzoom[0] / 255.0 * 2.0 * PI;\n    mediump float a_labelminzoom = angle_labelminzoom[1];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    // See comments in symbol_sdf.vertex\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\n\n    highp float collision_perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\n    highp float perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\n    v_fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec4 v_data0;\nvarying vec2 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    vec2 fade_tex = v_data0.zw;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, fade_tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_collision_y_stretch;\n\nuniform vec2 u_texsize;\n\nvarying vec4 v_data0;\nvarying vec2 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp vec2 angle_labelminzoom = unpack_float(a_projected_pos[2]);\n    highp float segment_angle = -angle_labelminzoom[0] / 255.0 * 2.0 * PI;\n    mediump float a_labelminzoom = angle_labelminzoom[1];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    // incidence_stretch is the ratio of how much y space a label takes up on a tile while drawn perpendicular to the viewport vs\n    //  how much space it would take up if it were drawn flat on the tile\n    // Using law of sines, camera_to_anchor/sin(ground_angle) = camera_to_center/sin(incidence_angle)\n    // sin(incidence_angle) = 1/incidence_stretch\n    // Incidence angle 90 -> head on, sin(incidence_angle) = 1, no incidence stretch\n    // Incidence angle 1 -> very oblique, sin(incidence_angle) =~ 0, lots of incidence stretch\n    // ground_angle = u_pitch + PI/2 -> sin(ground_angle) = cos(u_pitch)\n    // This 2D calculation is only exactly correct when gl_Position.x is in the center of the viewport,\n    //  but it's a close enough approximation for our purposes\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\n    // incidence_stretch only applies to the y-axis, but without re-calculating the collision tile, we can't\n    // adjust the size of only one axis. So, we do a crude approximation at placement time to get the aspect ratio\n    // about right, and then do the rest of the adjustment here: there will be some extra padding on the x-axis,\n    // but hopefully not too much.\n    // Never make the adjustment less than 1.0: instead of allowing collisions on the x-axis, be conservative on\n    // the y-axis.\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\n\n    // Floor to 1/10th zoom to dodge precision issues that can cause partially hidden labels\n    highp float collision_perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\n    highp float perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\n    vec2 fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\n\n    v_data0 = vec4(tex.x, tex.y, fade_tex.x, fade_tex.y);\n    v_data1 = vec2(gamma_scale, size);\n}\n"}},i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=function(t){var e=r[t],n={};e.fragmentSource=e.fragmentSource.replace(i,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(i,function(t,e,r,i,o){var s="float"===i?"vec2":"vec4";return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+s+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+s+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})};for(var s in r)o(s);e.exports=r},{}],87:[function(t,e,n){"use strict";var r=t("./image_source"),i=t("../util/window"),o=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.options=n,this.animate=void 0===n.animate||n.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this.canvas=this.canvas||i.document.getElementById(this.options.canvas);var t,e=this.canvas.getContext(this.options.contextType);return e?(this.context=e,this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero.")):(this.play=function(){void 0===t&&(t=this.map.style.animationLoop.set(1/0),this.map._rerender())},this.pause=function(){void 0!==t&&(t=this.map.style.animationLoop.cancel(t))},void this._finishLoading())):this.fire("error",new Error("Canvas context not found."))},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.readCanvas=function(t){var e=this;if(this.context instanceof CanvasRenderingContext2D)this.canvasData=this.context.getImageData(0,0,this.width,this.height);else if(this.context instanceof WebGLRenderingContext){var n=this.context,r=new Uint8Array(this.width*this.height*4);n.readPixels(0,0,this.width,this.height,n.RGBA,n.UNSIGNED_BYTE,r),this.secondaryContext||(this.secondaryContext=i.document.createElement("canvas").getContext("2d")),this.canvasData&&!t||(this.canvasData=this.secondaryContext.createImageData(this.width,this.height));for(var o=this.height-1,s=0;o>=0;o--,s++)e.canvasData.data.set(r.subarray(o*e.width*4,(o+1)*e.width*4),s*e.width*4)}},e.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){if((this.animate||!this.canvasData||t)&&this.readCanvas(t),!this.canvasData)return void this.fire("error",new Error("Could not read canvas data."));this._prepareImage(this.map.painter.gl,this.canvasData,t)}},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},e}(r);e.exports=o},{"../util/window":204,"./image_source":91}],88:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/util"),o=t("../util/window"),s=t("../data/extent"),a=t("../util/ajax").ResourceType,u=t("../util/browser"),l=function(t){function e(e,n,r,o){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(o),this._data=n.data,this._options=i.extend({},n),void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){e?t.fire("error",{error:e}):t.fire("data",{dataType:"source",sourceDataType:"metadata"})})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return e.fire("error",{error:t});e.fire("data",{dataType:"source",sourceDataType:"content"})}),this},e.prototype._updateWorkerData=function(t){var e=this,n=i.extend({},this.workerOptions),r=this._data;"string"==typeof r?n.request=this.map._transformRequest(function(t){var e=o.document.createElement("a");return e.href=t,e.href}(r),a.Source):n.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){e._loaded=!0,t(n)},this.workerID)},e.prototype.loadTile=function(t,e){var n=this,r=t.workerID&&"expired"!==t.state?"reloadTile":"loadTile",i={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,angle:this.map.transform.angle,pitch:this.map.transform.pitch,cameraToCenterDistance:this.map.transform.cameraToCenterDistance,cameraToTileDistance:this.map.transform.cameraToTileDistance(t),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(r,i,function(r,i){if(t.unloadVectorData(),!t.aborted)return r?e(r):(t.loadVectorData(i,n.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(n)),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},function(){},t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},e.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},e}(r);e.exports=l},{"../data/extent":48,"../util/ajax":201,"../util/browser":202,"../util/evented":210,"../util/util":223,"../util/window":204}],89:[function(t,e,n){"use strict";function r(t,e){var n=t.source,r=t.coord;if(!this._geoJSONIndexes[n])return e(null,null);var i=this._geoJSONIndexes[n].getTile(Math.min(r.z,t.maxZoom),r.x,r.y);if(!i)return e(null,null);var o=new s(i.features),u=a(o);0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),e(null,{vectorTile:o,rawData:u.buffer})}var i=t("../util/ajax"),o=t("geojson-rewind"),s=t("./geojson_wrapper"),a=t("vt-pbf"),u=t("supercluster"),l=t("geojson-vt"),c=function(t){function e(e,n,i){t.call(this,e,n,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadData=function(t,e){var n=this;this.loadGeoJSON(t,function(r,i){if(r||!i)return e(r);if("object"!=typeof i)return e(new Error("Input data is not a valid GeoJSON object."));o(i,!0);try{n._geoJSONIndexes[t.source]=t.cluster?u(t.superclusterOptions).load(i.features):l(i,t.geojsonVtOptions)}catch(r){return e(r)}n.loaded[t.source]={},e(null)})},e.prototype.reloadTile=function(e,n){var r=this.loaded[e.source];return r&&r[e.uid]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},e.prototype.loadGeoJSON=function(t,e){if(t.request)i.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source]},e}(t("./vector_tile_worker_source"));e.exports=c},{"../util/ajax":201,"./geojson_wrapper":90,"./vector_tile_worker_source":103,"geojson-rewind":13,"geojson-vt":17,supercluster:32,"vt-pbf":37}],90:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry"),i=t("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=t("../data/extent"),s=function(t){this._feature=t,this.extent=o,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};s.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,n=this._feature.geometry;e<n.length;e+=1){var i=n[e];t.push([new r(i[0],i[1])])}return t}for(var o=[],s=0,a=this._feature.geometry;s<a.length;s+=1){for(var u=[],l=0,c=a[s];l<c.length;l+=1){var h=c[l];u.push(new r(h[0],h[1]))}o.push(u)}return o},s.prototype.toGeoJSON=function(t,e,n){return i.call(this,t,e,n)};var a=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=t.length,this._features=t};a.prototype.feature=function(t){return new s(this._features[t])},e.exports=a},{"../data/extent":48,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],91:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=t("./tile_coord"),s=t("../geo/lng_lat"),a=t("@mapbox/point-geometry"),u=t("../util/evented"),l=t("../util/ajax"),c=t("../util/browser"),h=t("../data/extent"),p=t("../data/raster_bounds_array"),f=t("../gl/vertex_buffer"),d=t("../render/vertex_array_object"),g=function(t){function e(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n,this.textureLoaded=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.map._transformRequest(this.url,l.ResourceType.Image),function(e,n){e?t.fire("error",{error:e}):n&&(t.image=c.getImageData(n),t._finishLoading())})},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(s.convert(t)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.coord=new o(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var u=n.map(function(t){var e=t.zoomTo(i.zoom);return new a(Math.round((e.column-i.column)*h),Math.round((e.row-i.row)*h))});return this._boundsArray=new p,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,h,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,h),this._boundsArray.emplaceBack(u[2].x,u[2].y,h,h),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},e.prototype.prepare=function(){0!==Object.keys(this.tiles).length&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},e.prototype._prepareImage=function(t,e,n){var r=this;for(var o in this.boundsBuffer||(this.boundsBuffer=new f(t,this._boundsArray)),this.boundsVAO||(this.boundsVAO=new d),this.textureLoaded?n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):(e instanceof i.HTMLVideoElement||e instanceof i.ImageData)&&(t.bindTexture(t.TEXTURE_2D,this.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):(this.textureLoaded=!0,this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),r.tiles){var s=r.tiles[o];"loaded"!==s.state&&(s.state="loaded",s.texture=r.texture)}},e.prototype.loadTile=function(t,e){this.coord&&this.coord.toString()===t.coord.toString()?(this.tiles[String(t.coord.w)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e}(u);e.exports=g},{"../data/extent":48,"../data/raster_bounds_array":54,"../geo/lng_lat":58,"../gl/vertex_buffer":62,"../render/vertex_array_object":84,"../util/ajax":201,"../util/browser":202,"../util/evented":210,"../util/util":223,"../util/window":204,"./tile_coord":101,"@mapbox/point-geometry":2}],92:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/browser"),s=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e,n){var a=function(t,e){if(t)return n(t);if(e){var i=r.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(i.vectorLayers=e.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),n(null,i)}};t.url?i.getJSON(e(s(t.url),i.ResourceType.Source),a):o.frame(function(){return a(null,t)})}},{"../util/ajax":201,"../util/browser":202,"../util/mapbox":217,"../util/util":223}],93:[function(t,e,n){"use strict";var r=t("../data/extent");e.exports=function(t,e,n){return e*(r/(t.tileSize*Math.pow(2,n-t.coord.z)))}},{"../data/extent":48}],94:[function(t,e,n){"use strict";function r(t,e){var n=t.coord,r=e.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}var i=t("./tile_coord");n.rendered=function(t,e,n,i,o,s){var a=t.tilesIn(n);a.sort(r);for(var u=[],l=0,c=a;l<c.length;l+=1){var h=c[l];u.push({wrappedTileID:h.coord.wrapped().id,queryResults:h.tile.queryRenderedFeatures(e,h.queryGeometry,h.scale,i,s)})}return function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.queryResults,a=o.wrappedTileID,u=n[a]=n[a]||{};for(var l in s)for(var c=s[l],h=u[l]=u[l]||{},p=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var g=d[f];h[g.featureIndex]||(h[g.featureIndex]=!0,p.push(g.feature))}}return e}(u)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],o={},s=0;s<n.length;s++){var a=n[s],u=new i(Math.min(a.sourceMaxZoom,a.coord.z),a.coord.x,a.coord.y,0).id;o[u]||(o[u]=!0,a.querySourceFeatures(r,e))}return r}},{"./tile_coord":101}],95:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/evented"),s=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,u=t("./tile_bounds"),l=function(t){function e(e,n,i,o){t.call(this),this.id=e,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),s(this._options,this.map._transformRequest,function(e,n){e?t.fire("error",e):n&&(r.extend(t,n),n.bounds&&(t.tileBounds=new u(n.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return r.extend({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t,this.maxzoom)},e.prototype.loadTile=function(t,e){var n=this,r=a(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete t.request,t.aborted)n.state="unloaded",e(null);else if(r)n.state="errored",e(r);else if(i){n.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=n.map.painter.gl;t.texture=n.map.painter.getTileTexture(i.width),t.texture?(o.bindTexture(o.TEXTURE_2D,t.texture),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,i)):(t.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,t.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.map.painter.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,n.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.map.painter.extTextureFilterAnisotropicMax),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,i),t.texture.size=i.width),o.generateMipmap(o.TEXTURE_2D),t.state="loaded",e(null)}})},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=l},{"../util/ajax":201,"../util/evented":210,"../util/mapbox":217,"../util/util":223,"./load_tilejson":92,"./tile_bounds":100}],96:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/evented"),o=t("../util/window"),s=!1,a=null;e.exports.evented=new i,e.exports.registerForPluginAvailability=function(t){return a?t({pluginBlobURL:a,errorCallback:e.exports.errorCallback}):e.exports.evented.once("pluginAvailable",t),t},e.exports.createBlobURL=function(t){return o.URL.createObjectURL(new o.Blob([t.data],{type:"text/javascript"}))},e.exports.clearRTLTextPlugin=function(){s=!1,a=null},e.exports.setRTLTextPlugin=function(t,n){if(s)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=!0,e.exports.errorCallback=n,r.getArrayBuffer({url:t},function(t,r){t?n(t):r&&(a=e.exports.createBlobURL(r),e.exports.evented.fire("pluginAvailable",{pluginBlobURL:a,errorCallback:n}))})},e.exports.applyArabicShaping=null,e.exports.processBidirectionalText=null},{"../util/ajax":201,"../util/evented":210,"../util/window":204}],97:[function(t,e,n){"use strict";var r=t("../util/util"),i={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){var s=new i[e.type](t,e,n,o);if(s.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+s.id);return r.bindAll(["load","abort","unload","serialize","prepare"],s),s},n.getType=function(t){return i[t]},n.setType=function(t,e){i[t]=e}},{"../source/canvas_source":87,"../source/geojson_source":88,"../source/image_source":91,"../source/raster_tile_source":95,"../source/vector_tile_source":102,"../source/video_source":104,"../util/util":223}],98:[function(t,e,n){"use strict";function r(t,e,n){var r=n.zoomTo(Math.min(t.z,e));return new f((r.column-(t.x+t.w*Math.pow(2,t.z)))*p,(r.row-t.y)*p)}function i(t,e){return t%32-e%32}var o=t("./source").create,s=t("./tile"),a=t("../util/evented"),u=t("./tile_coord"),l=t("../util/lru_cache"),c=t("../geo/coordinate"),h=t("../util/util"),p=t("../data/extent"),f=t("@mapbox/point-geometry"),d=function(t){function e(e,n,r){var i=this;t.call(this),this.id=e,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=o(e,n,r,this),this._tiles={},this._cache=new l(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t)},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t)},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[e].upload(t)},e.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(i)},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype._isIdRenderable=function(t){return this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},e.prototype._tileLoaded=function(t,e,n,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire("error",{tile:t,error:r}):this.update(this.transform));t.timeAdded=(new Date).getTime(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),this._source.fire("data",{dataType:"source",tile:t,coord:t.coord}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},e.prototype.getTile=function(t){return this.getTileByID(t.id)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype._findLoadedChildren=function(t,e,n){var r=this,i=!1;for(var o in r._tiles){var s=r._tiles[o];if(!(n[o]||!s.hasData()||s.coord.z<=t.z||s.coord.z>e)){var a=Math.pow(2,Math.min(s.coord.z,r._source.maxzoom)-Math.min(t.z,r._source.maxzoom));if(Math.floor(s.coord.x/a)===t.x&&Math.floor(s.coord.y/a)===t.y)for(n[o]=!0,i=!0;s&&s.coord.z-1>t.z;){var u=s.coord.parent(r._source.maxzoom);if(!u)break;(s=r._tiles[u.id])&&s.hasData()&&(delete n[o],n[u.id]=!0)}}}return i},e.prototype.findLoadedParent=function(t,e,n){for(var r=this,i=t.z-1;i>=e;i--){var o=t.parent(r._source.maxzoom);if(!o)return;t=o;var s=String(t.id),a=r._tiles[s];if(a&&a.hasData())return n[s]=!0,a;if(r._cache.has(s))return n[s]=!0,r._cache.getWithoutRemoving(s)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/t.tileSize)+1,n=Math.ceil(t.height/t.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},e.prototype.update=function(t){var n=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(t),this._coveredTiles={},this.used?this._source.coord?r=t.getVisibleWrappedCoordinates(this._source.coord):(r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return n._source.hasTile(t)}))):r=[];var i,o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),s=Math.max(o-e.maxOverzooming,this._source.minzoom),a=Math.max(o+e.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,o),c={};if(function(t){return"raster"===t||"image"===t||"video"===t}(this._source.type))for(var p=Object.keys(l),f=0;f<p.length;f++){var d=p[f],g=u.fromID(+d),y=n._tiles[d];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=Date.now())){n._findLoadedChildren(g,a,l)&&(l[d]=!0);var m=n.findLoadedParent(g,s,c);m&&n._addTile(m.coord)}}for(i in c)l[i]||(n._coveredTiles[i]=!0);for(i in c)l[i]=!0;for(var _=h.keysDifference(this._tiles,l),v=0;v<_.length;v++)n._removeTile(_[v])}},e.prototype._updateRetainedTiles=function(t,n){var r,i,o,s,a=this,u={},l={},c=Math.max(n-e.maxOverzooming,this._source.minzoom);for(r=0;r<t.length;r++){var h=!1;if((o=a._addTile(i=t[r])).hasData())u[i.id]=!0;else{if(h=o.wasRequested(),u[i.id]=!0,s=!0,n+1>a._source.maxzoom){var p=i.children(a._source.maxzoom)[0],f=a.getTile(p);f&&f.hasData()?u[p.id]=!0:s=!1}else for(var d=i.children(a._source.maxzoom),g=0;g<d.length;g++){var y=d[g],m=y?a.getTile(y):null;m&&m.hasData()?u[y.id]=!0:s=!1}if(!s)for(var _=n-1;_>=c;--_){var v=i.scaledTo(_,a._source.maxzoom);if(l[v.id])break;if(l[v.id]=!0,!(o=a.getTile(v))&&h&&(o=a._addTile(v)),o&&(u[v.id]=!0,h=o.wasRequested(),o.hasData()))break}}}return u},e.prototype._addTile=function(t){var e=this._tiles[t.id];if(e)return e;(e=this._cache.get(t.id))&&(e.redoPlacement(this._source),this._cacheTimers[t.id]&&(clearTimeout(this._cacheTimers[t.id]),delete this._cacheTimers[t.id],this._setTileReloadTimer(t.id,e)));var n=Boolean(e);if(!n){var r=t.z,i=r>this._source.maxzoom?Math.pow(2,r-this._source.maxzoom):1;e=new s(t,this._source.tileSize*i,this._source.maxzoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.id,e.state))}return e?(e.uses++,this._tiles[t.id]=e,n||this._source.fire("dataloading",{tile:e,coord:e.coord,dataType:"source"}),e):null},e.prototype._setTileReloadTimer=function(t,e){var n=this,r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this,r=e.getExpiryTimeout();r&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),delete n._cacheTimers[t]},r))},e.prototype._removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(e.uses>0)))if(e.stopPlacementThrottler(),e.hasData()){var n=e.coord.wrapped().id;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this._abortTile(e),this._unloadTile(e)},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=[],n=this.getIds(),i=1/0,o=1/0,s=-1/0,a=-1/0,l=t[0].zoom,h=0;h<t.length;h++){var f=t[h];i=Math.min(i,f.column),o=Math.min(o,f.row),s=Math.max(s,f.column),a=Math.max(a,f.row)}for(var d=0;d<n.length;d++){var g=this._tiles[n[d]],y=u.fromID(n[d]),m=[r(y,g.sourceMaxZoom,new c(i,o,l)),r(y,g.sourceMaxZoom,new c(s,a,l))];if(m[0].x<p&&m[0].y<p&&m[1].x>=0&&m[1].y>=0){for(var _=[],v=0;v<t.length;v++)_.push(r(y,g.sourceMaxZoom,t[v]));e.push({tile:g,coord:y,queryGeometry:[_],scale:Math.pow(2,this.transform.zoom-g.coord.z)})}}return e},e.prototype.redoPlacement=function(){for(var t=this.getIds(),e=0;e<t.length;e++)this.getTileByID(t[e]).redoPlacement(this._source)},e.prototype.getVisibleCoordinates=function(){for(var t=this.getRenderableIds().map(u.fromID),e=0,n=t;e<n.length;e+=1){var r=n[e];r.posMatrix=this.transform.calculatePosMatrix(r,this._source.maxzoom)}return t},e}(a);d.maxOverzooming=10,d.maxUnderzooming=3,e.exports=d},{"../data/extent":48,"../geo/coordinate":57,"../util/evented":210,"../util/lru_cache":216,"../util/util":223,"./source":97,"./tile":99,"./tile_coord":101,"@mapbox/point-geometry":2}],99:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../data/bucket").deserialize,o=t("../data/bucket/symbol_bucket"),s=t("../data/feature_index"),a=t("@mapbox/vector-tile"),u=t("pbf"),l=t("../util/vectortile_to_geojson"),c=t("../style-spec/feature_filter"),h=t("../symbol/collision_tile"),p=t("../symbol/collision_box"),f=t("../util/throttler"),d=t("../render/texture"),g=function(t,e,n){this.coord=t,this.uid=r.uniqueId(),this.uses=0,this.tileSize=e,this.sourceMaxZoom=n,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading",this.placementThrottler=new f(300,this._immediateRedoPlacement.bind(this))};g.prototype.registerFadeDuration=function(t,e){var n=e+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,t.set(this.fadeEndTime-Date.now()))},g.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},g.prototype.loadVectorData=function(t,e){this.hasData()&&this.unloadVectorData(),this.state="loaded",t&&(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=new p(t.collisionBoxArray),this.collisionTile=h.deserialize(t.collisionTile,this.collisionBoxArray),this.featureIndex=s.deserialize(t.featureIndex,this.rawTileData,this.collisionTile),this.buckets=i(t.buckets,e.style),t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage))},g.prototype.reloadSymbolData=function(t,e){var n=this;if("unloaded"!==this.state){for(var s in this.collisionTile=h.deserialize(t.collisionTile,this.collisionBoxArray),this.featureIndex&&this.featureIndex.setCollisionTile(this.collisionTile),n.buckets){var a=n.buckets[s];a instanceof o&&(a.destroy(),delete n.buckets[s])}r.extend(this.buckets,i(t.buckets,e)),t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}},g.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.collisionTile=null,this.featureIndex=null,this.state="unloaded"},g.prototype.redoPlacement=function(t){if("vector"===t.type||"geojson"===t.type){if("loaded"!==this.state)return void(this.redoWhenDone=!0);if(this.collisionTile){var e=t.map.transform.cameraToTileDistance(this);if(this.angle===t.map.transform.angle&&this.pitch===t.map.transform.pitch&&this.showCollisionBoxes===t.map.showCollisionBoxes){if(this.cameraToTileDistance===e&&this.cameraToCenterDistance===t.map.transform.cameraToCenterDistance)return;if(this.pitch<25)return this.cameraToTileDistance=e,void(this.cameraToCenterDistance=t.map.transform.cameraToCenterDistance)}this.angle=t.map.transform.angle,this.pitch=t.map.transform.pitch,this.cameraToCenterDistance=t.map.transform.cameraToCenterDistance,this.cameraToTileDistance=e,this.showCollisionBoxes=t.map.showCollisionBoxes,this.placementSource=t,this.state="reloading",this.placementThrottler.invoke()}}},g.prototype._immediateRedoPlacement=function(){var t=this;this.placementSource.dispatcher.send("redoPlacement",{type:this.placementSource.type,uid:this.uid,source:this.placementSource.id,angle:this.angle,pitch:this.pitch,cameraToCenterDistance:this.cameraToCenterDistance,cameraToTileDistance:this.cameraToTileDistance,showCollisionBoxes:this.showCollisionBoxes},function(e,n){"reloading"===t.state&&(t.state="loaded",t.reloadSymbolData(n,t.placementSource.map.style),t.placementSource.fire("data",{tile:t,coord:t.coord,dataType:"source"}),t.placementSource.map&&(t.placementSource.map.painter.tileExtentVAO.vao=null),t.redoWhenDone&&(t.state="reloading",t.redoWhenDone=!1,t._immediateRedoPlacement()))},this.workerID)},g.prototype.getBucket=function(t){return this.buckets[t.id]},g.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploaded||(n.upload(t),n.uploaded=!0)}this.iconAtlasImage&&(this.iconAtlasTexture=new d(t,this.iconAtlasImage,t.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new d(t,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)},g.prototype.queryRenderedFeatures=function(t,e,n,r,i){if(!this.featureIndex)return{};var o=0;for(var s in t){var a=this.getBucket(t[s]);a&&(o=Math.max(o,t[s].queryRadius(a)))}return this.featureIndex.query({queryGeometry:e,bearing:i,params:r,scale:n,additionalRadius:o,tileSize:this.tileSize},t)},g.prototype.querySourceFeatures=function(t,e){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new a.VectorTile(new u(this.rawTileData)).layers);var r=this.vtLayers._geojsonTileLayer||this.vtLayers[e?e.sourceLayer:""];if(r)for(var i=c(e&&e.filter),o={z:this.coord.z,x:this.coord.x,y:this.coord.y},s=0;s<r.length;s++){var h=r.feature(s);if(i(h)){var p=new l(h,n.coord.z,n.coord.x,n.coord.y);p.tile=o,t.push(p)}}}},g.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},g.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=r.parseCacheControl(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var s=this.expirationTime-e;s?this.expirationTime=i+Math.max(s,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},g.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},g.prototype.stopPlacementThrottler=function(){this.placementThrottler.stop(),"reloading"===this.state&&(this.state="loaded")},e.exports=g},{"../data/bucket":42,"../data/bucket/symbol_bucket":47,"../data/feature_index":49,"../render/texture":83,"../style-spec/feature_filter":110,"../symbol/collision_box":170,"../symbol/collision_tile":172,"../util/throttler":221,"../util/util":223,"../util/vectortile_to_geojson":224,"@mapbox/vector-tile":6,pbf:29}],100:[function(t,e,n){"use strict";var r=t("../geo/lng_lat_bounds"),i=t("../util/util").clamp,o=function(t,e,n){this.bounds=r.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t,e){var n=e?Math.min(t.z,e):t.z,r=Math.floor(this.lngX(this.bounds.getWest(),n)),i=Math.floor(this.latY(this.bounds.getNorth(),n)),o=Math.ceil(this.lngX(this.bounds.getEast(),n)),s=Math.ceil(this.latY(this.bounds.getSouth(),n));return t.x>=r&&t.x<o&&t.y>=i&&t.y<s},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var n=i(Math.sin(Math.PI/180*t),-.9999,.9999),r=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+n)/(1-n))*-r},e.exports=o},{"../geo/lng_lat_bounds":59,"../util/util":223}],101:[function(t,e,n){"use strict";function r(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function i(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),s=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var a=t;t=e,e=a}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=o;p<s;p++){var f=u*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),p)}}function o(t,e,n,o,s,a){var u,l=r(t,e),c=r(e,n),h=r(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>h.dy&&(u=l,l=h,h=u),c.dy>h.dy&&(u=c,c=h,h=u),l.dy&&i(h,l,o,s,a),c.dy&&i(h,c,o,s,a)}var s=t("@mapbox/whoots-js"),a=t("../geo/coordinate"),u=function(t,e,n,r){(void 0===r||isNaN(r))&&(r=0),this.z=+t,this.x=+e,this.y=+n,this.w=+r,(r*=2)<0&&(r=-1*r-1);var i=1<<this.z;this.id=32*(i*i*r+i*this.y+this.x)+this.z,this.posMatrix=null};u.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},u.prototype.toCoordinate=function(t){var e=Math.min(this.z,void 0===t?this.z:t),n=Math.pow(2,e);return new a(this.x+n*this.w,this.y,e)},u.prototype.url=function(t,e,n){var r=s.getTileBBox(this.x,this.y,this.z),i=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(Math.min(this.z,e||this.z))).replace("{x}",String(this.x)).replace("{y}",String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",r)},u.prototype.parent=function(t){return 0===this.z?null:this.z>t?new u(this.z-1,this.x,this.y,this.w):new u(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},u.prototype.wrapped=function(){return new u(this.z,this.x,this.y,0)},u.prototype.children=function(t){if(this.z>=t)return[new u(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,r=2*this.y;return[new u(e,n,r,this.w),new u(e,n+1,r,this.w),new u(e,n,r+1,this.w),new u(e,n+1,r+1,this.w)]},u.prototype.scaledTo=function(t,e){return this.z>e?new u(t,this.x,this.y,this.w):t<=this.z?new u(t,this.x>>this.z-t,this.y>>this.z-t,this.w):new u(t,this.x<<t-this.z,this.y<<t-this.z,this.w)},u.cover=function(t,e,n,r){function i(t,e,i){var o,l,c;if(i>=0&&i<=s)for(o=t;o<e;o++)0!==(l=Math.floor(o/s))&&!0!==r||(c=new u(n,(o%s+s)%s,i,l),a[c.id]=c)}void 0===r&&(r=!0);var s=1<<t,a={};return o(e[0],e[1],e[2],0,s,i),o(e[2],e[3],e[0],0,s,i),Object.keys(a).map(function(t){return a[t]})},u.fromID=function(t){var e=t%32,n=1<<e,r=(t-e)/32,i=r%n,o=(r-i)/n%n,s=Math.floor(r/(n*n));return s%2!=0&&(s=-1*s-1),new u(e,i,o,s/=2)},e.exports=u},{"../geo/coordinate":57,"@mapbox/whoots-js":10}],102:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/util"),o=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,a=t("./tile_bounds"),u=t("../util/ajax").ResourceType,l=t("../util/browser"),c=function(t){function e(e,n,r,o){if(t.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(e,n){e?t.fire("error",e):n&&(i.extend(t,n),n.bounds&&(t.tileBounds=new a(n.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t,this.maxzoom)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return i.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,r){if(!t.aborted){if(n)return e(n);this.map._refreshExpiredTiles&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),e(null),t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)}}var r=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i=s(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),o={request:this.map._transformRequest(i,u.Tile),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,cameraToCenterDistance:this.map.transform.cameraToCenterDistance,cameraToTileDistance:this.map.transform.cameraToTileDistance(t),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",o,n.bind(this),t.workerID):t.workerID=this.dispatcher.send("loadTile",o,n.bind(this))},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e}(r);e.exports=c},{"../util/ajax":201,"../util/browser":202,"../util/evented":210,"../util/mapbox":217,"../util/util":223,"./load_tilejson":92,"./tile_bounds":100}],103:[function(t,e,n){"use strict";function r(t,e){var n=i.getArrayBuffer(t.request,function(t,n){t?e(t):n&&e(null,{vectorTile:new o.VectorTile(new s(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort()}}var i=t("../util/ajax"),o=t("@mapbox/vector-tile"),s=t("pbf"),a=t("./worker_tile"),u=t("../util/util"),l=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||r,this.loading={},this.loaded={}};l.prototype.loadTile=function(t,e){var n=this,r=t.source,i=t.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new a(t);o.abort=this.loadVectorData(t,function(t,s){if(delete n.loading[r][i],t||!s)return e(t);var a=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile,o.parse(s.vectorTile,n.layerIndex,n.actor,function(t,n,r){if(t||!n)return e(t);e(null,u.extend({rawTileData:a},n,l),r)}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][i]=o})},l.prototype.reloadTile=function(t,e){var n=this.loaded[t.source],r=t.uid,i=this;if(n&&n[r]){var o=n[r];"parsing"===o.status?o.reloadCallback=e:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,(function(t,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,i.layerIndex,i.actor,r)}e(t,n)}).bind(o))}},l.prototype.abortTile=function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])},l.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},l.prototype.redoPlacement=function(t,e){var n=this.loaded[t.source],r=this.loading[t.source],i=t.uid;if(n&&n[i]){var o=n[i].redoPlacement(t.angle,t.pitch,t.cameraToCenterDistance,t.cameraToTileDistance,t.showCollisionBoxes);o.result&&e(null,o.result,o.transferables)}else r&&r[i]&&(r[i].angle=t.angle)},e.exports=l},{"../util/ajax":201,"../util/util":223,"./worker_tile":106,"@mapbox/vector-tile":6,pbf:29}],104:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,r.getVideo(e.urls,function(e,n){if(e)t.fire("error",{error:e});else if(n){var r;t.video=n,t.video.loop=!0,t.video.addEventListener("playing",function(){r=t.map.style.animationLoop.set(1/0),t.map._rerender()}),t.video.addEventListener("pause",function(){t.map.style.animationLoop.cancel(r)}),t.map&&t.video.play(),t._finishLoading()}})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){0===Object.keys(this.tiles).length||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e}(t("./image_source"));e.exports=i},{"../util/ajax":201,"./image_source":91}],105:[function(t,e,n){"use strict";var r=t("../util/actor"),i=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),s=t("./geojson_worker_source"),a=t("./rtl_text_plugin"),u=function(t){var e=this;this.self=t,this.actor=new r(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(a.applyArabicShaping||a.processBidirectionalText)throw new Error("RTL text plugin already registered.");a.applyArabicShaping=t.applyArabicShaping,a.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e){this.getLayerIndex(t).replace(e)},u.prototype.updateLayers=function(t,e){this.getLayerIndex(t).update(e.layers,e.removedIds,e.symbolOrder)},u.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},u.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},u.prototype.abortTile=function(t,e){this.getWorkerSource(t,e.type).abortTile(e)},u.prototype.removeTile=function(t,e){this.getWorkerSource(t,e.type).removeTile(e)},u.prototype.removeSource=function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)},u.prototype.redoPlacement=function(t,e,n){this.getWorkerSource(t,e.type).redoPlacement(e,n)},u.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},u.prototype.loadRTLTextPlugin=function(t,e,n){try{a.applyArabicShaping||a.processBidirectionalText||(this.self.importScripts(e),a.applyArabicShaping&&a.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){n(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},u.prototype.getWorkerSource=function(t,e){var n=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]=new this.workerSourceTypes[e]({send:function(e,r,i,o){n.actor.send(e,r,i,o,t)}},this.getLayerIndex(t))),this.workerSources[t][e]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":164,"../util/actor":200,"./geojson_worker_source":89,"./rtl_text_plugin":96,"./vector_tile_worker_source":103}],106:[function(t,e,n){"use strict";function r(t,e){for(var n=0,r=t.layers;n<r.length;n+=1)r[n].recalculate(e)}function i(t,e){return t.filter(function(t){return!t.isEmpty()}).map(function(t){return t.serialize(e)})}var o=t("../data/feature_index"),s=t("../symbol/collision_tile"),a=t("../symbol/collision_box"),u=t("../util/dictionary_coder"),l=(t("../data/bucket/symbol_bucket"),t("../util/util")),c=t("../render/image_atlas").makeImageAtlas,h=t("../render/glyph_atlas").makeGlyphAtlas,p=function(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.cameraToCenterDistance=t.cameraToCenterDistance,this.cameraToTileDistance=t.cameraToTileDistance,this.showCollisionBoxes=t.showCollisionBoxes};p.prototype.parse=function(t,e,n,p){function f(){var t=this;if(O)return p(O);if(D&&k){for(var e=new s(this.angle,this.pitch,this.cameraToCenterDistance,this.cameraToTileDistance,this.collisionBoxArray),n=h(D),o=c(k),a=0,u=t.symbolBuckets;a<u.length;a+=1){var f=u[a];r(f,t.zoom),f.prepare(D,n.positions,k,o.positions),f.place(e,t.showCollisionBoxes)}this.status="done";var d=[n.image.data.buffer,o.image.data.buffer];p(null,{buckets:i(l.values(m),d),featureIndex:y.serialize(d),collisionTile:e.serialize(d),collisionBoxArray:this.collisionBoxArray.serialize(),glyphAtlasImage:n.image,iconAtlasImage:o.image},d)}}var d=this;this.status="parsing",this.data=t,this.collisionBoxArray=new a;var g=new u(Object.keys(t.layers).sort()),y=new o(this.coord,this.overscaling);y.bucketLayerIDs=[];var m={},_={featureIndex:y,iconDependencies:{},glyphDependencies:{}},v=e.familiesBySource[this.source];for(var x in v){var b=t.layers[x];if(b){1===b.version&&l.warnOnce('Vector tile source "'+d.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=g.encode(x),E=[],C=0;C<b.length;C++){var I=b.feature(C);E.push({feature:I,index:C,sourceLayerIndex:w})}for(var S=0,T=v[x];S<T.length;S+=1){var M=T[S],A=M[0];if(!(A.minzoom&&d.zoom<Math.floor(A.minzoom)||A.maxzoom&&d.zoom>=A.maxzoom||A.layout&&"none"===A.layout.visibility)){for(var P=0,L=M;P<L.length;P+=1)L[P].recalculate(d.zoom);(m[A.id]=A.createBucket({index:y.bucketLayerIDs.length,layers:M,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(E,_),y.bucketLayerIDs.push(M.map(function(t){return t.id}))}}}}this.symbolBuckets=[];for(var N=e.symbolOrder.length-1;N>=0;N--){var R=m[e.symbolOrder[N]];R&&d.symbolBuckets.push(R)}var O,D,k,z=l.mapObject(_.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(z).length?n.send("getGlyphs",{uid:this.uid,stacks:z},function(t,e){O||(O=t,D=e,f.call(d))}):D={};var F=Object.keys(_.iconDependencies);F.length?n.send("getImages",{icons:F},function(t,e){O||(O=t,k=e,f.call(d))}):k={},f.call(this)},p.prototype.redoPlacement=function(t,e,n,o,a){if(this.angle=t,this.pitch=e,this.cameraToCenterDistance=n,this.cameraToTileDistance=o,"done"!==this.status)return{};for(var u=new s(this.angle,this.pitch,this.cameraToCenterDistance,this.cameraToTileDistance,this.collisionBoxArray),l=0,c=this.symbolBuckets;l<c.length;l+=1){var h=c[l];r(h,this.zoom),h.place(u,a)}var p=[];return{result:{buckets:i(this.symbolBuckets,p),collisionTile:u.serialize(p)},transferables:p}},e.exports=p},{"../data/bucket/symbol_bucket":47,"../data/feature_index":49,"../render/glyph_atlas":74,"../render/image_atlas":76,"../symbol/collision_box":170,"../symbol/collision_tile":172,"../util/dictionary_coder":207,"../util/util":223}],107:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return i.forEach(function(t){t in e&&(n[t]=e[t])}),n}var i=t("./util/ref_properties");e.exports=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=r(t[i],e[t[i].ref]));return t}},{"./util/ref_properties":129}],108:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(s(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(s(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}))}function i(t){return t.id}function o(t,e){return t[e.id]=e,t}var s=t("lodash.isequal"),a={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=function(t,e){if(!t)return[{command:a.setStyle,args:[e]}];var n=[];try{if(!s(t.version,e.version))return[{command:a.setStyle,args:[e]}];s(t.center,e.center)||n.push({command:a.setCenter,args:[e.center]}),s(t.zoom,e.zoom)||n.push({command:a.setZoom,args:[e.zoom]}),s(t.bearing,e.bearing)||n.push({command:a.setBearing,args:[e.bearing]}),s(t.pitch,e.pitch)||n.push({command:a.setPitch,args:[e.pitch]}),s(t.sprite,e.sprite)||n.push({command:a.setSprite,args:[e.sprite]}),s(t.glyphs,e.glyphs)||n.push({command:a.setGlyphs,args:[e.glyphs]}),s(t.transition,e.transition)||n.push({command:a.setTransition,args:[e.transition]}),s(t.light,e.light)||n.push({command:a.setLight,args:[e.light]});var u={},l=[];!function(t,e,n,r){var i;for(i in e=e||{},t=t||{})t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(n.push({command:a.removeSource,args:[i]}),r[i]=!0));for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)?s(t[i],e[i])||(n.push({command:a.removeSource,args:[i]}),n.push({command:a.addSource,args:[i,e[i]]}),r[i]=!0):n.push({command:a.addSource,args:[i,e[i]]}))}(t.sources,e.sources,l,u);var c=[];t.layers&&t.layers.forEach(function(t){u[t.source]?n.push({command:a.removeLayer,args:[t.id]}):c.push(t)}),n=n.concat(l),function(t,e,n){e=e||[];var u,l,c,h,p,f,d,g=(t=t||[]).map(i),y=e.map(i),m=t.reduce(o,{}),_=e.reduce(o,{}),v=g.slice(),x=Object.create(null);for(u=0,l=0;u<g.length;u++)_.hasOwnProperty(c=g[u])?l++:(n.push({command:a.removeLayer,args:[c]}),v.splice(v.indexOf(c,l),1));for(u=0,l=0;u<y.length;u++)v[v.length-1-u]!==(c=y[y.length-1-u])&&(m.hasOwnProperty(c)?(n.push({command:a.removeLayer,args:[c]}),v.splice(v.lastIndexOf(c,v.length-l),1)):l++,n.push({command:a.addLayer,args:[_[c],f=v[v.length-u]]}),v.splice(v.length-u,0,c),x[c]=!0);for(u=0;u<y.length;u++)if(h=m[c=y[u]],p=_[c],!x[c]&&!s(h,p))if(s(h.source,p.source)&&s(h["source-layer"],p["source-layer"])&&s(h.type,p.type)){for(d in r(h.layout,p.layout,n,c,null,a.setLayoutProperty),r(h.paint,p.paint,n,c,null,a.setPaintProperty),s(h.filter,p.filter)||n.push({command:a.setFilter,args:[c,p.filter]}),s(h.minzoom,p.minzoom)&&s(h.maxzoom,p.maxzoom)||n.push({command:a.setLayerZoomRange,args:[c,p.minzoom,p.maxzoom]}),h)h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?r(h[d],p[d],n,c,d.slice(6),a.setPaintProperty):s(h[d],p[d])||n.push({command:a.setLayerProperty,args:[c,d,p[d]]}));for(d in p)p.hasOwnProperty(d)&&!h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?r(h[d],p[d],n,c,d.slice(6),a.setPaintProperty):s(h[d],p[d])||n.push({command:a.setLayerProperty,args:[c,d,p[d]]}))}else n.push({command:a.removeLayer,args:[c]}),f=v[v.lastIndexOf(c)+1],n.push({command:a.addLayer,args:[p,f]})}(c,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:a.setStyle,args:[e]}]}return n},e.exports.operations=a},{"lodash.isequal":120}],109:[function(t,e,n){"use strict";var r=t("util").format;e.exports=function(t,e){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];this.message=(t?t+": ":"")+r.apply(r,n),null!=e&&e.__line__&&(this.line=e.__line__)}},{util:36}],110:[function(t,e,n){"use strict";function r(t){if(!t)return"true";var e=t[0];return t.length<=1?"any"===e?"false":"true":"("+("=="===e?o(t[1],t[2],"===",!1):"!="===e?o(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?o(t[1],t[2],e,!0):"any"===e?s(t.slice(1),"||"):"all"===e?s(t.slice(1),"&&"):"none"===e?l(s(t.slice(1),"||")):"in"===e?a(t[1],t.slice(2)):"!in"===e?l(a(t[1],t.slice(2))):"has"===e?u(t[1]):"!has"===e?l(u(t[1])):"true")+")"}function i(t){return"$type"===t?"f.type":"$id"===t?"f.id":"p["+JSON.stringify(t)+"]"}function o(t,e,n,r){var o=i(t),s="$type"===t?h.indexOf(e):JSON.stringify(e);return(r?"typeof "+o+"=== typeof "+s+"&&":"")+o+n+s}function s(t,e){return t.map(r).join(e)}function a(t,e){"$type"===t&&(e=e.map(function(t){return h.indexOf(t)}));var n=JSON.stringify(e.sort(c)),r=i(t);return e.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(e.length-1)+")"}function u(t){return"$id"===t?'"id" in f':JSON.stringify(t)+" in p"}function l(t){return"!("+t+")"}function c(t,e){return t<e?-1:t>e?1:0}e.exports=function(t){return new Function("f","var p = (f && f.properties || {}); return "+r(t))};var h=["Unknown","Point","LineString","Polygon"]},{}],111:[function(t,e,n){"use strict";function r(t){return t>g?Math.pow(t,1/3):t/d+p}function i(t){return t>f?t*t*t:d*(t-p)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function s(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function a(t){var e=s(t[0]),n=s(t[1]),i=s(t[2]),o=r((.4124564*e+.3575761*n+.1804375*i)/l),a=r((.2126729*e+.7151522*n+.072175*i)/c);return[116*a-16,500*(o-a),200*(a-r((.0193339*e+.119192*n+.9503041*i)/h)),t[3]]}function u(t){var e=(t[0]+16)/116,n=isNaN(t[1])?e:e+t[1]/500,r=isNaN(t[2])?e:e-t[2]/200;return e=c*i(e),[o(3.2404542*(n=l*i(n))-1.5371385*e-.4985314*(r=h*i(r))),o(-.969266*n+1.8760108*e+.041556*r),o(.0556434*n-.2040259*e+1.0572252*r),t[3]]}var l=.95047,c=1,h=1.08883,p=4/29,f=6/29,d=3*f*f,g=f*f*f,y=Math.PI/180,m=180/Math.PI;e.exports={lab:{forward:a,reverse:u},hcl:{forward:function(t){var e=a(t),n=e[0],r=e[1],i=e[2],o=Math.atan2(i,r)*m;return[o<0?o+360:o,Math.sqrt(r*r+i*i),n,t[3]]},reverse:function(t){var e=t[0]*y,n=t[1];return u([t[2],Math.cos(e)*n,Math.sin(e)*n,t[3]])}}}},{}],112:[function(t,e,n){"use strict";function r(t){return t}function i(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function o(t,e,n,r,o){return i(typeof n===o?r[n]:void 0,t.default,e.default)}function s(t,e,n){if("number"!==g(n))return i(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var o=l(t.stops,n);return t.stops[o][1]}function a(t,e,n){var o=void 0!==t.base?t.base:1;if("number"!==g(n))return i(t.default,e.default);var s=t.stops.length;if(1===s)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[s-1][0])return t.stops[s-1][1];var a=l(t.stops,n),u=h(n,o,t.stops[a][0],t.stops[a+1][0]),c=t.stops[a][1],p=t.stops[a+1][1],f=y[e.type]||r;return"function"==typeof c?function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=c.apply(void 0,t),r=p.apply(void 0,t);if(void 0!==n&&void 0!==r)return f(n,r,u)}:f(c,p,u)}function u(t,e,n){return"color"===e.type?n=f(n):g(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),i(n,t.default,e.default)}function l(t,e){for(var n,r=0,i=t.length-1,o=0;r<=i;){if(e===(n=t[o=Math.floor((r+i)/2)][0])||e>n&&e<t[o+1][0])return o;n<e?r=o+1:n>e&&(i=o-1)}return Math.max(o-1,0)}function c(t){return"object"==typeof t&&(t.stops||"identity"===t.type)}function h(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var p=t("./color_spaces"),f=t("../util/parse_color"),d=t("../util/extend"),g=t("../util/get_type"),y=t("../util/interpolate");e.exports=function t(e,n){var l,h="color"===n.type;if(c(e)){var g,y,m,_,v=e.stops&&"object"==typeof e.stops[0][0],x=v||!(v||void 0!==e.property),b=e.type||("interpolated"===n.function?"exponential":"interval");if(h&&((e=d({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],f(t[1])]})),e.default=f(e.default?e.default:n.default)),"exponential"===b)g=a;else if("interval"===b)g=s;else if("categorical"===b){g=o,y=Object.create(null);for(var w=0,E=e.stops;w<E.length;w+=1){var C=E[w];y[C[0]]=C[1]}m=typeof e.stops[0][0]}else{if("identity"!==b)throw new Error('Unknown function type "'+b+'"');g=u}if(e.colorSpace&&"rgb"!==e.colorSpace){if(!p[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var I=p[e.colorSpace];e=JSON.parse(JSON.stringify(e));for(var S=0;S<e.stops.length;S++)e.stops[S]=[e.stops[S][0],I.forward(e.stops[S][1])];_=I.reverse}else _=r;if(v){for(var T={},M=[],A=0;A<e.stops.length;A++){var P=e.stops[A],L=P[0].zoom;void 0===T[L]&&(T[L]={zoom:L,type:e.type,property:e.property,default:e.default,stops:[]},M.push(L)),T[L].stops.push([P[0].value,P[1]])}for(var N=[],R=0,O=M;R<O.length;R+=1){var D=O[R];N.push([T[D].zoom,t(T[D],n)])}(l=function(t,r){return _(a({stops:N,base:e.base},n,t)(t,r))}).isFeatureConstant=!1,l.isZoomConstant=!1}else x?((l=function(t){return _(g(e,n,t,y,m))}).isFeatureConstant=!0,l.isZoomConstant=!1):((l=function(t,r){var o=r[e.property];return void 0===o?i(e.default,n.default):_(g(e,n,o,y,m))}).isFeatureConstant=!1,l.isZoomConstant=!0)}else h&&e&&(e=f(e)),(l=function(){return e}).isFeatureConstant=!0,l.isZoomConstant=!0;return l},e.exports.isFunctionDefinition=c,e.exports.interpolationFactor=h,e.exports.findStopLessThanOrEqualTo=l},{"../util/extend":125,"../util/get_type":126,"../util/interpolate":127,"../util/parse_color":128,"./color_spaces":111}],113:[function(t,e,n){"use strict";function r(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",i=0,o=t;i<o.length;i+=1)n+=r(o[i])+",";return n+"]"}for(var s=Object.keys(t).sort(),a="{",u=0;u<s.length;u++)a+=JSON.stringify(s[u])+":"+r(t[s[u]])+",";return a+"}"}function i(t){for(var e="",n=0,i=o;n<i.length;n+=1)e+="/"+r(t[i[n]]);return e}var o=t("./util/ref_properties");e.exports=function(t){for(var e={},n=0;n<t.length;n++){var r=i(t[n]),o=e[r];o||(o=e[r]=[]),o.push(t[n])}var s=[];for(var a in e)s.push(e[a]);return s}},{"./util/ref_properties":129}],114:[function(t,e,n){function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in a)return a[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=n.indexOf("("),l=n.indexOf(")");if(-1!==u&&l+1===n.length){var c=n.substr(0,u),h=n.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),g=o(h[2]),y=g<=.5?g*(d+1):g+d-g*d,m=2*g-y;return[r(255*s(m,y,f+1/3)),r(255*s(m,y,f)),r(255*s(m,y,f-1/3)),p];default:return null}}return null}}catch(t){}},{}],115:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var i=t("lodash.isarray"),o=t("lodash.istypedarray"),s=t("lodash.keys"),a="[object Object]",u=Object.prototype,l=u.hasOwnProperty,c=u.toString;e.exports=function t(e,n,u,h,p,f){return e===n||(null!=e&&null!=n&&(function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(e)||n&&"object"==typeof n)?function(t,e,n,u,h,p,f){var d=i(t),g=i(e),y="[object Array]",m="[object Array]";d||("[object Arguments]"==(y=c.call(t))?y=a:y!=a&&(d=o(t))),g||("[object Arguments]"==(m=c.call(e))?m=a:m!=a&&(g=o(e)));var _=y==a,v=m==a,x=y==m;if(x&&!d&&!_)return function(t,e,n){switch(y){case"[object Boolean]":case"[object Date]":return+t==+e;case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object Number]":return t!=+t?e!=+e:t==+e;case"[object RegExp]":case"[object String]":return t==e+""}return!1}(t,e);if(!h){var b=_&&l.call(t,"__wrapped__"),w=v&&l.call(e,"__wrapped__");if(b||w)return n(b?t.value():t,w?e.value():e,u,h,p,f)}if(!x)return!1;p||(p=[]),f||(f=[]);for(var E=p.length;E--;)if(p[E]==t)return f[E]==e;p.push(t),f.push(e);var C=(d?function(t,e,n,i,o,s,a){var u=-1,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;for(;++u<l;){var h=t[u],p=e[u],f=i?i(o?p:h,o?h:p,u):void 0;if(void 0!==f){if(f)continue;return!1}if(o){if(!r(e,function(t){return h===t||n(h,t,i,o,s,a)}))return!1}else if(h!==p&&!n(h,p,i,o,s,a))return!1}return!0}:function(t,e,n,r,i,o,a){var u=s(t),c=u.length;if(c!=s(e).length&&!i)return!1;for(var h=c;h--;){var p=u[h];if(!(i?p in e:l.call(e,p)))return!1}for(var f=i;++h<c;){var d=t[p=u[h]],g=e[p],y=r?r(i?g:d,i?d:g,p):void 0;if(!(void 0===y?n(d,g,r,i,o,a):y))return!1;f||(f="constructor"==p)}if(!f){var m=t.constructor,_=e.constructor;if(m!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _))return!1}return!0})(t,e,n,u,h,p,f);return p.pop(),f.pop(),C}(e,n,t,u,h,p,f):e!=e&&n!=n)}},{"lodash.isarray":119,"lodash.istypedarray":121,"lodash.keys":122}],116:[function(t,e,n){function r(t){return t}e.exports=function(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,s){return t.call(e,n,r,i,o,s)}}return function(){return t.apply(e,arguments)}}},{}],117:[function(t,e,n){var r=/^\[object .+?Constructor\]$/,i=Object.prototype,o=Function.prototype.toString,s=i.toString,a=RegExp("^"+o.call(i.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t,e){var n=null==t?void 0:t[e];return function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&"[object Function]"==s.call(t)}(t)?a.test(o.call(t)):function(t){return!!t&&"object"==typeof t}(t)&&r.test(t))}(n)?n:void 0}},{}],118:[function(t,e,n){var r=Object.prototype,i=r.hasOwnProperty,o=r.toString,s=r.propertyIsEnumerable;e.exports=function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?o.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}(t)}(t)&&i.call(t,"callee")&&(!s.call(t,"callee")||"[object Arguments]"==o.call(t))}},{}],119:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}var i,o,s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,l=a.toString,c=RegExp("^"+u.call(a.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&"[object Function]"==l.call(t)}(t)?c.test(u.call(t)):r(t)&&s.test(t))}(o=null==(i=Array)?void 0:i.isArray)?o:void 0;e.exports=h||function(t){return r(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&"[object Array]"==l.call(t)}},{}],120:[function(t,e,n){var r=t("lodash._baseisequal"),i=t("lodash._bindcallback");e.exports=function(t,e,n,o){var s=(n="function"==typeof n?i(n,o,3):void 0)?n(t,e):void 0;return void 0===s?r(t,e,n):!!s}},{"lodash._baseisequal":115,"lodash._bindcallback":116}],121:[function(t,e,n){var r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;var i=Object.prototype.toString;e.exports=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!!r[i.call(t)]}},{}],122:[function(t,e,n){function r(t,e){return t="number"==typeof t||c.test(t)?+t:-1,e=null==e?f:e,t>-1&&t%1==0&&t<e}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function o(t){for(var e=function(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&i(e)&&(l(t)||u(t))&&e||0;for(var n=t.constructor,o=-1,a="function"==typeof n&&n.prototype===t,c=Array(e),p=e>0;++o<e;)c[o]=o+"";for(var f in t)p&&r(f,e)||"constructor"==f&&(a||!h.call(t,f))||c.push(f);return c}(t),n=e.length,o=n&&t.length,a=!!o&&i(o)&&(l(t)||u(t)),c=-1,p=[];++c<n;){var f=e[c];(a&&r(f,o)||h.call(t,f))&&p.push(f)}return p}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var a=t("lodash._getnative"),u=t("lodash.isarguments"),l=t("lodash.isarray"),c=/^\d+$/,h=Object.prototype.hasOwnProperty,p=a(Object,"keys"),f=9007199254740991,d=function(t){return null==t?void 0:t.length};e.exports=p?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&function(t){return null!=t&&i(d(t))}(t)?o(t):s(t)?p(t):[]}:o},{"lodash._getnative":117,"lodash.isarguments":118,"lodash.isarray":119}],123:[function(t,e,n){"use strict";e.exports=t("./v8.json")},{"./v8.json":124}],124:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0},contextType:{required:!0,type:"enum",values:{"2d":{},webgl:{},"experimental-webgl":{},webgl2:{}}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,maximum:65535,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],125:[function(t,e,n){"use strict";e.exports=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var s in o)t[s]=o[s]}return t}},{}],126:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],127:[function(t,e,n){"use strict";function r(t,e,n){return t*(1-n)+e*n}e.exports=r,r.number=r,r.vec2=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n)]},r.color=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n),r(t[2],e[2],n),r(t[3],e[3],n)]},r.array=function(t,e,n){return t.map(function(t,i){return r(t,e[i],n)})}},{}],128:[function(t,e,n){"use strict";var r=t("csscolorparser").parseCSSColor;e.exports=function(t){if("string"==typeof t){var e=r(t);if(!e)return;return[e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]]}return Array.isArray(t)?t:void 0}},{csscolorparser:114}],129:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],130:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}},{}],131:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("../util/extend");e.exports=function(e){var n=t("./validate_function"),s=t("./validate_object"),a={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},u=e.value,l=e.valueSpec,c=e.key,h=e.styleSpec,p=e.style;if("string"===i(u)&&"@"===u[0]){if(h.$version>7)return[new r(c,u,"constants have been deprecated as of v8")];if(!(u in p.constants))return[new r(c,u,'constant "%s" not found',u)];e=o({},e,{value:p.constants[u]})}return l.function&&"object"===i(u)?n(e):l.type&&a[l.type]?a[l.type](e):s(o({},e,{valueSpec:l.type?h[l.type]:l}))}},{"../error/validation_error":109,"../util/extend":125,"../util/get_type":126,"./validate_array":132,"./validate_boolean":133,"./validate_color":134,"./validate_constants":135,"./validate_enum":136,"./validate_filter":137,"./validate_function":138,"./validate_layer":140,"./validate_light":142,"./validate_number":143,"./validate_object":144,"./validate_source":147,"./validate_string":148}],132:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,s=t.style,a=t.styleSpec,u=t.key,l=t.arrayElementValidator||i;if("array"!==r(e))return[new o(u,e,"array expected, %s found",r(e))];if(n.length&&e.length!==n.length)return[new o(u,e,"array length %d expected, length %d found",n.length,e.length)];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least %d expected, length %d found",n["min-length"],e.length)];var c={type:n.value};a.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var h=[],p=0;p<e.length;p++)h=h.concat(l({array:e,arrayIndex:p,value:e[p],valueSpec:c,style:s,styleSpec:a,key:u+"["+p+"]"}));return h}},{"../error/validation_error":109,"../util/get_type":126,"./validate":131}],133:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"boolean"!==o?[new i(n,e,"boolean expected, %s found",o)]:[]}},{"../error/validation_error":109,"../util/get_type":126}],134:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,s=i(n);return"string"!==s?[new r(e,n,"color expected, %s found",s)]:null===o(n)?[new r(e,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":109,"../util/get_type":126,csscolorparser:114}],135:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type");e.exports=function(t){var e=t.key,n=t.value;if(t.styleSpec.$version>7)return n?[new r(e,n,"constants have been deprecated as of v8")]:[];var o=i(n);if("object"!==o)return[new r(e,n,"object expected, %s found",o)];var s=[];for(var a in n)"@"!==a[0]&&s.push(new r(e+"."+a,n[a],'constants must start with "@"'));return s}},{"../error/validation_error":109,"../util/get_type":126}],136:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,s=[];return Array.isArray(o.values)?-1===o.values.indexOf(i(n))&&s.push(new r(e,n,"expected one of [%s], %s found",o.values.join(", "),n)):-1===Object.keys(o.values).indexOf(i(n))&&s.push(new r(e,n,"expected one of [%s], %s found",Object.keys(o.values).join(", "),n)),s}},{"../error/validation_error":109,"../util/unbundle_jsonlint":130}],137:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_enum"),o=t("../util/get_type"),s=t("../util/unbundle_jsonlint");e.exports=function t(e){var n,a=e.value,u=e.key,l=e.styleSpec,c=[];if("array"!==o(a))return[new r(u,a,"array expected, %s found",o(a))];if(a.length<1)return[new r(u,a,"filter array must have at least 1 element")];switch(c=c.concat(i({key:u+"[0]",value:a[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),s(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===s(a[1])&&c.push(new r(u,a,'"$type" cannot be use with operator "%s"',a[0]));case"==":case"!=":3!==a.length&&c.push(new r(u,a,'filter array for operator "%s" must have 3 elements',a[0]));case"in":case"!in":a.length>=2&&"string"!==(n=o(a[1]))&&c.push(new r(u+"[1]",a[1],"string expected, %s found",n));for(var h=2;h<a.length;h++)n=o(a[h]),"$type"===s(a[1])?c=c.concat(i({key:u+"["+h+"]",value:a[h],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&c.push(new r(u+"["+h+"]",a[h],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(var p=1;p<a.length;p++)c=c.concat(t({key:u+"["+p+"]",value:a[p],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=o(a[1]),2!==a.length?c.push(new r(u,a,'filter array for "%s" operator must have 2 elements',a[0])):"string"!==n&&c.push(new r(u+"[1]",a[1],"string expected, %s found",n))}return c}},{"../error/validation_error":109,"../util/get_type":126,"../util/unbundle_jsonlint":130,"./validate_enum":136}],138:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate"),s=t("./validate_object"),a=t("./validate_array"),u=t("./validate_number"),l=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){var e=[],a=t.value,c=t.key;if("array"!==i(a))return[new r(c,a,"array expected, %s found",i(a))];if(2!==a.length)return[new r(c,a,"array length %d expected, length %d found",2,a.length)];if(_){if("object"!==i(a[0]))return[new r(c,a,"object expected, %s found",i(a[0]))];if(void 0===a[0].zoom)return[new r(c,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new r(c,a,"object stop key must have value")];if(p&&p>l(a[0].zoom))return[new r(c,a[0].zoom,"stop zoom values must appear in ascending order")];l(a[0].zoom)!==p&&(p=l(a[0].zoom),h=void 0,g={}),e=e.concat(s({key:c+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:n}}))}else e=e.concat(n({key:c+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e.concat(o({key:c+"[1]",value:a[1],valueSpec:f,style:t.style,styleSpec:t.styleSpec}))}function n(t){var e=i(t.value),n=l(t.value);if(c){if(e!==c)return[new r(t.key,t.value,"%s stop domain type must match previous stop domain type %s",e,c)]}else c=e;if("number"!==e&&"string"!==e&&"boolean"!==e)return[new r(t.key,t.value,"stop domain value must be a number, string, or boolean")];if("number"!==e&&"categorical"!==d){var o="number expected, %s found";return f["property-function"]&&void 0===d&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(t.key,t.value,o,e)]}return"categorical"!==d||"number"!==e||isFinite(n)&&Math.floor(n)===n?"categorical"!==d&&"number"===e&&void 0!==h&&n<h?[new r(t.key,t.value,"stop domain values must appear in ascending order")]:(h=n,"categorical"===d&&n in g?[new r(t.key,t.value,"stop domain values must be unique")]:(g[n]=!0,[])):[new r(t.key,t.value,"integer expected, found %s",n)]}var c,h,p,f=t.valueSpec,d=l(t.value.type),g={},y="categorical"!==d&&void 0===t.value.property,m=!y,_="array"===i(t.value.stops)&&"array"===i(t.value.stops[0])&&"object"===i(t.value.stops[0][0]),v=s({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===d)return[new r(t.key,t.value,'identity function may not have a "stops" property')];var n=[],o=t.value;return n=n.concat(a({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===i(o)&&0===o.length&&n.push(new r(t.key,o,"array must have at least one stop")),n},default:function(t){return o({key:t.key,value:t.value,valueSpec:f,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===d&&y&&v.push(new r(t.key,t.value,'missing required property "property"')),"identity"===d||t.value.stops||v.push(new r(t.key,t.value,'missing required property "stops"')),"exponential"===d&&"piecewise-constant"===t.valueSpec.function&&v.push(new r(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(m&&!t.valueSpec["property-function"]?v.push(new r(t.key,t.value,"property functions not supported")):y&&!t.valueSpec["zoom-function"]&&v.push(new r(t.key,t.value,"zoom functions not supported"))),"categorical"!==d&&!_||void 0!==t.value.property||v.push(new r(t.key,t.value,'"property" property is required')),v}},{"../error/validation_error":109,"../util/get_type":126,"../util/unbundle_jsonlint":130,"./validate":131,"./validate_array":132,"./validate_number":143,"./validate_object":144}],139:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=i(t);return o.length?o:(-1===e.indexOf("{fontstack}")&&o.push(new r(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&o.push(new r(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":109,"./validate_string":148}],140:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),s=t("./validate_filter"),a=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("../util/extend");e.exports=function(t){var e=[],n=t.value,c=t.key,h=t.style,p=t.styleSpec;n.type||n.ref||e.push(new r(c,n,'either "type" or "ref" is required'));var f,d=i(n.type),g=i(n.ref);if(n.id)for(var y=i(n.id),m=0;m<t.arrayIndex;m++){var _=h.layers[m];i(_.id)===y&&e.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,_.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new r(c,n[t],'"%s" is prohibited for ref layers',t))}),h.layers.forEach(function(t){i(t.id)===g&&(f=t)}),f?f.ref?e.push(new r(c,n.ref,"ref cannot reference another ref layer")):d=i(f.type):e.push(new r(c,n.ref,'ref layer "%s" not found',g));else if("background"!==d)if(n.source){var v=h.sources&&h.sources[n.source],x=v&&i(v.type);v?"vector"===x&&"raster"===d?e.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"===x&&"raster"!==d?e.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!==x||n["source-layer"]||e.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):e.push(new r(c,n.source,'source "%s" not found',n.source))}else e.push(new r(c,n,'missing required property "source"'));return e=e.concat(o({key:c,value:n,valueSpec:p.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},filter:s,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(l({layerType:d},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return a(l({layerType:d},t))}}})}}}))}},{"../error/validation_error":109,"../util/extend":125,"../util/unbundle_jsonlint":130,"./validate_filter":137,"./validate_layout_property":141,"./validate_object":144,"./validate_paint_property":145}],141:[function(t,e,n){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"layout")}},{"./validate_property":146}],142:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,s=n.light,a=t.style,u=[],l=i(e);if(void 0===e)return u;if("object"!==l)return u.concat([new r("light",e,"object expected, %s found",l)]);for(var c in e){var h=c.match(/^(.*)-transition$/);u=u.concat(h&&s[h[1]]&&s[h[1]].transition?o({key:c,value:e[c],valueSpec:n.transition,style:a,styleSpec:n}):s[c]?o({key:c,value:e[c],valueSpec:s[c],style:a,styleSpec:n}):[new r(c,e[c],'unknown property "%s"',c)])}return u}},{"../error/validation_error":109,"../util/get_type":126,"./validate":131}],143:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,s=r(n);return"number"!==s?[new i(e,n,"number expected, %s found",s)]:"minimum"in o&&n<o.minimum?[new i(e,n,"%s is less than the minimum value %s",n,o.minimum)]:"maximum"in o&&n>o.maximum?[new i(e,n,"%s is greater than the maximum value %s",n,o.maximum)]:[]}},{"../error/validation_error":109,"../util/get_type":126}],144:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,s=t.valueSpec||{},a=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],h=i(n);if("object"!==h)return[new r(e,n,"object expected, %s found",h)];for(var p in n){var f=p.split(".")[0],d=s[f]||s["*"],g=void 0;if(a[f])g=a[f];else if(s[f])g=o;else if(a["*"])g=a["*"];else{if(!s["*"]){c.push(new r(e,n[p],'unknown property "%s"',p));continue}g=o}c=c.concat(g({key:(e?e+".":e)+p,value:n[p],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:p}))}for(var y in s)s[y].required&&void 0===s[y].default&&void 0===n[y]&&c.push(new r(e,n,'missing required property "%s"',y));return c}},{"../error/validation_error":109,"../util/get_type":126,"./validate":131}],145:[function(t,e,n){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"paint")}},{"./validate_property":146}],146:[function(t,e,n){"use strict";var r=t("./validate"),i=t("../error/validation_error"),o=t("../util/get_type");e.exports=function(t,e){var n=t.key,s=t.style,a=t.styleSpec,u=t.value,l=t.objectKey,c=a[e+"_"+t.layerType];if(!c)return[];var h=l.match(/^(.*)-transition$/);if("paint"===e&&h&&c[h[1]]&&c[h[1]].transition)return r({key:n,value:u,valueSpec:a.transition,style:s,styleSpec:a});var p,f=t.valueSpec||c[l];if(!f)return[new i(n,u,'unknown property "%s"',l)];if("string"===o(u)&&f["property-function"]&&!f.tokens&&(p=/^{([^}]+)}$/.exec(u)))return[new i(n,u,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',l,JSON.stringify(p[1]))];var d=[];return"symbol"===t.layerType&&"text-field"===l&&s&&!s.glyphs&&d.push(new i(n,u,'use of "text-field" requires a style "glyphs" property')),d.concat(r({key:t.key,value:u,valueSpec:f,style:s,styleSpec:a}))}},{"../error/validation_error":109,"../util/get_type":126,"./validate":131}],147:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),s=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,a=t.styleSpec,u=t.style;if(!e.type)return[new r(n,e,'"type" is required')];var l=[];switch(i(e.type)){case"vector":case"raster":if(l=l.concat(o({key:n,value:e,valueSpec:a.source_tile,style:t.style,styleSpec:a})),"url"in e)for(var c in e)["type","url","tileSize"].indexOf(c)<0&&l.push(new r(n+"."+c,e[c],'a source with a "url" property may not include a "%s" property',c));return l;case"geojson":return o({key:n,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a});case"video":return o({key:n,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return o({key:n,value:e,valueSpec:a.source_image,style:u,styleSpec:a});case"canvas":return o({key:n,value:e,valueSpec:a.source_canvas,style:u,styleSpec:a});default:return s({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:u,styleSpec:a})}}},{"../error/validation_error":109,"../util/unbundle_jsonlint":130,"./validate_enum":136,"./validate_object":144}],148:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"string"!==o?[new i(n,e,"string expected, %s found",o)]:[]}},{"../error/validation_error":109,"../util/get_type":126}],149:[function(t,e,n){"use strict";function r(t,e){var n=[];return n=n.concat(a({key:"",value:t,valueSpec:(e=e||u).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.$version>7&&t.constants&&(n=n.concat(s({key:"constants",value:t.constants,style:t,styleSpec:e}))),i(n)}function i(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return i(t.apply(this,arguments))}}var s=t("./validate/validate_constants"),a=t("./validate/validate"),u=t("./reference/latest"),l=t("./validate/validate_glyphs_url");r.source=o(t("./validate/validate_source")),r.light=o(t("./validate/validate_light")),r.layer=o(t("./validate/validate_layer")),r.filter=o(t("./validate/validate_filter")),r.paintProperty=o(t("./validate/validate_paint_property")),r.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=r},{"./reference/latest":123,"./validate/validate":131,"./validate/validate_constants":135,"./validate/validate_filter":137,"./validate/validate_glyphs_url":139,"./validate/validate_layer":140,"./validate/validate_layout_property":141,"./validate/validate_light":142,"./validate/validate_paint_property":145,"./validate/validate_source":147}],150:[function(t,e,n){"use strict";var r=function(){this.n=0,this.times=[]};r.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},r.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})},e.exports=r},{}],151:[function(t,e,n){"use strict";var r=t("../style-spec/reference/latest"),i=t("../util/util"),o=t("../util/evented"),s=t("./validate_style"),a=t("./style_declaration"),u=t("./style_transition"),l=["anchor","color","position","intensity"],c=r.light,h=function(t){function e(e){t.call(this),this.set(e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(!this._validate(s.light,t)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},t=i.extend({anchor:c.anchor.default,color:c.color.default,position:c.position.default,intensity:c.intensity.default},t);for(var e=0,n=l;e<n.length;e+=1){var r=n[e];this._declarations[r]=new a(c[r],t[r])}return this}},e.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},e.prototype.getLightProperty=function(t){return i.endsWith(t,"-transition")?this._transitionOptions[t]:this._declarations[t]&&this._declarations[t].value},e.prototype.getLightValue=function(t,e){if("position"===t){var n=this._transitions[t].calculate(e),r=i.sphericalToCartesian(n);return{x:r[0],y:r[1],z:r[2]}}return this._transitions[t].calculate(e)},e.prototype.setLight=function(t){var e=this;if(!this._validate(s.light,t))for(var n in t){var r=t[n];i.endsWith(n,"-transition")?e._transitionOptions[n]=r:null==r?delete e._declarations[n]:e._declarations[n]=new a(c[n],r)}},e.prototype.recalculate=function(t){var e=this;for(var n in e._declarations)e.calculated[n]=e.getLightValue(n,{zoom:t})},e.prototype._applyLightDeclaration=function(t,e,n,r,o){var s=n.transition?this._transitions[t]:void 0,l=c[t];if(null!=e||(e=new a(l,l.default)),!s||s.declaration.json!==e.json){var h=i.extend({duration:300,delay:0},r,this.getLightProperty(t+"-transition")),p=this._transitions[t]=new u(l,e,s,h);p.instant()||(p.loopID=o.set(p.endTime-Date.now())),s&&o.cancel(s.loopID)}},e.prototype.updateLightTransitions=function(t,e,n){var r,i=this;for(r in i._declarations)i._applyLightDeclaration(r,i._declarations[r],t,e,n)},e.prototype._validate=function(t,e){return s.emitErrors(this,t.call(s,i.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:r})))},e}(o);e.exports=h},{"../style-spec/reference/latest":123,"../util/evented":210,"../util/util":223,"./style_declaration":157,"./style_transition":165,"./validate_style":166}],152:[function(t,e,n){"use strict";var r=t("../util/mapbox").normalizeGlyphsURL,i=t("../util/ajax"),o=t("./parse_glyph_pbf");e.exports=function(t,e,n,s,a){var u=256*e,l=u+255,c=s(r(n).replace("{fontstack}",t).replace("{range}",u+"-"+l),i.ResourceType.Glyphs);i.getArrayBuffer(c,function(t,e){if(t)a(t);else if(e){for(var n={},r=0,i=o(e.data);r<i.length;r+=1){var s=i[r];n[s.id]=s}a(null,n)}})}},{"../util/ajax":201,"../util/mapbox":217,"./parse_glyph_pbf":154}],153:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/browser"),o=t("../util/mapbox").normalizeSpriteURL,s=t("../util/image").RGBAImage;e.exports=function(t,e,n){function a(){if(c)n(c);else if(u&&l){var t=i.getImageData(l),e={};for(var r in u){var o=u[r],a=o.width,h=o.height,p=o.x,f=o.y,d=o.sdf,g=o.pixelRatio,y=s.create({width:a,height:h});s.copy(t,y,{x:p,y:f},{x:0,y:0},{width:a,height:h}),e[r]={data:y,pixelRatio:g,sdf:d}}n(null,e)}}if(t){var u,l,c,h=i.devicePixelRatio>1?"@2x":"";r.getJSON(e(o(t,h,".json"),r.ResourceType.SpriteJSON),function(t,e){c||(c=t,u=e,a())}),r.getImage(e(o(t,h,".png"),r.ResourceType.SpriteImage),function(t,e){c||(c=t,l=e,a())})}else n(null,{})}},{"../util/ajax":201,"../util/browser":202,"../util/image":213,"../util/mapbox":217}],154:[function(t,e,n){"use strict";function r(t,e,n){1===t&&n.readMessage(i,e)}function i(t,e,n){if(3===t){var r=n.readMessage(o,{}),i=r.width,a=r.height,l=r.left,c=r.top,h=r.advance;e.push({id:r.id,bitmap:s.create({width:i+2*u,height:a+2*u},r.bitmap),metrics:{width:i,height:a,left:l,top:c,advance:h}})}}function o(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var s=t("../util/image").AlphaImage,a=t("pbf"),u=3;e.exports=function(t){return new a(t).readFields(r,[])},e.exports.GLYPH_PBF_BORDER=u},{"../util/image":213,pbf:29}],155:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry");e.exports={getMaximumPaintValue:function(t,e,n){return e.isPaintValueFeatureConstant(t)?e.paint[t]:n.programConfigurations.get(e.id).paintPropertyStatistics[t].max},translateDistance:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},translate:function(t,e,n,i,o){if(!e[0]&&!e[1])return t;var s=r.convert(e);"viewport"===n&&s._rotate(-i);for(var a=[],u=0;u<t.length;u++){for(var l=t[u],c=[],h=0;h<l.length;h++)c.push(l[h].sub(s._mult(o)));a.push(c)}return a}}},{"@mapbox/point-geometry":2}],156:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("./style_layer"),o=t("./load_sprite"),s=t("../render/image_manager"),a=t("../render/glyph_manager"),u=t("./light"),l=t("../render/line_atlas"),c=t("../util/util"),h=t("../util/ajax"),p=t("../util/mapbox"),f=t("../util/browser"),d=t("../util/dispatcher"),g=t("./animation_loop"),y=t("./validate_style"),m=t("../source/source").getType,_=t("../source/source").setType,v=t("../source/query_features"),x=t("../source/source_cache"),b=t("../style-spec/reference/latest"),w=t("../style-spec/function"),E=t("../util/global_worker_pool"),C=t("../style-spec/deref"),I=t("../style-spec/diff"),S=t("../source/rtl_text_plugin"),T=c.pick(I.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),M=c.pick(I.operations,["setCenter","setZoom","setBearing","setPitch"]),A=function(t){function e(e,n,r){var i=this;t.call(this),r=c.extend({validate:"string"!=typeof e||!p.isMapboxURL(e)},r);var u=function(t,e){return i.map?i.map._transformRequest(t,e):{url:t}};this.map=n,this.animationLoop=n&&n.animationLoop||new g,this.dispatcher=new d(E(),this),this.imageManager=new s,this.glyphManager=new a(u,r.localIdeographFontFamily),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll(["_redoPlacement"],this),this._resetUpdates(),this.setEventedParent(n),this.fire("dataloading",{dataType:"style"});var m=this;this._rtlTextPluginCallback=S.registerForPluginAvailability(function(t){for(var e in m.dispatcher.broadcast("loadRTLTextPlugin",t.pluginBlobURL,t.errorCallback),m.sourceCaches)m.sourceCaches[e].reload()});var _=function(t,e){if(t)i.fire("error",{error:t});else if(e){if(r.validate&&y.emitErrors(i,y(e)))return;for(var n in i._loaded=!0,i.stylesheet=e,i.updateClasses(),e.sources)i.addSource(n,e.sources[n],r);o(e.sprite,u,function(t,e){if(t)i.fire("error",t);else if(e)for(var n in e)i.imageManager.addImage(n,e[n]);i.imageManager.setLoaded(!0)}),i.glyphManager.setURL(e.glyphs),i._resolve(),i.fire("data",{dataType:"style"}),i.fire("style.load")}};"string"==typeof e?h.getJSON(u(p.normalizeStyleURL(e),h.ResourceType.Style),_):f.frame(function(){return _(null,e)}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var o=i._layers[r];o.source===n.id&&i._validateLayer(o)}}}})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var n=t.sourceLayer;if(n){var r=e.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"')})}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._resolve=function(){var t=C(this.stylesheet.layers);this._order=t.map(function(t){return t.id}),this._layers={};for(var e=0,n=t;e<n.length;e+=1){var r=n[e];(r=i.create(r)).setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=r}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light)},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype._applyClasses=function(t,e){var n=this;if(this._loaded){t=t||[],e=e||{transition:!0};var r=this.stylesheet.transition||{},i=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in i){var s=n._updatedPaintProps[o];if(n._updatedAllPaintProps||s.all)n._layers[o].updatePaintTransitions(t,e,r,n.animationLoop,n.zoomHistory);else for(var a in s)n._layers[o].updatePaintTransition(a,t,e,r,n.animationLoop,n.zoomHistory)}this.light.updateLightTransitions(e,r,this.animationLoop)}},e.prototype._recalculate=function(t){var e=this;if(this._loaded){for(var n in e.sourceCaches)e.sourceCaches[n].used=!1;this._updateZoomHistory(t);for(var r=0,i=e._order;r<i.length;r+=1){var o=e._layers[i[r]];o.recalculate(t),!o.isHidden(t)&&o.source&&(e.sourceCaches[o.source].used=!0)}this.light.recalculate(t),Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(300),this.z=t}},e.prototype._updateZoomHistory=function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t,e){var n=this;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(r,i),n._updatedSources){var s=n._updatedSources[o];"reload"===s?n._reloadSource(o):"clear"===s&&n._clearSource(o)}this._applyClasses(t,e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},e.prototype._updateWorkerLayers=function(t,e){var n=this,r=this._updatedSymbolOrder?this._order.filter(function(t){return"symbol"===n._layers[t].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e,symbolOrder:r})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),y.emitErrors(this,y(t)))return!1;(t=c.clone(t)).layers=C(t.layers);var n=I(this.serialize(),t).filter(function(t){return!(t.command in M)});if(0===n.length)return!1;var r=n.filter(function(t){return!(t.command in T)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.imageManager.getImage(t))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(t,e),this.fire("data",{dataType:"style"})},e.prototype.removeImage=function(t){if(!this.imageManager.getImage(t))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(t),this.fire("data",{dataType:"style"})},e.prototype.addSource=function(t,e,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(e.type)>=0&&this._validate(y.source,"sources."+t,e,null,n))){var i=this.sourceCaches[t]=new x(t,e,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:t}}),i.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");var e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:t}),e.setEventedParent(null),e.clearTiles(),e.onRemove&&e.onRemove(this.map),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var r=t.id;if("object"==typeof t.source&&(this.addSource(r,t.source),t=c.clone(t),t=c.extend(t,{source:r})),!this._validate(y.layer,"layers."+r,t,{arrayIndex:-1},n)){var o=i.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var s=e?this._order.indexOf(e):this._order.length;if(this._order.splice(s,0,r),this._layers[r]=o,this._removedLayers[r]&&o.source){var a=this._removedLayers[r];delete this._removedLayers[r],a.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),"symbol"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(r)}},e.prototype.moveLayer=function(t,e){this._checkLoaded(),this._changed=!0;var n=this._layers[t];if(n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=e?this._order.indexOf(e):this._order.length;this._order.splice(i,0,t),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()))}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")})},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),"symbol"===e.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")})},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===n||(null!=e&&(r.minzoom=e),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);n?null!=e&&this._validate(y.filter,"layers."+n.id+".filter",e)||c.deepEqual(n.filter,e)||(n.filter=c.clone(e),this._updateLayer(n)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?c.deepEqual(r.getLayoutProperty(e),n)||(r.setLayoutProperty(e,n),this._updateLayer(r)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n,r){this._checkLoaded();var i=this.getLayer(t);if(i){if(!c.deepEqual(i.getPaintProperty(e,r),n)){var o=i.isPaintValueFeatureConstant(e);i.setPaintProperty(e,n,r),!(n&&w.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property)&&o||this._updateLayer(i),this.updateClasses(t,e)}}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getPaintProperty=function(t,e,n){return this.getLayer(t).getPaintProperty(e,n)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.updateClasses=function(t,e){if(this._changed=!0,t){var n=this._updatedPaintProps;n[t]||(n[t]={}),n[t][e||"all"]=!0}else this._updatedAllPaintProps=!0},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=t;i<o.length;i+=1){var s=o[i][r];if(s)for(var a=0,u=s;a<u.length;a+=1)e.push(u[a])}return e},e.prototype.queryRenderedFeatures=function(t,e,n,r){var i=this;e&&e.filter&&this._validate(y.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var s=0,a=e.layers;s<a.length;s+=1){var u=a[s],l=i._layers[u];if(!l)return i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];o[l.source]=!0}}var c=[];for(var h in i.sourceCaches)if(!e.layers||o[h]){var p=v.rendered(i.sourceCaches[h],i._layers,t,e,n,r);c.push(p)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(y.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?v.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return m(t)?n(new Error('A source type called "'+t+'" already exists.')):(_(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in t)if(!c.deepEqual(t[i],n[i])){r=!0;break}if(r){var o=this.stylesheet.transition||{};this.light.setLight(t),this.light.updateLightTransitions(e||{transition:!0},o,this.animationLoop)}},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&y.emitErrors(this,t.call(y,c.extend({key:e,style:this.serialize(),value:n,styleSpec:b},r)))},e.prototype._remove=function(){for(var t in S.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._redoPlacement=function(){for(var t in this.sourceCaches)this.sourceCaches[t].redoPlacement()},e.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},e.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},e}(r);e.exports=A},{"../render/glyph_manager":75,"../render/image_manager":77,"../render/line_atlas":78,"../source/query_features":94,"../source/rtl_text_plugin":96,"../source/source":97,"../source/source_cache":98,"../style-spec/deref":107,"../style-spec/diff":108,"../style-spec/function":112,"../style-spec/reference/latest":123,"../util/ajax":201,"../util/browser":202,"../util/dispatcher":208,"../util/evented":210,"../util/global_worker_pool":212,"../util/mapbox":217,"../util/util":223,"./animation_loop":150,"./light":151,"./load_sprite":153,"./style_layer":158,"./validate_style":166}],157:[function(t,e,n){"use strict";var r=t("../style-spec/function"),i=t("../util/util"),o=function(t,e){var n=this;if(this.value=i.clone(e),this.isFunction=r.isFunctionDefinition(e),this.json=JSON.stringify(this.value),this.minimum=t.minimum,this.function=r(this.value,t),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,this.isFeatureConstant||this.isZoomConstant){if(!this.isZoomConstant){this.stopZoomLevels=[];for(var o=0,s=n.value.stops;o<s.length;o+=1){var a=s[o];n.stopZoomLevels.indexOf(a[0])<0&&n.stopZoomLevels.push(a[0])}}}else{this.stopZoomLevels=[];for(var u=[],l=0,c=n.value.stops;l<c.length;l+=1){var h=c[l][0].zoom;n.stopZoomLevels.indexOf(h)<0&&(n.stopZoomLevels.push(h),u.push([h,u.length]))}this._functionInterpolationT=r({type:"exponential",stops:u,base:e.base},{type:"number"})}};o.prototype.calculate=function(t,e){var n=this.function(t&&t.zoom,e||{});return void 0!==this.minimum&&n<this.minimum?this.minimum:n},o.prototype.calculateInterpolationT=function(t){return this.isFeatureConstant||this.isZoomConstant?0:this._functionInterpolationT(t&&t.zoom,{})},e.exports=o},{"../style-spec/function":112,"../util/util":223}],158:[function(t,e,n){"use strict";function r(t){return t.value}var i=t("../util/util"),o=t("./style_transition"),s=t("./style_declaration"),a=t("../style-spec/reference/latest"),u=t("./validate_style"),l=t("./../style-spec/util/parse_color"),c=function(t){function e(e){var n=this;t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this.paint={},this.layout={},this._paintSpecifications=a["paint_"+this.type],this._layoutSpecifications=a["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var r,i,o={validate:!1};for(var s in e){var u=s.match(/^paint(?:\.(.*))?$/);if(u){var l=u[1]||"";for(r in e[s])n.setPaintProperty(r,e[s][r],l,o)}}for(i in e.layout)n.setLayoutProperty(i,e.layout[i],o);for(r in n._paintSpecifications)n.paint[r]=n.getPaintValue(r);for(i in n._layoutSpecifications)n._updateLayoutValue(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setLayoutProperty=function(t,e,n){if(null==e)delete this._layoutDeclarations[t];else{if(this._validate(u.layoutProperty,"layers."+this.id+".layout."+t,t,e,n))return;this._layoutDeclarations[t]=new s(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},e.prototype.getLayoutProperty=function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},e.prototype.getLayoutValue=function(t,e,n){var r=this._layoutSpecifications[t],i=this._layoutDeclarations[t];return i?i.calculate(e,n):r.default},e.prototype.setPaintProperty=function(t,e,n,r){var o="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+t;if(i.endsWith(t,"-transition"))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null==e)delete this._paintTransitionOptions[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,r))return;this._paintTransitionOptions[n||""][t]=e}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null==e)delete this._paintDeclarations[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,r))return;this._paintDeclarations[n||""][t]=new s(this._paintSpecifications[t],e)}},e.prototype.getPaintProperty=function(t,e){return e=e||"",i.endsWith(t,"-transition")?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},e.prototype.getPaintValue=function(t,e,n){var r=this._paintSpecifications[t],i=this._paintTransitions[t];return i?i.calculate(e,n):"color"===r.type&&r.default?l(r.default):r.default},e.prototype.getPaintValueStopZoomLevels=function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},e.prototype.getLayoutValueStopZoomLevels=function(t){var e=this._layoutDeclarations[t];return e?e.stopZoomLevels:[]},e.prototype.getPaintInterpolationT=function(t,e){return this._paintTransitions[t].declaration.calculateInterpolationT(e)},e.prototype.getLayoutInterpolationT=function(t,e){return this._layoutDeclarations[t].calculateInterpolationT(e)},e.prototype.isPaintValueFeatureConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},e.prototype.isLayoutValueFeatureConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isFeatureConstant},e.prototype.isPaintValueZoomConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},e.prototype.isLayoutValueZoomConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isZoomConstant},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.layout.visibility},e.prototype.updatePaintTransitions=function(t,e,n,r,o){for(var s=this,a=i.extend({},this._paintDeclarations[""]),u=0;u<t.length;u++)i.extend(a,s._paintDeclarations[t[u]]);var l;for(l in a)s._applyPaintDeclaration(l,a[l],e,n,r,o);for(l in s._paintTransitions)l in a||s._applyPaintDeclaration(l,null,e,n,r,o)},e.prototype.updatePaintTransition=function(t,e,n,r,i,o){for(var s=this._paintDeclarations[""][t],a=0;a<e.length;a++){var u=this._paintDeclarations[e[a]];u&&u[t]&&(s=u[t])}this._applyPaintDeclaration(t,s,n,r,i,o)},e.prototype.recalculate=function(t){var e=this;for(var n in e._paintTransitions)e.paint[n]=e.getPaintValue(n,{zoom:t});for(var r in e._layoutFunctions)e.layout[r]=e.getLayoutValue(r,{zoom:t})},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:i.mapObject(this._layoutDeclarations,r)};for(var e in this._paintDeclarations)t[""===e?"paint":"paint."+e]=i.mapObject(this._paintDeclarations[e],r);return i.filterObject(t,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)})},e.prototype._applyPaintDeclaration=function(t,e,n,r,a,u){var l=n.transition?this._paintTransitions[t]:void 0,c=this._paintSpecifications[t];if(null!=e||(e=new s(c,c.default)),!l||l.declaration.json!==e.json){var h=i.extend({duration:300,delay:0},r,this.getPaintProperty(t+"-transition")),p=this._paintTransitions[t]=new o(c,e,l,h,u);p.instant()||(p.loopID=a.set(p.endTime-Date.now())),l&&a.cancel(l.loopID)}},e.prototype._updateLayoutValue=function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&u.emitErrors(this,t.call(u,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:a,style:{glyphs:!0,sprite:!0}}))},e.prototype.has3DPass=function(){return!1},e}(t("../util/evented"));e.exports=c;var h={circle:t("./style_layer/circle_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer"),background:c,raster:c};c.create=function(t){return new h[t.type](t)}},{"../style-spec/reference/latest":123,"../util/evented":210,"../util/util":223,"./../style-spec/util/parse_color":128,"./style_declaration":157,"./style_layer/circle_style_layer":159,"./style_layer/fill_extrusion_style_layer":160,"./style_layer/fill_style_layer":161,"./style_layer/line_style_layer":162,"./style_layer/symbol_style_layer":163,"./style_transition":165,"./validate_style":166}],159:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/circle_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiPoint,s=t("../query_utils"),a=s.getMaximumPaintValue,u=s.translateDistance,l=s.translate,c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(t){return a("circle-radius",this,t)+u(this.paint["circle-translate"])},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,s){var a=l(t,this.getPaintValue("circle-translate",{zoom:r},e.properties),this.getPaintValue("circle-translate-anchor",{zoom:r},e.properties),i,s),u=this.getPaintValue("circle-radius",{zoom:r},e.properties)*s;return o(a,n,u)},e}(r);e.exports=c},{"../../data/bucket/circle_bucket":43,"../../util/intersection_tests":214,"../query_utils":155,"../style_layer":158}],160:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_extrusion_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,s=t("../query_utils"),a=s.translateDistance,u=s.translate,l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=t.prototype.getPaintValue.call(this,e,n,r);return"fill-extrusion-color"===e&&i&&(i[3]=1),i},e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(){return a(this.paint["fill-extrusion-translate"])},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,s){var a=u(t,this.getPaintValue("fill-extrusion-translate",{zoom:r},e.properties),this.getPaintValue("fill-extrusion-translate-anchor",{zoom:r},e.properties),i,s);return o(a,n)},e.prototype.has3DPass=function(){return 0!==this.paint["fill-extrusion-opacity"]&&"none"!==this.layout.visibility},e}(r);e.exports=l},{"../../data/bucket/fill_extrusion_bucket":45,"../../util/intersection_tests":214,"../query_utils":155,"../style_layer":158}],161:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,s=t("../query_utils"),a=s.translateDistance,u=s.translate,l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getPaintValue=function(e,n,r){if("fill-outline-color"===e){if(void 0===this.getPaintProperty("fill-outline-color"))return t.prototype.getPaintValue.call(this,"fill-color",n,r);for(var i=this._paintTransitions["fill-outline-color"];i;){if(!(i&&i.declaration&&i.declaration.value))return t.prototype.getPaintValue.call(this,"fill-color",n,r);i=i.oldTransition}}return t.prototype.getPaintValue.call(this,e,n,r)},e.prototype.getPaintValueStopZoomLevels=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):t.prototype.getPaintValueStopZoomLevels.call(this,e)},e.prototype.getPaintInterpolationT=function(e,n){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintInterpolationT.call(this,"fill-color",n):t.prototype.getPaintInterpolationT.call(this,e,n)},e.prototype.isPaintValueFeatureConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):t.prototype.isPaintValueFeatureConstant.call(this,e)},e.prototype.isPaintValueZoomConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueZoomConstant.call(this,"fill-color"):t.prototype.isPaintValueZoomConstant.call(this,e)},e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(){return a(this.paint["fill-translate"])},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,s){var a=u(t,this.getPaintValue("fill-translate",{zoom:r},e.properties),this.getPaintValue("fill-translate-anchor",{zoom:r},e.properties),i,s);return o(a,n)},e}(r);e.exports=l},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":214,"../query_utils":155,"../style_layer":158}],162:[function(t,e,n){"use strict";function r(t,e){return e>0?e+2*t:t}var i=t("@mapbox/point-geometry"),o=t("../style_layer"),s=t("../../data/bucket/line_bucket"),a=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiLine,u=t("../query_utils"),l=u.getMaximumPaintValue,c=u.translateDistance,h=u.translate,p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new s(t)},e.prototype.queryRadius=function(t){var e=t,n=r(l("line-width",this,e),l("line-gap-width",this,e)),i=l("line-offset",this,e);return n/2+Math.abs(i)+c(this.paint["line-translate"])},e.prototype.queryIntersectsFeature=function(t,e,n,o,s,u){var l=h(t,this.getPaintValue("line-translate",{zoom:o},e.properties),this.getPaintValue("line-translate-anchor",{zoom:o},e.properties),s,u),c=u/2*r(this.getPaintValue("line-width",{zoom:o},e.properties),this.getPaintValue("line-gap-width",{zoom:o},e.properties)),p=this.getPaintValue("line-offset",{zoom:o},e.properties);return p&&(n=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var s=t[o],a=[],u=0;u<s.length;u++){var l=s[u],c=s[u+1],h=0===u?r:l.sub(s[u-1])._unit()._perp(),p=u===s.length-1?r:c.sub(l)._unit()._perp(),f=h._add(p)._unit();f._mult(1/(f.x*p.x+f.y*p.y)),a.push(f._mult(e)._add(l))}n.push(a)}return n}(n,p*u)),a(l,n,c)},e}(o);e.exports=p},{"../../data/bucket/line_bucket":46,"../../util/intersection_tests":214,"../query_utils":155,"../style_layer":158,"@mapbox/point-geometry":2}],163:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/symbol_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLayoutValue=function(e,n,r){var i=t.prototype.getLayoutValue.call(this,e,n,r);if("auto"!==i)return i;switch(e){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,r)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,r);case"icon-pitch-alignment":return this.getLayoutValue("icon-rotation-alignment",n,r);default:return i}},e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(r);e.exports=o},{"../../data/bucket/symbol_bucket":47,"../style_layer":158}],164:[function(t,e,n){"use strict";var r=t("./style_layer"),i=t("../util/util"),o=t("../style-spec/feature_filter"),s=t("../style-spec/group_by_layout"),a=function(t){t&&this.replace(t)};a.prototype.replace=function(t){this.symbolOrder=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];"symbol"===r.type&&this.symbolOrder.push(r.id)}this._layerConfigs={},this._layers={},this.update(t,[])},a.prototype.update=function(t,e,n){for(var a=this,u=0,l=t;u<l.length;u+=1){var c=l[u];a._layerConfigs[c.id]=c;var h=a._layers[c.id]=r.create(c);h.updatePaintTransitions({},{transition:!1}),h.filter=o(h.filter)}for(var p=0,f=e;p<f.length;p+=1){var d=f[p];delete a._layerConfigs[d],delete a._layers[d]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var g=0,y=s(i.values(this._layerConfigs));g<y.length;g+=1){var m=y[g].map(function(t){return a._layers[t.id]}),_=m[0];if(!_.layout||"none"!==_.layout.visibility){var v=_.source||"",x=a.familiesBySource[v];x||(x=a.familiesBySource[v]={});var b=_.sourceLayer||"_geojsonTileLayer",w=x[b];w||(w=x[b]=[]),w.push(m)}}},e.exports=a},{"../style-spec/feature_filter":110,"../style-spec/group_by_layout":113,"../util/util":223,"./style_layer":158}],165:[function(t,e,n){"use strict";function r(t,e,n){if(void 0!==t&&void 0!==e)return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:n}}var i=t("../util/util"),o=t("../style-spec/util/interpolate"),s={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},a=function(t,e,n,i,a){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=i.duration||0,this.delay=i.delay||0,this.zoomTransitioned="piecewise-constant"===t.function&&t.transition,this.interp=this.zoomTransitioned?r:o[t.type],this.zoomHistory=a||s,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};a.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},a.prototype.calculate=function(t,e,n){var r=this._calculateTargetValue(t,e);if(this.instant())return r;if((n=n||Date.now())>=this.endTime)return r;var o=this.oldTransition.calculate(t,e,this.startTime),s=i.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(o,r,s)},a.prototype._calculateTargetValue=function(t,e){if(!this.zoomTransitioned)return this.declaration.calculate(t,e);var n=t.zoom,r=this.zoomHistory.lastIntegerZoom,i=n>r?2:.5,s=this.declaration.calculate({zoom:n>r?n-1:n+1},e),a=this.declaration.calculate({zoom:n},e),u=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),l=Math.abs(n-r),c=o(u,1,l);return void 0!==s&&void 0!==a?{from:s,fromScale:i,to:a,toScale:1,t:c}:void 0},e.exports=a},{"../style-spec/util/interpolate":127,"../util/util":223}],166:[function(t,e,n){"use strict";e.exports=t("../style-spec/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0,r=e;n<r.length;n+=1)t.fire("error",{error:new Error(r[n].message)});return!0}return!1}},{"../style-spec/validate_style.min":149}],167:[function(t,e,n){"use strict";var r=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(t("@mapbox/point-geometry"));e.exports=r},{"@mapbox/point-geometry":2}],168:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,s=e.segment+1,a=0;a>-n/2;){if(--s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;for(var u=[],l=0;a<n/2;){var c=t[s],h=t[s+1];if(!h)return!1;var p=t[s-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:a,angleDelta:p}),l+=p;a-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;s++,a+=c.dist(h)}return!0}},{}],169:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry");e.exports=function(t,e,n,i,o){for(var s=[],a=0;a<t.length;a++)for(var u=t[a],l=void 0,c=0;c<u.length-1;c++){var h=u[c],p=u[c+1];h.x<e&&p.x<e||(h.x<e?h=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<e&&(p=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<n&&p.y<n||(h.y<n?h=new r(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round():p.y<n&&(p=new r(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round()),h.x>=i&&p.x>=i||(h.x>=i?h=new r(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=i&&(p=new r(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round():p.y>=o&&(p=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round()),l&&h.equals(l[l.length-1])||s.push(l=[h]),l.push(p)))))}return s}},{"@mapbox/point-geometry":2}],170:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=t("@mapbox/point-geometry"),o=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"offsetX"},{type:"Int16",name:"offsetY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"unadjustedMaxScale"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new i(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":220,"@mapbox/point-geometry":2}],171:[function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,s,a,u,l,c){var h=s.top*a-u,p=s.bottom*a+u,f=s.left*a-u,d=s.right*a+u;if(this.boxStartIndex=t.length,l){var g=p-h,y=d-f;if(g>0)if(g=Math.max(10*a,g),c){var m=e[n.segment+1].sub(e[n.segment])._unit()._mult(y),_=[n.sub(m),n.add(m)];this._addLineCollisionBoxes(t,_,n,0,y,g,r,i,o)}else this._addLineCollisionBoxes(t,e,n,n.segment,y,g,r,i,o)}else t.emplaceBack(n.x,n.y,0,0,f,h,d,p,1/0,1/0,r,i,o,0,0,0,0,0);this.boxEndIndex=t.length};r.prototype._addLineCollisionBoxes=function(t,e,n,r,i,o,s,a,u){var l=o/2,c=Math.floor(i/l),h=Math.floor(c/2),p=-o/2,f=n,d=r+1,g=p,y=-i/2,m=y-i/8;do{if(--d<0){if(g>y)return;d=0;break}g-=e[d].dist(f),f=e[d]}while(g>m);for(var _=e[d].dist(e[d+1]),v=-h;v<c+h;v++){var x=v*l,b=y+x;if(x<0&&(b+=x),x>i&&(b+=x-i),!(b<g)){for(;g+_<b;){if(g+=_,++d+1>=e.length)return;_=e[d].dist(e[d+1])}var w=b-g,E=e[d],C=e[d+1].sub(E)._unit()._mult(w)._add(E)._round(),I=i/2/Math.max(Math.abs(b-p)-l/2,0);(v<0||v>=c)&&(I=Math.min(I,.99)),t.emplaceBack(C.x,C.y,C.x-n.x,C.y-n.y,-o/2,-o/2,o/2,o/2,I,I,s,a,u,0,0,0,0,0)}}},e.exports=r},{}],172:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry"),i=t("../data/extent"),o=t("grid-index"),s=t("../util/intersection_tests"),a=function(t,e,n,r,s,a,u){void 0===a&&(a=new o(i,12,6)),void 0===u&&(u=new o(i,12,0)),this.angle=t,this.pitch=e,this.cameraToCenterDistance=n,this.cameraToTileDistance=r,this.grid=a,this.ignoredGrid=u,this.perspectiveRatio=1+.5*(r/n-1),this.minScale=.5/this.perspectiveRatio,this.maxScale=2/this.perspectiveRatio;var l=Math.sin(this.angle),c=Math.cos(this.angle);this.rotationMatrix=[c,-l,l,c],this.reverseRotationMatrix=[c,l,-l,c],this.yStretch=Math.max(1,r/(n*Math.cos(e/180*Math.PI))),this.collisionBoxArray=s,0===s.length&&(s.emplaceBack(),s.emplaceBack(0,0,0,0,0,-i,0,i,1/0,1/0,0,0,0,0,0,0,0,0,0),s.emplaceBack(i,0,0,0,0,-i,0,i,1/0,1/0,0,0,0,0,0,0,0,0,0),s.emplaceBack(0,0,0,0,-i,0,i,0,1/0,1/0,0,0,0,0,0,0,0,0,0),s.emplaceBack(0,i,0,0,-i,0,i,0,1/0,1/0,0,0,0,0,0,0,0,0,0)),this.tempCollisionBox=s.get(0),this.edges=[s.get(1),s.get(2),s.get(3),s.get(4)]};a.deserialize=function(t,e){return new a(t.angle,t.pitch,t.cameraToCenterDistance,t.cameraToTileDistance,e,new o(t.grid),new o(t.ignoredGrid))},a.prototype.serialize=function(t){var e=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return t&&(t.push(e),t.push(n)),{angle:this.angle,pitch:this.pitch,cameraToCenterDistance:this.cameraToCenterDistance,cameraToTileDistance:this.cameraToTileDistance,grid:e,ignoredGrid:n}},a.prototype.placeCollisionFeature=function(t,e,n){for(var i=this,o=this.collisionBoxArray,s=this.minScale,a=this.rotationMatrix,u=this.yStretch,l=t.boxStartIndex;l<t.boxEndIndex;l++){var c=o.get(l),h=c.anchorPoint._matMult(a),p=h.x,f=h.y,d=p+c.x1*i.perspectiveRatio,g=f+c.y1*u*i.perspectiveRatio,y=p+c.x2*i.perspectiveRatio,m=f+c.y2*u*i.perspectiveRatio;c.bbox0=d,c.bbox1=g,c.bbox2=y,c.bbox3=m;var _=new r(c.offsetX,c.offsetY)._matMult(a),v=_.x*_.x,x=_.y*_.y,b=Math.sqrt((v+x*u*u)/(v+x))||1;if(c.maxScale=c.unadjustedMaxScale*b,!e)for(var w=i.grid.query(d,g,y,m),E=0;E<w.length;E++){var C=o.get(w[E]),I=C.anchorPoint._matMult(a);if((s=i.getPlacementScale(s,h,c,I,C))>=i.maxScale)return s}if(n){var S=void 0;if(i.angle){var T=i.reverseRotationMatrix,M=new r(c.x1,c.y1).matMult(T),A=new r(c.x2,c.y1).matMult(T),P=new r(c.x1,c.y2).matMult(T),L=new r(c.x2,c.y2).matMult(T);(S=i.tempCollisionBox).anchorPointX=c.anchorPoint.x,S.anchorPointY=c.anchorPoint.y,S.x1=Math.min(M.x,A.x,P.x,L.x),S.y1=Math.min(M.y,A.x,P.x,L.x),S.x2=Math.max(M.x,A.x,P.x,L.x),S.y2=Math.max(M.y,A.x,P.x,L.x),S.maxScale=c.maxScale}else S=c;for(var N=0;N<this.edges.length;N++){var R=i.edges[N];if((s=i.getPlacementScale(s,c.anchorPoint,S,R.anchorPoint,R))>=i.maxScale)return s}}}return s},a.prototype.queryRenderedSymbols=function(t,e){var n={},i=[];if(0===t.length||0===this.grid.keys.length&&0===this.ignoredGrid.keys.length)return i;for(var o=this.collisionBoxArray,a=this.rotationMatrix,u=this.yStretch,l=[],c=1/0,h=1/0,p=-1/0,f=-1/0,d=0;d<t.length;d++)for(var g=t[d],y=0;y<g.length;y++){var m=g[y].matMult(a);c=Math.min(c,m.x),h=Math.min(h,m.y),p=Math.max(p,m.x),f=Math.max(f,m.y),l.push(m)}for(var _=this.grid.query(c,h,p,f),v=this.ignoredGrid.query(c,h,p,f),x=0;x<v.length;x++)_.push(v[x]);for(var b=e/this.perspectiveRatio,w=Math.pow(2,Math.ceil(Math.log(b)/Math.LN2*10)/10),E=0;E<_.length;E++){var C=o.get(_[E]),I=C.sourceLayerIndex,S=C.featureIndex;if(void 0===n[I]&&(n[I]={}),!n[I][S]&&!(w<C.placementScale||w>C.maxScale)){var T=C.anchorPoint.matMult(a),M=T.x+C.x1/b,A=T.y+C.y1/b*u,P=T.x+C.x2/b,L=T.y+C.y2/b*u,N=[new r(M,A),new r(P,A),new r(P,L),new r(M,L)];s.polygonIntersectsPolygon(l,N)&&(n[I][S]=!0,i.push(_[E]))}}return i},a.prototype.getPlacementScale=function(t,e,n,r,i){var o=e.x-r.x,s=e.y-r.y,a=(i.x1-n.x2)/o,u=(i.x2-n.x1)/o,l=(i.y1-n.y2)*this.yStretch/s,c=(i.y2-n.y1)*this.yStretch/s;(isNaN(a)||isNaN(u))&&(a=u=1),(isNaN(l)||isNaN(c))&&(l=c=1);var h=Math.min(Math.max(a,u),Math.max(l,c)),p=i.maxScale,f=n.maxScale;return h>p&&(h=p),h>f&&(h=f),h>t&&h>=i.placementScale&&(t=h),t},a.prototype.insertCollisionFeature=function(t,e,n){for(var r=n?this.ignoredGrid:this.grid,i=this.collisionBoxArray,o=t.boxStartIndex;o<t.boxEndIndex;o++){var s=i.get(o);s.placementScale=e,e<this.maxScale&&(1===this.perspectiveRatio||s.maxScale>=1)&&r.insert(o,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},e.exports=a},{"../data/extent":48,"../util/intersection_tests":214,"@mapbox/point-geometry":2,"grid-index":22}],173:[function(t,e,n){"use strict";var r=t("../style-spec/util/interpolate"),i=t("../symbol/anchor"),o=t("./check_max_angle");e.exports=function(t,e,n,s,a,u,l,c,h){var p=s?.6*u*l:0,f=Math.max(s?s.right-s.left:0,a?a.right-a.left:0),d=0===t[0].x||t[0].x===h||0===t[0].y||t[0].y===h;return e-f*l<e/4&&(e=f*l+e/4),function t(e,n,s,a,u,l,c,h,p){for(var f=l/2,d=0,g=0;g<e.length-1;g++)d+=e[g].dist(e[g+1]);for(var y=0,m=n-s,_=[],v=0;v<e.length-1;v++){for(var x=e[v],b=e[v+1],w=x.dist(b),E=b.angleTo(x);m+s<y+w;){var C=((m+=s)-y)/w,I=r(x.x,b.x,C),S=r(x.y,b.y,C);if(I>=0&&I<p&&S>=0&&S<p&&m-f>=0&&m+f<=d){var T=new i(I,S,E,v);T._round(),a&&!o(e,T,l,a,u)||_.push(T)}}y+=w}return h||_.length||c||(_=t(e,y/2,s,a,u,l,c,!0,p)),_}(t,d?e/2*c%e:(f/2+2*u)*l*c%e,e,p,n,f*l,d,!1,h)}},{"../style-spec/util/interpolate":127,"../symbol/anchor":167,"./check_max_angle":168}],174:[function(t,e,n){"use strict";e.exports=function(t){function e(e){a.push(t[e]),u++}function n(t,e,n){var r=s[t];return delete s[t],s[e]=r,a[r].geometry[0].pop(),a[r].geometry[0]=a[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,a[r].geometry[0].shift(),a[r].geometry[0]=n[0].concat(a[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},s={},a=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,p=c.text;if(p){var f=i(p,h),d=i(p,h,!0);if(f in s&&d in o&&s[f]!==o[d]){var g=r(f,d,h),y=n(f,d,a[g].geometry);delete o[f],delete s[d],s[i(p,a[y].geometry,!0)]=y,a[g].geometry=null}else f in s?n(f,d,h):d in o?r(f,d,h):(e(l),o[f]=u-1,s[d]=u-1)}else e(l)}return a.filter(function(t){return t.geometry})}},{}],175:[function(t,e,n){"use strict";function r(t,e){var n=[t.x,t.y,0,1];p.transformMat4(n,n,e);var r=n[3];return{point:new l(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function i(t,e,n,r){var i=t[0]/t[3],o=t[1]/t[3];return i>=-n[0]&&i<=n[0]&&o>=-n[1]&&o<=n[1]&&r.frameHistory.isVisible(e)}function o(t,e,n,i,o,u,c,h,p,f,g,y,m){var _,v=e/24,x=t.lineOffsetX*e,b=t.lineOffsetY*e;if(t.numGlyphs>1){var w=t.glyphStartIndex+t.numGlyphs,E=h.get(t.glyphStartIndex).offsetX,C=h.get(w-1).offsetX,I=t.lineStartIndex,S=t.lineStartIndex+t.lineLength,T=a(v*E,x,b,n,g,y,t.segment,I,S,p,u,m);if(!T)return{notEnoughRoom:!0};var M=a(v*C,x,b,n,g,y,t.segment,I,S,p,u,m);if(!M)return{notEnoughRoom:!0};var A=r(T.point,c).point,P=r(M.point,c).point;if(i&&!n&&(t.vertical?A.y<P.y:A.x>P.x))return{needsFlipping:!0};_=[T];for(var L=t.glyphStartIndex+1;L<w-1;L++){var N=h.get(L);_.push(a(v*N.offsetX,x,b,n,g,y,t.segment,I,S,p,u,m))}_.push(M)}else{if(i&&!n){var R=r(y,o).point,O=p.get(t.lineStartIndex+t.segment+1),D=r(O,o),k=D.signedDistanceFromCamera>0?D.point:s(y,new l(O.x,O.y),R,1,o);if(t.vertical?k.y>R.y:k.x<R.x)return{needsFlipping:!0}}var z=a(v*h.get(t.glyphStartIndex).offsetX,x,b,n,g,y,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,p,u,m);if(!z)return{notEnoughRoom:!0};_=[z]}for(var F=t.placementZoom,j=0,B=_;j<B.length;j+=1){var V=B[j];d(f,V.point,V.angle,F)}return{}}function s(t,e,n,i,o){var s=r(t.add(t.sub(e)._unit()),o).point,a=n.sub(s);return n.add(a._mult(i/a.mag()))}function a(t,e,n,i,o,a,u,c,h,p,f,d){var g=i?t-e:t+e,y=g>0?1:-1,m=0;i&&(y*=-1,m=Math.PI),y<0&&(m+=Math.PI);for(var _=y>0?c+u:c+u+1,v=o,x=o,b=0,w=0,E=Math.abs(g);b+w<=E;){if((_+=y)<c||_>=h)return null;if(x=v,void 0===(v=d[_])){var C=r(p.get(_),f);v=C.signedDistanceFromCamera>0?d[_]=C.point:s(0===b?a:new l(p.get(_-y).x,p.get(_-y).y),new l(p.get(_).x,p.get(_).y),x,E-b+1,f)}b+=w,w=x.dist(v)}var I=(E-b)/w,S=v.sub(x),T=S.mult(I)._add(x);return T._add(S._unit()._perp()._mult(n*y)),{point:T,angle:m+Math.atan2(v.y-x.y,v.x-x.x)}}function u(t,e){for(var n=0;n<t;n++)d(e,g,0,25)}var l=t("@mapbox/point-geometry"),c=t("@mapbox/gl-matrix"),h=c.mat4,p=c.vec4,f=t("./symbol_size"),d=t("../data/bucket/symbol_bucket").addDynamicAttributes;e.exports={updateLineLabels:function(t,e,n,s,a,c,h,d,g,y){var m=s?t.textSizeData:t.iconSizeData,_=f.evaluateSizeForZoom(m,n.transform,y,s),v=[256/n.width*2+1,256/n.height*2+1],x=s?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;x.clear();for(var b=t.lineVertexArray,w=s?t.placedGlyphArray:t.placedIconArray,E=0;E<w.length;E++){var C=w.get(E),I=[C.anchorX,C.anchorY,0,1];if(p.transformMat4(I,I,e),i(I,C.placementZoom,v,n)){var S=1+.5*(I[3]/n.transform.cameraToCenterDistance-1),T=f.evaluateSizeForFeature(m,_,C),M=h?T*S:T/S,A=new l(C.anchorX,C.anchorY),P=r(A,a).point,L={},N=o(C,M,!1,d,e,a,c,t.glyphOffsetArray,b,x,P,A,L);(N.notEnoughRoom||N.needsFlipping&&o(C,M,!0,d,e,a,c,t.glyphOffsetArray,b,x,P,A,L).notEnoughRoom)&&u(C.numGlyphs,x)}else u(C.numGlyphs,x)}s?t.text.dynamicLayoutVertexBuffer.updateData(x.serialize()):t.icon.dynamicLayoutVertexBuffer.updateData(x.serialize())},getLabelPlaneMatrix:function(t,e,n,r,i){var o=h.identity(new Float32Array(16));return e?(h.identity(o),h.scale(o,o,[1/i,1/i,1]),n||h.rotateZ(o,o,r.angle)):(h.scale(o,o,[r.width/2,-r.height/2,1]),h.translate(o,o,[1,-1,0]),h.multiply(o,o,t)),o},getGlCoordMatrix:function(t,e,n,r,i){var o=h.identity(new Float32Array(16));return e?(h.multiply(o,o,t),h.scale(o,o,[i,i,1]),n||h.rotateZ(o,o,-r.angle)):(h.scale(o,o,[1,-1,1]),h.translate(o,o,[-1,-1,0]),h.scale(o,o,[2/r.width,2/r.height,1])),o}};var g=new l(-1/0,-1/0)},{"../data/bucket/symbol_bucket":47,"./symbol_size":178,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],176:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry"),i=t("../style/parse_glyph_pbf").GLYPH_PBF_BORDER;e.exports={getIconQuads:function(t,e,n,i,o,s,a){var u,l,c,h,p=e.image,f=n.layout,d=e.top-1/p.pixelRatio,g=e.left-1/p.pixelRatio,y=e.bottom+1/p.pixelRatio,m=e.right+1/p.pixelRatio;if("none"!==f["icon-text-fit"]&&o){var _=m-g,v=y-d,x=f["text-size"]/24,b=o.left*x,w=o.top*x,E=o.right*x-b,C=o.bottom*x-w,I=f["icon-text-fit-padding"][0],S=f["icon-text-fit-padding"][1],T=f["icon-text-fit-padding"][2],M=f["icon-text-fit-padding"][3],A="width"===f["icon-text-fit"]?.5*(C-v):0,P="height"===f["icon-text-fit"]?.5*(E-_):0,L="width"===f["icon-text-fit"]||"both"===f["icon-text-fit"]?E:_,N="height"===f["icon-text-fit"]||"both"===f["icon-text-fit"]?C:v;u=new r(b+P-M,w+A-I),l=new r(b+P+S+L,w+A-I),c=new r(b+P+S+L,w+A+T+N),h=new r(b+P-M,w+A+T+N)}else u=new r(g,d),l=new r(m,d),c=new r(m,y),h=new r(g,y);var R=n.getLayoutValue("icon-rotate",s,a)*Math.PI/180;if(R){var O=Math.sin(R),D=Math.cos(R),k=[D,-O,O,D];u._matMult(k),l._matMult(k),h._matMult(k),c._matMult(k)}return[{tl:u,tr:l,bl:h,br:c,tex:{x:p.textureRect.x-1,y:p.textureRect.y-1,w:p.textureRect.w+2,h:p.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]},getGlyphQuads:function(t,e,n,o,s,a,u){for(var l=n.getLayoutValue("text-rotate",s,a)*Math.PI/180,c=n.getLayoutValue("text-offset",s,a).map(function(t){return 24*t}),h=e.positionedGlyphs,p=[],f=0;f<h.length;f++){var d=h[f],g=u[d.glyph];if(g){var y=g.rect;if(y){var m=i+1,_=g.metrics.advance/2,v=o?[d.x+_,d.y]:[0,0],x=o?[0,0]:[d.x+_+c[0],d.y+c[1]],b=g.metrics.left-m-_+x[0],w=-g.metrics.top-m+x[1],E=b+y.w,C=w+y.h,I=new r(b,w),S=new r(E,w),T=new r(b,C),M=new r(E,C);if(o&&d.vertical){var A=new r(-_,_),P=-Math.PI/2,L=new r(5,0);I._rotateAround(P,A)._add(L),S._rotateAround(P,A)._add(L),T._rotateAround(P,A)._add(L),M._rotateAround(P,A)._add(L)}if(l){var N=Math.sin(l),R=Math.cos(l),O=[R,-N,N,R];I._matMult(O),S._matMult(O),T._matMult(O),M._matMult(O)}p.push({tl:I,tr:S,bl:T,br:M,tex:y,writingMode:e.writingMode,glyphOffset:v})}}}return p}}},{"../style/parse_glyph_pbf":154,"@mapbox/point-geometry":2}],177:[function(t,e,n){"use strict";function r(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function i(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function o(t,e,n,i,o,s){for(var a=null,u=r(e,n,o,s),l=0,c=i;l<c.length;l+=1){var h=c[l],p=r(e-h.x,n,o,s)+h.badness;p<=u&&(a=h,u=p)}return{index:t,x:e,priorBreak:a,badness:u}}function s(t,e,n,r){if(!n)return[];if(!t)return[];for(var s=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length;o++){var s=r[t.charCodeAt(o)];s&&(i+=s.metrics.advance+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),u=0,c=0;c<t.length;c++){var h=t.charCodeAt(c),p=r[h];p&&!f[h]&&(u+=p.metrics.advance+e),c<t.length-1&&(d[h]||l.charAllowsIdeographicBreaking(h))&&s.push(o(c+1,u,a,s,i(h,t.charCodeAt(c+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(o(t.length,u,a,s,0,!0))}function a(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function u(t,e,n,r,i){if(i){var o=e[t[r].glyph];if(o)for(var s=(t[r].x+o.metrics.advance)*i,a=n;a<=r;a++)t[a].x-=s}}var l=t("../util/script_detection"),c=t("../util/verticalize_punctuation"),h=t("../source/rtl_text_plugin"),p={horizontal:1,vertical:2};e.exports={shapeText:function(t,e,n,r,i,o,f,d,g,y){var m=t.trim();y===p.vertical&&(m=c(m));var _=[],v={positionedGlyphs:_,text:m,top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:y},x=h.processBidirectionalText;return function(t,e,n,r,i,o,s,c,h){for(var f=0,d=-17,g=0,y=t.positionedGlyphs,m="right"===o?1:"left"===o?0:.5,_=0,v=n;_<v.length;_+=1){var x=v[_];if((x=x.trim()).length){for(var b=y.length,w=0;w<x.length;w++){var E=x.charCodeAt(w),C=e[E];C&&(l.charHasUprightVerticalOrientation(E)&&s!==p.horizontal?(y.push({glyph:E,x:f,y:0,vertical:!0}),f+=h+c):(y.push({glyph:E,x:f,y:d,vertical:!1}),f+=C.metrics.advance+c))}y.length!==b&&(g=Math.max(f-c,g),u(y,e,b,y.length-1,m)),f=0,d+=r}else d+=r}var I=a(i),S=I.horizontalAlign,T=I.verticalAlign;!function(t,e,n,r,i,o,s){for(var a=(m-S)*g,u=(-T*s+.5)*o,l=0;l<t.length;l++)t[l].x+=a,t[l].y+=u}(y,0,0,0,0,r,n.length);var M=n.length*r;t.top+=-T*M,t.bottom=t.top+M,t.left+=-S*g,t.right=t.left+g}(v,e,x?x(m,s(m,f,n,e)):function(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var s=o[i];n.push(t.substring(r,s)),r=s}return r<t.length&&n.push(t.substring(r,t.length)),n}(m,s(m,f,n,e)),r,i,o,y,f,g),!!_.length&&v},shapeIcon:function(t,e,n){var r=a(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}},WritingMode:p};var f={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},d={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":96,"../util/script_detection":218,"../util/verticalize_punctuation":225}],178:[function(t,e,n){"use strict";var r=t("../style-spec/util/interpolate"),i=t("../style-spec/function").interpolationFactor,o=t("../util/util");e.exports={evaluateSizeForFeature:function(t,e,n){return t.isFeatureConstant?e.uSize:t.isZoomConstant?n.lowerSize/10:r.number(n.lowerSize/10,n.upperSize/10,e.uSizeT)},evaluateSizeForZoom:function(t,e,n,r){var s={};if(t.isZoomConstant||t.isFeatureConstant)if(t.isFeatureConstant&&!t.isZoomConstant){var a;if("interval"===t.functionType)a=n.getLayoutValue(r?"text-size":"icon-size",{zoom:e.zoom});else{var u="interval"===t.functionType?0:i(e.zoom,t.functionBase,t.coveringZoomRange[0],t.coveringZoomRange[1]),l=t.coveringStopValues[0];a=l+(t.coveringStopValues[1]-l)*o.clamp(u,0,1)}s.uSize=a}else t.isFeatureConstant&&t.isZoomConstant&&(s.uSize=t.layoutSize);else{var c=i(e.zoom,t.functionBase,t.coveringZoomRange[0],t.coveringZoomRange[1]);s.uSizeT=o.clamp(c,0,1)}return s}}},{"../style-spec/function":112,"../style-spec/util/interpolate":127,"../util/util":223}],179:[function(t,e,n){"use strict";var r=t("../source/rtl_text_plugin");e.exports=function(t,e,n,i){var o=e.getLayoutValue("text-transform",n,i);return"uppercase"===o?t=t.toLocaleUpperCase():"lowercase"===o&&(t=t.toLocaleLowerCase()),r.applyArabicShaping&&(t=r.applyArabicShaping(t)),t}},{"../source/rtl_text_plugin":96}],180:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("@mapbox/point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(){p=null}function s(e,n){var i=r.mousePos(u,n);return t.fire(e,{lngLat:t.unproject(i),point:i,originalEvent:n})}function a(e,n){var o=r.touchPos(u,n),s=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new i(0,0));return t.fire(e,{lngLat:t.unproject(s),point:s,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var u=t.getCanvasContainer(),l=null,c=!1,h=null,p=null;for(var f in o)t[f]=new o[f](t,e),e.interactive&&e[f]&&t[f].enable(e[f]);u.addEventListener("mouseout",function(t){s("mouseout",t)},!1),u.addEventListener("mousedown",function(e){t.stop(),h=r.mousePos(u,e),s("mousedown",e),c=!0},!1),u.addEventListener("mouseup",function(e){var n=t.dragRotate&&t.dragRotate.isActive();l&&!n&&s("contextmenu",l),l=null,c=!1,s("mouseup",e)},!1),u.addEventListener("mousemove",function(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==u;)n=n.parentNode;n===u&&s("mousemove",e)}},!1),u.addEventListener("touchstart",function(e){t.stop(),a("touchstart",e),!e.touches||e.touches.length>1||(p?(clearTimeout(p),p=null,s("dblclick",e)):p=setTimeout(n,300))},!1),u.addEventListener("touchend",function(t){a("touchend",t)},!1),u.addEventListener("touchmove",function(t){a("touchmove",t)},!1),u.addEventListener("touchcancel",function(t){a("touchcancel",t)},!1),u.addEventListener("click",function(t){r.mousePos(u,t).equals(h)&&s("click",t)},!1),u.addEventListener("dblclick",function(t){s("dblclick",t),t.preventDefault()},!1),u.addEventListener("contextmenu",function(e){var n=t.dragRotate&&t.dragRotate.isActive();c||n?c&&(l=e):s("contextmenu",e),e.preventDefault()},!1)}},{"../util/dom":209,"./handler/box_zoom":189,"./handler/dblclick_zoom":190,"./handler/drag_pan":191,"./handler/drag_rotate":192,"./handler/keyboard":193,"./handler/scroll_zoom":194,"./handler/touch_zoom_rotate":195,"@mapbox/point-geometry":2}],181:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../style-spec/util/interpolate"),o=t("../util/browser"),s=t("../geo/lng_lat"),a=t("../geo/lng_lat_bounds"),u=t("@mapbox/point-geometry"),l=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,n){return t=u.convert(t).mult(-1),this.panTo(this.transform.center,r.extend({offset:t},e),n)},e.prototype.panTo=function(t,e,n){return this.easeTo(r.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(r.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(r.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,r.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){if("number"==typeof(e=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var i=e.padding;e.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(e.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;t=a.convert(t);var o=[e.padding.left-e.padding.right,e.padding.top-e.padding.bottom],s=Math.min(e.padding.right,e.padding.left),l=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+o[0],e.offset[1]+o[1]];var c=u.convert(e.offset),h=this.transform,p=h.project(t.getNorthWest()),f=h.project(t.getSouthEast()),d=f.sub(p),g=(h.width-2*s-2*Math.abs(c.x))/d.x,y=(h.height-2*l-2*Math.abs(c.y))/d.y;return y<0||g<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=h.unproject(p.add(f).div(2)),e.zoom=Math.min(h.scaleZoom(h.scale*Math.min(g,y)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n))},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=s.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),r&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),i&&this.fire("rotate",e),o&&this.fire("pitchstart",e).fire("pitch",e).fire("pitchend",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),!1===(t=r.extend({offset:[0,0],duration:500,easing:r.ease},t)).animate&&(t.duration=0),t.smoothEasing&&0!==t.duration&&(t.easing=this._smoothOutEasing(t.duration));var o=this.transform,a=this.getZoom(),l=this.getBearing(),c=this.getPitch(),h="zoom"in t?+t.zoom:a,p="bearing"in t?this._normalizeBearing(t.bearing,l):l,f="pitch"in t?+t.pitch:c,d=o.centerPoint.add(u.convert(t.offset)),g=o.pointLocation(d),y=s.convert(t.center||g);this._normalizeCenter(y);var m,_,v=o.project(g),x=o.project(y).sub(v),b=o.zoomScale(h-a);return t.around&&(m=s.convert(t.around),_=o.locationPoint(m)),this.zooming=h!==a,this.rotating=l!==p,this.pitching=f!==c,this._prepareEase(e,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(this.zooming&&(o.zoom=i(a,h,t)),this.rotating&&(o.bearing=i(l,p,t)),this.pitching&&(o.pitch=i(c,f,t)),m)o.setLocationAtPoint(m,_);else{var n=o.zoomScale(o.zoom-a),r=h>a?Math.min(2,b):Math.max(.5,b),s=Math.pow(r,1-t),u=o.unproject(v.add(x.mult(t*s)).mult(n));o.setLocationAtPoint(o.renderWorldCopies?u.wrap():u,d)}this._fireMoveEvents(e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._easeToEnd(e)},t.delayEndEvents):n._easeToEnd(e)},t),this},e.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),this.pitching&&this.fire("pitchstart",t)},e.prototype._fireMoveEvents=function(t){this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},e.prototype._easeToEnd=function(t){var e=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),n&&this.fire("pitchend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(I*I-C*C+(t?-1:1)*A*A*S*S)/(2*(t?I:C)*A*S);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}var l=this;this.stop(),t=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},t);var c=this.transform,h=this.getZoom(),p=this.getBearing(),f=this.getPitch(),d="zoom"in t?r.clamp(+t.zoom,c.minZoom,c.maxZoom):h,g="bearing"in t?this._normalizeBearing(t.bearing,p):p,y="pitch"in t?+t.pitch:f,m=c.zoomScale(d-h),_=c.centerPoint.add(u.convert(t.offset)),v=c.pointLocation(_),x=s.convert(t.center||v);this._normalizeCenter(x);var b=c.project(v),w=c.project(x).sub(b),E=t.curve,C=Math.max(c.width,c.height),I=C/m,S=w.mag();if("minZoom"in t){var T=r.clamp(Math.min(t.minZoom,h,d),c.minZoom,c.maxZoom),M=C/c.zoomScale(T-h);E=Math.sqrt(M/S*2)}var A=E*E,P=n(0),L=function(t){return a(P)/a(P+E*t)},N=function(t){return C*((a(P)*function(t){return o(t)/a(t)}(P+E*t)-o(P))/A)/S},R=(n(1)-P)/E;if(Math.abs(S)<1e-6||isNaN(R)){if(Math.abs(C-I)<1e-6)return this.easeTo(t,e);var O=I<C?-1:1;R=Math.abs(Math.log(I/C))/E,N=function(){return 0},L=function(t){return Math.exp(O*E*t)}}return t.duration="duration"in t?+t.duration:1e3*R/("screenSpeed"in t?+t.screenSpeed/E:+t.speed),this.zooming=!0,this.rotating=p!==g,this.pitching=y!==f,this._prepareEase(e,!1),this._ease(function(t){var n=t*R,r=1/L(n);c.zoom=h+c.scaleZoom(r),this.rotating&&(c.bearing=i(p,g,t)),this.pitching&&(c.pitch=i(f,y,t));var o=c.unproject(b.add(w.mult(N(n))).mult(r));c.setLocationAtPoint(c.renderWorldCopies?o.wrap():o,_),this._fireMoveEvents(e)},function(){return l._easeToEnd(e)},t),this},e.prototype.isEasing=function(){return!!this._abortFn},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},e.prototype._ease=function(t,e,n){this._finishFn=e,this._abortFn=o.timed(function(e){t.call(this,n.easing(e)),1===e&&this._finishEase()},!1===n.animate?0:n.duration,this)},e.prototype._finishEase=function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=r.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},e.prototype._smoothOutEasing=function(t){var e=r.ease;if(this._prevEase){var n=this._prevEase,i=(Date.now()-n.start)/n.duration,o=n.easing(i+.01)-n.easing(i),s=.27/Math.sqrt(o*o+1e-4)*.01,a=Math.sqrt(.0729-s*s);e=r.bezier(s,a,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:t,easing:e},e},e}(t("../util/evented"));e.exports=l},{"../geo/lng_lat":58,"../geo/lng_lat_bounds":59,"../style-spec/util/interpolate":127,"../util/browser":202,"../util/evented":210,"../util/util":223,"@mapbox/point-geometry":2}],182:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/config"),s=function(t){this.options=t,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};s.prototype.getDefaultPosition=function(){return"bottom-right"},s.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},s.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},s.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,r){return n.value&&(t+=n.key+"="+n.value+(r<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},s.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},s.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}),this._container.innerHTML=t.join(" | "),this._editLink=null}},s.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},e.exports=s},{"../../util/config":206,"../../util/dom":209,"../../util/util":223}],183:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),s=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};s.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._container},s.prototype.onRemove=function(){r.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},s.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},s.prototype._setupUI=function(){var t=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},s.prototype._isFullscreen=function(){return this._fullscreen},s.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},s.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=s},{"../../util/dom":209,"../../util/util":223,"../../util/window":204}],184:[function(t,e,n){"use strict";var r,i=t("../../util/evented"),o=t("../../util/dom"),s=t("../../util/window"),a=t("../../util/util"),u=t("../../geo/lng_lat"),l=t("../marker"),c={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},h=function(t){function e(e){t.call(this),this.options=a.extend({},c,e),a.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),function(t){void 0!==r?t(r):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(e){t(r="denied"!==e.state)}):t(r=!!s.navigator.geolocation)}(this._setupUI),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},e.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",t),this._finish()},e.prototype._updateCamera=function(t){var e=new u(t.coords.longitude,t.coords.latitude);this._map.fitBounds(e.toBounds(t.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new l(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire("trackuserlocationend"))}))},e.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},e.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(i);e.exports=h},{"../../geo/lng_lat":58,"../../util/dom":209,"../../util/evented":210,"../../util/util":223,"../../util/window":204,"../marker":198}],185:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=function(){i.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");var e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},e.exports=o},{"../../util/dom":209,"../../util/util":223}],186:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../handler/drag_rotate"),s=function(){var t=this;i.bindAll(["_rotateCompassArrow"],this),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return t._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return t._map.zoomOut()}),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return t._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass)};s.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},s.prototype.onAdd=function(t){return this._map=t,this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(t,{button:"left",element:this._compass,pitchWithRotate:!1}),this._handler.enable(),this._container},s.prototype.onRemove=function(){r.remove(this._container),this._map.off("rotate",this._rotateCompassArrow),delete this._map,this._handler.disable(),delete this._handler},s.prototype._createButton=function(t,e,n){var i=r.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",n),i},e.exports=s},{"../../util/dom":209,"../../util/util":223,"../handler/drag_rotate":192}],187:[function(t,e,n){"use strict";function r(t,e,n,r){var i=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),t.style.width=e*o+"px",t.innerHTML=i+r}var i=t("../../util/dom"),o=t("../../util/util"),s=function(t){this.options=t,o.bindAll(["_onMove"],this)};s.prototype.getDefaultPosition=function(){return"bottom-left"},s.prototype._onMove=function(){!function(t,e,n){var i=n&&n.maxWidth||100,o=t._container.clientHeight/2,s=function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-t.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}(t.unproject([0,o]),t.unproject([i,o]));if(n&&"imperial"===n.unit){var a=3.2808*s;a>5280?r(e,i,a/5280,"mi"):r(e,i,a,"ft")}else n&&"nautical"===n.unit?r(e,i,s/1852,"nm"):r(e,i,s,"m")}(this._map,this._container,this.options)},s.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},s.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=s},{"../../util/dom":209,"../../util/util":223}],188:[function(t,e,n){"use strict"},{}],189:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),s=t("../../util/window"),a=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.isActive=function(){return!!this._active},a.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},a.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(s.document.addEventListener("mousemove",this._onMouseMove,!1),s.document.addEventListener("keydown",this._onKeyDown,!1),s.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,t),this._active=!0)},a.prototype._onMouseMove=function(t){var e=this._startPos,n=r.mousePos(this._el,t);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(e.x,n.x),o=Math.max(e.x,n.x),s=Math.min(e.y,n.y),a=Math.max(e.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+s+"px)"),this._box.style.width=o-i+"px",this._box.style.height=a-s+"px"},a.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=r.mousePos(this._el,t),o=(new i).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},a.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},a.prototype._finish=function(){this._active=!1,s.document.removeEventListener("mousemove",this._onMouseMove,!1),s.document.removeEventListener("keydown",this._onKeyDown,!1),s.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},a.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=a},{"../../geo/lng_lat_bounds":59,"../../util/dom":209,"../../util/util":223,"../../util/window":204}],190:[function(t,e,n){"use strict";var r=t("../../util/util"),i=function(t){this._map=t,r.bindAll(["_onDblClick"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},e.exports=i},{"../../util/util":223}],191:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),s=i.bezier(0,0,.3,1),a=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.isActive=function(){return!!this._active},a.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},a.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=r.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},a.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t));var e=r.mousePos(this._el,t),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),e),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=e,t.preventDefault()}},a.prototype._onUp=function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],a=i[1].sub(o[1]),u=(i[0]-o[0])/1e3;if(0===u||i[1].equals(o[1]))return void n();var l=a.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var h=c/750,p=l.mult(-h/2);this._map.panBy(p,{duration:1e3*h,easing:s,noMoveStart:!0},{originalEvent:t})}},a.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},a.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},a.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},a.prototype._ignoreEvent=function(t){var e=this._map;return!(!e.boxZoom||!e.boxZoom.isActive())||!(!e.dragRotate||!e.dragRotate.isActive())||(t.touches?t.touches.length>1:!!t.ctrlKey||"mousemove"!==t.type&&t.button&&0!==t.button)},a.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=a},{"../../util/dom":209,"../../util/util":223,"../../util/window":204}],192:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),s=i.bezier(0,0,.25,1),a=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,i.bindAll(["_onDown","_onMove","_onUp"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.isActive=function(){return!!this._active},a.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},a.prototype._onDown=function(t){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var e=t.ctrlKey?0:2,n=t.button;if(void 0!==o.InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==e)return}else if(t.ctrlKey||0!==t.button)return;r.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=r.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},a.prototype._onMove=function(t){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t));var e=this._map;e.stop();var n=this._pos,i=r.mousePos(this._el,t),o=.8*(n.x-i.x),s=-.5*(n.y-i.y),a=e.getBearing()-o,u=e.getPitch()-s,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([Date.now(),e._normalizeBearing(a,c[1])]),e.transform.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.transform.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=i},a.prototype._onUp=function(t){var e=this;if(o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),r.enableDrag(),this.isActive()){this._active=!1,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),a=this._inertia,u=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(a.length<2)return void u();var l=a[0],c=a[a.length-1],h=n._normalizeBearing(i,a[a.length-2][1]),p=c[1]-l[1],f=p<0?-1:1,d=(c[0]-l[0])/1e3;if(0===p||0===d)return void u();var g=Math.abs(p*(.25/d));g>180&&(g=180);var y=g/180;h+=f*g*(y/2),Math.abs(n._normalizeBearing(h,0))<this._bearingSnap&&(h=n._normalizeBearing(0,h)),n.rotateTo(h,{duration:1e3*y,easing:s,noMoveStart:!0},{originalEvent:t})}},a.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},a.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=a},{"../../util/dom":209,"../../util/util":223,"../../util/window":204}],193:[function(t,e,n){"use strict";function r(t){return t*(2-t)}var i=t("../../util/util"),o=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,o=0,s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),s=-1);break;case 40:t.shiftKey?i=-1:(s=1,t.preventDefault());break;default:return}var a=this._map,u=a.getZoom(),l={duration:300,delayEndEvents:500,easing:r,zoom:e?Math.round(u)+e*(t.shiftKey?2:1):u,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*i,offset:[100*-o,100*-s],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}},e.exports=o},{"../../util/util":223}],194:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/browser"),s=t("../../util/window"),a=s.navigator.userAgent.toLowerCase(),u=-1!==a.indexOf("firefox"),l=-1!==a.indexOf("safari")&&-1===a.indexOf("chrom"),c=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(t){var e=0;"wheel"===t.type?(e=t.deltaY,u&&t.deltaMode===s.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===s.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,l&&(e/=3));var n=o.now(),i=n-(this._time||0);this._pos=r.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(t,e){if(0!==t){var n=this._map,r=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==r&&(r=1/r);var i=n.transform.scaleZoom((n.ease?n.ease.to:n.transform.scale)*r);n.zoomTo(i,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:e})}},e.exports=c},{"../../util/browser":202,"../../util/dom":209,"../../util/util":223,"../../util/window":204}],195:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),s=i.bezier(0,0,.15,1),a=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},a.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},a.prototype.disableRotation=function(){this._rotationDisabled=!0},a.prototype.enableRotation=function(){this._rotationDisabled=!1},a.prototype._onStart=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},a.prototype._onMove=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),o=e.sub(n),s=o.mag()/this._startVec.mag(),a=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(i)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+a),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*s)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),s,i]),u.easeTo(l,{originalEvent:t})}else{var c=Math.abs(1-s)>.15;Math.abs(a)>10?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},a.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)n.snapToNorth({},{originalEvent:t});else{var r=e[e.length-1],i=e[0],a=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*i[1]),l=(r[0]-i[0])/1e3,c=r[2];if(0!==l&&a!==u){var h=.15*(a-u)/l;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var p=1e3*Math.abs(h/(12*.15)),f=a+h*p/2e3;f<0&&(f=0),n.easeTo({zoom:f,duration:p,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(c)},{originalEvent:t})}else n.snapToNorth({},{originalEvent:t})}},a.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()},e.exports=a},{"../../util/dom":209,"../../util/util":223,"../../util/window":204}],196:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=function(){r.bindAll(["_onHashChange","_updateHash"],this)};o.prototype.addTo=function(t){return this._map=t,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},o.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},o.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2)),i=Math.round(e.lng*Math.pow(10,r))/Math.pow(10,r),o=Math.round(e.lat*Math.pow(10,r))/Math.pow(10,r),s=this._map.getBearing(),a=this._map.getPitch(),u="";return u+=t?"#/"+i+"/"+o+"/"+n:"#"+n+"/"+o+"/"+i,(s||a)&&(u+="/"+Math.round(10*s)/10),a&&(u+="/"+Math.round(a)),u},o.prototype._onHashChange=function(){var t=i.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},o.prototype._updateHash=function(){var t=this.getHashString();i.history.replaceState("","",t)},e.exports=o},{"../util/util":223,"../util/window":204}],197:[function(t,e,n){"use strict";function r(t){t.parentNode&&t.parentNode.removeChild(t)}var i=t("../util/util"),o=t("../util/browser"),s=t("../util/window"),a=t("../util/window").HTMLImageElement,u=t("../util/dom"),l=t("../util/ajax"),c=t("../style/style"),h=t("../style/animation_loop"),p=t("../render/painter"),f=t("../geo/transform"),d=t("./hash"),g=t("./bind_handlers"),y=t("./camera"),m=t("../geo/lng_lat"),_=t("../geo/lng_lat_bounds"),v=t("@mapbox/point-geometry"),x=t("./control/attribution_control"),b=t("./control/logo_control"),w=t("mapbox-gl-supported");t("./events");var E={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null},C=function(t){function e(e){var n=this;if(null!=(e=i.extend({},E,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new f(e.minZoom,e.maxZoom,e.renderWorldCopies);t.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles;var o=e.transformRequest;if(this._transformRequest=o?function(t,e){return o(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){var a=s.document.getElementById(e.container);if(!a)throw new Error("Container '"+e.container+"' not found.");this._container=a}else this._container=e.container;this.animationLoop=new h,e.maxBounds&&this.setMaxBounds(e.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),void 0!==s&&(s.addEventListener("online",this._onWindowOnline,!1),s.addEventListener("resize",this._onWindowResize,!1)),g(this,e),this._hash=e.hash&&(new d).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new x),this.addControl(new b,e.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.addClass=function(t,e){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0||""===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.removeClass=function(t,e){i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var n=this._classes.indexOf(t);return n<0||""===t?this:(this._classes.splice(n,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.setClasses=function(t,e){i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var n={},r=0;r<t.length;r++)""!==t[r]&&(n[t[r]]=!0);return this._classes=Object.keys(n),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},e.prototype.hasClass=function(t){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0},e.prototype.getClasses=function(){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];return this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new _(this.transform.pointLocation(new v(0,this.transform.height)),this.transform.pointLocation(new v(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new v(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new v(0,this.transform.size.y)))),t},e.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new _([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},e.prototype.setMaxBounds=function(t){if(t){var e=_.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!=t||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},e.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(m.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(v.convert(t))},e.prototype.on=function(e,n,r){var o=this;if(void 0===r)return t.prototype.on.call(this,e,n);var s=function(){if("mouseenter"===e||"mouseover"===e){var t=!1;return{layer:n,listener:r,delegates:{mousemove:function(s){var a=o.getLayer(n)?o.queryRenderedFeatures(s.point,{layers:[n]}):[];a.length?t||(t=!0,r.call(o,i.extend({features:a},s,{type:e}))):t=!1},mouseout:function(){t=!1}}}}if("mouseleave"===e||"mouseout"===e){var s=!1;return{layer:n,listener:r,delegates:{mousemove:function(t){(o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[]).length?s=!0:s&&(s=!1,r.call(o,i.extend({},t,{type:e})))},mouseout:function(t){s&&(s=!1,r.call(o,i.extend({},t,{type:e})))}}}}var a;return{layer:n,listener:r,delegates:(a={},a[e]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&r.call(o,i.extend({features:e},t))},a)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(s),s.delegates)o.on(a,s.delegates[a]);return this},e.prototype.off=function(e,n,r){if(void 0===r)return t.prototype.off.call(this,e,n);if(this._delegatedListeners&&this._delegatedListeners[e])for(var i=this._delegatedListeners[e],o=0;o<i.length;o++){var s=i[o];if(s.layer===n&&s.listener===r){for(var a in s.delegates)this.off(a,s.delegates[a]);return i.splice(o,1),this}}return this},e.prototype.queryRenderedFeatures=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r={};return 2===t.length?(n=arguments[0],r=arguments[1]):1===t.length&&function(t){return t instanceof v||Array.isArray(t)}(t[0])?n=t[0]:1===t.length&&(r=t[0]),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(n),r,this.transform.zoom,this.transform.angle):[]},e.prototype._makeQueryGeometry=function(t){var e,n=this;if(void 0===t&&(t=[v.convert([0,0]),v.convert([this.transform.width,this.transform.height])]),t instanceof v||"number"==typeof t[0])e=[v.convert(t)];else{var r=[v.convert(t[0]),v.convert(t[1])];e=[r[0],new v(r[1].x,r[0].y),r[1],new v(r[0].x,r[1].y),r[0]]}return e.map(function(t){return n.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&!(t instanceof c)&&"string"!=typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){i.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement),this.off("move",this.style._redoPlacement)),t?(this.style=t instanceof c?t:new c(t,this,e||{}),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this.on("move",this.style._redoPlacement),this):(this.style=null,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addImage=function(t,e,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),e instanceof a)e=o.getImageData(e);else if(void 0===e.width||void 0===e.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});this.style.addImage(t,{data:e,pixelRatio:r,sdf:i})},e.prototype.removeImage=function(t){this.style.removeImage(t)},e.prototype.loadImage=function(t,e){l.getImage(this._transformRequest(t,l.ResourceType.Image),e)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n,r){return this.style.setPaintProperty(t,e,n,r),this._update(!0),this},e.prototype.getPaintProperty=function(t,e,n){return this.style.getPaintProperty(t,e,n)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._canvasContainer=u.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=u.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=u.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=u.create("div","mapboxgl-ctrl-"+t,r)})},e.prototype._resizeCanvas=function(t,e){var n=s.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},w.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?this.painter=new p(e,this.transform):this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},e.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==s&&(s.removeEventListener("resize",this._onWindowResize,!1),s.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),r(this._canvasContainer),r(this._controlContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(y);e.exports=C},{"../geo/lng_lat":58,"../geo/lng_lat_bounds":59,"../geo/transform":60,"../render/painter":79,"../style/animation_loop":150,"../style/style":156,"../util/ajax":201,"../util/browser":202,"../util/dom":209,"../util/util":223,"../util/window":204,"./bind_handlers":180,"./camera":181,"./control/attribution_control":182,"./control/logo_control":185,"./events":188,"./hash":196,"@mapbox/point-geometry":2,"mapbox-gl-supported":28}],198:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("../geo/lng_lat"),o=t("@mapbox/point-geometry"),s=t("../util/smart_wrap"),a=t("../util/util").bindAll,u=function(t,e){this._offset=o.convert(e&&e.offset||[0,0]),a(["_update","_onMapClick"],this),t||(t=r.create("div")),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};u.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(t){return this._lngLat=i.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&("offset"in t.options||(t.options.offset=this._offset),this._popup=t,this._popup.setLngLat(this._lngLat)),this},u.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},u.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=s(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},e.exports=u},{"../geo/lng_lat":58,"../util/dom":209,"../util/smart_wrap":219,"../util/util":223,"@mapbox/point-geometry":2}],199:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/evented"),o=t("../util/dom"),s=t("../geo/lng_lat"),a=t("@mapbox/point-geometry"),u=t("../util/window"),l=t("../util/smart_wrap"),c={closeButton:!0,closeOnClick:!0},h=function(t){function e(e){t.call(this),this.options=r.extend(Object.create(c),e),r.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=s.convert(t),this._pos=null,this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(u.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=u.document.createDocumentFragment(),r=u.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)n.appendChild(e);return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&o.remove(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=l(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,n=function t(e){if(e){if("number"==typeof e){var n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new a(0,e),"top-left":new a(n,n),"top-right":new a(-n,n),bottom:new a(0,-e),"bottom-left":new a(n,-n),"bottom-right":new a(-n,-n),left:new a(e,0),right:new a(-e,0)}}if(e instanceof a||Array.isArray(e)){var r=a.convert(e);return{top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{top:a.convert(e.top||[0,0]),"top-left":a.convert(e["top-left"]||[0,0]),"top-right":a.convert(e["top-right"]||[0,0]),bottom:a.convert(e.bottom||[0,0]),"bottom-left":a.convert(e["bottom-left"]||[0,0]),"bottom-right":a.convert(e["bottom-right"]||[0,0]),left:a.convert(e.left||[0,0]),right:a.convert(e.right||[0,0])}}return t(new a(0,0))}(this.options.offset);if(!e){var r=this._container.offsetWidth,i=this._container.offsetHeight;e=t.y+n.bottom.y<i?["top"]:t.y>this._map.transform.height-i?["bottom"]:[],t.x<r/2?e.push("left"):t.x>this._map.transform.width-r/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var s=t.add(n[e]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},c=this._container.classList;for(var h in u)c.remove("mapboxgl-popup-anchor-"+h);c.add("mapboxgl-popup-anchor-"+e),o.setTransform(this._container,u[e]+" translate("+s.x+"px,"+s.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(i);e.exports=h},{"../geo/lng_lat":58,"../util/dom":209,"../util/evented":210,"../util/smart_wrap":219,"../util/util":223,"../util/window":204,"@mapbox/point-geometry":2}],200:[function(t,e,n){"use strict";var r=t("./util"),i=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};i.prototype.send=function(t,e,n,r,i){var o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n),this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(o),data:e},r)},i.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e,r){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?String(t):null,data:e},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(new Error(r.error)):e&&e(null,r.data);else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,o);else if(void 0!==r.id&&this.parent.getWorkerSource){var s=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,s[0])[s[1]](r.data,o)}else this.parent[r.type](r.data)}},i.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=i},{"./util":223}],201:[function(t,e,n){"use strict";function r(t){var e=new o.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function i(t){var e=o.document.createElement("a");return e.href=t,e.protocol===o.document.location.protocol&&e.host===o.document.location.host}var o=t("./window"),s={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=s,"function"==typeof Object.freeze&&Object.freeze(s);var a=function(t){function e(e,n){t.call(this,e),this.status=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error);n.getJSON=function(t,e){var n=r(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new a(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(t,e){var n=r(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var t=n.response;if(0===t.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:t,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new a(n.statusText,n.status))},n.send(),n},n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)e(t);else if(n){var r=new o.Image,i=o.URL||o.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var s=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(t,e){var n=o.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var r=0;r<t.length;r++){var s=o.document.createElement("source");i(t[r])||(n.crossOrigin="Anonymous"),s.src=t[r],n.appendChild(s)}return n}},{"./window":204}],202:[function(t,e,n){"use strict";var r=t("./window"),i=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,s=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;e.exports={now:i,frame:function(t){return o(t)},cancelFrame:function(t){return s(t)},timed:function(t,e,n){if(!e)return t.call(n,1),null;var r=!1,s=i();return o(function a(){if(!r){var u=i();u>=s+e?t.call(n,1):(t.call(n,(u-s)/e),o(a))}}),function(){r=!0}},getImageData:function(t){var e=r.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var a=r.document.createElement("img");a.onload=function(){e.exports.supportsWebp=!0},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":204}],203:[function(t,e,n){"use strict";var r=t("webworkify"),i=t("../window"),o=i.URL.createObjectURL(new r(t("../../source/worker"),{bare:!0}));e.exports=function(){return new i.Worker(o)}},{"../../source/worker":105,"../window":204,webworkify:39}],204:[function(t,e,n){"use strict";e.exports=self},{}],205:[function(t,e,n){"use strict";function r(t,e){return e.area-t.area}var i=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var s,a,u=[],l=0;l<n;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===a&&(a=c<0),a===c<0?(s&&u.push(s),s=[t[l]]):s.push(t[l]))}if(s&&u.push(s),e>1)for(var h=0;h<u.length;h++)u[h].length<=e||(i(u[h],e,1,u[h].length-1,r),u[h]=u[h].slice(0,e));return u}},{"./util":223,quickselect:31}],206:[function(t,e,n){"use strict";e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],207:[function(t,e,n){"use strict";var r=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};r.prototype.encode=function(t){return this._stringToNumber[t]},r.prototype.decode=function(t){return this._numberToString[t]},e.exports=r},{}],208:[function(t,e,n){"use strict";var r=t("./util"),i=t("./actor"),o=function(t,e){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var n=this.workerPool.acquire(this.id),o=0;o<n.length;o++){var s=new i(n[o],e,this.id);s.name="Worker "+o,this.actors.push(s)}};o.prototype.broadcast=function(t,e,n){r.asyncAll(this.actors,function(n,r){n.send(t,e,r)},n=n||function(){})},o.prototype.send=function(t,e,n,r,i){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n,i),r},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":200,"./util":223}],209:[function(t,e,n){"use strict";function r(t){for(var e=0;e<t.length;e++)if(t[e]in a)return t[e];return t[0]}var i=t("@mapbox/point-geometry"),o=t("./window");n.create=function(t,e,n){var r=o.document.createElement(t);return e&&(r.className=e),n&&n.appendChild(r),r};var s,a=o.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(s=a[u],a[u]="none")},n.enableDrag=function(){u&&(a[u]=s)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[l]=e};var c=function(t){t.preventDefault(),t.stopPropagation(),o.removeEventListener("click",c,!0)};n.suppressClick=function(){o.addEventListener("click",c,!0),o.setTimeout(function(){o.removeEventListener("click",c,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return new i((e=e.touches?e.touches[0]:e).clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),r=[],o="touchend"===e.type?e.changedTouches:e.touches,s=0;s<o.length;s++)r.push(new i(o[s].clientX-n.left-t.clientLeft,o[s].clientY-n.top-t.clientTop));return r},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":204,"@mapbox/point-geometry":2}],210:[function(t,e,n){"use strict";function r(t,e,n){n[t]=n[t]||[],n[t].push(e)}function i(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var o=t("./util"),s=function(){};s.prototype.on=function(t,e){return this._listeners=this._listeners||{},r(t,e,this._listeners),this},s.prototype.off=function(t,e){return i(t,e,this._listeners),i(t,e,this._oneTimeListeners),this},s.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},r(t,e,this._oneTimeListeners),this},s.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=o.extend({},e,{type:t,target:this});for(var r=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],s=0;s<r.length;s++)r[s].call(n,e);for(var a=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],u=0;u<a.length;u++)a[u].call(n,e),i(t,a[u],n._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(t,o.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},s.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},s.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=s},{"./util":223}],211:[function(t,e,n){"use strict";function r(t,e){return e.max-t.max}function i(t,e,n,r){this.p=new s(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],s=0,u=o.length,l=u-1;s<u;l=s++){var c=o[s],h=o[l];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(n=!n),r=Math.min(r,a(t,c,h))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var o=t("tinyqueue"),s=t("@mapbox/point-geometry"),a=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var a=1/0,u=1/0,l=-1/0,c=-1/0,h=t[0],p=0;p<h.length;p++){var f=h[p];(!p||f.x<a)&&(a=f.x),(!p||f.y<u)&&(u=f.y),(!p||f.x>l)&&(l=f.x),(!p||f.y>c)&&(c=f.y)}var d=Math.min(l-a,c-u),g=d/2,y=new o(null,r);if(0===d)return new s(a,u);for(var m=a;m<l;m+=d)for(var _=u;_<c;_+=d)y.push(new i(m+g,_+g,g,t));for(var v=function(t){for(var e=0,n=0,r=0,o=t[0],s=0,a=o.length,u=a-1;s<a;u=s++){var l=o[s],c=o[u],h=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*h,r+=(l.y+c.y)*h,e+=3*h}return new i(n/e,r/e,0,t)}(t),x=y.length;y.length;){var b=y.pop();(b.d>v.d||!v.d)&&(v=b,n&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,x)),b.max-v.d<=e||(y.push(new i(b.p.x-(g=b.h/2),b.p.y-g,g,t)),y.push(new i(b.p.x+g,b.p.y-g,g,t)),y.push(new i(b.p.x-g,b.p.y+g,g,t)),y.push(new i(b.p.x+g,b.p.y+g,g,t)),x+=4)}return n&&(console.log("num probes: "+x),console.log("best distance: "+v.d)),v.p}},{"./intersection_tests":214,"@mapbox/point-geometry":2,tinyqueue:33}],212:[function(t,e,n){"use strict";var r,i=t("./worker_pool");e.exports=function(){return r||(r=new i),r}},{"./worker_pool":226}],213:[function(t,e,n){"use strict";function r(t,e,n){var r=t.width,i=t.height;if(n){if(n.length!==r*i*e)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*i*e);return{width:r,height:i,data:n}}function i(t,e,n){var i=e.width,s=e.height;if(i===t.width&&s===t.height)return t;var a=r({width:i,height:s},n);o(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,s)},n),t.width=i,t.height=s,t.data=a.data}function o(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var s=t.data,a=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,h=0;h<i.width*o;h++)a[c+h]=s[l+h];return e}var s=function(){};s.create=function(t,e){return r(t,1,e)},s.resize=function(t,e){i(t,e,1)},s.copy=function(t,e,n,r,i){o(t,e,n,r,i,1)};var a=function(){};a.create=function(t,e){return r(t,4,e)},a.resize=function(t,e){i(t,e,4)},a.copy=function(t,e,n,r,i){o(t,e,n,r,i,4)},e.exports={AlphaImage:s,RGBAImage:a}},{}],214:[function(t,e,n){"use strict";function r(t,e,n){if(t.length>1){if(i(t,e))return!0;for(var r=0;r<e.length;r++)if(s(e[r],t,n))return!0}for(var o=0;o<t.length;o++)if(s(t[o],e,n))return!0;return!1}function i(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],s=0;s<e.length-1;s++)if(o(r,i,e[s],e[s+1]))return!0;return!1}function o(t,e,n,r){return c(t,n,r)!==c(e,n,r)&&c(t,e,n)!==c(t,e,r)}function s(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(a(t,e[i-1],e[i])<r)return!0;return!1}function a(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function u(t,e){for(var n,r,i,o=!1,s=0;s<t.length;s++)for(var a=0,u=(n=t[s]).length-1;a<n.length;u=a++)(r=n[a]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function l(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],s=t[i];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}var c=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:function(t,e,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++)for(var a=e[o],u=0;u<a.length;u++){var c=a[u];if(l(i,c))return!0;if(s(c,i,n))return!0}return!1},multiPolygonIntersectsMultiPolygon:function(t,e){if(1===t.length&&1===t[0].length)return u(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<r.length;o++)if(u(t,r[o]))return!0;for(var s=0;s<t.length;s++){for(var a=t[s],l=0;l<a.length;l++)if(u(e,a[l]))return!0;for(var c=0;c<e.length;c++)if(i(a,e[c]))return!0}return!1},multiPolygonIntersectsBufferedMultiLine:function(t,e,n){for(var i=0;i<e.length;i++)for(var o=e[i],s=0;s<t.length;s++){var a=t[s];if(a.length>=3)for(var u=0;u<o.length;u++)if(l(a,o[u]))return!0;if(r(a,o,n))return!0}return!1},polygonIntersectsPolygon:function(t,e){for(var n=0;n<t.length;n++)if(l(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(l(t,e[r]))return!0;return!!i(t,e)},distToSegmentSquared:a}},{"./util":223}],215:[function(t,e,n){"use strict";e.exports={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}}},{}],216:[function(t,e,n){"use strict";var r=function(t,e){this.max=t,this.onRemove=e,this.reset()};r.prototype.reset=function(){var t=this;for(var e in t.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},r.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(t){return t in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},r.prototype.getWithoutRemoving=function(t){return this.has(t)?this.data[t]:null},r.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},r.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.get(e.order[0]);n&&e.onRemove(n)}return this},e.exports=r},{}],217:[function(t,e,n){"use strict";function r(t,e){var n=o(a.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!a.REQUIRE_ACCESS_TOKEN)return s(t);if(!(e=e||a.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+l);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return t.params.push("access_token="+e),s(t)}function i(t){return 0===t.indexOf("mapbox:")}function o(t){var e=t.match(h);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function s(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var a=t("./config"),u=t("./browser"),l="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(t,e){if(!i(t))return t;var n=o(t);return n.path="/styles/v1"+n.path,r(n,e)},n.normalizeGlyphsURL=function(t,e){if(!i(t))return t;var n=o(t);return n.path="/fonts/v1"+n.path,r(n,e)},n.normalizeSourceURL=function(t,e){if(!i(t))return t;var n=o(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,e)},n.normalizeSpriteURL=function(t,e,n,a){var u=o(t);return i(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,r(u,a)):(u.path+=""+e+n,s(u))};var c=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(t,e,n){if(!e||!i(e))return t;var r=o(t);return r.path=r.path.replace(c,(u.devicePixelRatio>=2||512===n?"@2x":"")+(u.supportsWebp?".webp":"$1")),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(a.ACCESS_TOKEN||""))}(r.params),s(r)};var h=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":202,"./config":206}],218:[function(t,e,n){"use strict";var r=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!n.charAllowsIdeographicBreaking(r[e].charCodeAt(0)))return!1;return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,r=t;e<r.length;e+=1)if(n.charHasUprightVerticalOrientation(r[e].charCodeAt(0)))return!0;return!1},e.exports.allowsLetterSpacing=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!n.charAllowsLetterSpacing(r[e].charCodeAt(0)))return!1;return!0},e.exports.charAllowsLetterSpacing=function(t){return!(r.Arabic(t)||r["Arabic Supplement"](t)||r["Arabic Extended-A"](t)||r["Arabic Presentation Forms-A"](t)||r["Arabic Presentation Forms-B"](t))},e.exports.charAllowsIdeographicBreaking=function(t){return!(t<11904||!(r["Bopomofo Extended"](t)||r.Bopomofo(t)||r["CJK Compatibility Forms"](t)||r["CJK Compatibility Ideographs"](t)||r["CJK Compatibility"](t)||r["CJK Radicals Supplement"](t)||r["CJK Strokes"](t)||r["CJK Symbols and Punctuation"](t)||r["CJK Unified Ideographs Extension A"](t)||r["CJK Unified Ideographs"](t)||r["Enclosed CJK Letters and Months"](t)||r["Halfwidth and Fullwidth Forms"](t)||r.Hiragana(t)||r["Ideographic Description Characters"](t)||r["Kangxi Radicals"](t)||r["Katakana Phonetic Extensions"](t)||r.Katakana(t)||r["Vertical Forms"](t)||r["Yi Radicals"](t)||r["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!(746!==t&&747!==t&&(t<4352||!(r["Bopomofo Extended"](t)||r.Bopomofo(t)||r["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||r["CJK Compatibility Ideographs"](t)||r["CJK Compatibility"](t)||r["CJK Radicals Supplement"](t)||r["CJK Strokes"](t)||!(!r["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||r["CJK Unified Ideographs Extension A"](t)||r["CJK Unified Ideographs"](t)||r["Enclosed CJK Letters and Months"](t)||r["Hangul Compatibility Jamo"](t)||r["Hangul Jamo Extended-A"](t)||r["Hangul Jamo Extended-B"](t)||r["Hangul Jamo"](t)||r["Hangul Syllables"](t)||r.Hiragana(t)||r["Ideographic Description Characters"](t)||r.Kanbun(t)||r["Kangxi Radicals"](t)||r["Katakana Phonetic Extensions"](t)||r.Katakana(t)&&12540!==t||!(!r["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!r["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||r["Unified Canadian Aboriginal Syllabics"](t)||r["Unified Canadian Aboriginal Syllabics Extended"](t)||r["Vertical Forms"](t)||r["Yijing Hexagram Symbols"](t)||r["Yi Syllables"](t)||r["Yi Radicals"](t))))},n.charHasNeutralVerticalOrientation=function(t){return!!(r["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||r["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||r["Letterlike Symbols"](t)||r["Number Forms"](t)||r["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||r["Control Pictures"](t)&&9251!==t||r["Optical Character Recognition"](t)||r["Enclosed Alphanumerics"](t)||r["Geometric Shapes"](t)||r["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||r["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||r["CJK Symbols and Punctuation"](t)||r.Katakana(t)||r["Private Use Area"](t)||r["CJK Compatibility Forms"](t)||r["Small Form Variants"](t)||r["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":215}],219:[function(t,e,n){"use strict";var r=t("../geo/lng_lat");e.exports=function(t,e,n){if(t=new r(t.lng,t.lat),e){var i=new r(t.lng-360,t.lat),o=new r(t.lng+360,t.lat),s=n.locationPoint(t).distSqr(e);n.locationPoint(i).distSqr(e)<s?t=i:n.locationPoint(o).distSqr(e)<s&&(t=o)}for(;Math.abs(t.lng-n.center.lng)>180;){var a=n.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}},{"../geo/lng_lat":58}],220:[function(t,e,n){"use strict";function r(t,e){return Math.ceil(t/e)*e}function i(t){return a[t].BYTES_PER_ELEMENT}function o(t){return t.toLowerCase()}function s(t,e){var n=function(t,e){var n="this._pos"+i(t.type).toFixed(0)+" + "+(t.offset/i(t.type)+e).toFixed(0);return"this._structArray."+o(t.type)+"["+n+"]"}(t,e);return{get:new Function("return "+n+";"),set:new Function("x",n+" = x;")}}e.exports=function(t){var e=JSON.stringify(t);if(c[e])return c[e];var n=void 0===t.alignment?1:t.alignment,a=0,h=0,p=["Uint8"],f=t.members.map(function(t){p.indexOf(t.type)<0&&p.push(t.type);var e=i(t.type),o=a=r(a,Math.max(n,e)),s=t.components||1;return h=Math.max(h,e),a+=e*s,{name:t.name,type:t.type,components:s,offset:o}}),d=r(a,Math.max(h,n)),g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(u);g.prototype.alignment=n,g.prototype.size=d;for(var y=0,m=f;y<m.length;y+=1)for(var _=m[y],v=0;v<_.components;v++){var x=_.name;if(_.components>1&&(x+=v),x in g.prototype)throw new Error(x+" is a reserved name and cannot be used as a member name.");Object.defineProperty(g.prototype,x,s(_,v))}var b=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(l);return b.prototype.members=f,b.prototype.StructType=g,b.prototype.bytesPerElement=d,b.prototype.emplaceBack=function(t,e){for(var n=[],r=[],s="var i = this.length;\nthis.resize(this.length + 1);\n",a=0,u=t;a<u.length;a+=1){var l=u[a],c=i(l.type);n.indexOf(c)<0&&(n.push(c),s+="var o"+c.toFixed(0)+" = i * "+(e/c).toFixed(0)+";\n");for(var h=0;h<l.components;h++){var p="v"+r.length,f="o"+c.toFixed(0)+" + "+(l.offset/c+h).toFixed(0);s+="this."+o(l.type)+"["+f+"] = "+p+";\n",r.push(p)}}return s+="return i;",new Function(r.toString(),s)}(f,d),b.prototype._usedTypes=p,c[e]=b,b};var a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},u=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},l=function(t){this.isTransferred=!1,void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};l.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment}},l.prototype.serialize=function(t){return this._trim(),t&&(this.isTransferred=!0,t.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},l.prototype.get=function(t){return new this.StructType(this,t)},l.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},l.prototype.clear=function(){this.length=0},l.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},l.prototype._refreshViews=function(){for(var t=this,e=0,n=t._usedTypes;e<n.length;e+=1){var r=n[e];t[o(r)]=new a[r](t.arrayBuffer)}},l.prototype.toArray=function(t,e){for(var n=[],r=t;r<e;r++){var i=this.get(r);n.push(i)}return n};var c={}},{}],221:[function(t,e,n){"use strict";var r=t("./browser"),i=function(t,e){this.frequency=t,this.throttledFunction=e,this.lastInvocation=0};i.prototype.invoke=function(){var t=this;if(!this.pendingInvocation){var e=0===this.lastInvocation?0:this.lastInvocation+this.frequency-r.now();e<=0?(this.lastInvocation=r.now(),this.throttledFunction()):this.pendingInvocation=setTimeout(function(){t.pendingInvocation=void 0,t.lastInvocation=r.now(),t.throttledFunction()},e)}},i.prototype.stop=function(){this.pendingInvocation&&(clearTimeout(this.pendingInvocation),this.pendingInvocation=void 0)},e.exports=i},{"./browser":202}],222:[function(t,e,n){"use strict";e.exports=function(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?String(t[n]):""})}},{}],223:[function(t,e,n){"use strict";var r=t("@mapbox/unitbezier"),i=t("../geo/coordinate");t("@mapbox/point-geometry"),n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,i){var o=new r(t,e,n,i);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,s){e(t,function(t,e){t&&(o=t),i[s]=e,0==--r&&n(o,i)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},n.extend=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var s in o)t[s]=o[s]}return t},n.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,s=0;s<t.length;s++)e=Math.min(e,t[s].column),n=Math.min(n,t[s].row),r=Math.max(r,t[s].column),o=Math.max(o,t[s].row);var a=Math.max(r-e,o-n),u=Math.max(0,Math.floor(-Math.log(a)/Math.LN2));return new i((e+r)/2,(n+o)/2,0).zoomTo(u)},n.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},n.mapObject=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r},n.filterObject=function(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r},n.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!n.deepEqual(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!n.deepEqual(t[i],e[i]))return!1;return!0}return t===e},n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var s={};n.warnOnce=function(t){s[t]||("undefined"!=typeof console&&console.warn(t),s[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,s=void 0;n<r;i=n++)e+=((s=t[i]).x-(o=t[n]).x)*(o.y+s.y);return e},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],r=t[t.length-1];return!(Math.abs(e.x-r.x)>0||Math.abs(e.y-r.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,[e*Math.cos(n)*Math.sin(r),e*Math.sin(n)*Math.sin(r),e*Math.cos(r)]},n.parseCacheControl=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}},{"../geo/coordinate":57,"@mapbox/point-geometry":2,"@mapbox/unitbezier":5}],224:[function(t,e,n){"use strict";var r=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(t){this._geometry=t},r.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(r.prototype,i),e.exports=r},{}],225:[function(t,e,n){"use strict";var r=t("./script_detection");e.exports=function(t){for(var n="",i=0;i<t.length;i++){var o=t.charCodeAt(i+1)||null,s=t.charCodeAt(i-1)||null;o&&r.charHasRotatedVerticalOrientation(o)&&!e.exports.lookup[t[i+1]]||s&&r.charHasRotatedVerticalOrientation(s)&&!e.exports.lookup[t[i-1]]||!e.exports.lookup[t[i]]?n+=t[i]:n+=e.exports.lookup[t[i]]}return n},e.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":218}],226:[function(t,e,n){"use strict";var r=t("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(e){if(!this.workers){var n=t("../").workerCount;for(this.workers=[];this.workers.length<n;)this.workers.push(new r)}return this.active[e]=!0,this.workers.slice()},i.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=i},{"../":63,"./web_worker":203}]},{},[63])(63)},t.exports=r()}).call(e,n("fRUx"))},N7yg:function(t,e,n){"use strict";var r=n("Q1or"),i=n("IPRB")("MapboxGeocoding");function o(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}i.prototype.geocodeForward=function(t,e,n){if(void 0===n&&"function"==typeof e&&(n=e,e={}),Array.isArray(t)){if("mapbox.places-permanent"!==e.dataset)throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");t=t.join(";")}r("string"==typeof t,"query must be a string"),r("object"==typeof e,"options must be an object");var i={query:t,dataset:"mapbox.places"},s=3;return e.precision&&(r("number"==typeof e.precision,"precision option must be number"),s=e.precision),e.proximity&&(r("number"==typeof e.proximity.latitude&&"number"==typeof e.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),i.proximity=o(e.proximity.longitude,s)+","+o(e.proximity.latitude,s)),e.bbox&&(r("number"==typeof e.bbox[0]&&"number"==typeof e.bbox[1]&&"number"==typeof e.bbox[2]&&"number"==typeof e.bbox[3]&&4===e.bbox.length,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),i.bbox=e.bbox[0]+","+e.bbox[1]+","+e.bbox[2]+","+e.bbox[3]),e.limit&&(r("number"==typeof e.limit,"limit must be a number"),i.limit=e.limit),e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset),e.country&&(r("string"==typeof e.country,"country option must be string"),i.country=e.country),e.language&&(r("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(r("string"==typeof e.types,"types option must be string"),i.types=e.types),"boolean"==typeof e.autocomplete&&(r("boolean"==typeof e.autocomplete,"autocomplete must be a boolean"),i.autocomplete=e.autocomplete),this.client({path:"/geocoding/v5/{dataset}/{query}.json{?access_token,proximity,country,types,bbox,limit,autocomplete,language}",params:i,callback:n})},i.prototype.geocodeReverse=function(t,e,n){void 0===n&&"function"==typeof e&&(n=e,e={}),r("object"==typeof t,"location must be an object"),r("object"==typeof e,"options must be an object"),r("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties");var i={dataset:"mapbox.places"};e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset);var s=5;return e.precision&&(r("number"==typeof e.precision,"precision option must be number"),s=e.precision),e.language&&(r("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(r("string"==typeof e.types,"types option must be string"),i.types=e.types),e.limit&&(r("number"==typeof e.limit,"limit option must be a number"),r(1===e.types.split(",").length,"a single type must be specified to use the limit option"),i.limit=e.limit),i.longitude=o(t.longitude,s),i.latitude=o(t.latitude,s),this.client({path:"/geocoding/v5/{dataset}/{longitude},{latitude}.json{?access_token,types,limit,language}",params:i,callback:n})},t.exports=i},NGRF:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},OFCk:function(t,e,n){"use strict";var r,i,o,s,a,u;function l(t,e){return 0===t.indexOf(e)}function c(t,e){if(!(this instanceof c))return new c(t,e);t instanceof c?(this._template=t.template,this._params=r({},this._params,e)):(this._template=(t||"").toString(),this._params=e||{})}r=n("MN+7"),i=n("VB/m"),s=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,a=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,u=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,c.prototype={append:function(t,e){return new c(this._template+t,r({},this._params,e))},fullyQualify:function(){if("undefined"==typeof location)return this;if(this.isFullyQualified())return this;var t=this._template;return l(t,"//")?t=o.protocol+t:l(t,"/")?t=o.origin+t:this.isAbsolute()||(t=o.origin+o.pathname.substring(0,o.pathname.lastIndexOf("/")+1)),-1===t.indexOf("/",8)&&(t+="/"),new c(t,this._params)},isAbsolute:function(){return a.test(this.build())},isFullyQualified:function(){return u.test(this.build())},isCrossOrigin:function(){if(!o)return!0;var t=this.parts();return t.protocol!==o.protocol||t.hostname!==o.hostname||t.port!==o.port},parts:function(){var t,e;return(e={href:(t=this.fullyQualify().build().match(s))[0],protocol:t[1],host:t[3]||"",hostname:t[4]||"",port:t[6],pathname:t[7]||"",search:t[8]||"",hash:t[9]||""}).origin=e.protocol+"//"+e.host,e.port=e.port||("https:"===e.protocol?"443":"http:"===e.protocol?"80":""),e},build:function(t){return function(t,e){var n,r,o,s,a;if(n=t,o={},e){for(r in e)(a=new RegExp("\\{"+r+"\\}")).test(n)?n=n.replace(a,encodeURIComponent(e[r]),"g"):o[r]=e[r];(s=i.write(o))&&(n+=-1===n.indexOf("?")?"?":"&",n+=s)}return n}(this._template,r({},this._params,t))},toString:function(){return this.build()}},o="undefined"!=typeof location?new c(location.href).parts():void 0,t.exports=c},Q1or:function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],c=0;(u=new Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},QQ8X:function(t,e,n){"use strict";t.exports=function(t){try{return Promise.resolve(t())}catch(t){return Promise.reject(t)}}},QoYD:function(t,e,n){"use strict";var r=n("wR2Q"),i=n("lopz"),o=n("k7UF"),s=function(t,e,n){return this.options=r({minLength:2,limit:5,filter:!0},n=n||{}),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(t){this.handleKeyUp(t.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(t){this.handleKeyDown(t)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(t){this.handlePaste(t)}).bind(this)),this};s.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},s.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:t.preventDefault(),this.list.isEmpty()||(this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},s.prototype.handleBlur=function(){this.list.selectingListItem||this.list.hide()},s.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}},s.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates((function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}).bind(this))},s.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},s.prototype.update=function(t){this.data=t,this.handleKeyUp()},s.prototype.clear=function(){this.data=[],this.list.clear()},s.prototype.normalize=function(t){return t.toLowerCase()},s.prototype.match=function(t,e){return t.indexOf(e)>-1},s.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},s.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(t){return this.getItemValue(t)}).bind(this)};t(this.options.filter?i.filter(this.query,this.data,e):this.data.map((function(t){for(var e=this.getItemValue(t),n=this.normalize(e),r=n.lastIndexOf(this.query);r>-1;){var i=r+this.query.length;e=e.slice(0,r)+"<strong>"+e.slice(r,i)+"</strong>"+e.slice(i),r=n.slice(0,r).lastIndexOf(this.query)}return{original:t,string:e}}).bind(this)))},s.prototype.getItemValue=function(t){return t},t.exports=s},SGHC:function(t,e,n){"use strict";t.exports={parse:function(t){var e,n;return{raw:t,type:(n=(e=t.split(";"))[0].trim().split("+"))[0],suffix:n[1]?"+"+n[1]:"",params:e.slice(1).reduce(function(t,e){return t[(e=e.split("="))[0].trim()]=e[1]?e[1].trim():void 0,t},{})}}}},TO51:function(t,e,n){"use strict";var r=n("6Xbx"),i=n("AP4T"),o=n("E9/g"),s=n("qLnt"),a=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return Object(r.b)(e,t),e}(Error),u=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return Object(r.b)(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(s.a),l=n("V7AE");n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var c=function(t){function e(e){t.call(this,e),this.destination=e}return Object(r.b)(e,t),e}(o.a),h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return Object(r.b)(e,t),e.prototype[l.a]=function(){return new c(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(i.a),p=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return Object(r.b)(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.a.EMPTY},e}(h)},URbD:function(t,e,n){"use strict";var r=n("6Xbx"),i=n("TO51"),o=n("AP4T"),s=n("E9/g"),a=n("qLnt");function u(){return function(t){return t.lift(new l(t))}}var l=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),c=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.b)(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(s.a),h=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return Object(r.b)(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=a.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return u()(this)},e}(o.a).prototype,p={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}},f=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.b)(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);function d(){return new i.a}e.a=function(){return this,u()((t=d,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,p);return r.source=e,r.subjectFactory=n,r})(this));var t}},UWqp:function(t,e,n){"use strict";var r=n("iCFw");t.exports=function(t){var e=t.split(".")[1];if(!e)return null;var n=(e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4;if(2===n&&(e+="=="),3===n&&(e+="="),1===n||n>3)return null;try{return JSON.parse(r.decode(e)).u}catch(t){return null}}},V7AE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("xIGM").a.Symbol,i="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber"},"VB/m":function(t,e,n){"use strict";var r,i;function o(t){return(t=encodeURIComponent(t)).replace(r,"+")}function s(t){return t=t.replace(i," "),decodeURIComponent(t)}r=/%20/g,i=/\+/g,t.exports={read:function(t){var e={};return t.split("&").forEach(function(t){var n,r,i;r=s((n=t.split("="))[0]),i=2===n.length?s(n[1]):null,r in e?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(i)):e[r]=i}),e},write:function(t){var e="";return Object.keys(t).forEach(function(n){e=function t(e,n,r){return Array.isArray(r)?r.forEach(function(r){e=t(e,n,r)}):(e.length>0&&(e+="&"),e+=o(n),null!=r&&(e+="="+o(r))),e}(e,n,t[n])}),e}}},WvZx:function(t,e,n){"use strict";n("eUNX");var r=n("s/ZR"),i=n("osEz"),o=n("7UKz"),s=n("Xgfo"),a=r({success:function(t,e){var n=t&&t.headers&&t.headers.Link,r=t&&t.request&&t.request.originator;if(n){var a=i.parse(n).filter(function(t){return"next"===t.rel})[0];a&&(t.nextPage=function(t){var n=o.parse(a.href),i=s.parse(n.query);return i.access_token=i.access_token||e.access_token,n.search=s.stringify(i),r({path:o.format(n),callback:t})})}return t}});t.exports=a},X9jl:function(t,e,n){"use strict";var r=n("CvOP"),i=n("t9Xo"),o=n("wR2Q"),s=n("rOzH").EventEmitter,a=n("6GMu"),u=n("N7yg");function l(t){this._eventEmitter=new s,this.options=o({},this.options,t)}l.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0,minLength:2,limit:5},onAdd:function(t){this._map=t,this.mapboxClient=new u(this.options.accessToken),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var i=document.createElement("div");return i.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",i.appendChild(this._clearEl),i.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(i),this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this._typeahead.getItemValue=function(t){return t.place_name},e},onRemove:function(){return this.container.parentNode.removeChild(this.container),this._map=null,this},_onKeyDown:i(function(t){var e=t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!e.value)return this._clearEl.style.display="none";t.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(t.keyCode)||e.value.length>=this.options.minLength&&this._geocode(e.value)},200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var t=this._typeahead.selected;if(t){if(this.options.flyTo)if(!a[t.id]&&(t.bbox&&t.context&&t.context.length<=3||t.bbox&&!t.context)){var e=t.bbox;this._map.fitBounds([[e[0],e[1]],[e[2],e[3]]])}else a[t.id]?this._map.fitBounds(a[t.id].bbox):this._map.flyTo({center:t.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:t})}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});var e=this.mapboxClient.geocodeForward(t,this.options),n=[];return this.options.localGeocoder&&((n=this.options.localGeocoder(t))||(n=[])),e.then((function(t){this._loadingEl.style.display="none";var e=t.entity;e.features=e.features?n.concat(e.features):n,this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)}).bind(this)),e.catch((function(t){this._loadingEl.style.display="none",n.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",{features:n}),this._typeahead.update(n),this._eventEmitter.emit("error",{error:t})}).bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear")},_onQueryResult:function(t){var e=t.entity;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},query:function(t){return this._geocode(t).then(this._onQueryResult),this},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}},t.exports=l},Xgfo:function(t,e,n){"use strict";e.decode=e.parse=n("rSoR"),e.encode=e.stringify=n("mTPF")},YGNo:function(t,e,n){"use strict";var r=n("y3Qk");function i(t,e){return t.then(function(t){return t&&t[e]},function(t){return Promise.reject(t&&t[e])})}function o(){return i(this,"entity")}function s(){return i(i(this,"status"),"code")}function a(){return i(this,"headers")}function u(t){return t=r(t),i(this.headers(),t)}function l(t){return c((t=[].concat(t)).reduce(function(t,e){return t.then(function(t){if("string"==typeof e&&(e={rel:e}),"function"!=typeof t.entity.clientFor)throw new Error("Hypermedia response expected");return t.entity.clientFor(e.rel)({params:e.params})})},this))}function c(t){return t.status=s,t.headers=a,t.header=u,t.entity=o,t.follow=l,t}function h(t,e,n){return c(Promise.resolve(t).then(e,n))}h.make=c,h.reject=function(t){return c(Promise.reject(t))},h.promise=function(t){return c(new Promise(t))},t.exports=h},YuZA:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="YuZA"},ZwkM:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},b6AT:function(t,e,n){"use strict";t.exports=function(t,e){return e&&(t.skip=function(){return e}),t.wrap=function(e,n){return e(t,n)},t.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t}},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("LMZF"),i=function(){},o=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),s=n("6Xbx"),a=function(){},u=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],l={},c=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),h=new r.k("UseV4Plurals"),p=function(){},f=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(s.b)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=l[e];if(n)return n;var r=e.split("-")[0];if(n=l[r])return n;if("en"===r)return u;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[17]}(e||this.locale)(t)){case c.Zero:return"zero";case c.One:return"one";case c.Two:return"two";case c.Few:return"few";case c.Many:return"many";default:return"other"}},e}(p),d=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),g=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(r.I)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new d(null,e.ngForOf,-1,-1),i),s=new y(t,o);n.push(s)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),s=new y(t,o),n.push(s))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),y=function(t,e){this.record=t,this.view=e},m=function(){function t(t,e){this._viewContainer=t,this._context=new _,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),_=function(){this.$implicit=null,this.ngIf=null},v=function(){},x=new r.k("DocumentToken"),b=n("N/q0"),w=n("X9jl"),E={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-77.034084142948,38.909671288923]},properties:{phoneFormatted:"(202) 234-7336",phone:"2022347336",address:"1471 P St NW",city:"Washington DC",country:"United States",crossStreet:"at 15th St NW",postalCode:"20005",state:"D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.049766,38.900772]},properties:{phoneFormatted:"(202) 507-8357",phone:"2025078357",address:"2221 I St NW",city:"Washington DC",country:"United States",crossStreet:"at 22nd St NW",postalCode:"20037",state:"D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.043929,38.910525]},properties:{phoneFormatted:"(202) 387-9338",phone:"2023879338",address:"1512 Connecticut Ave NW",city:"Washington DC",country:"United States",crossStreet:"at Dupont Circle",postalCode:"20036",state:"D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.0672,38.90516896]},properties:{phoneFormatted:"(202) 337-9338",phone:"2023379338",address:"3333 M St NW",city:"Washington DC",country:"United States",crossStreet:"at 34th St NW",postalCode:"20007",state:"D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.002583742142,38.887041080933]},properties:{phoneFormatted:"(202) 547-9338",phone:"2025479338",address:"221 Pennsylvania Ave SE",city:"Washington DC",country:"United States",crossStreet:"btwn 2nd & 3rd Sts. SE",postalCode:"20003",state:"D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-76.933492720127,38.99225245786]},properties:{address:"8204 Baltimore Ave",city:"College Park",country:"United States",postalCode:"20740",state:"MD"}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.097083330154,38.980979]},properties:{phoneFormatted:"(301) 654-7336",phone:"3016547336",address:"4831 Bethesda Ave",cc:"US",city:"Bethesda",country:"United States",postalCode:"20814",state:"MD"}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.359425054188,38.958058116661]},properties:{phoneFormatted:"(571) 203-0082",phone:"5712030082",address:"11935 Democracy Dr",city:"Reston",country:"United States",crossStreet:"btw Explorer & Library",postalCode:"20190",state:"VA"}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.10853099823,38.880100922392]},properties:{phoneFormatted:"(703) 522-2016",phone:"7035222016",address:"4075 Wilson Blvd",city:"Arlington",country:"United States",crossStreet:"at N Randolph St.",postalCode:"22203",state:"VA"}},{type:"Feature",geometry:{type:"Point",coordinates:[-75.28784,40.008008]},properties:{phoneFormatted:"(610) 642-9400",phone:"6106429400",address:"68 Coulter Ave",city:"Ardmore",country:"United States",postalCode:"19003",state:"PA"}},{type:"Feature",geometry:{type:"Point",coordinates:[-75.20121216774,39.954030175164]},properties:{phoneFormatted:"(215) 386-1365",phone:"2153861365",address:"3925 Walnut St",city:"Philadelphia",country:"United States",postalCode:"19104",state:"PA"}},{type:"Feature",geometry:{type:"Point",coordinates:[-77.043959498405,38.903883387232]},properties:{phoneFormatted:"(202) 331-3355",phone:"2023313355",address:"1901 L St. NW",city:"Washington DC",country:"United States",crossStreet:"at 19th St",postalCode:"20036",state:"D.C."}}]},C=n("CRau"),I=function(){function t(){}return t.prototype.ngOnInit=function(){var t=this;this.storeData=E.features,this.selectedLink=null,b.accessToken="pk.eyJ1IjoibWF0dHpoZW5nMjUiLCJhIjoiY2o1Y3B3YzBrMGNsZDJ3bzg1ZDBjOGxvbiJ9.HjOovjGYk7y6ExHFt3Rv2w",this.map=new b.Map({container:"map",style:"mapbox://styles/mapbox/dark-v9",center:[-77.034084,38.909671],zoom:14,scrollZoom:!0}),this.map.on("load",function(e){t.map.addSource("places",{type:"geojson",data:E});var n=new w({accessToken:b.accessToken,bbox:[-77.210763,38.803367,-76.853675,39.052643]});t.map.addControl(n,"top-left"),t.map.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.map.addLayer({id:"point",source:"single-point",type:"circle",paint:{"circle-radius":10,"circle-color":"#007cbf","circle-stroke-width":3,"circle-stroke-color":"#fff"}}),n.on("result",function(e){var n=e.result.geometry;t.map.getSource("single-point").setData(n),t.buildLocationList(n),t.sortLonLat(0,n),t.createPopUp(t.storeData[0])})}),this.storeData.forEach(function(e,n){var r=document.createElement("div");r.className="marker",new b.Marker(r,{offset:[0,-23]}).setLngLat(e.geometry.coordinates).addTo(t.map),r.addEventListener("click",function(r){document.getElementsByClassName("active"),t.flyToStore(e),t.createPopUp(e),r.stopPropagation(),t.selectedLink=n})})},t.prototype.sortLonLat=function(t,e){var n=[this.storeData[t].geometry.coordinates[1],e.coordinates[1]],r=[this.storeData[t].geometry.coordinates[0],e.coordinates[0]].sort(function(t,e){return t>e?1:t.distance<e.distance?-1:0}),i=n.sort(function(t,e){return t>e?1:t.distance<e.distance?-1:0});this.map.fitBounds([[r[0],i[0]],[r[1],i[1]]],{padding:100})},t.prototype.buildLocationList=function(t){var e=this;this.storeData.forEach(function(n){Object.defineProperty(n.properties,"distance",{value:Object(C.distance)(t,n.geometry),writable:!0,enumerable:!0,configurable:!0}),n.properties.distance=e.roundValue(n.properties.distance)}),this.storeData.sort(function(t,e){return t.properties.distance>e.properties.distance?1:t.properties.distance<e.properties.distance?-1:0})},t.prototype.roundValue=function(t){return Math.round(100*t)/100},t.prototype.flyToStore=function(t){this.map.flyTo({center:t.geometry.coordinates,zoom:15})},t.prototype.createPopUp=function(t){var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove(),new b.Popup({closeOnClick:!1}).setLngLat(t.geometry.coordinates).setHTML("<h3>Sweetgreen</h3><h4>"+t.properties.address+"</h4>").addTo(this.map)},t.prototype.moveAndShowInfo=function(t,e){this.flyToStore(t),this.createPopUp(t),this.selectedLink=e},t}(),S=r.Q({encapsulation:2,styles:[['h1{font-size:22px;margin:0;font-weight:400;line-height:20px;padding:20px 2px}a{color:#404040;text-decoration:none}a:hover{color:#101010}.sidebar{position:absolute;width:33.3333%;height:100%;top:0;left:0;overflow:hidden;border-right:1px solid rgba(0,0,0,.25)}.pad2{padding:20px}.map{position:absolute;left:33.3333%;width:66.6666%;top:0;bottom:0}.heading{background:#fff;border-bottom:1px solid #eee;height:60px;line-height:60px;padding:0 10px}.listings{height:calc(100% - 60px);overflow:auto;padding-bottom:60px}.listings .item{display:block;border-bottom:1px solid #eee;padding:10px;text-decoration:none}.listings .item:last-child{border-bottom:none}.listings .item .title{display:block;color:#00853e;font-weight:700}.listings .item .title small{font-weight:400}.listings .item.active .title,.listings .item .title:hover{color:#8cc63f}.listings .item.active{background-color:#f8f8f8}.marker{border:none;cursor:pointer;height:56px;width:56px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAWjSURBVGiB7ZpRaBN3HMc/17TJ2qaJm22p1Fo67eqgBh0bK0HbMcteDN3DHiYoboJ7GOvEN8UJY+DmfBPWPU1wAx3zYchKijAqrKWEDmSTUJjaulJLUdp0M2namLT19pC7cj2b5H+5/1mVfSDk/7/73+//+97/7v7/+/1OUVWV55mS9XbAaUodtq8AG4EqwKv9A8wBSe1/FnDsMnJCoAt4GdgOtJAVlo8kcAu4CfwNLMt0RpF4D5YArwFvUVhULpLAb8AfwCMZTskS+ArwDlCtb0hkFlznb4SbwqOR7XcT09XxdLIqkV7wAvg8FUm/xzu3xVcbCzUHbx7ZGRr3uSuMIxcDfgVu23XMrkAF2Avs1jdEp+94j/X3dEQmRwLp5YxbxIjH5c4EG1qj5zq7BwK1W5OGXUPANWzco3YEeoD3yI4e8YfJ0sN9Z9vDY5G2xeWlsmIMlrlKF0PbgsMX9h0f9L/gXdI23wZ+BtLF2CxWoAv4EGgAGImNe0OXT+yfiN+vL8aYmUZ/3VT4/a9/aq1u0kdzEvieIh5AxQp8F9gFEB6N1B7sPX0gnp73FWMoF35PZeJi16lLoebgtLbpT+AXq3aKmejb0MSNxMa9TogDiKfnfQd7Tx8YiY3rT+RdWt+WsCrQD3RC9p4LXT6x3wlxOvH0vC90+cT++MOkPl93aj4IY1Xg22iLg8N9Z9tl3XP5mIjfrz/cd7Zdq5ZqPghjRWAdEIDsVBAeixS8XPZs3sHc0b6V+tzRvsfqezbvKNhxeCzSFp2+o1+qAc0XIawIbCM773Gsv6dDZCo4+eaBgkZF2iwuL5Ud6+/p0KoKFu5FUYElZNeVJDILrsjkSEDkoN31hUdHpA1AZHIkkMgsuLRqC4K+iwpsBMoBzt8IN4muUGSSXs64z98IN2nVcs2ngogKbNEL4dHIdou+ScPUd0vOhgZEX5c26oW7ienqfA3XwvhgWasuiqnvjTkbGhAdwZXXn3g6WZWvoZOY+hZ6JRMVuGJYf+UR4dDVM8RS8Zz7Y6k4h66eETVn7lvoRIsKLBf2wsCV0SHeuPgxV0aHLO2T6ZOowJRe8Hkqkvkamsk1SoVGdy1MfadyNjQgKnBOL/g93rl8DZ3E1LeQH6ICV87cFl9tzIpTMjH1LXQliQqc1Quh5uBNK07JxNT3bM6GBkQF3tILR3aGxj0ud8aKYzLwuNyZIztD42v5lA9RgRNoN7XPXbEcbGiNWvTPNsGG1qgh8pbSfCqIqMBHGM7Yuc7ugTJX6aI1F4unzFW6eK6ze8Cw6RaCcVMrr0vDaOG7QO3WZGhbcNjCsbYIbQsOG8KJquaLEFYE3gdWLs0L+44PNvrrpkQPPvP7j2uWC9Hor5u6sO/4oGFTVPNFCKtRNT/wKdoifSQ27t39wycfORWX8XsqE0MffPudIXy4BHwDCK8QrMZk4kC/Xmmtbkpe7Dp1ye+pTFi0UxA9bGgQh9a3peWP7bgoPJHALxQZF5US2QZHQ/ewDpFtMOUmdCQnX2CdchMrx2PKLumY02d3/p1aFUPZ+mL9RJ70mc66ZpeMPJYffKyjrzo+N9bVkwNf5LEnLT8oK4V9GxjjKczwyszRPwKuk33aPZc5+tWGFaWqvLzc39XVVVtTU7OhZ1P0mnF/973A3pmZmQe9vb3TqVQqrqqqIy/SUgUqilJJNpy3AVg9VXzZfn1V/bPB102HLwIPgFlVVedl+STlElUURQE2ab9iKQNqgBpFUe4B91QJZ9/2l06KopQAzdgTZ2YT0KzZtoWMT7leQjBGaZEqzbYtZAiskWDDMdu2HzKKorwKVNh1JAcLqqr+ZceAjBGckWDDMdsyBP6DYBDWInOabVtImQclTRNGpE0TT26iL4wjE72jSzXAB7jJii3TygAZsoIWtXLimViqPY08999s/y/wWec/5M9E6Z5VbdoAAAAASUVORK5CYII=);background-color:transparent}.mapboxgl-popup{padding-bottom:50px}.mapboxgl-popup-close-button{display:none}.mapboxgl-popup-content{font:400 15px/22px Source Sans Pro,Helvetica Neue,Sans-serif;padding:0;width:180px}.mapboxgl-popup-content-wrapper{padding:1%}.mapboxgl-popup-content h3{background:#91c949;color:#fff;margin:0;display:block;padding:10px;border-radius:3px 3px 0 0;font-weight:700;margin-top:-15px}.mapboxgl-popup-content h4{margin:0;display:block;padding:10px;font-weight:400}.mapboxgl-popup-content div{padding:10px}.mapboxgl-container .leaflet-marker-icon{cursor:pointer}.mapboxgl-popup-anchor-top>.mapboxgl-popup-content{margin-top:15px}.mapboxgl-popup-anchor-top>.mapboxgl-popup-tip{border-bottom-color:#91c949}.mapboxgl-ctrl-geocoder{border:0;border-radius:0;position:relative;top:0;width:800px;margin-top:0}.mapboxgl-ctrl-geocoder>div{min-width:100%;margin-left:0}::-webkit-scrollbar{width:3px;height:3px;border-left:0;background:rgba(0,0,0,.1)}::-webkit-scrollbar-track{background:none}::-webkit-scrollbar-thumb{background:#00853e;border-radius:0}.clearfix{display:block}.clearfix:after{content:".";display:block;height:0;clear:both;visibility:hidden}']],data:{}});function T(t){return r._5(0,[(t()(),r.S(0,0,null,null,7,null,null,null,null,null,null,null)),(t()(),r._4(-1,null,["\n          "])),(t()(),r.S(2,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),r._4(-1,null,["\n            "])),(t()(),r.S(4,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r._4(5,null,["\n              ","\n            "])),(t()(),r._4(-1,null,["\n          "])),(t()(),r._4(-1,null,["\n        "]))],null,function(t,e){t(e,5,0,e.parent.context.$implicit.properties.distance+" km away")})}function M(t){return r._5(0,[(t()(),r.S(0,0,null,null,10,"div",[["class","item"]],[[1,"id",0],[2,"active",null]],null,null,null,null)),(t()(),r._4(-1,null,["\n      "])),(t()(),r.S(2,0,null,null,1,"a",[["class","title"],["href","#"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.moveAndShowInfo(t.context.$implicit,t.context.index)&&r),r},null,null)),(t()(),r._4(3,null,["\n        ","\n      "])),(t()(),r._4(-1,null,["\n      "])),(t()(),r.S(5,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r._4(6,null,["\n        ","\n        "])),(t()(),r.N(16777216,null,null,1,null,T)),r.R(8,16384,null,0,m,[r.C,r.z],{ngIf:[0,"ngIf"]},null),(t()(),r._4(-1,null,["\n      "])),(t()(),r._4(-1,null,["\n    "]))],function(t,e){t(e,8,0,e.context.$implicit.properties.distance)},function(t,e){t(e,0,0,"listing-"+e.context.index,e.component.selectedLink===e.context.index),t(e,3,0,e.context.$implicit.properties.address),t(e,6,0,e.context.$implicit.properties.city+" \xb7 "+e.context.$implicit.properties.phoneFormatted)})}function A(t){return r._5(0,[(t()(),r.S(0,0,null,null,13,"div",[["class","sidebar"]],null,null,null,null,null)),(t()(),r._4(-1,null,["\n  "])),(t()(),r.S(2,0,null,null,4,"div",[["class","heading"]],null,null,null,null,null)),(t()(),r._4(-1,null,["\n    "])),(t()(),r.S(4,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r._4(-1,null,["Our locations"])),(t()(),r._4(-1,null,["\n  "])),(t()(),r._4(-1,null,["\n  "])),(t()(),r.S(8,0,null,null,4,"div",[["class","listings"],["id","listings"]],null,null,null,null,null)),(t()(),r._4(-1,null,["\n    "])),(t()(),r.N(16777216,null,null,1,null,M)),r.R(11,802816,null,0,g,[r.C,r.z,r.m],{ngForOf:[0,"ngForOf"]},null),(t()(),r._4(-1,null,["\n  "])),(t()(),r._4(-1,null,["\n"])),(t()(),r._4(-1,null,["\n"])),(t()(),r.S(15,0,null,null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null)),(t()(),r._4(-1,null,["\n"]))],function(t,e){t(e,11,0,e.component.storeData)},null)}var P=r.Q({encapsulation:0,styles:[["body[_ngcontent-%COMP%]{background:#404040;color:#f8f8f8;font:400 15px/22px Source Sans Pro,Helvetica Neue,Sans-serif;margin:0;padding:0;-webkit-font-smoothing:antialiased}*[_ngcontent-%COMP%]{-webkit-box-sizing:border-box;box-sizing:border-box}"]],data:{}});function L(t){return r._5(0,[(t()(),r.S(0,0,null,null,1,"app-mapbox",[],null,null,null,A,S)),r.R(1,114688,null,0,I,[],null,null),(t()(),r._4(-1,null,["\n"]))],function(t,e){t(e,1,0)},null)}var N=r.O("app-root",o,function(t){return r._5(0,[(t()(),r.S(0,0,null,null,1,"app-root",[],null,null,null,L,P)),r.R(1,114688,null,0,o,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),R=null;function O(){return R}var D,k={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},z={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},F={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r.T.Node&&(D=r.T.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var j,B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.b)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,R||(R=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,n)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return k},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return D.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&F.hasOwnProperty(e)&&(e=F[e]))}return z[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=V||(V=document.querySelector("base"))?V.getAttribute("href"):null;return null==n?null:(e=n,j||(j=document.createElement("a")),j.setAttribute("href",e),"/"===j.pathname.charAt(0)?j.pathname:"/"+j.pathname)},e.prototype.resetBaseElement=function(){V=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){e=encodeURIComponent(e);for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),s=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],a=s[1];if(s[0].trim()===e)return decodeURIComponent(a)}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(s.b)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),V=null,q=x;function U(){return!!window.history.pushState}var G=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(s.b)(e,t),e.prototype._init=function(){this.location=O().getLocation(),this._history=O().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return O().getBaseHref(this._doc)},e.prototype.onPopState=function(t){O().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){O().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){U()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){U()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.j,args:[q]}]}]},e}(a),X=function(){function t(t){this._doc=t,this._dom=O()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,r){return r&&t.push(n._getOrCreateElement(r,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(t,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(r){return n._dom.setAttribute(e,r,t[r])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(r){return n._dom.getAttribute(e,r)===t[r]})},t}(),Z=new r.k("TRANSITION_ID"),Y=[{provide:r.b,useFactory:function(t,e,n){return function(){n.get(r.c).donePromise.then(function(){var n=O();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Z,q,r.l],multi:!0}],H=function(){function t(){}return t.init=function(){Object(r.K)(new t)},t.prototype.addToWindow=function(t){r.T.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.T.getAllAngularTestabilities=function(){return t.getAllTestabilities()},r.T.getAllAngularRootElements=function(){return t.getAllRootElements()},r.T.frameworkStabilizers||(r.T.frameworkStabilizers=[]),r.T.frameworkStabilizers.push(function(t){var e=r.T.getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?O().isShadowRoot(e)?this.findTestabilityInTree(t,O().getHost(e),!0):this.findTestabilityInTree(t,O().parentElement(e),!0):null},t}(),W=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return O().getTitle(this._doc)},t.prototype.setTitle=function(t){O().setTitle(this._doc,t)},t}();function K(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r.T.ng=r.T.ng||{})[t]=e)}var J={ApplicationRef:r.e,NgZone:r.r};function Q(t){return Object(r.H)(t)}var $=new r.k("EventManagerPlugins"),tt=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),et=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=O().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),nt=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),rt=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(s.b)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return O().remove(t)})},e}(nt),it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ot=/%COMP%/g,st="_nghost-%COMP%",at="_ngcontent-%COMP%";function ut(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?ut(t,i,n):(i=i.replace(ot,t),n.push(i))}return n}function lt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var ct=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new ht(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.D.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new gt(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case r.D.Native:return new yt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=ut(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),ht=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(it[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=it[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=it[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&r.w.DashCase?t.style.setProperty(e,n,i&r.w.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&r.w.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){ft(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return ft(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,lt(n)):this.eventManager.addEventListener(t,e,lt(n))},t}(),pt="@".charCodeAt(0);function ft(t,e){if(t.charCodeAt(0)===pt)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var dt,gt=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=ut(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=at.replace(ot,r.id),i.hostAttr=st.replace(ot,r.id),i}return Object(s.b)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(ht),yt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=ut(i.id,i.styles,[]),a=0;a<s.length;a++){var u=document.createElement("style");u.textContent=s[a],o.shadowRoot.appendChild(u)}return o}return Object(s.b)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(ht),mt="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},_t=mt("addEventListener"),vt=mt("removeEventListener"),xt={},bt="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[mt("BLACK_LISTED_EVENTS")]&&(dt={});var wt=function(t){return!!dt&&dt.hasOwnProperty(t)},Et=function(t){var e=xt[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[bt];o++){var s;(s=i[o]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},Ct=function(t){function e(e,n){var r=t.call(this,e)||this;return r.ngZone=n,r.patchEvent(),r}return Object(s.b)(e,t),e.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[bt]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,o=n;if(!t[_t]||r.r.isInAngularZone()&&!wt(e))t.addEventListener(e,o,!1);else{var s=xt[e];s||(s=xt[e]=mt("ANGULAR"+e+"FALSE"));var a=t[s],u=a&&a.length>0;a||(a=t[s]=[]);var l=wt(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:l,handler:o});else{for(var c=!1,h=0;h<a.length;h++)if(a[h].handler===o){c=!0;break}c||a.push({zone:l,handler:o})}u||t[_t](e,Et,!1)}return function(){return i.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[vt];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=xt[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,Et,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(et),It={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},St=new r.k("HammerGestureConfig"),Tt=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Mt=function(t){function e(e,n){var r=t.call(this,e)||this;return r._config=n,r}return Object(s.b)(e,t),e.prototype.supports=function(t){if(!It.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();return e=e.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(t),s=function(t){i.runGuarded(function(){n(t)})};return o.on(e,s),function(){return o.off(e,s)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(et),At=["alt","control","meta","shift"],Pt={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Lt=function(t){function e(e){return t.call(this,e)||this}return Object(s.b)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return O().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if(At.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=o,s},e.getEventFullKey=function(t){var e="",n=O().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),At.forEach(function(r){r!=n&&(0,Pt[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded(function(){return n(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(et),Nt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Rt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ot(t){return(t=String(t)).match(Nt)||t.match(Rt)?t:(Object(r.I)()&&O().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}var Dt=null,kt=null;function zt(t){for(var e={},n=0,r=t.split(",");n<r.length;n++)e[r[n]]=!0;return e}function Ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];for(var s in o)o.hasOwnProperty(s)&&(n[s]=!0)}return n}var jt=zt("area,br,col,hr,img,wbr"),Bt=zt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vt=zt("rp,rt"),qt=Ft(Vt,Bt),Ut=Ft(jt,Ft(Bt,zt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ft(Vt,zt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qt),Gt=zt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xt=zt("srcset"),Zt=Ft(Gt,Xt,zt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Yt=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(kt.isElementNode(e)?this.startElement(e):kt.isTextNode(e)?this.chars(kt.nodeValue(e)):this.sanitizedSomething=!0,kt.firstChild(e))e=kt.firstChild(e);else for(;e;){kt.isElementNode(e)&&this.endElement(e);var n=Ht(e,kt.nextSibling(e));if(n){e=n;break}e=Ht(e,kt.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=kt.nodeName(t).toLowerCase();Ut.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),kt.attributeMap(t).forEach(function(t,n){var r,i=n.toLowerCase();Zt.hasOwnProperty(i)?(Gt[i]&&(t=Ot(t)),Xt[i]&&(r=t,t=(r=String(r)).split(",").map(function(t){return Ot(t.trim())}).join(", ")),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(Jt(t)),e.buf.push('"')):e.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=kt.nodeName(t).toLowerCase();Ut.hasOwnProperty(e)&&!jt.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(Jt(t))},t}();function Ht(t,e){if(e&&kt.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+kt.getOuterHTML(t));return e}var Wt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kt=/([^\#-~ |!])/g;function Jt(t){return t.replace(/&/g,"&amp;").replace(Wt,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Kt,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Qt(t){kt.attributeMap(t).forEach(function(e,n){"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||kt.removeAttribute(t,n)});for(var e=0,n=kt.childNodesAsList(t);e<n.length;e++){var r=n[e];kt.isElementNode(r)&&Qt(r)}}var $t=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),te=/^url\(([^)]+)\)$/,ee=function(){},ne=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(s.b)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case r.y.NONE:return e;case r.y.HTML:return e instanceof ie?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){try{var n=function(){if(Dt)return Dt;var t=(kt=O()).createElement("template");if("content"in t)return t;var e=kt.createHtmlDocument();if(null==(Dt=kt.querySelector(e,"body"))){var n=kt.createElement("html",e);Dt=kt.createElement("body",e),kt.appendChild(n,Dt),kt.appendChild(e,n)}return Dt}(),i=e?String(e):"",o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,kt.setInnerHTML(n,i=s),t.documentMode&&Qt(n),s=kt.getInnerHTML(n)}while(i!==s);for(var a=new Yt,u=a.sanitizeChildren(kt.getTemplateContent(n)||n),l=kt.getTemplateContent(n)||n,c=0,h=kt.childNodesAsList(l);c<h.length;c++)kt.removeChild(l,h[c]);return Object(r.I)()&&a.sanitizedSomething&&kt.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}catch(t){throw Dt=null,t}}(this._doc,String(e)));case r.y.STYLE:return e instanceof oe?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(te);return e&&Ot(e[1])===e[1]||t.match($t)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Object(r.I)()&&O().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case r.y.SCRIPT:if(e instanceof se)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.y.URL:return e instanceof ue||e instanceof ae?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Ot(String(e)));case r.y.RESOURCE_URL:if(e instanceof ue)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof re)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new ie(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new oe(t)},e.prototype.bypassSecurityTrustScript=function(t){return new se(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new ae(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new ue(t)},e}(ee),re=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.b)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(re),oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.b)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(re),se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.b)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(re),ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.b)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(re),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.b)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(re),le=[{provide:r.t,useValue:"browser"},{provide:r.u,useValue:function(){B.makeCurrent(),H.init()},multi:!0},{provide:a,useClass:G,deps:[q]},{provide:q,useFactory:function(){return document},deps:[]}],ce=Object(r.F)(r.J,"browser",le);function he(){return new r.h}var pe=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:Z,useExisting:r.a},Y]}},t}();"undefined"!=typeof window&&window;var fe=function(){},de=function(){},ge=r.P(i,[o],function(t){return r.Y([r.Z(512,r.g,r.L,[[8,[N]],[3,r.g],r.p]),r.Z(5120,r.o,r._2,[[3,r.o]]),r.Z(4608,p,f,[r.o,[2,h]]),r.Z(4608,r.f,r.f,[]),r.Z(5120,r.a,r.U,[]),r.Z(5120,r.m,r._0,[]),r.Z(5120,r.n,r._1,[]),r.Z(4608,ee,ne,[x]),r.Z(6144,r.x,null,[ee]),r.Z(4608,St,Tt,[]),r.Z(5120,$,function(t,e,n,r,i){return[new Ct(t,e),new Lt(n),new Mt(r,i)]},[x,r.r,x,x,St]),r.Z(4608,tt,tt,[$,r.r]),r.Z(135680,rt,rt,[x]),r.Z(4608,ct,ct,[tt,rt]),r.Z(6144,r.v,null,[ct]),r.Z(6144,nt,null,[rt]),r.Z(4608,r.A,r.A,[r.r]),r.Z(4608,X,X,[x]),r.Z(4608,W,W,[x]),r.Z(4608,fe,fe,[]),r.Z(512,v,v,[]),r.Z(1024,r.h,he,[]),r.Z(1024,r.b,function(t){return[(e=t,K("probe",Q),K("coreTokens",Object(s.a)({},J,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return Q})];var e},[[2,r.q]]),r.Z(512,r.c,r.c,[[2,r.b]]),r.Z(131584,r.e,r.e,[r.r,r.M,r.l,r.h,r.g,r.c]),r.Z(512,r.d,r.d,[r.e]),r.Z(512,pe,pe,[[3,pe]]),r.Z(512,de,de,[]),r.Z(512,i,i,[])])});Object(r.G)(),ce().bootstrapModuleFactory(ge)},d0It:function(t,e,n){"use strict";var r,i,o,s,a;function u(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writeable:!0})}r=n("jlNr"),i=n("B9i0"),o=n("hhp/"),s=n("iru7"),a=n("YGNo"),t.exports={read:function(t,e){var n,l;function c(t,e){(e&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+t+"' is deprecated, see "+e)}return n=(e=e||{}).client,l=e.console||l,e.registry.lookup(e.mime.suffix).then(function(n){return n.read(t,e)}).then(function(t){return o.findProperties(t,"_embedded",function(t,e,n){Object.keys(t).forEach(function(n){if(!(n in e)){var r=a({entity:t[n]});u(e,n,r)}}),u(e,n,t)}),o.findProperties(t,"_links",function(t,e,o){Object.keys(t).forEach(function(r){var o=t[r];r in e||u(e,r,a.make(s(function(){return o.deprecation&&c(r,o.deprecation),!0===o.templated?i(n)({path:o.href}):n({path:o.href})})))}),u(e,o,t),u(e,"clientFor",function(e,o){var s=t[e];if(!s)throw new Error("Unknown relationship: "+e);return s.deprecation&&c(e,s.deprecation),!0===s.templated?i(o||n,{template:s.href}):r(o||n,{prefix:s.href})}),u(e,"requestFor",function(t,e,n){return this.clientFor(t,n)(e)})}),t})},write:function(t,e){return e.registry.lookup(e.mime.suffix).then(function(n){return n.write(t,e)})}}},eUNX:function(t,e,n){"use strict";(function(t){"undefined"==typeof Promise&&n("3Q9K").polyfill(),t.export=Promise}).call(e,n("ZwkM")(t))},"f/RY":function(t,e,n){"use strict";var r=n("u/yP"),i=n("pngu");r.setPlatformDefaultClient(i),t.exports=r},fRUx:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},grVA:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},"hhp/":function(t,e,n){"use strict";t.exports={findProperties:function t(e,n,r){"object"==typeof e&&null!==e&&(n in e&&r(e[n],e,n),Object.keys(e).forEach(function(i){t(e[i],n,r)}))}}},iCFw:function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports={encode:function(t){if(/([^\u0000-\u00ff])/.test(t))throw new Error("Can't base64 encode non-ASCII characters.");for(var e,n,i,o=0,s=[];o<t.length;){switch(e=t.charCodeAt(o),i=o%3){case 0:s.push(r.charAt(e>>2));break;case 1:s.push(r.charAt((3&n)<<4|e>>4));break;case 2:s.push(r.charAt((15&n)<<2|e>>6)),s.push(r.charAt(63&e))}n=e,o+=1}return 0===i?(s.push(r.charAt((3&n)<<4)),s.push("==")):1===i&&(s.push(r.charAt((15&n)<<2)),s.push("=")),s.join("")},decode:function(t){if(t=t.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(t)||t.length%4>0)throw new Error("Not a base64-encoded string.");var e,n,i=0,o=[];for(t=t.replace(/\=/g,"");i<t.length;){switch(e=r.indexOf(t.charAt(i)),i%4){case 1:o.push(String.fromCharCode(n<<2|e>>4));break;case 2:o.push(String.fromCharCode((15&n)<<4|e>>2));break;case 3:o.push(String.fromCharCode((3&n)<<6|e))}n=e,i+=1}return o.join("")}}},iru7:function(t,e,n){"use strict";var r=n("QQ8X");t.exports=function(t){var e,n,i,o;return e=!1,i=new Promise(function(t,e){n={resolve:t,reject:e}}),o=i.then,i.then=function(){return e||(e=!0,r(t).then(n.resolve,n.reject)),o.apply(i,arguments)},i}},jlNr:function(t,e,n){"use strict";var r,i;r=n("s/ZR"),i=n("OFCk"),t.exports=r({request:function(t,e){var n,r;return e.prefix&&!new i(t.path).isFullyQualified()&&(n=e.prefix,t.path&&((r=n).lastIndexOf("/")+"/".length===r.length||0===t.path.indexOf("/")||(n+="/"),n+=t.path),t.path=n),t}})},k7UF:function(t,e){"Use strict";var n=function(t){return this.component=t,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",this.selectingListItem=!1,t.el.parentNode.insertBefore(this.element,t.el.nextSibling),this};n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(t){this.items.push(t)},n.prototype.clear=function(){this.items=[],this.active=0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},n.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},n.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},n.prototype.move=function(t){this.active=t,this.draw()},n.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.exports=n},lI8y:function(t,e,n){"use strict";var r,i,o;r=n("s/ZR"),i=n("MN+7"),o=function(){function t(t,e,n){(t in e||t in n)&&(e[t]=i({},n[t],e[t]))}function e(t,e,n){t in n&&!(t in e)&&(e[t]=n[t])}var n={method:e,path:e,params:t,headers:t,entity:e,mixin:t};return function(t,e){for(var r in n)n[r](r,t,e);return t}}(),t.exports=r({request:function(t,e){return o(t,e)}})},lopz:function(t,e,n){var r;t.exports=r={},r.simpleFilter=function(t,e){return e.filter(function(e){return r.test(t,e)})},r.test=function(t,e){return null!==r.match(t,e)},r.match=function(t,e,n){var r,i=0,o=[],s=e.length,a=0,u=0,l=(n=n||{}).pre||"",c=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<s;p++)r=e[p],h[p]===t[i]?(r=l+r+c,i+=1,u+=1+u):u=0,a+=u,o[o.length]=r;return i===t.length?(a=h===t?1/0:a,{rendered:o.join(""),score:a}):null},r.filter=function(t,e,n){return e&&0!==e.length?"string"!=typeof t?e:(n=n||{},e.reduce(function(e,i,o,s){var a=i;n.extract&&(a=n.extract(i));var u=r.match(t,a,n);return null!=u&&(e[e.length]={string:u.rendered,score:u.score,index:o,original:i}),e},[]).sort(function(t,e){return e.score-t.score||t.index-e.index})):[]}},mTPF:function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},mz3w:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e,r=n("xIGM").a.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}()},osEz:function(t,e){t.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){var r={start:function(){var t,n,r,s,a,c,h,p,f;for(c=i,h=i,t=[],p=i,f=i,null!==(n=l())&&null!==(r=m())?(44===e.charCodeAt(i)?(s=",",i++):(s=null,0===o&&u('","')),null!==s&&null!==(a=m())?n=[n,r,s,a]:(n=null,i=f)):(n=null,i=f),null!==n&&(n=n[0]),null===n&&(i=p);null!==n;)t.push(n),p=i,f=i,null!==(n=l())&&null!==(r=m())?(44===e.charCodeAt(i)?(s=",",i++):(s=null,0===o&&u('","')),null!==s&&null!==(a=m())?n=[n,r,s,a]:(n=null,i=f)):(n=null,i=f),null!==n&&(n=n[0]),null===n&&(i=p);return null!==t&&null!==(n=l())?t=[t,n]:(t=null,i=h),null!==t&&(t=t[0].concat([t[1]])),null===t&&(i=c),t},LinkValue:l,LinkParams:c,URIReference:h,LinkParam:p,LinkParamName:f,LinkParamValue:d,PToken:g,PTokenChar:y,OptionalSP:m,QuotedString:_,QuotedStringInternal:v,Char:x,UpAlpha:b,LoAlpha:w,Alpha:E,Digit:C,SP:I,DQ:S,QDText:T,QuotedPair:M};if(void 0!==n){if(void 0===r[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="start";var i=0,o=0,s=0,a=[];function u(t){i<s||(i>s&&(s=i,a=[]),a.push(t))}function l(){var t,n,r,s,a,l,p,f,d,g;if(p=i,f=i,60===e.charCodeAt(i)?(t="<",i++):(t=null,0===o&&u('"<"')),null!==t)if(null!==(n=h()))if(62===e.charCodeAt(i)?(r=">",i++):(r=null,0===o&&u('">"')),null!==r)if(null!==(s=m())){for(a=[],l=c();null!==l;)a.push(l),l=c();null!==a?t=[t,n,r,s,a]:(t=null,i=f)}else t=null,i=f;else t=null,i=f;else t=null,i=f;else t=null,i=f;return null!==t&&(d=t[1],g={},t[4].forEach(function(t){g[t[0]]=t[1]}),g.href=d,t=g),null===t&&(i=p),t}function c(){var t,n,r,s,a,l;return a=i,l=i,59===e.charCodeAt(i)?(t=";",i++):(t=null,0===o&&u('";"')),null!==t&&null!==(n=m())&&null!==(r=p())&&null!==(s=m())?t=[t,n,r,s]:(t=null,i=l),null!==t&&(t=t[2]),null===t&&(i=a),t}function h(){var t,n,r;if(r=i,/^[^>]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[^>]")),null!==n)for(t=[];null!==n;)t.push(n),/^[^>]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[^>]"));else t=null;return null!==t&&(t=t.join("")),null===t&&(i=r),t}function p(){var t,e,n,r;return n=i,r=i,null!==(t=f())&&null!==(e=null!==(e=d())?e:"")?t=[t,e]:(t=null,i=r),null!==t&&(t=[t[0],t[1]]),null===t&&(i=n),t}function f(){var t,n,r;if(r=i,/^[a-z]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[a-z]")),null!==n)for(t=[];null!==n;)t.push(n),/^[a-z]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[a-z]"));else t=null;return null!==t&&(t=t.join("")),null===t&&(i=r),t}function d(){var t,n,r,s;return r=i,s=i,61===e.charCodeAt(i)?(t="=",i++):(t=null,0===o&&u('"="')),null!==t?(null===(n=g())&&(n=_()),null!==n?t=[t,n]:(t=null,i=s)):(t=null,i=s),null!==t&&(t=t[1]),null===t&&(i=r),t}function g(){var t,e,n;if(n=i,null!==(e=y()))for(t=[];null!==e;)t.push(e),e=y();else t=null;return null!==t&&(t=t.join("")),null===t&&(i=n),t}function y(){var t;return 33===e.charCodeAt(i)?(t="!",i++):(t=null,0===o&&u('"!"')),null===t&&(35===e.charCodeAt(i)?(t="#",i++):(t=null,0===o&&u('"#"')),null===t&&(36===e.charCodeAt(i)?(t="$",i++):(t=null,0===o&&u('"$"')),null===t&&(37===e.charCodeAt(i)?(t="%",i++):(t=null,0===o&&u('"%"')),null===t&&(38===e.charCodeAt(i)?(t="&",i++):(t=null,0===o&&u('"&"')),null===t&&(39===e.charCodeAt(i)?(t="'",i++):(t=null,0===o&&u('"\'"')),null===t&&(40===e.charCodeAt(i)?(t="(",i++):(t=null,0===o&&u('"("')),null===t&&(41===e.charCodeAt(i)?(t=")",i++):(t=null,0===o&&u('")"')),null===t&&(42===e.charCodeAt(i)?(t="*",i++):(t=null,0===o&&u('"*"')),null===t&&(43===e.charCodeAt(i)?(t="+",i++):(t=null,0===o&&u('"+"')),null===t&&(45===e.charCodeAt(i)?(t="-",i++):(t=null,0===o&&u('"-"')),null===t&&(46===e.charCodeAt(i)?(t=".",i++):(t=null,0===o&&u('"."')),null===t&&(124===e.charCodeAt(i)?(t="|",i++):(t=null,0===o&&u('"|"')),null===t&&null===(t=C())&&(58===e.charCodeAt(i)?(t=":",i++):(t=null,0===o&&u('":"')),null===t&&(60===e.charCodeAt(i)?(t="<",i++):(t=null,0===o&&u('"<"')),null===t&&(61===e.charCodeAt(i)?(t="=",i++):(t=null,0===o&&u('"="')),null===t&&(62===e.charCodeAt(i)?(t=">",i++):(t=null,0===o&&u('">"')),null===t&&(63===e.charCodeAt(i)?(t="?",i++):(t=null,0===o&&u('"?"')),null===t&&(64===e.charCodeAt(i)?(t="@",i++):(t=null,0===o&&u('"@"')),null===t&&null===(t=E())&&(91===e.charCodeAt(i)?(t="[",i++):(t=null,0===o&&u('"["')),null===t&&(93===e.charCodeAt(i)?(t="]",i++):(t=null,0===o&&u('"]"')),null===t&&(94===e.charCodeAt(i)?(t="^",i++):(t=null,0===o&&u('"^"')),null===t&&(95===e.charCodeAt(i)?(t="_",i++):(t=null,0===o&&u('"_"')),null===t&&(96===e.charCodeAt(i)?(t="`",i++):(t=null,0===o&&u('"`"')),null===t&&(123===e.charCodeAt(i)?(t="{",i++):(t=null,0===o&&u('"{"')),null===t&&(/^[\/\/]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[\\/\\/]")),null===t&&(125===e.charCodeAt(i)?(t="}",i++):(t=null,0===o&&u('"}"')),null===t&&(126===e.charCodeAt(i)?(t="~",i++):(t=null,0===o&&u('"~"'))))))))))))))))))))))))))))),t}function m(){var t,e;for(t=[],e=I();null!==e;)t.push(e),e=I();return t}function _(){var t,e,n,r,o;return r=i,o=i,null!==(t=S())&&null!==(e=v())&&null!==(n=S())?t=[t,e,n]:(t=null,i=o),null!==t&&(t=t[1]),null===t&&(i=r),t}function v(){var t,e,n;for(n=i,t=[],null===(e=T())&&(e=M());null!==e;)t.push(e),null===(e=T())&&(e=M());return null!==t&&(t=t.join("")),null===t&&(i=n),t}function x(){var t;return/^[\0-\x7f]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[\\0-\x7f]")),t}function b(){var t;return/^[A-Z]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[A-Z]")),t}function w(){var t;return/^[a-z]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[a-z]")),t}function E(){var t;return null===(t=b())&&(t=w()),t}function C(){var t;return/^[0-9]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[0-9]")),t}function I(){var t;return/^[ ]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[ ]")),t}function S(){var t;return/^["]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u('["]')),t}function T(){var t;return/^[^"]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u('[^"]')),t}function M(){var t,n,r;return r=i,/^[\\]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[\\\\]")),null!==t&&null!==(n=x())?t=[t,n]:(t=null,i=r),t}var A=r[n]();if(null===A||i!==e.length){var P=Math.max(i,s),L=P<e.length?e.charAt(P):null,N=function(){for(var t=1,n=1,r=!1,o=0;o<Math.max(i,s);o++){var a=e.charAt(o);"\n"===a?(r||t++,n=1,r=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}(a),L,P,N.line,N.column)}return A},toSource:function(){return this._source},SyntaxError:function(e,n,r,i,o){this.name="SyntaxError",this.expected=e,this.found=n,this.message=function(e,n){var r;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+r+" but "+(n?t(n):"end of input")+" found."}(e,n),this.offset=r,this.line=i,this.column=o}};return e.SyntaxError.prototype=Error.prototype,e}()},p1qn:function(t,e,n){"use strict";n("eUNX");var r=n("f/RY");t.exports=function(t){return r.wrap(n("yjLV")).wrap(n("jlNr"),{prefix:t.endpoint}).wrap(n("J+GW"),{mime:"application/json"}).wrap(n("B9i0")).wrap(n("lI8y"),{params:{access_token:t.accessToken}}).wrap(n("WvZx"),{access_token:t.accessToken}).wrap(n("653e")).wrap(n("6Dv3"))}},pngu:function(t,e,n){"use strict";var r,i,o,s;function a(t,e){return Object.keys(e||{}).forEach(function(n){if(e.hasOwnProperty(n)&&n in t)try{t[n]=e[n]}catch(t){}}),t}r=n("y3Qk"),i=n("YGNo"),o=n("b6AT"),s=/[\r|\n]+/,t.exports=o(function(t){return i.promise(function(e,n){var i,o,u,l,c,h,p,f;if(p={request:t="string"==typeof t?{path:t}:t||{}},t.canceled)return p.error="precanceled",void n(p);if(f=t.engine||XMLHttpRequest){c=t.entity,t.method=t.method||(c?"POST":"GET"),o=t.method,u=p.url=t.path||"";try{for(h in a(i=p.raw=new f,t.mixin),i.open(o,u,!0),a(i,t.mixin),l=t.headers)"Content-Type"===h&&"multipart/form-data"===l[h]||i.setRequestHeader(h,l[h]);t.canceled=!1,t.cancel=function(){t.canceled=!0,i.abort(),n(p)},i.onreadystatechange=function(){var n,o;t.canceled||i.readyState===(f.DONE||4)&&(p.status={code:i.status,text:i.statusText},p.headers=(n=i.getAllResponseHeaders(),o={},n?(n.trim().split(s).forEach(function(t){var e,n,i;e=t.indexOf(":"),n=r(t.substring(0,e).trim()),i=t.substring(e+1).trim(),o[n]?Array.isArray(o[n])?o[n].push(i):o[n]=[o[n],i]:o[n]=i}),o):o),p.entity=i.responseText,1223===p.status.code&&(p.status.code=204),p.status.code>0?e(p):setTimeout(function(){e(p)},0))};try{i.onerror=function(){p.error="loaderror",n(p)}}catch(t){}i.send(c)}catch(t){p.error="loaderror",n(p)}}else n({request:t,error:"xhr-not-available"})})})},qLnt:function(t,e,n){"use strict";var r,i=Array.isArray||function(t){return t&&"number"==typeof t.length},o=n("NGRF"),s=n("B1iP"),a={e:{}};function u(){try{return r.apply(this,arguments)}catch(t){return a.e=t,a}}function l(t){return r=t,u}var c=n("6Xbx"),h=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Object(c.b)(e,t),e}(Error);n.d(e,"a",function(){return p});var p=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,u=this._unsubscribe,c=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=r?r.length:0;n;)n.remove(this),n=++p<d&&r[p]||null;if(Object(s.a)(u)&&l(u).call(this)===a&&(e=!0,t=t||(a.e instanceof h?f(a.e.errors):[a.e])),i(c))for(p=-1,d=c.length;++p<d;){var g=c[p];if(Object(o.a)(g)&&l(g.unsubscribe).call(g)===a){e=!0,t=t||[];var y=a.e;y instanceof h?t=t.concat(f(y.errors)):t.push(y)}}if(e)throw new h(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function f(t){return t.reduce(function(t,e){return t.concat(e instanceof h?e.errors:e)},[])}},rC1g:function(t,e,n){"use strict";var r,i;r=n("SGHC"),(i=new function t(e){this.lookup=function(t){var n;return n="string"==typeof t?r.parse(t):t,e[n.raw]?e[n.raw]:e[n.type+n.suffix]?e[n.type+n.suffix]:e[n.type]?e[n.type]:e[n.suffix]?e[n.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+n.raw+'"'))},this.delegate=function(t){return{read:(function(){var e=arguments;return this.lookup(t).then((function(t){return t.read.apply(this,e)}).bind(this))}).bind(this),write:(function(){var e=arguments;return this.lookup(t).then((function(t){return t.write.apply(this,e)}).bind(this))}).bind(this)}},this.register=function(t,n){return e[t]=Promise.resolve(n),e[t]},this.child=function(){return new t(Object.create(e))}}({})).register("application/hal",n("d0It")),i.register("application/json",n("Fag2")),i.register("application/x-www-form-urlencoded",n("VB/m")),i.register("multipart/form-data",n("+Ceu")),i.register("text/plain",n("x8H0")),i.register("+json",i.delegate("application/json")),t.exports=i},rOzH:function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(l=n.slice()).length,u=0;u<s;u++)l[u].apply(this,a);return!0},n.prototype.on=n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},rSoR:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e=e||"&");var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,p,f,d,g=t[c].replace(a,"%20"),y=g.indexOf(n);y>=0?(h=g.substr(0,y),p=g.substr(y+1)):(h=g,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),r(s,f)?i(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},"s/ZR":function(t,e,n){"use strict";var r,i,o,s;function a(t){return t}function u(t){return t}function l(t){return t}function c(t){if(!(this instanceof c))return new c(t);i(this,t)}function h(t){var e,n,i,h;return e=(t=t||{}).init||a,n=t.request||u,i=t.success||t.response||l,h=t.error||function(){return Promise.resolve((t.response||l).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(a,u){return"object"==typeof a&&(u=a),"function"!=typeof a&&(a=t.client||r),u=e(u||{}),s(function t(e){var r,s;return r={},s={arguments:Array.prototype.slice.call(arguments),client:t},(e="string"==typeof e?{path:e}:e||{}).originator=e.originator||t,o(n.call(r,e,u,s),function(t){var e,n,o;return o=a,t instanceof c&&(n=t.abort,o=t.client||o,e=t.response,t=t.request),e=e||Promise.resolve(t).then(function(t){return Promise.resolve(o(t)).then(function(t){return i.call(r,t,u,s)},function(t){return h.call(r,t,u,s)})}),n?Promise.race([e,n]):e},function(t){return Promise.reject({request:e,error:t})})},a)}}r=n("u/yP"),i=n("MN+7"),o=n("YGNo"),s=n("b6AT"),h.ComplexRequest=c,t.exports=h},t9Xo:function(t,e,n){(function(e){var n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),p=Object.prototype.toString,f=Math.max,d=Math.min,g=function(){return h.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return n;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var l=s.test(t);return l||a.test(t)?u(t.slice(2),l?2:8):o.test(t)?n:+t}t.exports=function(t,e,n){var r,i,o,s,a,u,l=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(e){var n=r,o=i;return r=i=void 0,l=e,s=t.apply(o,n)}function v(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function x(){var t=g();if(v(t))return b(t);a=setTimeout(x,function(t){var n=e-(t-u);return h?d(n,o-(t-l)):n}(t))}function b(t){return a=void 0,p&&r?_(t):(r=i=void 0,s)}function w(){var t=g(),n=v(t);if(r=arguments,i=this,u=t,n){if(void 0===a)return function(t){return l=t,a=setTimeout(x,e),c?_(t):s}(u);if(h)return a=setTimeout(x,e),_(u)}return void 0===a&&(a=setTimeout(x,e)),s}return e=m(e)||0,y(n)&&(c=!!n.leading,o=(h="maxWait"in n)?f(m(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),w.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=i=a=void 0},w.flush=function(){return void 0===a?s:b(g())},w}}).call(e,n("fRUx"))},tjsL:function(t,e,n){"use strict";var r,i;function o(t){return t=t||r.unreserved,function(e){return function(t,e){if("string"!=typeof t)throw new Error("String required for URL encoding");return t.split("").map(function(t){if(e.hasOwnProperty(t))return t;var n=t.charCodeAt(0);if(n<=127){var r=n.toString(16).toUpperCase();return"%"+(r.length%2==1?"0":"")+r}return encodeURIComponent(t).toUpperCase()}).join("")}(e,t)}}(i={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789",genDelims:":/?#[]@",subDelims:"!$&'()*+,;="}).reserved=i.genDelims+i.subDelims,i.unreserved=i.alpha+i.digit+"-._~",i.url=i.reserved+i.unreserved,i.scheme=i.alpha+i.digit+"+-.",i.userinfo=i.unreserved+i.subDelims+":",i.host=i.unreserved+i.subDelims,i.port=i.digit,i.pchar=i.unreserved+i.subDelims+":@",i.segment=i.pchar,i.path=i.segment+"/",i.query=i.pchar+"/?",i.fragment=i.pchar+"/?",r=Object.keys(i).reduce(function(t,e){return t[e]=i[e].split("").reduce(function(t,e){return t[e]=!0,t},{}),t},{}),t.exports={decode:function(t){return decodeURIComponent(t)},encode:o(),encodeURL:o(r.url),encodeScheme:o(r.scheme),encodeUserInfo:o(r.userinfo),encodeHost:o(r.host),encodePort:o(r.port),encodePathSegment:o(r.segment),encodePath:o(r.path),encodeQuery:o(r.query),encodeFragment:o(r.fragment)}},"u/yP":function(t,e,n){"use strict";var r,i,o;function s(){return i.apply(void 0,arguments)}r=n("b6AT"),"function"!=typeof Promise&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill."),s.setDefaultClient=function(t){i=t},s.getDefaultClient=function(){return i},s.resetDefaultClient=function(){i=o},s.setPlatformDefaultClient=function(t){if(o)throw new Error("Unable to redefine platformDefaultClient");i=o=t},t.exports=r(s)},wR2Q:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},x8H0:function(t,e,n){"use strict";t.exports={read:function(t){return t},write:function(t){return t.toString()}}},xIGM:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||"undefined"!=typeof t&&t||i}).call(e,n("fRUx"))},y3Qk:function(t,e,n){"use strict";t.exports=function(t){return t.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}},yjLV:function(t,e,n){"use strict";var r;r=n("s/ZR"),t.exports=r({init:function(t){return t.code=t.code||400,t},response:function(t,e){return t.status&&t.status.code>=e.code?Promise.reject(t):t}})},z46Y:function(t,e){t.exports.DEFAULT_ENDPOINT="https://api.mapbox.com"}},[0]);